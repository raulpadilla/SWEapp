if(typeof(SiebelApp.S_App.SweTimer)=="undefined"){SiebelJS.Namespace("SiebelApp.S_App.SweTimer");SiebelApp.S_App.SweTimer=(function(){var n=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");var e=SiebelJS.Dependency("SiebelApp.S_App");var l="Timing values: (in msecs)\r\n";function f(){var E=true;var H=0;var t="unitialized sessionId";var A={};var s;var r=-1;var I=-1;var C=-1;var B=1;var z=-1;var F=false;var v=false;var G={};this.m_ptimeValues={};this.m_ptimerStages={};var y={};var x={};var J;var q;var w;var u=false;var D=false;this.m_mapTimer={};this.IsColumnsDisplayed=function(){return u};this.SetColumnsDisplayed=function(K){u=K};this.IsToggleListRowCount=function(){return D};this.SetToggleListRowCount=function(K){D=K};this.SetPopupAppletName=function(K){w=K};this.GetPopupAppletName=function(){return w};this.SetMethodName=function(K){q=K};this.GetMethodName=function(){return q};this.SetViewName=function(K){J=K};this.GetViewName=function(){return J};this.GetInvokeAndPopup=function(){return v};this.SetInvokeAndPopup=function(K){v=K};this.GetTimerGenericStages=function(){return x};this.GetTimerGenericValues=function(){return y};this.GetViewRefresh=function(){return F};this.SetViewRefresh=function(K){F=K};this.GetFirstView=function(){return E};this.SetFirstView=function(K){E=K};this.GetLastGenericStage=function(){return z};this.SetLastGenericStage=function(K){z=K};this.GetStartFindStage=function(){return H};this.SetStartFindStage=function(K){H=K};this.GetTimerModeStack=function(){return G};this.GetStartStage=function(){return B};this.SetStartStage=function(K){B=K};this.GetLastStage=function(){return C};this.SetLastStage=function(K){C=K};this.GetLastMode=function(){return I};this.SetLastMode=function(K){I=K};this.GetTimerMode=function(){return r};this.SetTimerMode=function(K){r=K};this.GetTimerHook=function(){return A};this.GetEnablePerfHooks=function(){return s};this.SetEnablePerfHooks=function(K){s=K};this.GetSessid=function(){return t};this.SetSessid=function(K){t=K}}f.prototype.GetLogBuffer=function(){return l};f.prototype.TimeRefreshView=function(v,t,s){if(this.GetTimerMode()==2){var u=+new Date();if(s=="Start RefreshView"){this.SetViewRefresh(true);this.AddStage("Start RefreshView",u,true)}else{if(s=="Reset Busy State"){if(this.GetViewRefresh()){var r=this.FindStageIndex("Finished InvokeMethod");for(var q=this.GetStartStage();q<=r;q++){l=l+this.m_ptimerStages[q]+":\t";l=l+(this.m_ptimeValues[q]-this.m_ptimeValues[q-1])+"\r\n"}this.SetStartStage(r+1);k.call(this);this.SetViewRefresh(false)}}}}};f.prototype.TimeGoToView=function(v,q){for(var r in this.GetTimerHook()){var t=this.GetTimerHook()[r];if(t==="GotoView"){var s=+new Date();if(q=="Start GotoView"){if(this.GetFirstView()){this.SetFirstView(false);return}this.SetViewName(v);if(this.GetLastMode()<0){this.SetLastStage(0);this.SetStartStage(1)}else{this.SetLastStage(this.GetLastStage()+1);this.SetStartStage(this.GetLastStage())}this.SetLastMode(this.GetLastMode()+1);this.GetTimerModeStack()[this.GetLastMode()]=1;this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);this.AddStage("Start GotoView",s,false);return}if(this.GetLastMode()<0){return}this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);if(q=="View Cache Ready"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("View Cache Ready",s,true)}else{if(q=="Call GetViewLayout"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("Call GetViewLayout",s,true)}else{if(q=="Have Layout"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)&&!this.IsToggleListRowCount()){this.AddStage("Have Layout",s,true)}else{if(q=="Processed Layout"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("Processed Layout",s,true)}else{if(q=="Have Object Info"&&this.GetTimerMode()==1){this.AddStage("Have Object Info",s,true)}else{if(q=="Processed Object Info"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("Processed Object Info",s,true)}else{if(q=="Objects Initialized"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("Objects Initialized",s,true);this.SetViewName(v)}else{if(q=="Finished Populate"&&(this.GetTimerMode()==1||this.GetTimerMode()==2)){this.AddStage("Finished Populate",s,true)}else{if(q=="Reset Busy State"&&this.GetTimerMode()==1){this.AddStage("Reset Busy State",s,true);l=l+"\r\nGotoView:\t["+this.GetViewName()+"]";if(SiebelApp.S_App.GetActiveView()){var u=(SiebelApp.S_App.GetActiveView().IsCacheable()==1)?"Cacheable":"Non-Cacheable";l=l+"\t"+u+"\tUserActionID:\t\r\n"}else{l=l+"UserActionID:\t\r\n"}this.SetViewName("");k.call(this)}}}}}}}}}}}};function k(){var r=this.FindStageIndex("Finished Populate");var t=this.FindStageIndex("Have Layout");var q=false;var s=false;var u=0;if(r<0){s=true;h.call(this)}else{if(t<0){m.call(this);q=true}else{if(this.GetViewRefresh()){this.ShowStepTime(this.m_ptimerStages[this.GetStartStage()],this.m_ptimerStages[this.GetStartStage()-1])}else{this.ShowStepTime("View Cache Ready","Start GotoView");this.ShowStepTime("Have Object Info","View Cache Ready")}this.ShowStepTime("Processed Object Info","Have Object Info");u=p.call(this);this.ShowStepTime("Finished Populate","Objects Initialized");this.ShowStepTime("Reset Busy State","Finished Populate");this.ShowStepTime("Have Layout","Call GetViewLayout");this.ShowStepTime("Processed Layout","Have Layout")}}if(this.GetTimerMode()==1){l=l+"Client Time:\t";if(s||q){u=j.call(this,"View Cache Ready","Start GotoView");u+=j.call(this,"Reset Busy State","Have Object Info")}else{u+=j.call(this,"View Cache Ready","Start GotoView");u+=j.call(this,"Reset Busy State","Objects Initialized")}l=l+u.toString()+"\r\n"}}function h(){this.ShowStepTime("View Cache Ready","Start GotoView");this.ShowStepTime("Have Object Info","View Cache Ready");this.ShowStepTime("Processed Object Info","Have Object Info");this.ShowStepTime("Have Layout","Call GetViewLayout");this.ShowStepTime("Processed Layout","Have Layout");this.ShowStepTime("Reset Busy State","Processed Layout")}function m(){this.ShowStepTime("View Cache Ready","Start GotoView");this.ShowStepTime("Have Object Info","View Cache Ready");this.ShowStepTime("Processed Object Info","Have Object Info");this.ShowStepTime("Objects Initialized","Processed Object Info");this.ShowStepTime("Finished Populate","Objects Initialized");this.ShowStepTime("Reset Busy State","Finished Populate")}function j(s,q){var t=this.FindStageIndex(s);var r=this.FindStageIndex(q);if((t<0)||(r<0)){return 0}return(this.m_ptimeValues[t]-this.m_ptimeValues[r])}f.prototype.TimeInvokeMethod=function(v,q,x,u){var t=0;if(x.indexOf("PositionOnRow")!==-1){x="PositionOnRow"}for(var y in this.GetTimerHook()){var w=this.GetTimerHook()[y];if((w==="InvokeMethod:"+x)||this.GetTimerMode()==2&&u=="Reset Busy State"){var r=+new Date();if(u=="Begin InvokeMethod"){this.SetMethodName(x);if(x==="ColumnsDisplayed"){this.SetColumnsDisplayed(true)}if(x==="ToggleListRowCount"){this.SetToggleListRowCount(true)
}if(this.GetTimerMode()==2){return}if(this.GetLastMode()<0){this.SetLastStage(0);this.SetStartStage(1)}else{this.SetLastStage(this.GetLastStage()+1);this.SetStartStage(this.GetLastStage())}this.SetLastMode(this.GetLastMode()+1);this.GetTimerModeStack()[this.GetLastMode()]=2;this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);this.AddStage("Begin InvokeMethod",r,false);return}if(this.GetLastMode()<0){return}this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);if(u=="Finished InvokeMethod"){this.AddStage("Finished InvokeMethod",r,true)}else{if(u=="Reset Busy State"&&this.GetTimerMode()==2){this.AddStage("Reset Busy State",r,true);l=l+"\r\nInvokeMethod:\t["+this.GetMethodName()+"]\tUserActionID:\t\r\n";if(this.GetViewRefresh()){return}this.SetStartFindStage(0);for(t=this.GetStartStage();t<=this.GetLastStage();t++){this.ShowStepTime(this.m_ptimerStages[t],this.m_ptimerStages[t-1]);this.SetStartFindStage(this.GetStartFindStage()+1)}this.SetStartFindStage(0);l=l+"Total Time:\t";var s=this.m_ptimeValues[this.GetLastStage()]-this.m_ptimeValues[0];l=l+s.toString()+"\r\n";b.call(this);this.SetLastMode(-1);this.SetTimerMode(-1);this.m_ptimeValues={};this.m_ptimerStages={}}}}}};f.prototype.TimePopupApplet=function(s,q){for(var r in this.GetTimerHook()){var u=this.GetTimerHook()[r];if(u==="PopupApplet"){var t=+new Date();if(q=="Start PopupApplet"){if(this.GetLastMode()>=0){if(this.GetTimerModeStack()[this.GetLastMode()]==3){return}else{if(this.GetTimerModeStack()[this.GetLastMode()]==2){this.SetInvokeAndPopup(true)}}}if(this.GetLastMode()<0){this.SetLastStage(0);this.SetStartStage(1)}else{this.SetLastStage(this.GetLastStage()+1);this.SetStartStage(this.GetLastStage())}this.SetLastMode(this.GetLastMode()+1);this.GetTimerModeStack()[this.GetLastMode()]=3;this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);this.AddStage("Start PopupApplet",t,false);return}if(this.GetLastMode()<0){return}this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);if(q=="Have Object Info"&&this.GetTimerMode()==3&&!this.GetInvokeAndPopup()){this.AddStage("Have Object Info",t,true)}if(q=="Call GetLayout"&&this.GetTimerMode()==3){this.AddStage("Call GetLayout",t,true)}if(q=="Process Object Info Start"&&this.GetTimerMode()==3){this.AddStage("Process Object Info Start",t,true)}if(q=="Processed Object Info"&&this.GetTimerMode()==3){this.AddStage("Processed Object Info",t,true)}if(q=="Have Layout"&&this.GetTimerMode()==3&&!this.IsColumnsDisplayed()){this.AddStage("Have Layout",t,true)}if(q=="Processed Layout"&&this.GetTimerMode()==3){this.AddStage("Processed Layout",t,true)}if(q=="Objects Initialized"&&this.GetTimerMode()==3){if(!this.GetPopupAppletName()){this.SetPopupAppletName(s)}this.AddStage("Objects Initialized",t,true)}if(q=="Finished Populate"&&this.GetTimerMode()==3){this.AddStage("Finished Populate",t,true)}if(q=="Reset Busy State"&&this.GetTimerMode()==3){this.AddStage("Reset Busy State",t,true);if(this.GetPopupAppletName()){l=l+"\r\nPopupApplet:\t["+this.GetPopupAppletName()+"]\tUserActionID:\t\r\n"}else{l=l+"\r\nPopupApplet:\t[Columns Displayed Popup Applet (SWE)]\tUserActionID:\t\r\n"}if(this.GetInvokeAndPopup()){a.call(this);this.SetColumnsDisplayed(false)}else{c.call(this)}b.call(this);this.SetPopupAppletName("")}}}return};function a(){var s=this.GetStartStage();this.SetStartStage(0);var q=this.FindStageIndex("Start PopupApplet");for(var r=1;r<=q-1;r++){this.ShowStepTime(this.m_ptimerStages[r],this.m_ptimerStages[r-1])}this.SetStartStage(s);c.call(this);this.SetInvokeAndPopup(false)}function c(){var w=false;var u=false;var v=0;var t=0;var s=this.FindStageIndex("Finished Populate");if(s<0){u=true;var q=this.GetInvokeAndPopup()?this.GetStartStage()+1:this.GetStartStage();for(var r=q;r<=this.GetLastStage();r++){if(this.m_ptimerStages[r]=="Call GetLayout"||this.m_ptimerStages[r]=="Process Object Info Start"){r++;this.ShowStepTime(this.m_ptimerStages[r],this.m_ptimerStages[r-2])}else{this.ShowStepTime(this.m_ptimerStages[r],this.m_ptimerStages[r-1])}}}else{if(!this.GetInvokeAndPopup()){this.ShowStepTime("Have Object Info","Start PopupApplet")}this.ShowStepTime("Processed Object Info","Process Object Info Start");t=j.call(this,"Have Layout","Processed Object Info");l=l+"Wait Time:\t";if(t<=0){l=l+"0\r\n";w=false}else{l=l+t+"\r\n";w=true}this.ShowStepTime("Objects Initialized","Processed Layout");this.ShowStepTime("Finished Populate","Objects Initialized");this.ShowStepTime("Reset Busy State","Finished Populate");this.ShowStepTime("Have Layout","Call GetLayout");this.ShowStepTime("Processed Layout","Have Layout")}if(this.GetInvokeAndPopup()){return}l=l+"Client Time:\t";if(u){}else{if(w){v=j.call(this,"Processed Object Info","Process Object Info Start");v+=j.call(this,"Reset Busy State","Have Layout")}else{v=j.call(this,"Reset Busy State","Have Object Info")}}l=l+v+"\r\n"}f.prototype.TimeServerNotification=function(q){this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);if(this.GetTimerMode()==2){var r=+new Date();if(q=="Received Server Notifications"){this.AddStage("Received Server Notifications",r,true)}else{if(q=="Processed Server Notifications"){this.AddStage("Processed Server Notifications",r,true)}}}return};f.prototype.TimePopulateApplet=function(r,q){this.SetTimerMode(this.GetTimerModeStack()[this.GetLastMode()]);if(this.GetTimerMode()==2){var s=+new Date();if(q=="BeginPopulateApplet"){this.AddStage(q+": ["+r+"]",s,true)}else{if(q=="Finished Populate Applet"){this.AddStage(q+": ["+r+"]",s,true)}}}return};function b(){var r;var q}f.prototype.ShowStepTime=function(u,t){var q=this.FindStageIndex(t);var s=this.FindStageIndex(u);if(q<0||s<0){return}l=l+this.m_ptimerStages[s]+":\t";var r=this.m_ptimeValues[s]-this.m_ptimeValues[q];l=l+r.toString()+"\r\n"};f.prototype.FindStageIndex=function(s){var q=0;var r=this.GetLastStage()+1;if(n.IsEmpty(s)||r==0){return -1}for(q=this.GetStartFindStage();q<r;q++){if(s==this.m_ptimerStages[q]){return q}}return -1};f.prototype.AddStage=function(s,r,q){if(q){this.SetLastStage(this.GetLastStage()+1)}this.m_ptimeValues[this.GetLastStage()]=r;this.m_ptimerStages[this.GetLastStage()]=s};f.prototype.CreateTimerHookMap=function(q){var s=true;var r=null;var t=null;for(s=true;(r=q.EnumProperties(s))!=null;s=false){t=q.GetProperty(r);this.GetTimerHook()[r]=t}return};f.prototype.ShowTotal=function(){if(this.GetTimerMode()>-1){l=l+"Total Time:\t";var q=(this.m_ptimeValues[this.GetLastStage()]-this.m_ptimeValues[0]);l=l+q.toString()+"\r\n";this.SetLastMode(-1);this.SetTimerMode(-1);b.call(this);this.m_ptimeValues={};this.m_ptimerStages={};this.SetToggleListRowCount(false)}};function p(){var s;var q;var r;var t=0;l=l+"Wait Time:\t";if(d.call(this,"Have Object Info","Have Layout")){if(d.call(this,"Have Layout","Processed Object Info")){l=l+"0\r\n";if(d.call(this,"Processed Object Info","Processed Layout")){this.ShowStepTime("Objects Initialized","Processed Layout")}else{this.ShowStepTime("Objects Initialized","Processed Object Info")
}t+=j.call(this,"Objects Initialized","Have Object Info")}else{q=this.FindStageIndex("Processed Object Info");r=this.FindStageIndex("Have Layout");s=this.m_ptimeValues[r]-this.m_ptimeValues[q];l=l+s.toString()+"\r\n";this.ShowStepTime("Objects Initialized","Processed Layout");t+=j.call(this,"Objects Initialized","Have Layout");t+=j.call(this,"Processed Object Info","Have Object Info")}}else{if(d.call(this,"Processed Layout","Have Object Info")){q=this.FindStageIndex("Processed Layout");r=this.FindStageIndex("Have Object Info");s=this.m_ptimeValues[r]-this.m_ptimeValues[q];l=l+s.toString()+"\r\n";this.ShowStepTime("Objects Initialized","Processed Object Info");t+=j.call(this,"Objects Initialized","Have Object Info");t+=j.call(this,"Processed Layout","Call GetViewLayout")}else{l=l+"0\r\n";if(d.call(this,"Processed Object Info","Processed Layout")){this.ShowStepTime("Objects Initialized","Processed Layout")}else{this.ShowStepTime("Objects Initialized","Processed Object Info")}t+=j.call(this,"Objects Initialized","Call GetViewLayout")}}return t}function d(s,q){var t=this.FindStageIndex(s);var r=this.FindStageIndex(q);return(this.m_ptimeValues[r]>this.m_ptimeValues[t])}f.prototype.SetSessionID=function(q){l=l+"SessionID:\t"+SiebelApp.S_App.GetSessionId()+"\r\n"};f.prototype.StartTime=function(r){if(SiebelApp.S_App.GetEnablePerfHooks()){var q=new Date().getTime();g.call(this,r,q)}};f.prototype.EndTime=function(t){if(SiebelApp.S_App.GetEnablePerfHooks()){var r;var q;var s;r=o.call(this,t);q=new Date().getTime();s=q-r;delete this.m_mapTimer[t];SiebelJS.Log(" . "+t+"..."+s+"...milli seconds ")}};function g(r,q){this.m_mapTimer[r]=q}function o(q){return this.m_mapTimer[q]}return f}())};