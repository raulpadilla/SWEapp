if(typeof(SiebelAppFacade.PresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PresentationModel");SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_UIDEF_APPLET_PMODEL"),"SiebelAppFacade.PresentationModel");SiebelAppFacade.PresentationModel=(function(){var y=SiebelJS.Dependency("SiebelApp.Utils");var q=SiebelJS.Dependency("SiebelApp.Constants");var k=q.get("SWE_PROP_BC_OPERATION");var z=q.get("SWE_RPC_PROP_STATUS");var t=q.get("SWE_RPC_PROP_NEW_PAGE");var C=q.get("SWE_RPC_PROP_REFRESH_LAYOUT");var E=q.get("SWE_RPC_PROP_NEW_LAYOUT");var j=q.get("SWE_EXTN_CANCEL_ORIG_OP");var b=q.get("SWE_EXTN_CANCEL_POST_OP");var p=q.get("SWE_EXTN_RETVAL");var d={};var u={};var m={};var A={};var o={};var e={};var f={};function v(G){var H=G;var F=H.GetName()+"_PM";this.retryWaitForObjInfoProcessing=0;this.GetProxy=function(){return H};this.GetPMName=function(){return F};this._EndLife=function(){H=null};d[F]={};u[F]={};m[F]={};A[F]={};o[F]={};e[F]={};f[F]={};var I;this.GetRenderer=function(){return I};this.SetRenderer=function(J){I=J};this.Init()}function a(G,F,H){this[j]=G||false;this[b]=F||false;this[p]=H||null}v.prototype.Init=function(){var G=this.GetProxy().GetPropArray();var H=0,F=0;for(H=0,F=G.length;H<F;H++){this.AddProperty(G[H],null,{core:true})}this.AddProperty("GetPlaceholder","s_"+this.Get("GetId")+"_l");this.AddProperty("GetCaption",SiebelApp.S_App.LookupStringCache(this.Get("GetTitle")));this.AddProperty("IsPopup",this.GetProxy().GetParentApplet()?true:false);this.AddProperty("isControlPopupOpen",false);this.AddProperty("SetFocusToGridCell",false);this.AddProperty("LandMarkTitle",this.Get("GetAppletLabel")+" "+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_FORM_APPLET"));var I=this.GetProxy().GetMethodArray();for(H=0,F=I.length;H<F;H++){this.AddMethod(I[H],null,{core:true})}G=I=null;this.AttachPMBinding("ShowSelection",function(){this.GetRenderer().ShowSelection()});this.AttachPMBinding("ResetAppletState",function(){if(this.GetRenderer().ResetRendererState){this.GetRenderer().ResetRendererState()}});this.AttachPMBinding("ExecuteUIUpdate",function(){h.call(this,q.get("EVENT_ROW_SELECTION"))});this.AddMethod("PostExecute",function(J,L,K){this.HandlePreExecute(J,L,K)},{sequence:true,scope:this});this.AddMethod("PostExecute",function(J,L,K){this.HandlePostExecute(J,L,K)},{sequence:false,scope:this});this.AttachNotificationHandler("g",function(J){if(this.GetProxy().GetView()&&this.GetProxy().GetView().GetActiveApplet()&&this.GetProxy().GetName&&this.GetProxy().GetView().GetActiveApplet().GetName()===this.GetProxy().GetName()){if(J.GetProperty("type")==="ClosePopup"&&this.Get("GetActiveControl")){this.GetRenderer().SetControlValue(this.Get("GetActiveControl"),this.GetProxy().GetBusComp().GetFieldValue(this.Get("GetActiveControl").GetFieldName()))}}});this.AttachPostProxyExecuteBinding("ExecuteQuery",function(K,J,M){var L=SiebelApp.S_App.GetPopupPM();if(!y.IsEmpty(L)&&L.Get("IsCancelQryPopupOpen")){SiebelApp.S_App.GetPopupPM().ExecuteMethod("ClearPopup");SiebelApp.S_App.GetPopupPM().SetProperty("IsCancelQryPopupOpen",false)}return});this.AttachPostProxyExecuteBinding("Drilldown",function(L,J,M){var K=M.GetProperty(z);if(y.IndexOf([E,C,t],K)===-1){SiebelApp.S_App.uiStatus.Free()}});this.AttachPreProxyExecuteBinding("ALL",function(K,J,L){h.call(this,q.get("NOT_PRV_FIELDS"));B.call(this,K,J,L);return});this.AttachPMBinding("RefreshData",function(J){this.GetRenderer().BindData(J)});this.AttachPMBinding("FieldChange",function(K,J){this.GetRenderer().SetControlValue(K,J)});this.AttachPMBinding("UpdateStateChange",function(){this.GetRenderer().UpdateUIControls()});this.AttachPMBinding("InvokeStateChange",function(){this.GetRenderer().UpdateUIButtons()});this.AttachPMBinding("GetPhysicalControlValue",function(J){if(this.GetRenderer()){this.GetRenderer().GetPhysicalControlValue(J)}});this.AttachPMBinding("SetFocusToCtrl",function(L,K){var J=this.GetRenderer().SetFocusToControl(L,K);return J});this.AttachPMBinding("FocusFirstControl",function(){this.GetRenderer().FocusFirstControl()});this.AttachPMBinding("SetHighlightState",function(J,K){this.GetRenderer().SetHighlightState(J,K)});this.AddMethod("Query",function(){var J=SiebelApp.S_App.GetActiveView();if(J){var K=J.GetActiveApplet();J.ExecuteFrame(K.GetName(),[{field:this.Get("SearchField"),value:this.Get("SearchValue")}])}});this.AttachNotificationHandler("g",function(J){if(J.GetProperty("type")==="ClosePopup"){this.ExecuteMethod("ClearPopup")}},{scope:SiebelApp.S_App.GetPopupPM()})};function h(K){var N=this.Get("GetUIEventMap");var P=N.length;var J=q.get("EVENT_ROW_SELECTION");var O=q.get("EVENT_NO_FOCUS");var M=q.get("NOT_PRV_FIELDS");var F=false;for(var L=0;L<P;L++){if(N[L].ev===J&&K===J){this.GetRenderer().ShowSelection();var Q=this.Get("GetBusComp");if(Q){Q.ClearUpdates()}N.splice(L,1);F=true}else{if(N[L].ev===O&&K===O){N.splice(L,1);F=true}else{if(N[L].ev===M&&K===M){if(N[L].ar){var H=N[L].ar;var G=N[L].ar.length;for(var I=0;I<G;I++){this.ExecuteMethod("RepopulateField",H[I])}}N.splice(L,1);F=true}}}P=N.length}return F}function B(N,K,I){var M=I.GetProperty(q.get("SWE_RPC_PROP_RETURN_STATUS"));var F;var H=false;var J=q.get("SWE_RPC_PROP_STATUS_ERROR");var G=q.get("SWE_RPC_PROP_STATUS_COMPLETED");var O=q.get("SWE_RPC_PROP_STATUS_CONTINUE");if(M===G){switch(N){case"NewRecord":case"CreateRecord":F=this.Get("GetDefaultFocusOnNew");break;case"UndoQuery":case"UndoRecord":case"ExecuteQuery":F=this.Get("GetDefaultFocusOnEdit")||((this.Get("GetActiveControl")||this.Get("GetPrsrvControl"))?(this.Get("GetActiveControl")||this.Get("GetPrsrvControl")).GetName():null);break;case"NewQuery":case"RefineQuery":F=this.Get("GetDefaultFocusOnQuery");break;case"GotoNext":case"GotoPrevious":case"GotoPreviousSet":case"GotoNextSet":case"GotoFirstSet":case"GotoLastSet":this.SetProperty("SetFocusToGridCell",true);F=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(F){F=F.GetName()}else{H=true}break;case"WriteRecord":var L=SiebelApp.S_App.GetPopupPM();if(h.call(this,q.get("EVENT_NO_FOCUS"))||(L&&L.Get("isCurrencyOpen"))){H=true}F=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(F){F=F.GetName()}else{H=true}break;case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}H=true;break;case"DeleteRecord":case"CopyRecord":break;default:H=true}}else{if(M===J||!M){this.ExecuteMethod("SetFocusDefaultControl",false);this.ExecuteMethod("ProcessError");switch(N){case"ExecuteQuery":H=true;break;case"PostChanges":F=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(F){F=F.GetName()}else{H=true}break;case"WriteRecord":h.call(this,q.get("EVENT_NO_FOCUS"));F=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(F){F=F.GetName()}else{H=true}break}}else{if(M===O){switch(N){case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}break}}}}if(!H){if(M===G||M===J||!M){if(F){this.ExecuteMethod("SetFocusToCtrl",F,true)
}else{this.ExecuteMethod("FocusFirstControl")}}}}v.prototype.Setup=function(L){var J=L.GetProperty(q.get("SWE_PROP_OUI_PRENDERER"));var F=L.GetProperty("SWE_OUI_RENDERER");var H=SiebelApp.S_App.GetConstructorFromKey(J)+".";var G="";var N=0;var I=H.indexOf(".");while(I!=-1){var M=H.substring(N,I);G=(G=="")?window[M]:G[M];N=I+1;I=H.indexOf(".",N)}var K=G||SiebelAppFacade[F]||SiebelAppFacade.PhysicalRenderer;this.SetRenderer(new K(this))};v.prototype.Show=function(){var F=this.GetRenderer();F.ShowUI();F.BindEvents();F.BindData()};v.prototype.HandlePreExecute=function(G,I,H){if(!e[this.GetPMName()]){return}var F=e[this.GetPMName()].ALL||[];x.call(this,F,G,I,H);F=e[this.GetPMName()].NOT||[];x.call(this,F,G,I,H);F=e[this.GetPMName()][G]||[];x.call(this,F,G,I,H)};v.prototype.HandlePostExecute=function(G,I,H){if(!f[this.GetPMName()]){return}var F=f[this.GetPMName()].ALL||[];x.call(this,F,G,I,H);F=f[this.GetPMName()].NOT||[];x.call(this,F,G,I,H);F=f[this.GetPMName()][G]||[];x.call(this,F,G,I,H)};function x(G,I,K,J){for(var H=0,F=G.length;H<F;H++){G[H][0].call(G[H][1],I,K.Clone(),J.Clone())}}v.prototype.HandleNotify=function(G){var H=G.GetProperty(k);var J=A[this.GetPMName()][H]||[];for(var I=0,F=J.length;I<F;I++){J[I][0].call(J[I][1],G.Clone())}};v.prototype.HandleResponsePS=function(L){var H=L.GetChildCount();var J=o[this.GetPMName()]||{};for(var I=0;I<H;I++){var N=L.GetChild(I);var M=N.GetType();if(J[M]){var F=J[M];for(var G=0,K=F.length;G<K;G++){F[G][0].call(F[G][1],N.Clone())}}}};v.prototype.OnControlEvent=function(L){var I=false;var M;var O=[];var Q=arguments.length;for(var K=1;K<Q;K++){if(arguments[K]&&(arguments[K].async===true||arguments[K].async===false)){M=arguments[K]}else{O.push(arguments[K])}}var G;var N=this.GetProxy();var P={};var F=false;if(M&&(M.async===true||M.async===false)){F=true;P.scope=this;P.target=M.target;if(typeof(M.async)!=="boolean"){P.async=true}else{P.async=M.async}P.selfbusy=M.selfbusy||false;P.mask=M.mask||false;P.cb=function(){var S=Array.prototype.slice.call(arguments);if(typeof(M.cb)==="function"){M.cb.apply(M.scope||null,S)}}}var J=m[this.GetPMName()][L];if(typeof(J)==="function"){O.push(P);var R=J.apply(this,O);if(R===false){return R}I=R}else{if(typeof(J)==="string"){I=this.ExecuteMethod.apply(this,[J].concat(O))}}switch(L){case q.get("PHYEVENT_INVOKE_CONTROL"):if(!F){P.async=true}if(O[0]==="NewQuery"||O[0]==="UndoQuery"||O[0]==="GotoNextSet"||O[0]==="GotoPreviousSet"){P.async=false}O.push(P);I=N.InvokeMethod.apply(N,O);break;case q.get("PHYEVENT_VALUE_CHANGE"):I=N.OnBlur.apply(N,O);break;case q.get("PHYEVENT_VALUE_FOCUS"):I=N.OnFocus.apply(N,O);break;case q.get("PHYEVENTS_APPLET_FOCUS"):G=CCFMiscUtil_CreatePropSet();N.InvokeMethod("OnFocus",G);break;case q.get("PHYEVENT_INVOKE_COMBO"):case q.get("PHYEVENT_INVOKE_PICK"):case q.get("PHYEVENT_INVOKE_MVG"):if(L===q.get("PHYEVENT_INVOKE_COMBO")&&!this.ExecuteMethod("CanUpdate",O[0].GetName())){return false}N.SetActiveControl.apply(N,O);G=CCFMiscUtil_CreatePropSet();if(!F){P.async=true;P.selfbusy=true}if(L!==q.get("PHYEVENT_INVOKE_COMBO")){N.InvokeMethod("EditPopup",G,P)}else{N.InvokeMethod("EditPopup",G)}break;case q.get("PHYEVENT_CURRENCY_POPUP"):case q.get("PHYEVENT_INVOKE_DETAIL_POPUP"):N.SetActiveControl.apply(N,O);G=CCFMiscUtil_CreatePropSet();if(!F){P.async=true;P.selfbusy=true}N.InvokeMethod("EditPopup",G,P);break;case q.get("PHYEVENT_CANCEL_QRY_POPUP"):D.call(this);break;case q.get("PHYEVENT_INVOKE_EFFDAT"):N.SetActiveControl.apply(N,O);G=CCFMiscUtil_CreatePropSet();if(!F){P.async=true;P.selfbusy=true}N.InvokeMethod("EditPopup",G,P);break;case q.get("PHYEVENT_DRILLDOWN_FORM"):N.SetActiveControl.apply(N,O);G=CCFMiscUtil_CreatePropSet();G.SetProperty(q.get("SWE_FIELD_STR"),O[0].GetInputName());if(!F){N.InvokeMethod("DrillDown",G)}else{N.InvokeMethod("DrillDown",G,P)}break;case q.get("PHYEVENT_INVOKE_TOGGLE_TO"):G=CCFMiscUtil_CreatePropSet();G.SetProperty(q.get("SWE_SEQ_STR"),O[0]);N.InvokeMethod("ToggleTo",G);break;case q.get("PHYEVENT_ENTER_KEY_PRESS"):I=false;if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false);I=true}else{var H=O[0].GetDefaultMethod();if(H&&N.CanInvokeMethod(H)){G=CCFMiscUtil_CreatePropSet();N.InvokeMethod(H,G);I=true}}break;case q.get("PHYEVENT_ESCAPE_KEY_PRESS"):case q.get("PHYEVENT_TAB_KEY_PRESS"):if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false)}break}return I};v.prototype.EndLife=function(){var F=this.GetRenderer();if(F&&F.EndLife){F.EndLife()}F=null;this.SetRenderer(F);delete d[this.GetPMName()];delete u[this.GetPMName()];delete m[this.GetPMName()];delete A[this.GetPMName()];delete o[this.GetPMName()];delete e[this.GetPMName()];delete f[this.GetPMName()];this._EndLife()};v.prototype.AddProperty=function(G,I,F){var H=d[this.GetPMName()];F=F||{};if(typeof(G)==="string"&&y.Trim(G)!==""){var J=H[G]||{};if(J&&!J.core){H[G]={value:I,core:F.core};return true}}return false};v.prototype.SetProperty=function(G,I,F){var H=d[this.GetPMName()];if(typeof(G)==="string"&&y.Trim(G)!==""){var J=H[G];if(J){H[G].value=I;c.call(this,G,I);return true}else{return this.AddProperty(G,I,F)}}return false};v.prototype.Get=function(G){var H=d[this.GetPMName()][G]||{};var F;if(H.core===true){if(typeof(this.GetProxy()[G])!=="undefined"){F=this.GetProxy()[G].call(this.GetProxy())}}else{F=(typeof(H.value)==="function")?H.value.call(this):H.value}return F};function c(J,L){var K=d[this.GetPMName()];var M=K[J]||{};if(M&&M.onChange){var G=this;var I=M.onChange;for(var H=0,F=I.length;H<F;H++){I[H].method.call(I[H].scope,J,L)}}}function w(M,K,N,G){var J=u[this.GetPMName()][M],I,L,F=false;var H=function(){var O=arguments[arguments.length-1],P=!(O&&(O instanceof a));if(P){O=new a()}O[p]=r.call(this,I,L,arguments,O,P,(F?0:1));if(G){r.call(this,K,N,arguments,O[p],P,0)}else{if(O[b]!==true){r.call(this,K,N,arguments,O,P,1)}}return O[p]};if(J.core){I=this.GetProxy()[M];L=this.GetProxy();if(!J.first){F=J.first=true}this.GetProxy()[M]=H}else{I=J.ref;L=J.scope;J.ref=H}}function r(K,M,L,I,H,J){var G=Array.prototype.slice.call(L);if(H){if(K.length>(G.length+J)){G.length=K.length-J}G.push(I)}else{var F=G[G.length-1];if(F&&F instanceof a){if(K.length>(L.length-1+J)){G.length=G.length-1;G.length=K.length-J;G.push(I)}}}return K.apply(M,G)}function n(F,I){var H=[];for(var G=0;G<F.length;G++){H.push(F[G])}H.push(I);return H}function i(F,K,G){var J=u[this.GetPMName()][F];G.scope=G.scope||this;var H;var I;if(J.core){H=this.GetProxy()[F];I=this.GetProxy();this.GetProxy()[F]=function(){if(G.when.call(G.scope)){K.apply(G.scope,arguments)}var L=H.apply(I,arguments);return L}}else{H=J.ref;I=J.scope;J.ref=function(){if(G.when.call(G.scope)){K.apply(G.scope,arguments)}var L=H.apply(I,arguments);return L}}}function s(N,L,G,H){var K=u[this.GetPMName()][N],J,M,F=false;G.scope=G.scope||this;var I=function(){var O=arguments[arguments.length-1],P=!(O&&(O instanceof a));if(P){O=new a()}O[p]=r.call(this,J,M,arguments,O,P,(F?0:1));if(H&&G.when.call(G.scope)){r.call(this,L,G.scope,arguments,O[p],P,0)
}else{if(O[b]!==true&&G.when.call(G.scope)){r.call(this,L,G.scope,arguments,O,P,1)}}return O[p]};if(K.core){J=this.GetProxy()[N];M=this.GetProxy();if(!K.first){F=K.first=true}this.GetProxy()[N]=I}else{J=K.ref;M=K.scope;K.ref=I}}function g(F,M,H){var L=u[this.GetPMName()][F],J=false,I,K;var G=function(){var N=arguments[arguments.length-1],O=!(N&&(N instanceof a));if(O){N=new a()}r.call(this,M,H,arguments,N,O,1);if(N[j]===true){N[b]=true}else{N[p]=r.call(this,I,K,arguments,N,O,(J?0:1))}return N[p]};if(L.core){I=this.GetProxy()[F];K=this.GetProxy();this.GetProxy()[F]=G;if(!L.first){J=L.first=true}}else{I=L.ref;K=L.scope;L.ref=G}}function l(F,H,G){var I;var K;var J=u[this.GetPMName()][F];if(J.core){I=this.GetProxy()[F];K=this.GetProxy();this.GetProxy()[F]=function(){return H.apply(K,arguments)}}else{I=J.ref;K=J.scope;J.ref=function(){return H.apply(K,arguments)}}}v.prototype.AddMethod=function(G,K,I){var F=u[this.GetPMName()];I=I||{};var H=this.GetProxy();var J=true;if((typeof(G)==="string")&&y.Trim(G)!==""){if(I.core===true){if(!F[G]){if(typeof(H[G])==="function"){F[G]={core:true}}}}if(typeof(K)==="function"){if(!F[G]){F[G]={ref:K,scope:I.scope||this}}else{if(I.override){l.call(this,G,K,I.scope)}else{if(I.sequence===true){g.call(this,G,K,I.scope)}else{if(I.sequence===false){w.call(this,G,K,I.scope,false)}}}}}else{J=false}}else{J=false}return J};v.prototype.ExecuteMethod=function(F){var G=Array.prototype.slice.call(arguments);G.shift();var H=u[this.GetPMName()][F];if(H.core===true){return this.GetProxy()[F].apply(this.GetProxy(),G)}else{if(H.ref){return H.ref.apply(H.scope,G)}else{SiebelJS.Log("Can't find method - [ "+F+" ]");return null}}};v.prototype.AttachEventHandler=function(F,G){var H=m[this.GetPMName()];var I=false;if(typeof(F)==="string"&&F!==""){if(typeof(G)==="function"||typeof(G)==="string"){H[F]=G;I=true}}return I};v.prototype.AttachNotificationHandler=function(K,I,F){var G=A[this.GetPMName()];var L=false;if(typeof(K)==="string"&&y.Trim(K)!==""&&typeof(I)==="function"){F=F||{};var J=G[K]||[];var H=(F.core===true)?0:-1;J.splice(H,0,[I,F.scope||this]);G[K]=J;L=true}return L};v.prototype.AttachPSHandler=function(I,H,L){var F=o[this.GetPMName()];var K=false;if(typeof(I)==="string"&&y.Trim(I)!==""&&typeof(H)==="function"){L=L||{};var J=F[I]||[];var G=(L.core===true)?0:-1;J.splice(G,0,[H,L.scope||this]);F[I]=J;K=true}return K};v.prototype.AttachPreProxyExecuteBinding=function(L,I,G){var F=e[this.GetPMName()];var K=false;if(typeof(L)==="string"&&y.Trim(L)!==""&&typeof(I)==="function"){G=G||{};var J=F[L]||[];var H=(G.core===true)?0:-1;J.splice(H,0,[I,G.scope||this]);F[L]=J;K=true}return K};v.prototype.AttachPostProxyExecuteBinding=function(L,I,G){var F=f[this.GetPMName()];var K=false;if(typeof(L)==="string"&&y.Trim(L)!==""&&typeof(I)==="function"){G=G||{};var J=F[L]||[];var H=(G.core===true)?0:-1;J.splice(H,0,[I,G.scope||this]);F[L]=J;K=true}return K};v.prototype.AttachPMBinding=function(L,I,G){var F=u[this.GetPMName()];var K=d[this.GetPMName()];var J=false;G=G||{scope:this};if(typeof(L)==="string"&&y.Trim(L)!==""&&typeof(I)==="function"){if(F[L]){if(typeof(G.when)==="function"){s.call(this,L,I,G,true)}else{w.call(this,L,I,G.scope||this,true)}}else{if(K[L]){var H=K[L];H.onChange=H.onChange||[];H.onChange.push({method:I,scope:G.scope||this})}else{J=false}}}return J};function D(){var G=new Date();var J=Math.floor((G.getTime()/1000)).toString();var F=CCFMiscUtil_CreatePropSet();var I=CCFMiscUtil_CreatePropSet();F.SetProperty(q.get("SWSE_CMD_STR"),q.get("SWSE_CANCEL_QUERY"));F.SetProperty(q.get("SWSE_CANCEL_ID"),J);var H={};H.async=true;H.scope=this;H.args=[];H.args.push("");H.args.push(F);SiebelApp.S_App.CallServer(F,I,true,H)}return v}())}if(typeof(SiebelApp.PopupPModel)==="undefined"){SiebelJS.Namespace("SiebelApp.PopupPModel");SiebelApp.PopupPModel=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");function d(l){this.constructor.superclass.constructor.call(this,l)}SiebelJS.Extend(d,SiebelAppFacade.PresentationModel);d.prototype.Init=function(){this.AddProperty("state",i.get("POPUP_STATE_UNLOADED"));this.AddProperty("noHide",false);this.AddProperty("height",0);this.AddProperty("width",0);this.AddProperty("source",i.get("POPUP_SOURCE_HI"));this.AddProperty("closeByXDisabled",false);this.AddProperty("isPrevPopupVisible",false);this.AddProperty("isPopupClosedByX",false);this.AddProperty("currPopups",[]);this.AddProperty("url","");this.AddProperty("isSIPopup",false);this.AddProperty("content","");this.AddProperty("isCurrencyOpen",false);this.AddProperty("IsCancelQryPopupOpen",false);this.AddProperty("CanProcessLayout",true);this.AddProperty("isPopupSI",false);this.AddMethod("SetPopupVisible",k);this.AddMethod("ProcessNewPopup",b);this.AddMethod("ProcessClearPopup",e);this.AddMethod("ClearPopup",g);this.AddMethod("OpenPopup",c);this.AddMethod("OnLoadPopupContent",a);this.AddMethod("StandAlonePopup",function(m,l){});this.AttachEventHandler("ClosePopupByX",h);this.AttachPreProxyExecuteBinding("ALL",function(m,l,n){if(i.get("CLOSE_BY_X")===String(l.GetProperty(i.get("SWE_CMD_ARG")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true)}else{if(i.get("SWSE_CANCEL_QUERY")===String(l.GetProperty(i.get("SWSE_CMD_STR")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true);this.SetProperty("IsCancelQryPopupOpen",false)}}})};d.prototype.PostExecute=function(l,n,m){this.HandlePreExecute(l,n,m);this.HandlePostExecute(l,n,m)};function k(l){if(!l){this.SetProperty("state",i.get("POPUP_STATE_HIDDEN"));this.SetProperty("isPopupSI",false)}else{this.SetProperty("state",i.get("POPUP_STATE_VISIBLE"))}}function b(q){var w;var m;var l;var v;var n;var x;var p,t,r,u;if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Start PopupApplet")}SiebelApp.S_App.uiStatus.Busy({});this.SetProperty("currPopups",[]);w=q.GetProperty(i.get("SWE_POP_HEIGHT_STR"));m=q.GetProperty(i.get("SWE_POP_WIDTH_STR"));n=q.GetProperty(i.get("SWE_IS_SI_POPUP"));this.SetProperty("isSIPopup",j.IsTrue(n));var o=q.GetProperty(i.get("SWE_FULL_POPUP_WINDOW_STR"));l=q.GetProperty("URL");x=q.GetProperty(i.get("SWE_FREE_POPUP_STR"));p=parseInt((screen.availWidth/2)-((m|800)/2),10);t=parseInt((screen.availHeight/2)-((w|600)/2),10);r="width="+(m|800)+",height="+(w|600)+",left="+p+",top="+t+",screenX="+p+",screenY="+t;if(o){r=r+"scrollbars=yes,resizable=yes,location=yes,toolbar=yes,menubar=yes,status=yes"}else{r=r+"scrollbars=yes,resizable=yes"}if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")&&!(this.GetRenderer())){this.Setup()}if(x||o||(l&&!l.match(/.swe\?/))){this.ExecuteMethod("StandAlonePopup",l,r);SiebelApp.S_App.uiStatus.Free();return true}else{if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")){this.Show()}}if(l.indexOf("start.swe")===-1){v=SiebelApp.S_App.GetPageURL().split("start.swe")[0]+l+i.get("SWE_ARG_START")+f("")}else{l=f(l);v=SiebelApp.S_App.GetPageURL()+l.split("start.swe")[1]
}var s=SiebelApp.S_App.GetActiveView();if(s){var y=s.GetActiveApplet();if(y){s.SetActiveAppletBeforePopup(y)}}this.ExecuteMethod("OpenPopup",v,w,m,false,false,false);return true}function e(l){this.ExecuteMethod("ClearPopup");return(true)}function g(){var p=SiebelApp.S_App.GetPopupPM();if(p&&(p.Get("isCurrencyOpen")||this.Get("state")===i.get("POPUP_STATE_HIDDEN"))){return}this.ExecuteMethod("SetPopupVisible",false);var m=SiebelApp.S_App.GetActiveView();if(m){m.DeletePopup()}var o=this.Get("currPopups");var n=null;for(var l in o){n=o[l];if(SiebelApp.S_App.IsExternalApplet(n)){n.Close()}}this.SetProperty("currPopups",[])}d.prototype.Setup=function(l){var m=new SiebelAppFacade.PopupRenderer(this);this.GetRenderer=function(){return m};this.Show()};function c(l,t,n,q,r,o){try{var m;var p=this;if(this.Get("state")===i.get("POPUP_STATE_VISIBLE")){this.SetProperty("isPrevPopupVisible",true);this.ExecuteMethod("SetPopupVisible",false,true)}else{this.SetProperty("isPrevPopupVisible",false)}t=(t===undefined?0:parseFloat(t));n=(n===undefined?0:parseFloat(n));if(t<=0){t=parseFloat(i.get("DEFAULT_POPUP_HEIGHT"))}if(n<=0){n=parseFloat(i.get("DEFAULT_POPUP_WIDTH"))}this.SetProperty("noHide",false);this.SetProperty("height",t);this.SetProperty("width",n);this.ExecuteMethod("SetPopupVisible",true);if(o===undefined||!o){this.SetProperty("url",l)}else{this.SetProperty("content",l)}return true}catch(s){return false}}function a(){var o=this;if(o.Get("isSIPopup")){return}if(this.Get("CanProcessLayout")===false&&o.retryWaitForObjInfoProcessing<25){o.retryWaitForObjInfoProcessing++;setTimeout(function(){a.call(o)},100);return}o.retryWaitForObjInfoProcessing=0;var n=o.Get("currPopups");var m=null;for(var l in n){m=n[l];m.Initialize();if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet(m.GetName(),"Objects Initialized")}m.Show();if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet(m.GetName(),"Finished Populate")}if(SiebelApp.S_App.GetActiveView()){if(m.GetView()===SiebelApp.S_App.GetActiveView()){SiebelApp.S_App.GetActiveView().SetActiveApplet(m);SiebelApp.S_App.GetActiveView().SetActiveAppletOnLoad(null)}else{}}m.SetFocusDefaultControl(true);m.FocusDefaultControl(n.length!=2)}if(n.length==2){SiebelApp.MvgBeautifier.Initialize()}if(0==n.length){this.SetProperty("isPopupSI",true)}SiebelApp.S_App.uiStatus.Free();SiebelApp.S_App.uiStatus.LocalFree()}function f(l){if(l.indexOf(".swe?")!==-1&&l.indexOf(i.get("SWE_SHOW_POPUP_STR"))===-1){l=j.AppendArgsToURL(l,i.get("SWE_SHOW_POPUP_STR"),i.get("SWE_NUMERIC_TRUE"))}if(!j.IsTrue(SiebelApp.S_App.UseCookie())){if(l.indexOf(i.get("SWE_RPC_PROP_SESSION_NUMBER"))===-1){l+=(i.get("SWE_ARG_DELIM")+SiebelApp.S_App.GetSessionCookie())}}l=j.AppendArgsToURL(l,i.get("SWE_PROP_SESSION_RANDOM_NUMBER"),SiebelApp.S_App.GetSRN());return l}function h(n){n.preventDefault();n.stopPropagation();if(this.Get("state")===SiebelApp.Constants.get("POPUP_STATE_HIDDEN")){return false}this.SetProperty("isPopupClosedByX",true);var o=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();o.SetProperty(i.get("SWE_CMD_ARG"),i.get("CLOSE_BY_X"));o.SetProperty(i.get("SWEDIC"),i.get("CMDMGR_TRUE"));var m={};m.async=true;m.scope=this;m.args=[];m.args.push("");m.args.push(o);SiebelApp.S_App.CallServer(o,l,true,m);return false}d.prototype.IsPopupStarted=function(){return j.IndexOf([i.get("POPUP_STATE_STARTED"),i.get("POPUP_STATE_LOADED"),i.get("POPUP_STATE_VISIBLE")],this.Get("state"))!==-1};return d}())};