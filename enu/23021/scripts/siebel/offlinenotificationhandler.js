if(typeof(SiebelApp.OfflineNotificationHandler)==="undefined"){SiebelJS.Namespace("SiebelApp.OfflineNotificationHandler");SiebelApp.OfflineNotificationHandler=(function(){var a=new v();var z;var q;var y=SiebelApp.Constants;var A=SiebelApp.Offlineconstants;var r=y.get("SWE_PROP_BC_OPERATION");var k=y.get("SWE_PROP_BC");var b=y.get("SWE_PROP_BC_NOTI_BEGIN");var h=y.get("SWE_PROP_BC_NOTI_INSERT_WORKSET");var m=A.get("VALUE_ARRAY");var d=y.get("SWE_PROP_BC_NOTI_END");var F=y.get("SWE_PROP_BC_NOTI_GENERIC");var u=y.get("SWE_PROP_BC_NOTI_DELETE_WORKSET");var p=y.get("SWE_PROP_BC_NOTI_NEW_DATA_WS");var e=y.get("SWE_PST_FIELD");var t=y.get("SWE_PROP_BC_NOTI_NEW_FIELD_DATA");var f=y.get("SWE_PROP_NOTI_TYPE");var s=y.get("SWE_PROP_BC_NOTI_NEW_ACTIVE_ROW");var w=y.get("SWE_PROP_BC_NOTI_ACTIVE_ROW");var D=y.get("SWE_PROP_ARGS_ARRAY");var o=A.get("INDEX");var C=A.get("POSITION_ON_ROW");var l=A.get("GO_TO_NEXT");var E=A.get("GO_TO_PREV");var j=y.get("SWE_PROP_BC_NOTI_NEW_RECORD");var G=A.get("B_SETUP");var B=A.get("B_UP");var x=y.get("SWE_PROP_BC_NOTI_DELETE_RECORD");var c=y.get("SWE_PROP_SCALE");var i="state";var n=A.get("COMMIT_PENDING");var H=y.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA_WS");function v(){var g;I=function I(){return g};I.prototype=this;g=new I();g.constructor=I;return g}v.prototype.RunOfflineNotification=function(I,J){I=SiebelApp.Utils.UrlDecode(I);var g=SiebelApp.RequestProcessor.GetRequestType(I);SiebelApp.OfflineNotificationHandler.ProcessNotification(g,I,J)};v.prototype.ProcessNotification=function(K,M,N){var I;var R;var J={};var V;var Y;var aa;var af;switch(K){case A.get("PICKRECORD"):I=SiebelApp.S_App.GetActiveView();R=I.GetActiveApplet();var U=R.GetBusComp();var aj=U.GetName();if(U.GetRecordSet().length>0){var ak=U.GetRecordSet()[U.GetSelection()].Id;var ac=I.GetAppletMap()[R.GetPickAppletSrcInfo().SrcApplet].GetBusComp().GetName();var ad=R.GetPickAppletSrcInfo().SrcAppletFld;SiebelApp.BrowserCacheMgr.GetPickFldDetails(ac,ad,aj,ak,function(al){if(!al){SiebelJS.Log("Unable to find Pick Map Details for field '"+ad+"' in BC '"+ac+"'");alert("Unable to find Pick Map Details for field '"+ad+"' in BC '"+ac+"'");return}J.PickFldDet=al;SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)})}else{K=A.get("SWE_CLOSE_APPLET");SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)}break;case A.get("ADDRECORD"):I=SiebelApp.S_App.GetActiveView();R=I.GetActiveApplet();var L=R.GetBusComp();var ag=R.GetParentApplet()?R.GetParentApplet().GetBusComp():null;var ab=ag?ag.GetParentBusComp():null;if(!!L&&L.GetRecordSet().length>0){if(ab){var X=SiebelApp.OfflineAppMgr.GetAppContext();ab.GetRecordSet()[ab.SetSelection(X.RowNum)];var ai=ab.GetRecordSet()[ab.GetSelection()].Id;var Z=utils.DecodeFromQueryString(M);var ah=Z.propArray.SWERowIds.toString();var O=[];if(ah.search(",")!==-1){O=ah.split(",")}O[0]="SWERowId0%3d"+ai;Z.propArray.SWERowIds=O.toString();M=utils.EncodeToQueryString(Z,false);var ae=[];var g=[];var Q=R.GetPModel().Get("GetRowsSelectedArray");var S=L.GetRecordSet();if(Q){af=Q.length;for(aa=0;aa<af;aa++){if(Q[aa]===true){ae.push(S[aa].Id);g.push(S[aa])}}}if(!Q||!af){ae.push(S[L.GetSelection()].Id);g.push(S[L.GetSelection()])}J[A.get("ADDRECORD")]=g;var W=ae.length;var P;for(var T=0;T<W;T++){P=SiebelApp.S_App.GetPageURL()+"?"+M+"&"+A.get("ASSOCID")+"="+ae[T];SiebelApp.OfflineAppMgr.CacheOfflineRequest(P)}SiebelApp.BrowserCacheMgr.UpdateParentIdTag(ag.GetName(),ae,ai,function(){SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)})}}else{K=A.get("SWE_CLOSE_APPLET");SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)}break;case y.get("SWE_GET_PICK_INFO"):I=SiebelApp.S_App.GetActiveView();R=I.GetActiveApplet();V=R.GetActiveControl().GetFieldName();Y=R.GetActiveControl().GetPickApplet();if(Y){SiebelApp.BrowserCacheMgr.GetPickListInfo(Y,function(al){if(!al){SiebelJS.Log("Unable to find Pick Map Details for field '"+ad+"' in BC '"+ac+"'");alert("Unable to find Pick Map Details for field '"+ad+"' in BC '"+ac+"'");return}J.pickListInfo=al;J.pickListInfo.push(Y);SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)})}else{console.log("Picklist not found")}break;default:SiebelApp.OfflineNotificationHandler.DispatchNotification(K,M,J,N)}};v.prototype.DispatchNotification=function(ax,K,aq,an){var aC=utils.DecodeFromQueryString(K);var aD=SiebelApp.OfflineDataMgr.JsonRecordSet(K);var J=JSON.parse(aD.RecordSet);var am=aD.SweCommands.SWEActiveApplet;var X=aD.SweCommands.SWEField;var W=J.Id;var aA=SiebelApp.OfflineNotificationHandler.GetRowNum(ax);var O=SiebelApp.S_App.GetActiveBusObj();var au=SiebelApp.S_App.GetActiveView();var ac;var ay;var N=0;var ai;var av;var az;var M;var S=au.GetApplet(am).GetBusComp().GetName();var ae=SiebelApp.OfflineAppMgr.GetAppContext();var g=true;var Z=aC.GetProperty("SWEP");if(Z){Z=Z.toString()}if(au&&au.GetActiveApplet()){ac=au.GetActiveApplet().GetActiveControl();av=au.GetApplet(am).GetBCId();ai=au.GetActiveApplet().GetPModel();var ah=[];ah=au.GetApplet(am).GetBusComp().GetFieldList();if(ac){ay=ac.GetFieldName()}if(au.GetApplet(am) instanceof SiebelApp.S_App.ListApplet){N=au.GetApplet(am).GetPModel().GetRenderer().GetRowCount();if(N===1){aA=0}}var ar=[];var ap;var ag;var ak=au.GetAppletMap();var af=false;var aa=CCFMiscUtil_CreatePropSet();var aw=CCFMiscUtil_CreatePropSet();var at=0;for(var I in ak){var ab=ak[I];var aB=false;if(ab){if(ab instanceof SiebelApp.S_App.ListApplet){aB=true}if(ab.GetBusComp().GetParentId()===av&&!aB){af=true;ap=ab.GetBusComp().GetBCId();break}}}aw.SetType("Notifications");var Q;var T=ab.GetBusComp().GetParentId();var ad=(au.GetApplet(am).GetPModel().GetRenderer().GetPopupType()===A.get("ASSOC"));if(aA!==undefined){if(ad){Q=SiebelApp.OfflineNotificationHandler.SelectMultiRecords(aA,am,N)}else{Q=SiebelApp.OfflineNotificationHandler.GetRecordPos(aA,am,N)}}if((ax===A.get("POSITION_ON_ROW")||ax===A.get("GO_TO_NEXT_SET"))&&av){var V=au.GetApplet(am);if(!(au.GetActiveApplet().hasOwnProperty("GetPopupAppletName"))){for(var ao=0;ao<ae.BC.length;ao++){var aj=SiebelApp.OfflineUtils.RemoveNonAlphaChars(ae.BC[ao].Name);S=SiebelApp.OfflineUtils.RemoveNonAlphaChars(S);if(S===aj&&(ae.BC[ao].ParentBC!==undefined)){g=false;ae.RowChildNum=aA}}if(g===true){SiebelApp.OfflineAppMgr.SetContextParam(null,null,W,aA)}}if(!(V.hasOwnProperty("GetPopupAppletName")&&V.GetPopupAppletName())&&(V.GetPModel().GetRenderer().GetCurRowSel()===aA)){return}if(af){aw=SiebelApp.OfflineNotificationHandler.NotifyPORParentChild(aw,Q,aA,O,X,av,ap,W)}else{aw=SiebelApp.OfflineNotificationHandler.NotifyPOR(aw,av,Q,aA,X)}M=A.get("STATUSCONTINUE")}else{if(ax===y.get("SWE_GET_PICK_INFO")){aw=SiebelApp.OfflineNotificationHandler.NotifcationPickInfo(aw,Q,aA,X,av,aq,aD,J,ay,ah,T)}else{if(((ax===A.get("SWE_CLOSE_APPLET"))||(K.search("SWEMethod=CloseApplet")!==-1))&&Z){var R=[];var Y;R[0]=Z.split("_")[1];R[0]=R[0].substring(0,R[0].length-1);R[0]=unescape(R[0]);Y=au.GetApplet(R).GetBCId();R=SiebelApp.OfflineNotificationHandler.NotifyValueArray(R);
aw=SiebelApp.OfflineNotificationHandler.NotifcationCloseApplet(aw,Y,R);delete this.selectMultiRec;if(ad){SiebelApp.BrowserCacheMgr.ResetSyncRecordObject()}}else{if(ax===A.get("PICKRECORD")){var P=[];P[0]=Z.split("_")[1];P[0]=P[0].substring(0,P[0].length-1);P=SiebelApp.OfflineNotificationHandler.NotifyValueArray(P);aw=SiebelApp.OfflineNotificationHandler.NotifyPickRecord(aw,P,aq,K)}else{if(ax===A.get("ADDRECORD")){M=y.get("SWE_RPC_PROP_CLOSE_POPUP");var U=[];U[0]=Z.split("_")[1];U[0]=U[0].substring(0,U[0].length-1);U=SiebelApp.OfflineNotificationHandler.NotifyValueArray(U);aw=SiebelApp.OfflineNotificationHandler.NotifyAddRecord(aw,U,aq,K);delete this.selectMultiRec}else{if(ax===A.get("WRITERECORD")){var L={};L=SiebelApp.OfflineNotificationHandler.GetFieldIndex(aD,av,O);aw=SiebelApp.OfflineNotificationHandler.NotifyWriteRecord(aw,L,av,W)}else{if((ax===A.get("DELETERECORD"))||(K.search("SWEMethod=DeleteRecord")!==-1)){Q=SiebelApp.OfflineNotificationHandler.GetRecordPos(aA,am,N);aw=SiebelApp.OfflineNotificationHandler.NotifyDeleteRecord(aw,aA,Q,O,X,av)}else{if((ax===A.get("SCROLL_NEXT_DATA"))||(ax===A.get("SCROLL_PREV_DATA"))){if(SiebelApp.S_App.uiStatus.m_gbusy){SiebelApp.S_App.uiStatus.Free()}return}else{if(ax===A.get("SWE_POST_CHANGES")&&ay){aw=SiebelApp.OfflineNotificationHandler.NotifcationPostChanges(aw,Q,aA,ay,K,av,aD,J,ah,T);M=y.get("SWE_RPC_PROP_STATUS_COMPLETED")}}}}}}}}}if(!M){M=y.get("SWE_RPC_PROP_STATUS_COMPLETED")}aa.SetProperty(y.get("SWE_RPC_PROP_RETURN_STATUS"),M);aa.AddChild(aw);az=aa.EncodeAsString();var al=[];al.push(az);al.push("success");an.apply(this,al)}};v.prototype.NotifyAddRecord=function(Q,N,P,K){var O=SiebelApp.S_App.GetActiveView().GetActiveApplet();var M=O.GetBusComp();var L=M.GetVarName();var I=O.GetParentApplet()?O.GetParentApplet().GetBusComp():null;var g=P[A.get("ADDRECORD")]?P[A.get("ADDRECORD")]:null;var J=I.GetVarName();Q=SiebelApp.OfflineNotificationHandler.NotifyBegin(Q,J);Q=SiebelApp.OfflineNotificationHandler.NotifyInsertWorkSet(Q,g,I);var R=CCFMiscUtil_CreatePropSet();R.propArrayLen++;R.propArray[r]=F;R.propArrayLen++;R.propArray[k]=J;R.propArrayLen++;R.propArray[D]=N;R.propArrayLen++;R.propArray[f]="ClosePopup";Q.AddChild(R);Q=SiebelApp.OfflineNotificationHandler.NotifyEnd(Q,J);return Q};v.prototype.NotifyPickRecord=function(aq,O,ak,L){var P=SiebelApp.S_App.GetActiveView().GetActiveApplet();var K=P.GetBusComp();var an=K.GetName();var I=ak.PickFldDet.PickMap.BCName;var ae;var Y;var al="OF_";var R=K.GetBusObj().GetBCArray();var U=R.length;for(var ap=0;ap<U;ap++){if(R[ap].GetName()===I){ae=R[ap];break}}Y=ae.GetVarName();aq=SiebelApp.OfflineNotificationHandler.NotifyBegin(aq,Y);var N=ae.GetFieldMap();var aa=ak.PickFldDet.PickMap.PMap;SiebelJS.Log("Notifying Pick Record...");SiebelJS.Log("Pick Applet ->"+P.GetName());SiebelJS.Log("Base Level BC ->"+ae.GetName());SiebelJS.Log("Pick Field ->"+ak.PickFldDet.PickMap.FldName);SiebelJS.Log("Pick Map ->"+aa);SiebelJS.Log("Populating '"+ae.GetName()+"' BC Fields as per pick map...");aa=aa.split(",");U=aa.length;var ac=[];var S=[];for(var am=0;am<U;am++){var Z=aa[am].split(":");var ai=Z[0];S.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(Z[1]));ac.push(Z[0]);SiebelApp.OfflineDataMgr.GetRecordObj()[ai]=ak.PickFldDet["PickRecord"][SiebelApp.OfflineUtils.RemoveNonAlphaChars(Z[1])];if(!N[ai]){SiebelJS.Log("Field '"+ai+"'  not found in '"+ae.GetName()+"'");continue}var W=N[ai].index;W=SiebelApp.OfflineNotificationHandler.NotifyValueArray([W.toString()]);var V=ak.PickFldDet["PickRecord"][SiebelApp.OfflineUtils.RemoveNonAlphaChars(Z[1])];if(!V){SiebelJS.Log("Field '"+Z[1]+"'  not found in Pick BC '"+K.GetName()+"'");V="null"}V=SiebelApp.OfflineNotificationHandler.NotifyValueArray([V]);aq=SiebelApp.OfflineNotificationHandler.NotifyNewWorkSet(aq,Y,"",ai,W,V)}var T=ak.PickFldDet["PickMap"]["FldName"];var ar=ak.PickFldDet["PickRecord"][SiebelApp.OfflineUtils.RemoveNonAlphaChars(T)];var ag=L.indexOf("?");ag=ag+1;var Q=L.substring(0,ag);var M=[];var af=[];var ab=L.substring(ag,L.length);var g=ab.split("&");for(var aj=0;aj<g.length;aj++){if(g[aj].search("OF_")!==-1){M.push(g[aj])}else{af.push(g[aj])}}L=af.join("&");L=L+"&"+al+T+"="+ar;var at=utils.DecodeFromQueryString(L);at.SetProperty(y.get("SWE_PST_BUSCOMP_INFO"),I);L=Q+utils.EncodeToQueryString(at,false);var J=at.propArray.SWERowIds.toString();var ao;var ah;if(J.search(",")!==-1){ao=J.split(",");J=ao[1]}ah=unescape(J);var ad=ah.indexOf("=");ad=ad+1;ah=ah.substring(ad,ah.length);ae=SiebelApp.OfflineUtils.RemoveNonAlphaChars(I);SiebelApp.BrowserCacheMgr.AddPickRowID(ae,ah,function(aA){var au=[];var aw;var ax;var ay;var az=unescape(at.propArray.SWERowId.toString());for(am=0;am<U;am++){if(aA&&ac){ay=aA[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ac[am])];if(ay){au.push(ay)}else{S.splice(am,1)}}}var av;if(au.length){SiebelApp.BrowserCacheMgr.SelectRecord(SiebelApp.OfflineUtils.RemoveNonAlphaChars(an),S,au,function(aB){if(aB){av=aB.Id;L=L+"&"+A.get("OLD_ROW_ID")+"="+av}SiebelApp.OfflineDataMgr.UpdateRecordInst(az,av,an);SiebelApp.OfflineAppMgr.CacheOfflineRequest(L)})}else{SiebelApp.OfflineDataMgr.UpdateRecordInst(az,A.get("STRINGNULL"),an);SiebelApp.OfflineAppMgr.CacheOfflineRequest(L)}});var X=CCFMiscUtil_CreatePropSet();X.propArrayLen++;X.propArray[r]=F;X.propArrayLen++;X.propArray[k]=Y;X.propArrayLen++;X.propArray[D]=O;X.propArrayLen++;X.propArray[f]="ClosePopup";aq.AddChild(X);aq=SiebelApp.OfflineNotificationHandler.NotifyEnd(aq,Y);return aq};v.prototype.SetRowNum=function(g){z=g};v.prototype.GetPrevRowNum=function(){return q};v.prototype.NotifyBegin=function(g,J){var I=CCFMiscUtil_CreatePropSet();I.propArrayLen++;I.propArray[r]=b;I.propArrayLen++;I.propArray[k]=J;g.AddChild(I);return g};v.prototype.NotifyGeneric=function(g,L,I,N,M,K){var J=CCFMiscUtil_CreatePropSet();J.propArrayLen++;J.propArray[r]=F;J.propArrayLen++;J.propArray[k]=L;J.propArrayLen++;if(N==="SWEIRowSelection"){J.propArray[f]=N;J.propArrayLen++;J.propArray[D]=I}g.AddChild(J);return g};v.prototype.NotifyStateChange=function(g,J,K){var I=CCFMiscUtil_CreatePropSet();I.propArrayLen++;I.propArray[r]=c;I.propArrayLen++;I.propArray[k]=J;I.propArrayLen++;if(K===n){I.propArray[i]=K}g.AddChild(I);return g};v.prototype.NotifyEnd=function(I,J){var g=CCFMiscUtil_CreatePropSet();g.propArrayLen++;g.propArray[r]=d;g.propArrayLen++;g.propArray[k]=J;I.AddChild(g);return I};v.prototype.GetPickListData=function(N,K){var I=[];var L=SiebelApp.S_App.GetActiveView();var M=L.GetActiveApplet();var J=0;I[0]="";I[1]=L.GetName();I[2]=M.GetName();I[3]=N;I[4]="true";I[5]=K.pop();for(var g=6;g<6+K.length;g++){I[g]=K[J];J++}return I};v.prototype.NotifyDeleteWorkSet=function(I,g,M){var K=0;for(var L=g-1;L>=0;L--){var J="NotifyDW".concat(K);J=CCFMiscUtil_CreatePropSet();J.propArrayLen++;J.propArray[r]=u;J.propArrayLen++;J.propArray[k]=M;J.propArrayLen++;J.propArray[o]=L;J.propArrayLen++;J.propArray[j]="1";I.AddChild(J);K++}return I};v.prototype.NotifyInsertWorkSet=function(P,Q,I){var M=I.GetFieldList();var S=[];var N=M.length;
for(var J=0;J<N;J++){S.push(SiebelApp.S_App.LookupStringCache(M[J]))}N=Q.length;for(var L=0;L<N;L++){var g=CCFMiscUtil_CreatePropSet();var O=CCFMiscUtil_CreatePropSet();g.propArrayLen++;g.propArray[r]=h;g.propArrayLen++;g.propArray[k]=I.GetVarName();g.propArrayLen++;g.propArray[o]=L;g.propArrayLen++;g.propArray[w]=-1;var K="";var R="";for(J=0;J<S.length;J++){R=Q[L][S[J]];if(!R){R=""}K+=SiebelApp.OfflineNotificationHandler.NotifyValueArray([R])}O.propArrayLen++;O.propArray[m]=K;O.SetType("FieldValues");g.AddChild(O);P.AddChild(g)}return P};v.prototype.NotifyActiveRow=function(g,K,J){var I=CCFMiscUtil_CreatePropSet();I.propArrayLen++;I.propArray[r]=s;I.propArrayLen++;I.propArray[w]=J;I.propArrayLen++;I.propArray[k]=K;g.AddChild(I);return g};v.prototype.GetRowNum=function(g){return z};v.prototype.NotifyValueArray=function(L){var I=L;var K="";for(var J=0;J<L.length;J++){var g=L[J].length;g=g.toString();K=K+g.concat("*",L[J])}return K};v.prototype.NotifyPOR=function(g,I,J,L,K){g=SiebelApp.OfflineNotificationHandler.NotifyBegin(g,I);g=SiebelApp.OfflineNotificationHandler.NotifyGeneric(g,I,J,"SWEIRowSelection",L,K);g=SiebelApp.OfflineNotificationHandler.NotifyActiveRow(g,I,L);g=SiebelApp.OfflineNotificationHandler.NotifyEnd(g,I);return g};v.prototype.NotifcationPickInfo=function(N,O,Q,g,J,M,P,R,I,K,L){M=M.pickListInfo;if(L){Q=SiebelApp.OfflineAppMgr.GetAppContext().RowChildNum}else{Q=SiebelApp.OfflineAppMgr.GetAppContext().RowNum}N=SiebelApp.OfflineNotificationHandler.NotifyBegin(N,J);N=SiebelApp.OfflineNotificationHandler.NotifyPLD(N,J,O,"GetQuickPickInfo",Q,g,M);N=SiebelApp.OfflineNotificationHandler.NotifyFieldValues(N,O,Q,J,P,R,K);N=SiebelApp.OfflineNotificationHandler.NotifyEnd(N,J);return N};v.prototype.NotifyPLD=function(L,M,N,g,O,I,K,P){var J=CCFMiscUtil_CreatePropSet();J.propArrayLen++;J.propArray[r]=F;J.propArrayLen++;J.propArray[k]=M;J.propArrayLen++;if(g==="GetQuickPickInfo"){var Q=SiebelApp.OfflineNotificationHandler.GetPickListData(I,K,P);Q=SiebelApp.OfflineNotificationHandler.NotifyValueArray(Q);J.propArray[D]=Q;J.propArrayLen++;J.propArray[f]=g;J.propArrayLen++;J.propArray[w]=O}L.AddChild(J);return L};v.prototype.NotifcationCloseApplet=function(I,K,g){I=SiebelApp.OfflineNotificationHandler.NotifyBegin(I,K);var J=CCFMiscUtil_CreatePropSet();J.propArrayLen++;J.propArray[r]=F;J.propArrayLen++;J.propArray[k]=K;J.propArrayLen++;J.propArray[D]=g;J.propArrayLen++;J.propArray[f]="ClosePopup";I.AddChild(J);I=SiebelApp.OfflineNotificationHandler.NotifyEnd(I,K);return I};v.prototype.NotifyWriteRecord=function(M,O,L,g){var R=[];var Q=[];var I=[];var J;R=O.FieldName;I=O.FieldValue;Q=O.FieldPos;J=R.length;M=SiebelApp.OfflineNotificationHandler.NotifyBegin(M,L);for(var K=0;K<J;K++){var P=[];var N=[];P[0]=Q[K].toString();N[0]=I[K].toString();P=SiebelApp.OfflineNotificationHandler.NotifyValueArray(P);N=SiebelApp.OfflineNotificationHandler.NotifyValueArray(N);M=SiebelApp.OfflineNotificationHandler.NotifyNewWorkSet(M,L,"",R[K],P,N)}I=SiebelApp.OfflineNotificationHandler.NotifyValueArray(I);M=SiebelApp.OfflineNotificationHandler.NotifyStateChange(M,L,n);M=SiebelApp.OfflineNotificationHandler.NotifyNewRecordWorkSet(M,L,I);M=SiebelApp.OfflineNotificationHandler.NotifyEnd(M,L);return M};v.prototype.NotifyNewWorkSet=function(L,M,N,R,S,I,P,J){var K=CCFMiscUtil_CreatePropSet();var Q="FieldArray";var O="ValueArray";K.propArrayLen++;K.propArray[r]=p;K.propArrayLen++;K.propArray[k]=M;K.propArrayLen++;K.propArray[w]=P;K.propArrayLen++;K.propArray[e]=R;var g=CCFMiscUtil_CreatePropSet();g.propArrayLen++;g.propArray[Q]=S;g.propArrayLen++;g.propArray[O]=I;g.type="FieldValues";K.AddChild(g);L.AddChild(K);return L};v.prototype.NotifyNewRecordWorkSet=function(g,L,K){var I=CCFMiscUtil_CreatePropSet();var J="ValueArray";I.propArrayLen++;I.propArray[r]=H;I.propArrayLen++;I.propArray[k]=L;var M=CCFMiscUtil_CreatePropSet();M.propArrayLen++;M.propArray[J]=K;M.type="FieldValues";I.AddChild(M);g.AddChild(I);return g};v.prototype.NotifyNewFieldData=function(g,J,I,L){var K=CCFMiscUtil_CreatePropSet();K.propArrayLen++;K.propArray[r]=t;K.propArrayLen++;K.propArray[k]=J;K.propArrayLen++;K.propArray[w]=L;K.propArrayLen++;K.propArray[e]=I;g.AddChild(K);return g};v.prototype.NotifyPORParentChild=function(O,P,Q,K,g,M,R,L){O=SiebelApp.OfflineNotificationHandler.NotifyBegin(O,M);O=SiebelApp.OfflineNotificationHandler.NotifyGeneric(O,M,P,"SWEIRowSelection",Q,g);O=SiebelApp.OfflineNotificationHandler.NotifyEnd(O,M);var J=K.GetBusComp(M);var N=K.GetBusComp(R);var I;if(N&&N.GetRawRecords()){I=N.GetRawRecords().length}if(N&&N.GetRawRecords()){O=SiebelApp.OfflineNotificationHandler.NotifcationForChildApplet(O,I,3,R,Q,L)}return O};v.prototype.NotifcationForChildApplet=function(g,L,K,J,M,I){g=SiebelApp.OfflineNotificationHandler.NotifyBegin(g,J);g=SiebelApp.OfflineNotificationHandler.NotifyDeleteWorkSet(g,L,J);g=SiebelApp.OfflineNotificationHandler.NotifyInsertWorkSet(g,K,J,M,I);g=SiebelApp.OfflineNotificationHandler.NotifyEnd(g,J);return g};v.prototype.GetFieldIndex=function(S,Q,J){var g=J.GetBusComp(Q);var N=g.GetFieldMap();var T=JSON.parse(S.RecordSet);var U={};var K=[];var W=[];var I=[];var V=[];var L;var R;var P=g.GetFieldList();K=S.FieldValue;L=P.length;R=K.length;for(var O=0;O<L;O++){W[O]=SiebelApp.S_App.LookupStringCache(P[O]);for(var M=0;M<R;M++){if(unescape(K[M][0])===W[O]){I[O]=unescape(K[M][1])}}if(W[O]==="Id"){I[O]=T.Id}else{if(!I[O]){I[O]=""}}V[O]=N[W[O]].index}U.FieldName=W;U.FieldValue=I;U.FieldPos=V;return U};v.prototype.GetRecordPos=function(O,J,L){var K=J.length;var N=K.toString();N=N.concat("*");var I;var M="1";if(L){for(var g=0;g<L;g++){I=(g===O)?"*11":"*01";M=M.concat(I)}return N.concat(J,M)}else{return N}};v.prototype.SelectMultiRecords=function(O,J,L){var K=J.length;var N=K.toString();N=N.concat("*");var I;O=O.toString();var M="1";if(!this.selectMultiRec){this.selectMultiRec="_0*"}if(this.selectMultiRec.match(O)){O=O.concat("*");this.selectMultiRec=this.selectMultiRec.replace(O,"")}else{O=O.concat("*");this.selectMultiRec=this.selectMultiRec.concat(O)}if(L){for(var g=0;g<L;g++){I=(this.selectMultiRec.match(g.toString()))?"*11":"*01";M=M.concat(I)}return N.concat(J,M)}else{return N}};v.prototype.NotifyDR=function(I,J,K,L){var g=CCFMiscUtil_CreatePropSet();g.propArrayLen++;g.propArray[r]=x;g.propArrayLen++;g.propArray[G]=J;g.propArrayLen++;g.propArray[B]=K;g.propArrayLen++;g.propArray[k]=L;I.AddChild(g);return I};v.prototype.NotifcationPostChanges=function(O,P,R,J,L,K,Q,S,M,N){var g=unescape(L);var T=[];var I=[];if(S&&S[J]){if(N){R=SiebelApp.OfflineAppMgr.GetAppContext().RowChildNum}else{R=SiebelApp.OfflineAppMgr.GetAppContext().RowNum}O=SiebelApp.OfflineNotificationHandler.NotifyBegin(O,K);O=SiebelApp.OfflineNotificationHandler.NotifyFieldValues(O,P,R,K,Q,S,M);O=SiebelApp.OfflineNotificationHandler.NotifyNewFieldData(O,K,"Is Not BSU Flag",R);O=SiebelApp.OfflineNotificationHandler.NotifyNewFieldData(O,K,"Is BSU Flag",R);O=SiebelApp.OfflineNotificationHandler.NotifyEnd(O,K)}return O};v.prototype.NotifyFieldValues=function(M,N,P,I,O,R,K){var L;
var Q;L=O.FieldValue.length;for(var J=0;J<L;J++){var S=[];var g=[];Q=unescape(O.FieldValue[J][0]);S=SiebelApp.OfflineDataMgr.GetFieldPos(Q,S,K);g[0]=R[Q];S=SiebelApp.OfflineNotificationHandler.NotifyValueArray(S);g=SiebelApp.OfflineNotificationHandler.NotifyValueArray(g);M=SiebelApp.OfflineNotificationHandler.NotifyNewWorkSet(M,I,N,Q,S,g,P,"");M=SiebelApp.OfflineNotificationHandler.NotifyNewFieldData(M,I,Q,P)}return M};v.prototype.NotifyDeleteRecord=function(g,O,K,L,M,N){var J=SiebelApp.OfflineNotificationHandler;g=SiebelApp.OfflineNotificationHandler.NotifyBegin(g,N);g=J.NotifyGeneric(g,N,K,"SWEIRowSelection",O,M);g=J.NotifyDR(g,"true","true",N);var I=CCFMiscUtil_CreatePropSet();I.propArrayLen++;I.propArray[r]=u;I.propArrayLen++;I.propArray[o]=O;I.propArrayLen++;I.propArray[j]=1;I.propArrayLen++;I.propArray[k]=N;g.AddChild(I);g=J.NotifyDR(g,"false","true",N);g=J.NotifyEnd(g,N);return g};return a}())};