/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.SearchLookinPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.SearchLookinPresentationModel");define("siebel/searchLookinPModel",["siebel/pmodel"],function(){SiebelAppFacade.SearchLookinPresentationModel=(function(){var k=SiebelJS.Dependency("SiebelApp.Constants");var o=SiebelJS.Dependency("SiebelApp.Utils");var r="";var p="";var f="";var l="";var q=CCFMiscUtil_CreatePropSet();var g=CCFMiscUtil_CreatePropSet();var n=CCFMiscUtil_CreatePropSet();var j="";var m="";var e="false";var a="";var d="";var c="";var b="All";function h(s){SiebelAppFacade.SearchLookinPresentationModel.superclass.constructor.call(this,s)}SiebelJS.Extend(h,SiebelAppFacade.PresentationModel);h.prototype.Init=function(){this.AddProperty("GetContainer","s_srch");this.AddProperty("GetTitle","srch");this.AddProperty("GetSearchOutput","");this.AddProperty("GetSearchOutputFromAdvSearch","");this.AddProperty("GetAdvSearchOutputForCategory","");this.AddProperty("GetAdvSearchOutputForDataSource","");this.AddProperty("GetAdvSearchOutputForFileFormat","");this.AddProperty("GetSearchPrefOutputForSort","");this.AddProperty("GetSearchPrefOutputForPage","");this.AddProperty("GetSearchPrefOutputForQueryLang","");this.AddProperty("GetSearchPrefOutputForDocLang","");this.AddProperty("ShowSearchResultsDialog","");this.AddProperty("ShowSearchResultsDialogFromAdvSearch","");this.AddProperty("showAdvancedSearchPopup","");this.AddProperty("showAdvancedFindPopup","");this.AddProperty("showSearchPreferencePopup","");this.AddProperty("fillLookin","");this.AddProperty("SetLookinInput","");this.AddProperty("SetLookinInputFind","");this.AddProperty("SetLookinCategory","");this.AddProperty("SetLookinOther","");this.AddProperty("Freetext","");this.AddProperty("BCType","");this.AddProperty("Collection","");this.AddProperty("Fileformat","");this.AddProperty("SearchType","");this.AddProperty("Contains AND","");this.AddProperty("Contains NOT","");this.AddProperty("Contains EXACT","");this.AddProperty("Contains OR","");this.AddProperty("SEARCH_PER_PAGE","");this.AddProperty("SEARCH_SORT","");this.AddProperty("SearchResultSamePage","");this.AddProperty("DS","");this.AddProperty("GetSearchError","");this.AddProperty("Sort","");this.AddProperty("NumDataSource","");this.AddProperty("DataSource","");this.AddProperty("OpenSearchPanel","");this.AddMethod("ExposedOpenSearchPanel",s);this.AddMethod("InvokeServiceMethod",function(y,N,B){var P=SiebelApp.S_App.GetService("Invoke Search");if(P){var H=0;var F=0;var D=[];var v=[];var z=[];var A=[];var t=[];var M=[];B=P.InvokeMethod("GetOUISearchLookinValues",N);var I=B.GetChildCount();for(H=0;H<I;H++){var E=B.GetChild(H);if(E){if(E.GetType()==="ResultSet"){b=E.GetProperty("defaultFind")}var G=0;var u;var L;var J;var K;var w=E.GetChildCount();for(G=0;G<w;G++){J=E.GetChild(G);L=J.GetPropertyCount();K=J.GetType();if(K==="CategoryType"){for(u in J.propArray){if(J.propArray.hasOwnProperty(u)){z.push(u)}}}else{if(K==="AllType"){for(u in J.propArray){if(J.propArray.hasOwnProperty(u)){D.push(u)}}}else{if(K==="ParentType"){for(u in J.propArray){if(J.propArray.hasOwnProperty(u)){t.push(u)}}}else{if(K==="DataSrcType"){for(u in J.propArray){if(J.propArray.hasOwnProperty(u)){t.push(u);q.SetProperty("DS"+F,u);n.SetProperty(u,J.propArray[u]);M.push(J.propArray[u]);F++}}}else{if(K==="FindType"){for(u in J.propArray){if(J.propArray.hasOwnProperty(u)){A.push(u);q.SetProperty("Find",u);g.SetProperty(u,J.propArray[u])}}}}}}}}}}var x=0;var O="";var C=v.length;this.SetProperty("DefaultFindCategory",b);this.SetProperty("SetLookinInput",D);this.SetProperty("SetLookinInputFind",A);this.SetProperty("SetLookinInputCategory",z);this.SetProperty("SetLookinInputOther",t);this.SetProperty("SetLookupDS",M);this.SetProperty("fillLookin",true)}});this.AttachEventHandler("OnLoadSearch",function(){var u=CCFMiscUtil_CreatePropSet();var t=CCFMiscUtil_CreatePropSet();this.ExecuteMethod("InvokeServiceMethod","GetOUISearchLookinValues",u,t)});this.AttachEventHandler("OnExecuteSearch",function(){var M=0;var G=0;var I="";var J="";var H=[];var A=CCFMiscUtil_CreatePropSet();var F=CCFMiscUtil_CreatePropSet();var w=this.Get("SearchType");var z=this.Get("BCType");A.SetProperty("Sort",m);A.SetProperty("SubOperation","");if(SiebelApp.S_App.GetActiveView()){var t=SiebelApp.S_App.GetActiveView().GetName();if(t===f){A.SetProperty("SearchResultSamePage",true)}}if(w==="BASIC"){var K=this.Get("Freetext");A.SetProperty("Freetext",K);if(q.GetPropertyCount()>0){for(M=0;M<q.GetPropertyCount();M++){var v=q.GetProperty("DS"+M);if(typeof(v)!=="undefined"){I=n.GetProperty(v);var D="1#"+v.length+"#"+v;if(D===z){A.SetProperty("BCType","");A.SetProperty("Collection","1#"+I.length+"#"+I);break}else{A.SetProperty("BCType",z);A.SetProperty("Collection","1#7#buscomp")}}}}else{A.SetProperty("BCType",z);A.SetProperty("Collection","1#7#buscomp")}A.SetProperty("ContainsANDtext","");A.SetProperty("ContainsNOTtext","");A.SetProperty("ContainsEXACTtext","");A.SetProperty("ContainsORtext","")}else{if(w==="ADVANCED"){for(G=0;G<this.Get("NumDataSource");G++){if(this.Get("DataSource"+G)==="buscomp"){H[G]="buscomp"}else{H[G]=n.GetProperty(this.Get("DataSource"+G))}}if(H.length>0){J=o.SearchUtil_ArrayToString(H)}A.SetProperty("ContainsANDtext",this.Get("Contains AND"));A.SetProperty("ContainsNOTtext",this.Get("Contains NOT"));A.SetProperty("ContainsEXACTtext",this.Get("Contains EXACT"));A.SetProperty("ContainsORtext",this.Get("Contains OR"));A.SetProperty("Fileformat",this.Get("Fileformat"));A.SetProperty("BCType",z);A.SetProperty("Freetext","");A.SetProperty("Collection",J)}else{if(w==="FIND"){var K=this.Get("SearchText");r=g.GetProperty(z);p="1#"+r.length+"#"+r;A.SetProperty("SearchText",K);A.SetProperty("Category",p);A.SetProperty("BasicCategory",r)}else{if(w==="ADVANCEDFIND"){p="1#"+r.length+"#"+r;var K=this.Get("SearchText");A.SetProperty("SearchText",K);A.SetProperty("Category",p);A.SetProperty("BasicCategory",r);A.SetProperty("FindFields",d)}}}}var S=SiebelApp.S_App.GetService("Invoke Search");if(!S){return}if(w==="FIND"||w==="ADVANCEDFIND"){if(SiebelApp.S_App.GetActiveView()){var t=SiebelApp.S_App.GetActiveView().GetName();if(t===l){A.SetProperty("FindResultSamePage",true)}}F=S.InvokeMethod("OUIFind",A);if(F.GetProperty("Status")!=="Error"){var C=F.GetChild(0);if(C){l=F.GetChild(0).GetChild(0).GetProperty("GotoOUIFindResultsView");SiebelApp.S_App.GotoView(l)}}}else{F=S.InvokeMethod("Search",A);var E=CCFMiscUtil_CreatePropSet();var O=0;var y;E.SetType("Result");var Q=F.GetChildCount();f=F.GetChild(0).GetProperty("GotoOUIResultsView");if(F.GetChild(0).GetType()==="ResultSet"){var P=F.GetChild(0).GetProperty("AltWords");if(typeof(P)==="undefined"){E.SetProperty("AltWords","")}else{E.SetProperty("AltWords",P)}}for(O=0;O<Q;O++){var L=F.GetChild(O);if(L){if(L.GetType()==="ResultSet"){var N=0;var B=L.GetChildCount();for(N=0;N<B;N++){var R=L.GetChild(N);if(R){var x=CCFMiscUtil_CreatePropSet();x.SetProperty("DataSource",R.GetProperty("DataSource"));
x.SetProperty("Date",R.GetProperty("Date"));x.SetProperty("Title",R.GetProperty("Title"));x.SetProperty("Summary",R.GetProperty("Summary"));E.AddChild(x)}}}else{if(L.GetType()==="Errors"){var R=L.GetChild(0);y=R.GetProperty("ErrMsg")}}}}}if(w==="BASIC"){this.SetProperty("GetSearchOutput",E);this.SetProperty("GetSearchError",y);this.SetProperty("ShowSearchResultsDialog",true)}else{if(w==="ADVANCED"){this.SetProperty("GetSearchOutputFromAdvSearch",E);this.SetProperty("GetSearchError",y);this.SetProperty("ShowSearchResultsDialogFromAdvSearch",true)}}});this.AttachEventHandler("OnExecuteShowAllSearchResults",function(){SiebelApp.S_App.GotoView(f)});this.AttachEventHandler("OnExecuteAdvancedSearch",function(){var t=CCFMiscUtil_CreatePropSet();var C=CCFMiscUtil_CreatePropSet();t.SetProperty("Freetext",this.Get("Freetext"));t.SetProperty("BCType",this.Get("BCType"));t.SetProperty("Collection","1#7#buscomp");var z=SiebelApp.S_App.GetService("Invoke Search");if(!z){return}C=z.InvokeMethod("Search",t);var u=CCFMiscUtil_CreatePropSet();u.SetType("Result");var y=0;for(y=0;y<C.GetChildCount();y++){var v=0;var B=C.GetChild(y);if(B){var w=B.GetChildCount();for(v=0;v<w;v++){var A=B.GetChild(v);if(A){var x=CCFMiscUtil_CreatePropSet();x.SetProperty("DataSource",A.GetProperty("DataSource"));x.SetProperty("Date",A.GetProperty("Date"));x.SetProperty("Title",A.GetProperty("Title"));x.SetProperty("Summary",A.GetProperty("Summary"));u.AddChild(x)}}}}this.SetProperty("GetSearchOutputFromAdvSearch",u);this.SetProperty("ShowSearchResultsDialogFromAdvSearch",true)});this.AttachEventHandler("OnLoadAdvancedSearch",function(){var u=CCFMiscUtil_CreatePropSet();var C=CCFMiscUtil_CreatePropSet();var B=SiebelApp.S_App.GetService("Invoke Search");if(B){var z=0;var x=[];var F=[];C=B.InvokeMethod("GetOUISearchLookinValues",u);var y=C.GetChildCount();for(z=0;z<y;z++){var E=C.GetChild(z);if(E){var w=0;var t="";var G;var D;var A;var v=E.GetChildCount();for(w=0;w<v;w++){D=E.GetChild(w);A=D.GetType();if(A==="CategoryType"){for(t in D.propArray){if(D.propArray.hasOwnProperty(t)){x.push(t)}}}else{if(A==="DataSrcType"){for(t in D.propArray){if(D.propArray.hasOwnProperty(t)){F.push(t)}}}}}}}var H=[];C=B.InvokeMethod("GetFileFormatLOVValues",u);for(z=0;z<y;z++){var E=C.GetChild(z);if(E){var w=0;var G=E.GetPropertyCount();if(E.GetType()==="ResultSet"){for(w=0;w<G;w++){H.push(E.GetProperty("Search File Format"+w))}}}}this.SetProperty("GetAdvSearchOutputForCategory",x);this.SetProperty("GetAdvSearchOutputForFileFormat",H);this.SetProperty("GetAdvSearchOutputForDataSource",F);this.SetProperty("showAdvancedSearchPopup",true)}});this.AttachEventHandler("OnLoadAdvancedFind",function(x){var t=CCFMiscUtil_CreatePropSet();var C=CCFMiscUtil_CreatePropSet();r=g.GetProperty(x);var B=SiebelApp.S_App.GetService("Invoke Search");if(B){var A=0;var y=0;var z=[];var D=[];var G=[];var F=[];var H=[];t.SetProperty("Category",r);C=B.InvokeMethod("GetOUIFindFields",t);var u=C.GetChild(0);if(u){var E=u.GetPropertyCount();for(A=0;A<E/2;A++){if(u.GetType()==="ResultSet"){var v=u.GetProperty("FindField"+A);var w=u.GetProperty("FindFieldDisp"+A);H.push(w);F.push(v)}}}d=o.SearchUtil_ArrayToString(F);c=o.SearchUtil_ArrayToString(H);this.SetProperty("findSelectedCategory",r);this.SetProperty("GetAdvFindOutputForFindFields",F);this.SetProperty("GetAdvFindOutputForFindDisplayFields",H);this.SetProperty("showAdvancedFindPopup",true)}});this.AttachEventHandler("OnLoadSearchPreference",function(){var t=CCFMiscUtil_CreatePropSet();var C=CCFMiscUtil_CreatePropSet();var A=SiebelApp.S_App.GetService("Invoke Search");if(A){var B=[];var y=[];var z=[];var v;var D=0;var u=0;var G=0;C=A.InvokeMethod("GetSearchSettingValues",t);var x=C.GetChildCount();for(i=0;i<x;i++){var E=C.GetChild(i);if(E){var w=0;var F=E.GetPropertyCount();if(E.GetType()==="ResultSet"){for(w=0;w<F;w++){if(E.GetProperty("Search Per Page"+D)){B.push(E.GetProperty("Search Per Page"+D));++D}else{if(E.GetProperty("Search Sort"+u)){y.push(E.GetProperty("Search Sort"+u));++u}else{if(E.GetProperty("Search Query Lang"+G)){z.push(E.GetProperty("Search Query Lang"+G));++G}else{if(E.GetProperty("Doc Language")){e=E.GetProperty("Doc Language")}}}}}}}}this.SetProperty("GetSearchPrefOutputForSort",y);this.SetProperty("GetSearchPrefOutputForPage",B);this.SetProperty("GetSearchPrefOutputForQueryLang",z);this.SetProperty("GetSearchPrefOutputForDocLang",e);this.SetProperty("showSearchPreferencePopup",true)}});this.AttachEventHandler("OnExecuteSavePreference",function(){var v=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();v.SetProperty("SEARCH_PER_PAGE",this.Get("SEARCH_PER_PAGE"));v.SetProperty("SEARCH_SORT",this.Get("SEARCH_SORT"));v.SetProperty("SEARCH_LANGUAGE",this.Get("SEARCH_LANGUAGE"));v.SetProperty("DOC_LANGUAGE",this.Get("DOC_LANGUAGE"));j=this.Get("SEARCH_PER_PAGE");m=this.Get("SEARCH_SORT");a=this.Get("SEARCH_LANGUAGE");e=this.Get("DOC_LANGUAGE");var t=SiebelApp.S_App.GetService("Invoke Search");if(!t){return}u=t.InvokeMethod("SaveSearchPreference",v)});function s(){this.SetProperty("OpenSearchPanel",true)}};return h}());return"SiebelAppFacade.SearchLookinPresentationModel"})};