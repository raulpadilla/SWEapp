/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.GanttRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.GanttRenderer");define("siebel/ganttrenderer",["order!siebel/phyrenderer","order!3rdParty/team-jq-gantt/Libs/jquery.livequery.min","order!3rdParty/team-jq-gantt/Libs/jquery.timers","order!3rdParty/team-jq-gantt/Libs/platform","order!3rdParty/team-jq-gantt/Libs/date","order!3rdParty/team-jq-gantt/Libs/i18nJs","order!3rdParty/team-jq-gantt/Libs/dateField/jquery.dateField","order!3rdParty/team-jq-gantt/Libs/JST/jquery.JST","order!3rdParty/team-jq-gantt/ganttUtilities","order!3rdParty/team-jq-gantt/ganttDrawer","order!3rdParty/team-jq-gantt/ganttGridEditor","order!3rdParty/team-jq-gantt/ganttMaster","order!siebel/ganttDateBar","order!siebel/ganttLegendBar"],function(){SiebelAppFacade.GanttRenderer=(function(){var h=SiebelJS.Dependency("SiebelApp.Constants"),J=h.get("SWE_GANTT_DRILLDOWN_ID"),O=h.get("SWE_GANTT_ACTIVITY_LABEL"),I=h.get("SWE_GANTT_RENDER_INFO"),T=h.get("SWE_GANTT_STARTMILLIS"),t=h.get("SWE_GANTT_ENDMILLIS"),i=h.get("SWE_GANTT_DRILLDOWN_CLS"),F="ICON_INFO",C=h.get("SWE_GANTT_DRILLDOWN_CLS"),au=h.get("SWE_GANTT_START_DATE"),ar="Column Width",ax="Splitter Position",Z="170",R=30,az="MM/dd/yyyy",v=h.get("SWE_GANTT_ACTIVITY_START_TIME"),ap=h.get("SWE_GANTT_DAYINFO"),M=h.get("SWE_GANTT_TIME_SCALE"),ai=h.get("SWE_GANTT_COLOR"),b=h.get("SWE_GANTT_ACTIVITY_END_TIME"),m=h.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),H=h.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),l=h.get("SWE_GANTT_BOTTOMAXIS"),N=h.get("SWE_GANTT_NOOFHRS"),r=h.get("SWE_GANTT_SPL_DATE"),y=h.get("SWE_GANTT_DAY_HOUR"),n=h.get("SWE_GANTT_DAY_TWOHOUR"),f=h.get("SWE_GANTT_DAY_DAY_FOURHOUR"),al=h.get("SWE_GANTT_DAY_DAYPART"),k=h.get("SWE_GANTT_WEEK_DAY_DAYPART"),U=h.get("SWE_GANTT_MONTH_DOW_DAYPART"),w=h.get("SWE_GANTT_WEEK_DAY"),aw=h.get("SWE_GANTT_MONTH_DAY"),ad=h.get("SWE_GANTT_MONTH_DOW"),an=h.get("SWE_GANTT_DAY_DAY_HALFHOUR"),j=h.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),g=h.get("SWE_GANTT_YEAR_MONTH"),af=h.get("SWE_GANTT_YEAR_WEEK"),d=h.get("SWE_GANTT_MONTH_WEEK"),ac=SiebelApp.S_App.LocaleObject,A="Weekends",ak="TS COLOR",X="Hour Axis Color",Y="MM/dd/yyyy HH:mm:ss",o="MM/DD/YYYY HH:MM:SS";function E(){SiebelAppFacade.GanttRenderer.superclass.constructor.apply(this,arguments);var aN=this.GetPM();aN.AttachPMBinding("IsRefreshNeeded",this.BindData,{scope:this});aN.AttachPMBinding("RevertBooking",L,{scope:this});aN.AttachPMBinding(au,p,{scope:this});aN.AttachPMBinding(M,p,{scope:this});aN.AttachPMBinding("ShowLegend",c,{scope:this});aN.AttachPMBinding("expcolpse",av,{scope:this});var aA=null,aI=null,aL=0,aE=0,aM={},aH=0,aC=0,aG=0,aJ=600,aD=aN.Get("GetFullId"),aF=aN.Get("CustCtlrName"),aK=0,aB=1;aN.SetProperty("InEvent",false);this.GetAppletId=function(){return aD};this.GetCustCtrlName=function(){return aF};this.getGanttLegendBar=function(){return aI};this.setGanttLegendBar=function(aO){aI=aO};this.getRowsPerPage=function(){return aE};this.setRowsPerPage=function(aO){aE=aO};this.getTotalPages=function(){return aC};this.setTotalPages=function(aO){aC=aO};this.getRemainingRows=function(){return aG};this.setRemainingRows=function(aO){aG=aO};this.getGanttDateBar=function(){return aA};this.setGanttDateBar=function(aO){aA=aO};this.setMapResIndex=function(aO){aM=aO};this.getMapResIndex=function(aO){return aM};this.setResColCount=function(aO){aH=aO};this.getResColCount=function(){return aH};this.setGanttCtrlHeight=function(aO){aJ=aO};this.getGanttCtrlHeight=function(){return aJ};this.setHasWidthbuffer=function(aO){aK=aO};this.getHasWidthbuffer=function(){return aK};this.setFirstLoad=function(aO){aB=aO};this.getFirstLoad=function(){return aB}}SiebelJS.Extend(E,SiebelAppFacade.PhysicalRenderer);E.prototype.ShowUI=function(){var aA,aC=this.GetPM(),aD="",aI,aB,aH,aF,aE=this.getGanttCtrlHeight();SiebelAppFacade.GanttRenderer.superclass.ShowUI.call(this);aI=$("#s_"+this.GetAppletId()+"_div").find("#s_ganttleft");if(aI){aI.hide();aD='<span class="siebui-ganttFilter" ot="span" rn="gearIcon" un="gearIcon"></span>';aC.SetProperty("FilterGantt_CLS",aD)}if(aC.Get("DateBarControl")){aH=$("#"+aC.Get("DateBarControl"));if(aH){this.setGanttDateBar(new SiebelAppFacade.GanttDateBar());this.getGanttDateBar().ShowUI(aC,aH);this.getGanttDateBar().BindEvents();this.getGanttDateBar().setNavigationValues()}}var aG=new GanttMaster();if(aC.Get("LegendControl")){aF=$("#"+aC.Get("LegendControl"));if(aF){this.setGanttLegendBar(new SiebelAppFacade.GanttLegendBar());this.getGanttLegendBar().init(aF,this.GetAppletId()+"_colorcodelegend");this.getGanttLegendBar().createLegends(aC.ExecuteMethod("prepareLegendMap"),aC.Get("ShowLegend"));aE=aE-aF.height()}}$("#s_"+this.GetAppletId()+"_div").find("#s_ganttFilterPane").addClass("siebui-ganttReportPane");aA=$("#"+this.GetCustCtrlName()).addClass("siebui-ganttControl");aA.css({height:parseInt(aE,10)});aG.init(aA,aC.Get(I));this.setRowsPerPage(ao.call(this,aC));$(".siebui-splitBox3").addClass("siebui-VScroll");B.call(this)};E.prototype.BindData=function(){SiebelAppFacade.GanttRenderer.superclass.BindData.call(this);var aY=this.GetPM(),aJ,aM,aR=this.getRowsPerPage(),a3=0,aL=0,aU=0,aE=0,a1={},aA="",aZ="",aK=1,aG=aY.Get("PanesToRefresh"),aI=0,aT=0,aO=aY.Get("GetControls"),aC=aO.GoToResource,aP=0,aF="",aH="",aS=aY.Get("Scale_factor")*100*aY.Get("TotalHPages"),a4=aY.Get("Color Display By"),aQ=aY.Get("Status Abbreviations"),a2,aV=this.GetPM().Get("RESOURCEHEADER").length,aX;if(aQ&&a4){a2=aQ.substring(aQ.indexOf(a4)+a4.length+1,aQ.indexOf(";",aQ.indexOf(a4)))}else{if(aQ){a2=aQ.substring(aQ.indexOf(",")+1,aQ.length-1)}else{a2="GS"}}var aN={RJoinFld:aY.Get("RJoinFld"),RParentFld:aY.Get("RParentFld"),Statabb:a2,EventColor:aY.Get("Booking Colors"),TST:aY.Get("TST"),EventDefaultColor:aY.Get("EventDefaultColor"),RHeaderMap:aY.Get("RESOURCEHEADER"),configSpacePatternFlag:aY.Get("ConfigSpacePattern")};if(aY.Get("IsTotalHPagesChanged")==="Y"){aY.SetProperty("IsTotalHPagesChanged","N");$("#TGrid").width(aS.toString()+"%");$("#UGrid").width(aS.toString()+"%")}aJ=aY.Get("RecordSet");aM=aJ?aJ.length:0;aR=aM>aR?aR:aM;a3=parseInt(aM/aR,10);aP=aM-a3*aR;this.setTotalPages(a3);this.setRemainingRows(aP);aI=aG&1;aG>>=1;aT=aG&1;while(aG){aG>>=1;aK=aK+1;if(aG&1){switch(aK){case 2:if(aT){$("#HGrid").empty().append(ag.call(this));aq.call(this,aM);SiebelJS.Log("RGrid Dynamic");aL=0;$("#RGrid").empty();while(aL<a3){aU=aL*aR;aE=aU+aR;aY.ExecuteMethod("prepareRespage",aU,aE);aH=aH+q.call(this,aU,aE,"page"+aL.toString(),aJ,aN);aL=aL+1}if(aP>0){aU=a3*aR;aE=aU+aP;aY.ExecuteMethod("prepareRespage",aU,aE);aH=aH+q.call(this,aU,aE,"page"+aL.toString(),aJ,aN)}$("#RGrid").append(aH)}break;case 3:if(aI){}if(aT){SiebelJS.Log("TGrid Dynamic");$("#TGrid").empty().append(this.renderTimeScale())}break;case 4:if(aI){}if(aT){aL=0;SiebelJS.Log("UGrid Dynamic");$("#UGrid").empty();while(aL<a3){aU=aL*aR;aE=aU+aR;aY.prepareUtillpage(aU,aE);aF=aF+s.call(this,aU,aE,"page"+aL.toString(),aJ,aN);aL=aL+1}if(aP>0){aU=a3*aR;aE=aU+aP;aY.prepareUtillpage(aU,aE);aF=aF+s.call(this,aU,aE,"page"+aL.toString(),aJ,aN)
}$("#UGrid").append(aF)}break}}}aX=parseInt($(".siebui-gdfColHeader").css("max-width"))*aV;$(".siebui-splitBox0").width(aX);$(".siebui-splitBox1").width(aX);if(aC&&(aY.Get("PanesToRefresh")&(1<<2))){G.call(this,aC)}aj.call(this);if(aY.Get("InEvent")===false){this.SetHScrollPos()}else{aY.SetProperty("InEvent",false)}B.call(this);var aW=aY.Get("Resource Id");var a0=aY.Get("ResIDtoIndex");var aB=a0?a0[aW]:0;var aD=aJ?aJ[aB]:0;if(aD){if(this.getFirstLoad()===1){ah.call(this,aD["Resource Name"])}W.call(this)}this.setFirstLoad(0);aN=null;aO=null};E.prototype.BindEvents=function(){SiebelAppFacade.GanttRenderer.superclass.BindEvents.call(this);var aG=this,aL=aG.GetPM(),aJ,aD,aN,aQ,aI,aC,aR,aF,aH=0,aS=0,aB=null,aM,aA,aP,aK,aO;var aE=$("#s_"+this.GetAppletId()+"_div");aJ=aL.Get("GetControls");aD=aJ["Display Toggle"];if(aD){aN=aD.GetInputName();aE.find("[Name="+aN+"]").bind("autocompleteclose",{ctx:this},function(aT){aH=0;aH=aH|(1<<1);aH=aH|(1<<4);aL.SetProperty("PanesToRefresh",aH);aL.SetProperty("Display Toggle",$(this).val());aL.ExecuteMethod("InvokeServer")})}aQ=aJ["Color Display Toggle"];if(aQ){aI=aQ.GetInputName();aE.find("[Name="+aI+"]").bind("autocompleteclose",{ctx:this},function(aT){aO=SiebelApp.S_App.NewPropertySet();aL.SetProperty("Color Display Toggle",$(this).val());aO.SetProperty("Color Display Toggle",$(this).val());aL.ExecuteMethod("saveControlValues",aO);ab.call(aG,$(this).val())})}aC=aJ.GoToResource;if(aC){aR=aC.GetInputName();aF=aE.find("[Name="+aR+"]");aF.autocomplete({source:[]}).autocomplete("option","position",{my:"center top",at:"center bottom",of:$(aF),collision:"flip flip"}).bind("autocompleteclose",{ctx:this},function(aT){if(aT.srcElement){aM=aT.srcElement.innerHTML}else{aM=aT.target.value}am.call(aT.data.ctx,true);if(ah.call(aT.data.ctx,aM)){if(aT.srcElement){aT.srcElement.innerHTML=""}else{aT.target.value=""}}}).bind("keypress",{ctx:this},function(aT){if(aT.which===$.ui.keyCode.ENTER){$(this).autocomplete("close")}})}aE.find(".siebui-option-bar").delegate("button","click",{ctx:this},u);aE.bind("mouseenter",{ctx:this},function(aT){aA=$("#_sweview")[0].title;aP=aT.currentTarget.title;aT.currentTarget.title="";$("#_sweview")[0].title=""});aE.bind("mouseleave",{ctx:this},function(aT){aT.currentTarget.title=aP;$("#_sweview")[0].title=aA});aE.on("mouseover",(".siebui-showResTooltip"),{ctx:this,attr:"Id",Input:"ResId",Pane:"Pane 0"},z).on("mouseover",(".siebui-taskBox"),{ctx:this},P).on("mouseover",(".siebui-showTSTooltip"),{ctx:this,attr:"DateVal",Input:"DateVal",Pane:"Pane 1"},z).on("mouseover",(".siebui-taskBox.Rsizable"),{ctx:this},aa).on("click",(".siebui-expcoll"),{ctx:this},V).on("click",(".siebui-ganttDrilldown"),{ctx:this},aG.drillDownHandler).on("click",(".siebui-taskEditUtility"),{ctx:this},W).on("click",(".siebui-taskEditRow"),{ctx:this},W).on("dblclick",(".siebui-taskEditUtility"),{ctx:this},a).on("dblclick",(".siebui-taskBox"),{ctx:this},at).on("mousedown",(".siebui-taskBox.Dragpble"),{ctx:this},S).on("mouseup",(".siebui-splitBox3"),{ctx:this},D).on("click",(".siebui-ganttFilter"),{ctx:this},K).on("mousedown",(".siebui-vSplitBar"),{ctx:this},ay).on("mouseover",(".siebui-gdfColHeader"),{ctx:this},ae);aE.find(".siebui-splitBox3").bind("scroll",{ctx:this},function(aT){$(".siebui-splitBox2").scrollLeft($(".siebui-splitBox3").scrollLeft());if(aL.Get("InEvent")===false){if(aS<$(".siebui-splitBox3").scrollLeft()){if($(this)[0].scrollWidth<($(this)[0].scrollLeft+$(this)[0].offsetWidth+5)){aL.SetProperty("NotifyTSButtonClk","TRUE");aB=new Date(aL.Get(au));aB.setDate(aB.getDate()+aL.ExecuteMethod("getTimeScaleUnits"));aL.ExecuteMethod("RefreshGanttChart",aB.format(az))}}else{if(aS>$(".siebui-splitBox3").scrollLeft()){if($(this)[0].scrollLeft===0&&aL.Get("TotalHPages")>1){aL.SetProperty("NotifyTSButtonClk","TRUE");aB=new Date(aL.Get(au));aB.setDate(aB.getDate()-aL.ExecuteMethod("getTimeScaleUnits"));aL.ExecuteMethod("RefreshGanttChart",aB.format(az))}}}}aS=$(".siebui-splitBox3").scrollLeft()});aE.find(".siebui-VScroll").bind("scroll",{ctx:this},function(aT){$(".siebui-resTable").scrollTop($(".siebui-VScroll").scrollTop())});aE=null;aJ=null};E.prototype.EndLife=function(){ganttDateBar=null;ganttLegendBar=null;m_mapResIndex=null;SiebelAppFacade.GanttRenderer.superclass.EndLife.call(this)};function G(aG){var aD=this.GetPM(),aC=aG.GetInputName(),aI=$("#s_"+this.GetAppletId()+"_div").find("[Name="+aC+"]"),aB="",aJ=[],aE={},aA=aD.Get("RecordSet"),aF=0,aH="";aF=aA?aA.length:0;for(var aK=0;aK<aF;aK=aK+1){aB=aA[aK]["Resource Name"];aE[aB.toLowerCase()]=aK;aJ.push(aB)}this.setMapResIndex(aE);if(aI.length!==0){aI.autocomplete("option","source",aJ)}}function ah(aD){var aA=this.GetPM(),aC=$(".siebui-taskEditRow").height(),aB=0,aF,aE=this.getMapResIndex();if(aD){aB=aE[aD.toLowerCase()];if(aB>=0){aF=parseInt(aB*aC,10);$(".siebui-splitBox3").scrollTop(aF);$("#"+aA.Get("RecordSet")[aB][aA.Get("RJoinFld")]).click();return true}}else{}return false}function am(aE){var aJ=this.GetPM(),aB,aC,aI,aG,aA=aJ.Get("RecordSet"),aD=aA.length;var aH=aJ.Get("RJoinFld");for(var aF=0;aF<aD;aF=aF+1){aC=$("#"+aA[aF][aH]).attr("pid");if(aC===""||aC==="ORPHANED"){aB=$("#"+aA[aF][aH]).attr("id");aI=$("#"+aB).children()[0];aG=$(aI.lastChild).children()[0];if(aE){if($(aG).hasClass("ui-icon-triangle-1-e")){$(aG).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se");$('*[pid="'+aB+'"]').slideToggle(30)}}else{if($(aG).hasClass("ui-icon-triangle-1-se")){$(aG).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e");$('*[pid="'+aB+'"]').slideToggle(30)}}}}}function K(aD){var aC=aD.data.ctx,aA=aC.GetPM(),aB;aB=$("#s_"+aC.GetAppletId()+"_div").find("#s_ganttleft");aB.toggle();aj.call(aC)}function u(aB){var aE=aB.data.ctx.GetPM(),aK=aE.Get("GetControls"),aJ=aE.Get("TST"),aF=aE.Get("datePaddingMap"),aD=0,aL=aB.currentTarget.id.replace("_Ctrl",""),aC="",aI=0,aH=aE.Get("TotalHPages"),aG=aH;aI=aI|(1<<1);aI=aI|(1<<2);aI=aI|(1<<3);aI=aI|(1<<4);aE.SetProperty("PanesToRefresh",aI);for(var aA in aK){if(aK[aA].GetInputName()===aL){aC=aK[aA].GetName();aE.SetProperty("NotifyTSButtonClk","TRUE");if(aJ!=aC){aE.SetProperty("TST",aC);aE.SetProperty("InEvent",false);if(aF[aC]){aD=aF[aC]}aG=1+(aD*2);if(aG!==aH){aE.SetProperty("TotalHPages",aG);aE.SetProperty("IsTotalHPagesChanged","Y")}if(aF[aC]){aD=aF[aC]}aG=1+(aD*2);if(aG!==aH){aE.SetProperty("TotalHPages",aG);aE.SetProperty("IsTotalHPagesChanged","Y")}B.call(aB.data.ctx);aB.data.ctx.getGanttDateBar().setNavigationValues();break}}}aK=null}function ab(aJ){var aH,aD=this.GetPM(),aS,aI,aP,aA,aR,aF,aE,aO,aK,aB,aL,aG,aM,aC;aS=aD.Get("LIC Field")[aJ];aI=aD.Get("Status Abbreviations");aP=aI.substring(aI.indexOf(aS)+aS.length+1,aI.indexOf(";",aI.indexOf(aS)));aA=aD.Get("Booking Colors");aR=aD.Get("RecordSet");aC=aR?aR.length:0;for(var aN=0;aN<aC;aN=aN+1){var aQ=aR[aN][aD.Get("RJoinFld")];aH=aD.ExecuteMethod("gettaskSeqEvents",aQ);if(aH){for(aM=0;aM<aH.length;aM++){aG=$('*[taskId="'+aH[aM]+'"]').find(".siebui-layout");aO=aD.ExecuteMethod("getEvent",aQ,aH[aM]);
aK=aO[aP];aB=aP+"_"+aK;aL=aA[aB];if(!aL){aL=aD.Get("EventDefaultColor")}aG.css({"background-color":aL})}}}aD.SetProperty("Color Display By",aS);this.getGanttLegendBar().createLegends(aD.ExecuteMethod("prepareLegendMap"),aD.Get("ShowLegend"))}function Q(aC,aD){var aB=aC.getMinutes(),aA;aA=(parseInt(((aB+aD/2)/aD),10)*aD);aC=new Date(aC.setMinutes(aA,0));return aC}function L(){var aM=this.GetPM(),aO=aM.Get("RevertDate"),aE=aM.Get("RevertInfo"),aH,aF,aC,aI,aK,aL,aN=aO?aO.FROMRESINDEX:-1,aB=aO?aO.TORESINDEX:-1,aA=aM.Get("Color Display By"),aJ=aM.Get("Status Abbreviations"),aG;if(aJ&&aA){aG=aJ.substring(aJ.indexOf(aA)+aA.length+1,aJ.indexOf(";",aJ.indexOf(aA)))}var aD={Statabb:aG,EventColor:aM.Get("Booking Colors"),TST:aM.Get("TST"),configSpacePatternFlag:aM.Get("ConfigSpacePattern"),EventDefaultColor:aM.Get("EventDefaultColor")};if(aN&&aN!==-1){aK="";$("#UGrid").find("#"+aN.toString()+" div.siebui-eventContainer").remove();aL=aM.Get("RecordSet")[aN].EVENTS;aK='<div class="siebui-eventContainer">'+this.preparerowtasks(aL,aN,aD)+"</div></div>";$("#UGrid").find("#"+aN.toString()).append(aK)}if(aB&&aB!==-1){aK="";$("#UGrid").find("#"+aB.toString()+" div.siebui-eventContainer").remove();aL=aM.Get("RecordSet")[aB].EVENTS;aK='<div class="siebui-eventContainer">'+this.preparerowtasks(aL,aB,aD)+"</div></div>";$("#UGrid").find("#"+aB.toString()).append(aK)}aM.SetProperty("RevertDate","");aD=null}function e(aA){var aB=aA+'<div id="gantEditorTemplates" class="siebui-gantEditorTemplates">'+ag.call(this)+"</div>";return aB}function ag(){var aI=this.GetPM().Get("RESOURCEHEADER"),aE=aI.length,aA=parseFloat(100/aE,10),aC='<span class="siebui-ganttFilter" ot="span" rn="gearIcon" un="gearIcon"></span>',aB='<div class="siebui-gdfHeaderRow">',aG=this.GetPM().Get(ar),aH="";this.setResColCount(aE);if(aG){aH=utils.TokenizeString(aG,":")}for(var aD=0,aF="";aD<aE;aD++){aF=aF+"<div ";if(aH!==""){aF=aF+'style = "width:'+aH[aD]+'px;"'}if(aD===aE-1){aF=aF+' class="siebui-gdfColHeader gdfResizable gdfied siebui-lastColumn" id="siebui-gdfColHeader'+aD+'" data-idd-name="'+aI[aD].IDD+'" ColNum ="'+aD+'"><div class = "siebui-headerData"ot = "span" rn = "'+aI[aD].NM+'" un = "'+aI[aD].NM+'">'+aI[aD].NM+"</div></div>"}else{aF=aF+' class="siebui-gdfColHeader gdfResizable gdfied" id="siebui-gdfColHeader'+aD+'" data-idd-name="'+aI[aD].IDD+'" ColNum ="'+aD+'"><div class = "siebui-headerData"ot = "span" rn = "'+aI[aD].NM+'" un = "'+aI[aD].NM+'">'+aI[aD].NM+"</div></div>"}}aB=aB+aF+"</div></div>";return aC+aB}function q(aF,aD,aG,aH,aL){var aU=this.GetPM(),aM=aL.RHeaderMap,aR=aM.length,aO=parseFloat(100/aR,10),aN=this.getRowsPerPage(),aJ=aH?aH.length:0,aK=aJ>aN?aN:aJ,aC="",aB="",aQ=aU.Get(ar),aI="";appletId=this.GetAppletId(),fld=aL.RJoinFld,parentfld=aL.RParentFld,Icons="Icons";if(aQ){aI=utils.TokenizeString(aQ,":")}for(var aS=aF,aA="";aS<aD;aS=aS+1){aA=aA+'<div  class="siebui-gdfRow siebui-gdfRowRes siebui-taskEditRow row'+aS.toString()+""+aH[aS].STCLS+'"  index="'+aS.toString()+'"  taskId="'+aH[aS][fld]+'"    pid="'+aH[aS][parentfld]+'"  id="'+aH[aS][fld]+'">';for(var aT=0,aE="";aT<aR;aT++){var aP=aM[aT].DDFLD?C:"";if(aT===0){aE=aE+'<div class="siebui-gdfCell siebui-ResCol'+appletId+aT+'" ';if(aI!==""){aE=aE+'style = "width:'+aI[aT]+'px;"'}aE=aE+'> <div class = "siebui-defaultIndent" style=padding-left:'+aH[aS].LEVEL*5+"px;>"+aH[aS][Icons]+'<div class="'+aH[aS].CLS+'" taskId = "'+aH[aS][fld]+'"></div><a class="siebui-showResTooltip '+aP+'" data-drilldown-type="RGrid" data-drilldown-id="'+aH[aS][aM[aT].DDFLD]+'" ot = "a" rn = "'+aH[aS][aM[aT].FLD]+'" un = "'+aH[aS][aM[aT].FLD]+'">'+aH[aS][aM[aT].FLD]+"</a></div></div>"}else{if(aT===aR-1){aE=aE+'<div class="siebui-gdfCell siebui-lastColumn siebui-ResCol'+appletId+aT+'" ';if(aI!==""){aE=aE+'" style = "width:'+aI[aT]+'px;"'}aE=aE+'><div class="siebui-resIndent siebui-defaultIndent"><a class = "siebui-showResTooltip '+aP+'"    data-drilldown-type="RGrid" data-drilldown-id="'+aH[aS][aM[aT].DDFLD]+'" ot = "a" rn = "'+aH[aS][aM[aT].FLD]+'" un = "'+aH[aS][aM[aT].FLD]+'">'+aH[aS][aM[aT].FLD]+"</a></div></div>"}else{aE=aE+'<div class="siebui-gdfCell siebui-ResCol'+appletId+aT+'" ';if(aI!==""){aE=aE+'" style = "width:'+aI[aT]+'px;"'}aE=aE+'><div class="siebui-resIndent siebui-defaultIndent"><a class = "siebui-showResTooltip '+aP+'"    data-drilldown-type="RGrid" data-drilldown-id="'+aH[aS][aM[aT].DDFLD]+'" ot = "a" rn = "'+aH[aS][aM[aT].FLD]+'" un = "'+aH[aS][aM[aT].FLD]+'">'+aH[aS][aM[aT].FLD]+"</a></div></div>"}}}aA=aA+aE+"</div>"}aB=aB+aA+"</div>";return aB}function s(aB,aF,aC,aA,aH){var aD='<div class="'+aC+'">';fld=aH.RJoinFld,parentFld=aH.RParentFld,ResPaneRefresh=((this.GetPM().Get("PanesToRefresh")&(1<<2))===0);for(var aG=aB,aI="";aG<aF;aG=aG+1){var aE=aG.toString(),aJ=(ResPaneRefresh&&aA[aG][parentFld]!=="ORPHANED")?$("#"+aA[aG][fld]).css("display"):"block",aI=aI+'<div  style="display:'+aJ+'" class="siebui-gdfRow siebui-taskEditUtility row'+aE+'"  pid="'+aA[aG][parentFld]+'"   taskId="'+aA[aG][fld]+'"  id="'+aG.toString()+'"><div class="siebui-eventContainer">'+this.preparerowtasks(aA[aG].EVENTS,aG,aH)+"</div></div>"}aD=aD+aI+"</div>";return aD}E.prototype.preparerowtasks=function(aQ,aE,aJ){var aN="",aA=aJ.EventColor,aS=aJ.Statabb,aG=aJ.configSpacePatternFlag,aK,aB,aM,aO,aH,aC,aI,aR,aP,aF=aJ.TST,aD=false,aL="siebui-layout";if(aF==="64"){aD=true;aL+=" siebui-taskBoxMonthDay"}if(aQ){for(aO in aQ){aP=aQ[aO];if(aQ.hasOwnProperty(aO)){aK=aP[aS];aB=aS+"_"+aK;if(aP.BT&&(aP.BT==="Out of Order"||aP.BT==="Unavailable Instance")){aB="GS_"+aP.BT}if(aA){aM=aA[aB]}if(!aM){aM=aJ.EventDefaultColor}aH=aQ[aO][O];if((aP.OLPCNT&&aP.OLPCNT>2)||aD||!aH){aH="";if(aP.Icon){aP.Icon=""}}aC=aP.DDID;if(!aC){aC="";aI=""}else{aI=i}aR=100-(aQ[aO]["SW"]?parseInt(aQ[aO]["SW"],10):0)-(aQ[aO]["TW"]?parseInt(aQ[aO]["TW"],10):0)-5;aN=aN+'<div class="siebui-taskBox '+aQ[aO]["CLS"]+'" taskId='+aQ[aO]["ID"]+"  id= "+aE.toString()+" style=width:"+aQ[aO]["width"]+"%;height:"+aQ[aO]["height"]+"px;left:"+aQ[aO]["left"]+"%;margin-top:"+aQ[aO]["top"]+'px; ot = "div" rn = "event-'+aQ[aO]["ID"]+'" un = "event-'+aQ[aO]["ID"]+'"><div class="'+aL+'" style=background-color:'+aM+";>";if(aQ[aO]["SW"]){aN=aN+'<div class = "siebui-turnTime siebui-setupTime" style = width:'+aQ[aO]["SW"]+"%;></div>"}if(aQ[aO]["TW"]){aN=aN+'<div class = "siebui-turnTime siebui-teardownTime" style = width:'+aQ[aO]["TW"]+"%;></div>"}if(aG==="Y"&&aQ[aO]["CFST"]&&aQ[aO]["CFST"]==="Y"){aN=aN+'<div class = "siebui-configSpacePattern">'}aN=aN+'<span class="siebui-taskStatus" style = width:'+aR+"%; status="+aQ[aO]["GS"]+">"+this.createIconInfo(aQ[aO])+'<a class="siebui-activityLabel '+aI+'" data-drilldown-type= "UGrid" data-drilldown-id="'+aC+'" ot = "a" rn = "'+aH+'" un = "'+aH+'">'+aH+"</a></span>";aN=aN+"</div></div>";if(aG==="Y"&&aQ[aO]["CFST"]&&aQ[aO]["CFST"]==="Y"){aN=aN+"</div>"}}}}return aN};function V(aB){var aA=$(this).closest(".siebui-gdfRow").attr("taskid");if(aA!==""&&aA!="ORPHANED"){$('*[pid="'+aA+'"]').slideToggle(30)}if($(this).hasClass("ui-icon-triangle-1-e")){$(this).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se")
}else{$(this).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e")}}function z(aD){if(!($(this).attr("aria-label"))){var aB=aD.data.ctx.GetPM(),aG="",aF="",aA,aC="",aE=SiebelApp.S_App.NewPropertySet();if(aD.data.attr==="Id"){aC=$(this).closest(".siebui-taskEditRow").attr("Id")}else{if(aD.data.attr==="DateVal"){aC=$(this).attr("DateVal")}}if(aC){aE.SetProperty(aD.data.Input,aC);aE.SetProperty("Pane",aD.data.Pane);aB.ExecuteMethod("getTooltip",aE);aF=aB.Get("tooltipMap");if(aF){aA=aF.EnumProperties(true);while(aA){if(aG!==""){aG=aG+"\n"+String(aF.GetProperty(aA))}else{aG=String(aF.GetProperty(aA))}aA=aF.EnumProperties(false)}}$(this).attr("aria-label",aG);$(this).attr("title",aG)}}}function P(aC){if(!($(this).attr("aria-label"))){var aE=aC.data.ctx.GetPM(),aI="",aG,aH="",aF,aB=SiebelApp.S_App.NewPropertySet(),aD=$(this).attr("taskId"),aA=aE.Get("RecordSet")[$(this).closest(".siebui-gdfRow").attr("id")][aE.Get("RJoinFld")];if(aD&&aA){aH=aE.ExecuteMethod("getEvent",aA,aD);if(aH){if(aH.FI){aB.SetProperty("FunId",aH.FI)}else{aB.SetProperty("ResourceId",aA)}aB.SetProperty("BookingId",aD);aB.SetProperty("Pane","Pane 2");aE.ExecuteMethod("getTooltip",aB);aG=aE.Get("tooltipMap");if(aG){aF=aG.EnumProperties(true);while(aF){if(aI!==""){aI=aI+"\n"+String(aG.GetProperty(aF))}else{aI=String(aG.GetProperty(aF))}aF=aG.EnumProperties(false)}}}$(this).attr("aria-label",aI);$(this).attr("title",aI)}}}function aa(aE){var aD=aE.data.ctx,aA=0,aB=aD.GetPM(),aF=aE.currentTarget.offsetLeft;if(aB.ExecuteMethod("CanExtendShrinkEvents")){var aC,aG=aB.Get("fx")*aB.Get("Round Minutes Events")*60000;if(!aG){aG=10}$("#s_"+aD.GetAppletId()+"_div").find(".siebui-taskBox.Rsizable").resizable({containment:$("#s_"+aD.GetAppletId()+"_div").find("#UGrid"),handles:"e,w",minWidth:aG,start:function(aH,aI){},stop:function(aV,aQ){var aJ,aR,aU,aI,aK=null,aY,aX,aS=null,aW,aM,aN,aP,aH,aT,aL,aO={};aM=$(this).closest("div.siebui-gdfRow").attr("Id");aT=aB.Get("RecordSet")[aM][aB.Get("RESOURCEHEADER")[0].FLD];aM=aB.Get("RecordSet")[aM][aB.Get("RJoinFld")];aN=$(this).attr("taskId");aP=aB.ExecuteMethod("getEvent",aM,aN);aH=aP.FI;aJ=aQ.position.left;aC=aQ.originalPosition.left;if(parseInt(aJ,10)!==parseInt(aC,10)){if(aB.Get("EndTime")){aK=aD.calcNonContiguousTime(aJ)}else{if(aB.Get("fx")!==0){aK=Math.round(aB.Get("startMillis")+(aJ/aB.Get("fx")))}}aY=new Date(aK);aX=new Date(aP.ET);aY=Q(aY,aB.Get("Round Minutes Events"))}else{aY=new Date(aP.ST);aK=aY.getTime();aR=aQ.size.width;aU=aJ*1+aR*1;if(aB.Get("EndTime")){aI=aD.calcNonContiguousTime(aU)}else{if(aB.Get("fx")!==0){aS=Math.round(aR/aB.Get("fx"))}aI=aK+aS}aX=new Date(aI);aX=Q(aX,aB.Get("Round Minutes Events"))}aI=aX.format("HH:mm:ss");aK=aY.format("HH:mm:ss");aL=$(this).closest("div.siebui-taskEditUtility");aO.FROMRESINDEX=$(aL).attr("id");aB.SetProperty("RevertDate",aO);aW=SiebelApp.S_App.NewPropertySet();aW.SetProperty("Resource Id",aM);aW.SetProperty("Resource",aT);aW.SetProperty("Function Id",aH);aW.SetProperty("booking Id",aN);aW.SetProperty("Start Date",aY.format("MM/dd/yyyy"));aW.SetProperty("Start Time",aK);aW.SetProperty("End Time",aI);aW.SetProperty("End Date",aX.format("MM/dd/yyyy"));aW.SetProperty("End DTTM",aX.format("MM/dd/yyyy HH:mm:ss"));aW.SetProperty("Start DTTM",aY.format("MM/dd/yyyy HH:mm:ss"));aW.SetProperty("operation","ExtendShrink");aA=0;aA=aA|(1<<1);aA=aA|(1<<4);aW.SetProperty("PanesToRefresh",aA);aB.SetProperty("PanesToRefresh",aA);aB.SetProperty("InEvent",true);aB.ExecuteMethod("InvokeOperation",aW)}})}}E.prototype.drillDownHandler=function(aA){var aG=aA.data.ctx,aD=aG.GetPM(),aK=$(this).attr("data-drilldown-type"),aF=null,aM=null,aP,aH,aO,aB,aE,aI;switch(aK){case ("UGrid"):aP=aD.Get("Activity_DDInfo");if(aP){aF=aP["Item Drilldown Name"];aM=$(this).attr("data-drilldown-id")}aD.ExecuteMethod("CustomDrillDown",aG.GetDrilldownPropSet(this,aF,aM));break;case ("RGrid"):aO=$("#s_"+aG.GetAppletId()+"_div").find(".siebui-gdfColHeader").eq($(this).parent().parent().index());aF=aO.attr("data-idd-name");aM=$(this).attr("data-drilldown-id");aD.ExecuteMethod("CustomDrillDown",aG.GetDrilldownPropSet(this,aF,aM));break;case ("BAxis"):aE=aD.Get("TSDDInfo");if(aE){aF=aE["Item Drilldown Name"];aM=aE["Item Drilldown Field"];aD.ExecuteMethod("CustomDrillDown",aG.GetDrilldownPropSet(this,aF,aM))}break;default:var aL=aD.Get("DateDrilldown"),aJ=aD.Get("TST")+":",aN;if(aL){aN=aL.substring(aL.indexOf(aJ)+aJ.length,aL.indexOf(";",aL.indexOf(aJ)))}if(aN){var aC=$(this).attr("dateval");aD.ExecuteMethod("RefreshGanttChart",aC,aN);aG.getGanttDateBar().setNavigationValues()}break}};E.prototype.GetDrilldownPropSet=function(aB,aA,aC){if(aA&&aC){propset=CCFMiscUtil_CreatePropSet();propset.SetProperty("DrillDownName",aA);propset.SetProperty("DestFieldValue",aC);return propset}};function W(aE){var aD=aE?aE.data.ctx:this,aB=aD.GetPM(),aG=aB.Get("Resource Id"),aF=aB.Get("ResIDtoIndex")[aG];if(aE){var aA=$(this).attr("taskid"),aC=aB.Get("ResIDtoIndex")[aA];$(".row"+aF).removeClass("siebui-rowSelected");$(".row"+aC).addClass("siebui-rowSelected");aB.SetProperty("Resource Id",aA)}else{if(aF!=="undefined"){$(".row"+aF).addClass("siebui-rowSelected")}}}function a(aA){var aJ=aA.data.ctx,aE=aJ.GetPM(),aN=$(this).scrollLeft()+aA.clientX-$(this).offset().left,aM=$(aA.target).closest(".siebui-gdfRow").attr("id"),aF="",aK,aL,aH,aD,aC,aB,aO,aG,aP,aI=0;if(aM){aF=aE.Get("RecordSet")[aM][aE.Get("RESOURCEHEADER")[0].FLD];aP=aE.Get("RecordSet")[aM][aE.Get("RJoinFld")]}if(aE.Get("EndTime")){aK=new Date(aJ.calcNonContiguousTime(aN))}else{aK=((aN*(aE.Get(t)-aE.Get(T)))/$("#UGrid").width())+aE.Get(T)}aL=new Date(aK);aH=aL.getMinutes();aD=(parseInt(((aH+7.5)/15),10)*15);aL=new Date(aL.setMinutes(aD,0));aC=aL.format("MM/dd/yyyy");aB=aL.format("HH:mm:ss");aO=aL.format("MM/dd/yyyy HH:mm:ss");aG=SiebelApp.S_App.NewPropertySet();aG.SetProperty("Resource Id",aP);aG.SetProperty("Resource",aF);aG.SetProperty("Start Date",aC);aG.SetProperty("Start Time",aB);aG.SetProperty("Start DTTM",aO);aG.SetProperty("operation","Create Task");aI=0;aI=aI|(1<<1);aI=aI|(1<<4);aG.SetProperty("PanesToRefresh",aI);aE.SetProperty("PanesToRefresh",aI);aE.SetProperty("InEvent",true);aE.ExecuteMethod("InvokeOperation",aG)}function S(aB){var aH=aB.data.ctx,aF=aH.GetPM(),aJ=$("#s_"+aF.Get("GetFullId")+"_div").find(".siebui-splitBox3"),aG=aJ.offset(),aD=aG.top+aJ.height(),aI=null,aK=null,aA=10,aC=100,aE=20;$(this).draggable({containment:$("#s_"+aF.Get("GetFullId")+"_div").find("#UGrid"),zIndex:9999,drag:function(aL,aM){var aN=false;if((aL.pageY-aG.top)<=aA){aN=true;clearInterval(aI);clearInterval(aK);aI=setInterval(function(){aJ.scrollTop(aJ.scrollTop()-aE)},aC)}if(aL.pageY>=(aD-aA)){aN=true;clearInterval(aI);clearInterval(aK);aK=setInterval(function(){aJ.scrollTop(aJ.scrollTop()+aE)},aC)}if(!aN){clearInterval(aI);clearInterval(aK)}},start:function(aN,aO){var aM=$(this).closest("div.siebui-gdfRow").attr("taskId"),aL=$(this).closest("div.siebui-gdfRow").attr("Id");$(this).draggable("option","sResId",aM);$(this).draggable("option","resindex",aL);
$(this).draggable().css({"margin-top":0});aF.SetProperty("InEvent",true)}})}function at(aB){aB.stopPropagation();if($(this).hasClass("Dragpble")){var aH=aB.data.ctx,aE=aH.GetPM(),aN=$(this).attr("taskId"),aJ=$(aB.target).closest(".siebui-gdfRow").attr("id"),aL=aJ,aI=0;if(aN){if(aJ){aJ=aE.Get("RecordSet")[aJ][aE.Get("RJoinFld")];var aM=aE.ExecuteMethod("getEvent",aJ,aN);var aG=aM.FI;var aF=aM.GS;var aC=aM.FSTP;var aD=aE.Get("RecordSet")[aL][aE.Get("RESOURCEHEADER")[0].FLD];var aA=SiebelApp.S_App.NewPropertySet();var aK=SiebelApp.S_App.NewPropertySet();aA.SetProperty("booking Id",aN);aA.SetProperty("Function Id",aG);aA.SetProperty("Resource Id",aJ);aA.SetProperty("Resource",aD);aA.SetProperty("Inventory Status",aF);aA.SetProperty("Function Space Type",aC);aA.SetProperty("operation","Show Task Details");aI=0;aI=aI|(1<<1);aI=aI|(1<<4);aA.SetProperty("PanesToRefresh",aI);aE.SetProperty("PanesToRefresh",aI);aE.SetProperty("InEvent",true);aE.ExecuteMethod("InvokeOperation",aA)}}}}function D(aC){var aB=aC.data.ctx,aA=aB.GetPM();$("#s_"+aB.GetAppletId()+"_div").find(".siebui-taskEditUtility").droppable({drop:function(aU,aQ){var aH=null,aI=$(this).attr("Id"),aL=aQ.draggable.attr("taskId"),aS,aK,aV,aY,aJ,aD,aX,aF,aO,aG,aT=aA.Get("RecordSet")[aI][aA.Get("RESOURCEHEADER")[0].FLD],aM=0,aR=aA.Get(T),aP={},aW,aN,aE=$(this).attr("taskid");if(aA.Get("EndTime")){aH=new Date(aB.calcNonContiguousTime(aQ.position.left))}else{aH=new Date(Math.round(((aQ.position.left*(aA.Get(t)-aR))/$("#UGrid").width())+aR))}aS=(parseInt(((aH.getMinutes()+7.5)/15),10)*15);aH=new Date(aH.setMinutes(aS,0));aK=aH.format("MM/dd/yyyy");aV=aH.format("HH:mm:ss");aY=aH.format("MM/dd/yyyy HH:mm:ss");aJ=SiebelApp.S_App.NewPropertySet();aA.SetProperty("InEvent",true);aD=$(aQ.draggable).draggable("option","sResId");aW=$(aQ.draggable).draggable("option","resindex");aX=aA.ExecuteMethod("getEvent",aD,aL);aP.FROMRESINDEX=aW;aP.TORESINDEX=aI;aA.SetProperty("RevertDate",aP);aF=aX.FI;aO=aX.DDID;aG=new Date(aH.getTime()+(new Date(aX.ET).getTime()-new Date(aX.ST).getTime()));aJ.SetProperty("Resource Id",aE);aJ.SetProperty("booking Id",aL);aJ.SetProperty("Resource",aT);aJ.SetProperty("Start Date",aK);aJ.SetProperty("Start Time",aV);aJ.SetProperty("Start DTTM",aY);aJ.SetProperty("End Time",aG.format("HH:mm:ss"));aJ.SetProperty("End DTTM",aG.format("MM/dd/yyyy HH:mm:ss"));aJ.SetProperty("End Date",aG.format("MM/dd/yyyy"));aJ.SetProperty("Function Id",aF);aJ.SetProperty("Quote Id",aO);aJ.SetProperty("Pre Resource Id",aD);aJ.SetProperty("operation","DragnDrop");aM=0;aM=aM|(1<<1);aM=aM|(1<<4);aJ.SetProperty("PanesToRefresh",aM);aA.SetProperty("PanesToRefresh",aM);aA.ExecuteMethod("InvokeOperation",aJ)}})}E.prototype.calcNonContiguousTime=function(aA){var aD=this.GetPM(),aC=aD.Get("PixelsPerUnit"),aF=aD.Get("TDays"),aE=aD.Get("StartTime"),aB=aD.Get("EndTime");absPixels=aC*$("#UGrid").width();if(absPixels){noOfUnits=parseInt(aA/absPixels)}timePixels=aA%absPixels;startDay=aD.Get(T)+noOfUnits*aF;if(absPixels){startTime=parseInt(aD.Get("StartTime")+timePixels/absPixels*aD.Get("AxisDuration"),10)}startDay=startDay+startTime;return parseInt(startDay,10)};E.prototype.createIconInfo=function(aF){var aC="",aB=this.GetPM().Get(I)[F],aA;if(aF.Icon){var aE=aF.Icon.split(",");for(var aD=0;aD<aE.length;aD++){if(aB&&aB[aE[aD]]){aA=aB[aE[aD]];aC=aC+"<span class='"+aA+"'></span>"}}}return aC};function ao(aB){var aC=20,aA=Number(aB.Get("TotalHPages"),10)>0?15:0;return Math.floor((($("#s_"+this.GetAppletId()+"_div").find(".siebui-splitBox1").height()-aA)/aC),10)}function aj(){var aA=0,aB=this.GetPM(),aD=0,aF=$("#"+this.GetCustCtrlName()),aC=$(".siebui-vSplitBar"),aE=21;if(aC.length>0){aA=$("#UGrid").width();aD=aA/(aB.Get(t)-aB.Get(T));aB.SetProperty("MinGanttsize",aA);aB.SetProperty("fx",aD)}}function ay(aC){$.splittify.splitterBar=$(this);var aF=0,aE=SiebelApp.S_App.NewPropertySet(),aD=aC.data.ctx,aB=aD.GetPM(),aA=$("#s_"+aD.GetAppletId()+"_div"),aH,aG=aB.Get("RecordSet")?aB.Get("RecordSet").length:0;$("body").unselectable().bind("mousemove",function(aN){var aP=$.splittify.splitterBar;var aO=aN.pageX-aP.parent().offset().left;var aJ=aP.parent().width();var aK=aJ*0.4;if(aO>0&&aO<aK){aF=aJ;var aM=parseFloat(((aO/aJ)*100),2);var aI=parseFloat(((aO+aP.width())/aJ)*100,2);var aL=parseFloat(((aJ-(aO+aP.width()))/aJ)*100,2);aP.css({left:aM+"%"});aA.find(".siebui-resourceContainer").css({width:aM+"%"});if(aD.getHasWidthbuffer()==1){aA.find(".siebui-splitBox2").css({left:aI+"%",width:(aL-1.2)+"%"})}else{aA.find(".siebui-splitBox2").css({left:aI+"%",width:(aL)+"%"})}aA.find(".siebui-splitBox3").css({left:aI+"%",width:aL+"%"})}}).bind("mouseup",function(aJ){$(this).unbind("mousemove").unbind("mouseup").clearUnselectable();var aI=aF;aj.call(aD);aH=$.splittify.splitterBar.offset().left-$("#"+aD.GetCustCtrlName()).offset().left;aB.SetProperty(ax,aH);aE.SetProperty("splPos",aH);aB.ExecuteMethod("saveUserPref",aE);delete $.splittify.splitterBar})}function aq(aJ){var aE=this.GetPM();var aA=$("#"+this.GetCustCtrlName());var aI=aA.innerWidth();var aF=aE.Get("Splitter Position");var aB=$("#s_"+this.GetAppletId()+"_div");var aK=aB.find(".siebui-vSplitBar");var aC=aK.width();var aG=aB.find(".siebui-gdfCell");if(aF===""){if(aG.length>0){aF=aG.css("width")}else{aF=Z}}var aD=parseFloat(((parseInt(aF,10)/aI)*100),2);var aH=parseFloat((((parseInt(aF,10)+aC)/aI)*100),2);aK.css({left:aD+"%"});if(aJ>this.getRowsPerPage()){aB.find(".siebui-splitBox2").css({left:aH+"%",width:(100-aH-1.2)+"%"});this.setHasWidthbuffer(1)}else{aB.find(".siebui-splitBox2").css({left:aH+"%",width:(100-aH)+"%"});this.setHasWidthbuffer(0)}aB.find(".siebui-splitBox3").css({left:aH+"%",width:(100-aH)+"%"})}function ae(aB){var aI=aB.data.ctx,aF=aI.GetPM(),aA=SiebelApp.S_App.NewPropertySet(),aH=".siebui-ResCol"+aI.GetAppletId()+$(this).attr("ColNum"),aD=$("#s_"+aI.GetAppletId()+"_div"),aC=aB.data.ctx.getResColCount(),aG="",aE=$(".siebui-gdfColHeader").css("min-width"),aJ=$(".siebui-gdfColHeader").css("max-width");$(this).resizable({alsoResize:aH,handles:"e",minWidth:aE,maxWidth:aJ,start:function(aK,aL){},stop:function(aL,aM){$(aH).css("height","");for(var aK=0;aK<aC;aK++){aG=aG+aD.find("#siebui-gdfColHeader"+aK).width()+":"}aF.SetProperty(ar,aG);aA.SetProperty("colWidth",aG);aF.ExecuteMethod("saveUserPref",aA)}})}function x(){$(".siebui-splitBox3").scrollTop(this.GetPM().Get("VScrollPos"))}E.prototype.SetHScrollPos=function(){var aB=this.GetPM(),aA=new Date(aB.Get(au)),aD=String(aB.Get(v)),aC=0;aB.ExecuteMethod("setHoursFrom",aA,aD);aC=(aA.getTime()-aB.Get(T))/(aB.Get(t)-aB.Get(T));aC=aC*aB.Get("MinGanttsize");$(".siebui-splitBox3").scrollLeft(aC)};function p(){if(this.getGanttDateBar()!=null){var aA=this.GetPM();$("#s_"+this.GetAppletId()+"_div").find("#ganttDateLbl").html(aA.ExecuteMethod("getDateRange",""));$("#s_"+this.GetAppletId()+"_div").find("#ganttdatePicker").val(aA.Get(au))}}function c(){var aD=this.GetPM(),aC,aB,aE=aD.Get("ShowLegend"),aF=$("#"+this.GetCustCtrlName()),aA=$("#"+this.GetAppletId()+"_colorcodelegend");
this.getGanttLegendBar().ShowLegends(aE);aC=aF.css("height");aB=aA.css("height");aC=aC?Number(aC.substr(0,aC.length-2)):0;aB=aB?Number(aB.substr(0,aB.length-2)):0;if(aE){aF.css("height",aC-aB)}else{aF.css("height",aC+aB)}}function av(){var aA=this.GetPM(),aB=aA.Get("expcolpse");am.call(this,aB)}function B(){var aB=this.GetPM(),aA=aB.Get("GetControls"),aD=aB.Get("TST"),aC=aA[aD];if(aC){$("#s_"+this.GetAppletId()+"_div").find(".siebui-buttonPressed").removeClass("siebui-buttonPressed");$("#s_"+this.GetAppletId()+"_div").find("#"+aC.GetInputName()+"_Ctrl").addClass("siebui-buttonPressed")}aA=null}E.prototype.renderTimeScale=function(){var aP=this.GetPM(),aL,aA,bE,aT,bu,aF,a4,a3,aE=0,bJ,bm,aB,aW,bI,bB,a5,aJ,bp,bv,bl,bh,a0,aX,bx,aO,a9='<table class = "siebui-ganttTable">',bg='<tr class = "siebui-ganttHead1',bf='<tr class = "siebui-ganttHead2',bc,aG,bw=3600000,aU=aP.Get(l),aY=aU?1:0,bz=aP.Get(ap),aM=aP.Get(r),bb,aI=60,aR="",a2,aK=aP.Get(m),bA=aP.Get("StartTime")/(60*60*1000),a1=aP.Get("EndTime")/(60*60*1000),by=aP.Get("FinalWeekDays"),bq=aP.Get(T),bD=aP.Get(t),a6=aP.Get("UserPrefWDS"),bt,ba=0,bC="",aN,bL,bn,bj,aD,aV,bi=aP.Get("isDispatchBoard");if(aY){bc='<tr class = "siebui-ganttHead3 siebui-threeAxis">';bg+=' siebui-threeAxis">';bf+=' siebui-threeAxis">'}else{bg+=' siebui-twoAxis">';bf+=' siebui-twoAxis">'}switch(Number(aP.Get(M))){case (U):aL=new Date(bq);ba=5*aP.Get("TotalHPages");if(!bz){break}bm=bz.length;while(aL.getTime()<=bD&&aE<ba){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bb=aM[bx];bt=this.IsWeekend(aL);bg+=this.createTimeScaleCell(new Date(bu),"DDD, MMM D",1,0,i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}a2=0;a5='<td colspan =1><table class="siebui-ganttInnerTbl"><tr>';while(a2<bm){aG=(bz[a2].DUR)/3600;aT=(aG/24)*100;a5+=this.createTimeScaleCell(bz[a2].NM.substr(0,1),"",0,aT+"%");a2=a2+1}a5+="</tr></table></td>";bf+=a5;aE++;aL.setDate(aL.getDate()+7)}break;case (aw):var bo,bK,bk=0;aL=new Date(bq);aV=new Date(aL);bo=31*aP.Get("TotalHPages");aE=0;while(aL.getTime()<=bD){if(by&&by.indexOf(aL.getDay())!==-1){bt=this.IsWeekend(aL);bx=aL.format("MM/dd/yyyy");bb=aM[bx];bf+=this.createTimeScaleCell(aL,"D",1,0,i,bb,bt,0,bx);if(aY){bc+=this.createBAxisCell((aU[bx]?aU[bx].FLD1:""),1,i)}aE++;bk++}aV.setDate(aL.getDate()+aP.Get(N));if((aL.getMonth()!=aV.getMonth())||(aE===bo)){bg+=this.createTimeScaleCell(aL,"MMMM",bk);bk=0}aL.setDate(aL.getDate()+aP.Get(N))}if(a6!=""){bg+=this.createTimeScaleCell(aL,"MMMM",bk)}break;case (an):aL=new Date(bq);var be=0;while(aL.getTime()<bD){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bt=this.IsWeekend(aL);aL.setDate(aL.getDate()+1);bp=new Date(bu);if(aL.getTime()<bD){aA=(aL.getTime()-bu)/(bD-bq)*100;aJ=aL.getTime()}else{aA=(bD-bu)/(bD-bq)*100;aJ=bD}bb=aM[bx];if(by.indexOf(new Date(bu).getDay())!==-1){bg+=this.createTimeScaleCell(new Date(bu),"DDDD, MMMM D",0,aA+"%",i,bb,bt);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}}else{continue}aT=(0.5)*bw*100/(bD-bq);aT=aT/aA*100;a5='<td><table class="siebui-ganttInnerTbl"><tr>';while(bp.getTime()<aJ){bn=bp.getHours();bj=bp.getMinutes();bv=bn*aI+bj;bl=aJ-bp.getTime();if(aP.Get(X)){aO=aP.Get(X)[bn]}if(bv%((0.5)*aI)!==0||bl<((0.5)*bw)){if(bv%((0.5)*aI)!==0){aX=((0.5)*aI)-(bv%((0.5)*aI))}else{aX=bl/60000}bh=(aX/((0.5)*aI)*aT);a5+=this.createTimeScaleCell(bp,"h:mmp",0,bh+"%",0,0,0,aO);bp.setTime(bp.getTime()+(aX*aI*1000))}else{if(bi==="TRUE"){if(bA!=""&&a1!=""){if(bp.getHours()>=bA&&bp.getHours()<a1){a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}else{if(bA!=""&&a1===""){if(bp.getHours()>=bA){a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}else{a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}}else{a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}if(be===0){bp.setMinutes(30);be++}else{bp.setHours(bp.getHours()+1);bp.setMinutes(0);be=0}}}a5+="</tr></table></td>";bf+=a5}break;case (j):aL=new Date(bq);be=1;while(aL.getTime()<bD){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bt=this.IsWeekend(aL);aL.setDate(aL.getDate()+1);bp=new Date(bu);if(aL.getTime()<bD){aA=(aL.getTime()-bu)/(bD-bq)*100;aJ=aL.getTime()}else{aA=(bD-bu)/(bD-bq)*100;aJ=bD}bb=aM[bx];if(by.indexOf(new Date(bu).getDay())!==-1){bg+=this.createTimeScaleCell(new Date(bu),"DDDD, MMMM D",0,aA+"%",i,bb,bt);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}}else{continue}aT=(0.25)*bw*100/(bD-bq);aT=aT/aA*100;a5='<td><table class="siebui-ganttInnerTbl"><tr>';while(bp.getTime()<aJ){bn=bp.getHours();bj=bp.getMinutes();bv=bn*aI+bj;bl=aJ-bp.getTime();if(aP.Get(X)){aO=aP.Get(X)[bn]}if(bv%((0.25)*aI)!==0||bl<((0.25)*bw)){if(bv%((0.25)*aI)!==0){aX=((0.25)*aI)-(bv%((0.25)*aI))}else{aX=bl/60000}bh=(aX/((0.25)*aI)*aT);a5+=this.createTimeScaleCell(bp,"h:mmp",0,bh+"%",0,0,0,aO);bp.setTime(bp.getTime()+(aX*aI*1000))}else{if(bi==="TRUE"){if(bA!=""&&a1!=""){if(bp.getHours()>=bA&&bp.getHours()<a1){a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}else{if(bA!=""&&a1===""){if(bp.getHours()>=bA){a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}else{a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}}}else{a5+=this.createTimeScaleCell(bp.format("h:mm a"),"",0,aT+"%",0,0,0,aO)}if(be<4){bp.setMinutes(15*be);be++}else{bp.setHours(bp.getHours()+1);bp.setMinutes(0);be=1}}}a5+="</tr></table></td>";bf+=a5}break;case (g):aL=new Date(bq);var bd=new Date(bq);var aS=new Date(bd);var aQ;bd.setDate(1);aS.setDate(bd.getDate()-1);aS.setHours(23,59,59,999);aS.setFullYear(aS.getFullYear()+1);while(aL.getTime()<bD){bf+=this.createTimeScaleCell(aL,"MMMM",1);if(aL.getMonth()==11){aL=new Date(aL.getFullYear()+1,0,1)}else{aL=new Date(aL.getFullYear(),aL.getMonth()+1,1)}if(bd.getMonth()==aL.getMonth()){aQ=new Date(aL);aQ.setDate(aQ.getDate()-1);aN=ac.GetStringFromDateTime(bd.format(Y),o,"MMMM D YYYY")+" - "+ac.GetStringFromDateTime(aQ.format(Y),o,"MMMM D YYYY");bg+=this.createTimeScaleCell(aN,"",12);bd=new Date(aL)}}break;case (af):var aZ=1,bd,aQ,aC;var bG=new Date(bq);aL=new Date(bq);bd=new Date(bq);while((aL.getTime()<bD)){bt=this.IsWeekend(aL);bG.setDate(aL.getDate()+6);bf+=this.createTimeScaleCell(aZ,"",1,0,i,bb,bt);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}aL.setDate(aL.getDate()+7);aZ++;if(aZ>52){aZ=1;aC=aL.getDate();if(aC<30){aL.setDate(aL.getDate()+1)}aQ=new Date(aL);aQ.setDate(aQ.getDate()-1);aN=ac.GetStringFromDateTime(bd.format(Y),o,"MMMM D YYYY")+" - "+ac.GetStringFromDateTime(aQ.format(Y),o,"MMMM D YYYY");bg+=this.createTimeScaleCell(aN,"",52);bd=new Date(aL);bd.setDate(bd.getDate()+1)}}break;case (ad):aL=new Date(bq);bu=aL.getTime();bo=5*aP.Get("TotalHPages");while(aL.getTime()<bD&&aE<bo){aL.setDate(1);aL.setMonth(aL.getMonth()+1);if(aL.getTime()<bD){bE=Math.ceil((aL.getTime()-bu)/(bw*24*aP.Get(N)));
aE+=bE}else{bE=bo-aE}bg+=this.createTimeScaleCell(new Date(bu),"MMMM",bE);bu+=(bE*bw*24*7)}bJ="DDD DD";aL=new Date(bq);aE=0;while(++aE<=bo){bt=this.IsWeekend(aL);bx=aL.format("MM/dd/yyyy");bb=aM[bx];bf+=this.createTimeScaleCell(aL,bJ,1,0,i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}aL.setDate(aL.getDate()+aP.Get(N))}break;case (y):case (n):case (f):aL=new Date(bq);while(aL.getTime()<bD){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bt=this.IsWeekend(aL);aL.setDate(aL.getDate()+1);bp=new Date(bu);if(aL.getTime()<bD){aA=(aL.getTime()-bu)/(bD-bq)*100;aJ=aL.getTime()}else{aA=(bD-bu)/(bD-bq)*100;aJ=bD}bb=aM[bx];if(by.indexOf(bp.getDay())!==-1){bg+=this.createTimeScaleCell(new Date(bu),"DDDD, MMMM D",0,aA+"%",i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}}else{continue}aT=aP.Get(N)*bw*100/(bD-bq);aT=aT/aA*100;a5='<td><table class="siebui-ganttInnerTbl"><tr>';if(bi==="TRUE"){while(bp.getTime()<aJ){if((bA==""||bp.getHours()>=bA)&&(a1==""||bp.getHours()<a1)){a5+=this.createTimeScaleCell(bp,"h:mmp",0,aT+"%",0,0,0,aO)}bp.setHours(bp.getHours()+aP.Get(N))}}else{while(bp.getTime()<aJ){a5+=this.createTimeScaleCell(bp,"hp",0,aT+"%",0,0,0,aO);bp.setHours(bp.getHours()+aP.Get(N))}}a5+="</tr></table></td>";bf+=a5}break;case (al):aL=new Date(aP.Get(T));if(!bz){break}bm=bz.length;while(aL.getTime()<bD){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bp=new Date(bu);bt=this.IsWeekend(aL);aL.setDate(aL.getDate()+1);aJ=aL.getTime();aA=(aL.getTime()-bu)/(bD-aP.Get(T))*100;bb=aM[bx];bg+=this.createTimeScaleCell(new Date(bu),"DDDD, MMMM D",0,aA+"%",i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}a0=0;a5='<td><table class="siebui-ganttInnerTbl"><tr>';while(bp.getTime()<aJ){aG=(bz[a0].DUR)/3600;aT=bz[a0].DUR/(bD-aP.Get(T))*100*1000;a5+=this.createTimeScaleCell(bz[a0].NM,"",0,aT+"%");a0=(a0+1)%bm;bp.setHours(bp.getHours()+aG)}a5+="</tr></table></td>";bf+=a5}break;case (k):aL=new Date(aP.Get(T));if(!bz){break}bm=bz.length;while(aL.getTime()<bD){bu=aL.getTime();bx=aL.format("MM/dd/yyyy");bt=this.IsWeekend(aL);aL.setDate(aL.getDate()+1);aA=(aL.getTime()-bu)/(bD-aP.Get(T))*100;bb=aM[bx];bg+=this.createTimeScaleCell(new Date(bu),"DDD, MMM D",1,0,i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}a2=0;a5='<td colspan = 1><table class="siebui-ganttInnerTbl"><tr>';while(a2<bm){aG=(bz[a2].DUR)/3600;aT=aG/24*100;a5+=this.createTimeScaleCell(bz[a2].NM.substr(0,1),"",0,aT+"%");a2=(a2+1)}a5+="</tr></table></td>";bf+=a5}break;case (d):var a8=0;aL=new Date(aP.Get(T));aE=0,firsttimeWeekSet=true,createMajorAxis=false;bL=new Date(aP.Get(T));while(bL.getTime()<bD){bL.setDate(bL.getDate()+7);aE++}aL=new Date(aP.Get(T));bL=new Date(aP.Get(T));aD=(bD-aL.getTime())/(24*bw);aT=1/aD*100;while((aL.getTime()<bD)){bt=this.IsWeekend(aL);bx=aL.format("MM/dd/yyyy");bb=aM[bx];if(firsttimeWeekSet==true){bL.setDate(aL.getDate()+6);firsttimeWeekSet=false}else{bL.setDate(bL.getDate()+7)}aN=ac.GetStringFromDateTime(aL.format(Y),o,"MMMM D")+"-"+ac.GetStringFromDateTime(bL.format(Y),o,"MMMM D");bf+=this.createTimeScaleCell(aN,"",1,0,i,bb,bt);a8++;if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}if(bL.getDate()==30){var bH=new Date(bL);createMajorAxis=true;bH.setDate(bH.getDate()+1);if(bH.getDate()==31&&bH.getMonth()==bL.getMonth()){createMajorAxis=false}}else{if(bL.getDate()==31){createMajorAxis=true}}if((aL.getMonth()!=bL.getMonth())||createMajorAxis==true){bg+=this.createTimeScaleCell(aL,"MMMM",a8);a8=0;createMajorAxis=false}aL.setDate(aL.getDate()+7)}break;case (w):if(bi==="TRUE"){var bs=0,aH;aL=new Date(aP.Get(T));while(aL.getTime()<bD){if(by.indexOf(aL.getDay())!==-1){bt=this.IsWeekend(aL);bx=aL.format("MM/dd/yyyy");bb=aM[bx];bf+=this.createTimeScaleCell(aL,"D DDDD",1,0,i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}if(bs===0){aH=new Date(aL)}bs++}if(bs===Number(aK)){aN=ac.GetStringFromDateTime(aH.format(Y),o,"MMMM D")+" - "+ac.GetStringFromDateTime(aL.format(Y),o,"MMMM D");bs=0;bg+=this.createTimeScaleCell(aN,"",aK)}aL.setDate(aL.getDate()+1)}}else{var bF=false,a7=1,br=0;aL=new Date(aP.Get(T));aF=new Date(bD);while((aL.getTime()<bD)){bF=false;if(by.indexOf(aL.getDay())!==-1){bF=true;break}aL.setDate(aL.getDate()+1)}while(aL.getTime()<=bD){a7=1;br=0;aV=new Date(aL);for(a2=1;a2<aK;a2++){aV.setDate(aV.getDate()+1);if(aL.getMonth()===aV.getMonth()){a7++}else{br++}}a3=new Date(aV);if(aL.getMonth()===a3.getMonth()){bg+=this.createTimeScaleCell(aL,"MMMM",a7)}else{bg+=this.createTimeScaleCell(aL,"MMMM",a7);bg+=this.createTimeScaleCell(a3,"MMMM",br)}aL.setDate(aL.getDate()+7)}aL=new Date(aP.Get(T));while(aL.getTime()<bD){if(by.indexOf(aL.getDay())!==-1){bt=this.IsWeekend(aL);bx=aL.format("MM/dd/yyyy");bb=aM[bx];bf+=this.createTimeScaleCell(aL,"D DDDD",1,0,i,bb,bt,0,bx);if(aY){bC="";for(a2 in aU[bx]){if(bC){bC=bC+"/"+aU[bx][a2]}else{bC=aU[bx][a2]}}bc+=this.createBAxisCell(bC,1,i)}}aL.setDate(aL.getDate()+1)}}break}bg+="</tr>";bf+="</tr>";if(aY){bc+="</tr>";a9+="<tbody>"+bg+bf+bc+"</tbody></table>"}else{a9+="<tbody>"+bg+bf+"</tbody></table>"}return a9};E.prototype.createTimeScaleCell=function(aV,aR,aQ,aN,aG,aF,aL,aK,aA){var aT=this.GetPM(),aM=aT.Get(ak),aC=aT.Get(F),aB="../images/",aI=[],aO,aJ="",aD,aE="<th ",aS,aH=aT.Get("Special Days Class");if(aR){aS=ac.GetStringFromDateTime(aV.format(Y),o,aR)}else{aS=aV}if(aQ!==0){aE+='colspan = "'+aQ+'"'}else{if(aN&&aN!==0){aE+='width = "'+aN+'"'}}if(aL){if(aM){aO=aM.Weekends}if(aO){aE+=' class = "siebui-Weekends" style="background-color:'+aO+';"'}}if(aF){if(aH){aG=aG+" siebui-"+aH}for(var aU in aF){if(aF.hasOwnProperty(aU)){aI.push(aU)}}aI.sort();for(var aP=0;aP<aI.length;aP++){aU=aI[aP];if(aC&&aC[aU]&&aT.Get(M)!=aw){aD=aC[aU];aJ+='<span class="'+aD+'"></span>'}if(!aO&&aM&&aM[aU]){aO=aM[aU];if(aO){aE+=' style="background-color:'+aO+';"';aO=""}}}}aE+="> <div ";if(aK&&aT.Get(M)===y){aE+='class = "siebui-'+aK+'"'}aE+=">";if(aA){aE+='<a class="siebui-showTSTooltip '+(aG?aG:"")+'" DateVal = "'+aA+'" ot = "a" rn = "'+aS+'" un = "'+aS+'">'+aS+"</a>"}else{aE+="<a";if(aG){aE+='class="'+aG+'"'}aE+=' ot = "a" rn = "'+aS+'" un = "'+aS+'">'+aS+"</a>"}aE+=aJ;aE+="</div></th>";return aE};E.prototype.createBAxisCell=function(aF,aD,aB){var aC=this.GetPM(),aE,aA='<th colspan = "'+aD+'" > <div><a ',aF;if(aB){aA+='class="'+aB+'" data-drilldown-type="BAxis"'}aA+=' ot = "a" rn = "'+aF+'" un = "'+aF+'">'+aF+"</a></div></th>";return aA};E.prototype.IsWeekend=function(aC){if(aC instanceof Date){var aA=aC.getDay(),aB=this.GetPM();if(aA===0){aA=7}if(aB.Get(A)){return((aB.Get(A)).indexOf(aA)!==-1)}}};return E}());return"SiebelAppFacade.GanttRenderer"})};