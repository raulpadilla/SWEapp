/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.Query)==="undefined"){Namespace("SiebelApp.Query");SiebelApp.Query=(function(){var a=SiebelApp.OfflineCacheConfig;var b=SiebelJS.Dependency("SiebelApp.Utils");function c(){var e;f=function f(){return e};f.prototype=this;e=new f();e.constructor=f;return e}var d=new c();c.prototype.Parse=function(g,f){try{var i=g.replace(/ OR /g," || ").replace(/ AND /g," && ").replace(/ NOT /g," ! ").replace(/ Not /g," ! ").replace(/\+/g,"+\n").replace(/(?:and)(?=([^""\\]*(\\.|""([^"\\]*\\.)*[^""\\]*""))*[^""]*$)/g," && ");var e=parser.parse(i);return e}catch(h){return""}};c.prototype.Evaluate=function(e,f,i,j){try{var h=e.evaluate(f,i,j);if(b.IsEmpty(h)){h=""}if(typeof(h)==="number"){return h.toString()}if(typeof(h)==="object"&&typeof(h.getClassName())!=="undefined"&&h.getClassName()==="DatumUTCDateTimeObject"){return h.GetAsString()}return h}catch(g){return""}};c.prototype.ParseAndEvaluate=function(g,f){var e=SiebelApp.Query.Parse(g);return(SiebelApp.Query.Evaluate(e,f))};c.prototype.GetSearchSpec=function(g,f){try{g=g.replace(/ or /g," || ").replace(/ and /g," && ");var e=SiebelApp.Query.Parse(g);var i=[];i.push(e.BoldQuery(f));return i}catch(h){return[]}};c.prototype.GetFieldsFromExp=function(g,f){var h=[];if(g==="Calc"){h=f.match(/\[(.*?)\]/g);if(h){for(var e=0;e<h.length;e++){h[e]=h[e].replace(/[[\]]/g,"")}}}if(g==="Pre"||g==="Post"){if(f.search("Field:")!==-1){f=f.replace("Field:","");f=f.replace(/["']{1}/gi,"");f=f.replace(/['"]/g,"");h[0]=f.trim(f)}}if(h){h=SiebelApp.OfflineUtils.eliminateDuplicates(h)}if(!h){h=[]}return h};return d}())}function QueryExprNode(a,b){this.type="QueryExprNode";this.body=a;this.loc=b;this.evaluate=function(d,c,e){if(typeof(a)==="string"){return a}SiebelApp.QueryHelper.SetContext(d,c,e);return this.body.evaluate()};this.BoldQuery=function(c){SiebelApp.QueryHelper.SetContext(c);return this.body.BoldQuery()}}function ConstantNode(a,c,b){this.value=c;this.type=a;this.loc=b;this.evaluate=function(){var d;switch(this.type){case"CONST_FUNCTION":d=SiebelApp.QueryHelper.EvaluateConstantFunctionNode(this);break;case"CONST_STRING":d=SiebelApp.QueryHelper.EvaluateConstantNode(this);break;case"CONST_NUMBER":d=SiebelApp.QueryHelper.EvaluateConstantNumberNode(this);break}return d};this.BoldQuery=function(){}}function UnOpNode(a,b,c){this.value=b;this.type=a;this.loc=c;this.evaluate=function(){var d;switch(this.type){case"UNOPNODE_NOT":d=SiebelApp.QueryHelper.EvaluateUnaryNotNode(this.value);break;case"UNOPNODE_ISNULL":d=SiebelApp.QueryHelper.EvaluateUnaryIsNullNode(this.value);break;case"UNOPNODE_ISNOTNULL":d=SiebelApp.QueryHelper.EvaluateUnaryIsNotNullNode(this.value);break;case"UNOPNODE_EXISTS":break}return d};this.BoldQuery=function(){var d;switch(this.type){case"UNOPNODE_ISNULL":d=SiebelApp.QueryHelper.BoldQueryUnaryIsNullNode(this.value);break;case"UNOPNODE_ISNOTNULL":d=SiebelApp.QueryHelper.BoldQueryUnaryIsNotNullNode(this.value);break}return d}}function SourceLocation(b,c,a){this.source=b;this.start=c;this.end=a}function Position(a,b){this.line=a;this.column=b}function IdentifierNode(a,b){this.type="Identifier";this.value=a;this.loc=b;this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateIdentifierNode(this)}}function BinaryOpNode(b,c,a,d){this.type=b;this.right=a;this.left=c;this.loc=d;this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateBinaryOpNode(this)};this.BoldQuery=function(){return SiebelApp.QueryHelper.BinaryOpNodeBoldQuery(this)}}function FieldNameNode(a,b){this.type="FieldName";this.arguments=a;this.loc=b;this.evaluate=function(){return SiebelApp.QueryHelper.EvaluateFieldNameNode(this)};this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryFieldNameNode(this)}}function FieldValueNode(b,a){this.type="FieldValue";this.value=b;this.loc=a;this.evaluate=function(){}}function FunctionNode(c,b,a,d){this.type=c;this.name=b.toUpperCase();this.args=a;this.loc=d;this.evaluate=function(){var e;switch(this.name.toUpperCase()){case"LOOKUPVALUE":e=SiebelApp.QueryHelper.EvaluateLookupValueNode(this);break;case"LOOKUPNAME":e=SiebelApp.QueryHelper.EvaluateLookupNameNode(this);break;case"IIF":e=SiebelApp.QueryHelper.EvaluateIIFNode(this);break;case"PARENTFIELDVALUE":e=SiebelApp.QueryHelper.EvaluateParentFieldValueNode(this);break;case"ROWIDTOROWIDNUM":e=SiebelApp.QueryHelper.EvaluateRowIdToRowIdNumNode(this);break;case"IFNULL":e=SiebelApp.QueryHelper.EvaluateIfNullNode(this);break}return e};this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryFunctionNode(this)}}function ParameterListNode(a,b,c){this.type=a;this.parameters=b;this.loc=c;this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryParameterListNode(this)}}function ParameterNode(a,c,b){this.type=a;this.param=c;this.loc=b;this.evaluate=function(){return c.evaluate()};this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryParameterNode(this)}}function QueryOpNode(b,c,a,d){this.type=b;this.left=c;this.right=a;this.loc=d}function BracesNode(b,a,c){this.type=b;this.body=a;this.loc=c;this.evaluate=function(){return a.evaluate()};this.BoldQuery=function(){return SiebelApp.QueryHelper.BoldQueryBracesNode(this)}};