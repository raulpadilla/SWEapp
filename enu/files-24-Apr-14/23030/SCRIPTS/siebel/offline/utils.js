/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.OfflineUtils)==="undefined"){SiebelJS.Namespace("SiebelApp.OfflineUtils");SiebelApp.OfflineUtils=(function(){var d=SiebelAppFacade.FacadeConstants;var a=SiebelApp.OfflineCacheConfig;var f=d.get("WEB_DB");var c=d.get("LOCAL_STORAGE");function e(){var g;h=function h(){return g};h.prototype=this;g=new h();g.constructor=h;return g}var b=new e();e.prototype.RefreshPage=function(){window.location.reload()};e.prototype.GetBrowserStorage=function(h){var g={};switch(h){case f:if(window.openDatabase){g=SiebelApp.WebDB}break;case c:g=SiebelApp.BrowserLocalStorage;break;default:if(window.openDatabase){g=SiebelApp.WebDB}else{g=SiebelApp.BrowserLocalStorage}break}return g};e.prototype.GetOfflineCacheConfig=function(k){var j={};j.dbName=a.get("OFFLINE_CACHE_DB_NAME");j.version=a.get("OFFLINE_CACHE_DB_VERSION");j.displayName=a.get("OFFLINE_CACHE_DB_DISP_NAME");j.maxSize=a.get("OFFLINE_CACHE_DB_MAXSIZE");j.tables=[a.get("REACTIVE_CACHE_TBL"),a.get("PRO_SYNCQUEUE_DB_TBL"),a.get("PRO_METADATASTORE_DB_TBL"),a.get("PRO_DB_PICKAPPLET_INFO_TBL"),a.get("PRO_DB_PICKFLD_MAP_TBL")];j.columns={};var h=a.get("REACTIVE_CACHE_TBL_COLS");j.columns[a.get("REACTIVE_CACHE_TBL")]=[];for(var n in h){if(h[n]){j.columns[a.get("REACTIVE_CACHE_TBL")].push(h[n])}}var m=a.get("PRO_SYNCQUEUE_DB_TBL_COLS");j.columns[a.get("PRO_SYNCQUEUE_DB_TBL")]=[];for(var g in m){if(m[g]){j.columns[a.get("PRO_SYNCQUEUE_DB_TBL")].push(m[g])}}var l=a.get("PRO_METADATASTORE_DB_TBL_COLS");var i="";j.columns[a.get("PRO_METADATASTORE_DB_TBL")]=[];for(i in l){if(l[i]){j.columns[a.get("PRO_METADATASTORE_DB_TBL")].push(l[i])}}l=a.get("PRO_DB_PICKAPPLET_INFO_TBL_COLS");j.columns[a.get("PRO_DB_PICKAPPLET_INFO_TBL")]=[];for(i in l){if(l[i]){j.columns[a.get("PRO_DB_PICKAPPLET_INFO_TBL")].push(l[i])}}l=a.get("PRO_DB_PICKFLD_MAP_TBL_COLS");j.columns[a.get("PRO_DB_PICKFLD_MAP_TBL")]=[];for(i in l){if(l[i]){j.columns[a.get("PRO_DB_PICKFLD_MAP_TBL")].push(l[i])}}return j};e.prototype.IsValidServerResponse=function(i){if(i){var g=i.indexOf("<!DOCTYPE");if(g===0){var h=i.indexOf("manifest");if(h===-1){return false}}return true}else{return false}};e.prototype.RemoveNonAlphaChars=function(g){g=g.replace(/\W/g,"");return g};e.prototype.eliminateDuplicates=function(h){var k,g=h.length;var j=[];var l={};for(k=0;k<g;k++){l[h[k]]=0}for(k in l){j.push(k)}return j};e.prototype.Log=function(h){var g=false;if(IsOfflineModeEnabled()&&g){SiebelJS.Log(h+" "+SiebelApp.OfflineUtils.GetTS())}};e.prototype.GetRequestParam=function(h,j){var k="";var g=-1;g=h.indexOf(j);if(g!==-1){var i=h.substring(g,h.length);if(i.indexOf("&")===-1){i=i.substring(i.indexOf("=")+1,i.length)}else{i=i.substring(j.length,i.indexOf("&"))}k=i.replace(/%20/g," ")}return k};e.prototype.GetTS=function(){var h=new Date();var n=h.getMonth()+1;var g=h.getDate();var k=h.getFullYear();var m=("0"+n).slice(-2)+"/"+("0"+g).slice(-2)+"/"+k;var i=h.getHours();var l=h.getMinutes();var j=h.getSeconds();m+=" "+("0"+i).slice(-2)+":"+("0"+l).slice(-2)+":"+("0"+j).slice(-2)+" ";return m};e.prototype.ToTS=function(i,j){if(!i){return""}var h;if(j===true){var p=i.getTime()+(i.getTimezoneOffset()*60000);h=new Date(p)}else{h=i}var l=h.getMonth()+1;var o=h.getDate();var n=h.getFullYear();var m=("0"+l).slice(-2)+"/"+("0"+o).slice(-2)+"/"+n;var q=h.getHours();var g=h.getMinutes();var k=h.getSeconds();m+=" "+("0"+q).slice(-2)+":"+("0"+g).slice(-2)+":"+("0"+k).slice(-2);return m};e.prototype.UtcToLocal=function(g){if(!g){return null}var h=new Date(g+" UTC");return h};e.prototype.GetToday=function(){var h=new Date();var n=h.getMonth()+1;var g=h.getDate();var k=h.getFullYear();var m=n+"/"+g+"/"+k;var i=0;var l=0;var j=0;m+=" "+("0"+i).slice(-2)+":"+("0"+l).slice(-2)+":"+("0"+j).slice(-2)+" ";return m};e.prototype.GetDate=function(){var h=new Date();var k=h.getMonth()+1;var g=h.getDate();var i=h.getFullYear();var j=k+"/"+g+"/"+i;return j};e.prototype.RTrim=function(g,h){if(g===undefined||h===undefined){return""}if(g.substring((g.length-h.length),(g.length))===h){g=g.substring(0,(g.length-(h.length)))}return g};e.prototype.StripQuotes=function(h){var g;g=h.charAt(0);if((g==='"'||g==="'")&&(h.length>1&&h.charAt(h.length-1)===g)){h=h.substring(1,(h.length-1))}return h};e.prototype.NotifyValueArray=function(n){var j=n;var m="";var h=n.length;for(var k=0;k<h;k++){var g=n[k].length;g=g.toString();m=m+g.concat("*",n[k])}return m};e.prototype.ProcessDPS=function(l,h,g,k,m){if(!k){k=g.length}for(var j=0;j<k;j++){var n=h.GetProperty(g[j]);if(!SiebelApp.Utils.IsEmpty(n)){if(m){l.SetPropertyStr(g[j],n)}else{l.SetPropertyStr(g[j],n);h.RemoveProperty(g[j])}}}};e.prototype.GetDate=function(){var h=new Date();var k=h.getMonth()+1;var g=h.getDate();var i=h.getFullYear();var j=k+"/"+g+"/"+i;return j};e.prototype.ConverttoUTCDate=function(m){var o;var j=+m.substring(0,2);var g=+m.substring(3,5);var l=+m.substring(6,10);var n=+m.substring(11,13);var h=+m.substring(14,16);var i=+m.substring(17,19);var k=m.substring(20,22);o=new SiebelApp.S_App.DatumUTCDateTimeObject();o.SetDateTime(l,j,g,n,h,i);return o};e.prototype.JsonRecordSet=function(g){var h=SiebelJS.Dependency("SiebelApp.Utils").DecodeFromQueryString(g);var k={};k.Request=g;k.RecordSet={};k.FieldValue=[];k.SweCommands={};var l;var j;for(var i=true;(prop=h.EnumProperties(i))!==null;i=false){if(prop.search("OF_")!==-1){l=prop.split("OF_")[1];j=unescape(h.GetPropertyAsStr(prop));k.RecordSet[l]=j;k.FieldValue.push([l,j])}else{k.SweCommands[prop]=unescape(h.GetPropertyAsStr(prop))}}return k};e.prototype.GetTempId=function(){var h=((new Date()).getTime());h=(h).toString(36);if(h.length>6){h=h.substring(h.length-6)}var i=(Math.round((Math.random()*46655))).toString(36);var g=(Math.round((Math.random()*46655))).toString(36);var j=(h.concat(":",i,g)).toUpperCase();return j};e.prototype.GetTempRowId=function(){var h=((new Date()).getTime());h=(h).toString(36);var g=Math.floor(Math.random()*5);if(h.length>6){h=h.substring(h.length-6);h=h.substring(0,g).concat(h.substring(g+1,6))}var i=(Math.round((Math.random()*46655))).toString(36);var j=(i.concat("-",h)).toUpperCase();return j};return b}())};