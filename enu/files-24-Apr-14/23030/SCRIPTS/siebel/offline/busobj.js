/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.BusObj)){(function(){var d=SiebelApp.S_App;var u=SiebelApp.Utils;var o=SiebelApp.Constants;var h=SiebelApp.Offlineconstants;var i=SiebelApp.OfflineAppSettings;var b=o.get("SWE_PST_NEW_BUSCOMP");var r=o.get("SWE_PST_BUSCOMP_INFO");var p=o.get("SWE_PROP_NAME");var q=o.get("PHYEVENT_SORT_LIST");var w=o.get("SEARCHSPEC");var a=o.get("SWE_PROP_HIER_PAR_ID_FLD");var g=o.get("SWE_PST_FIELD_LIST");var j=o.get("SWE_PST_REC_LIST");var t=o.get("SWE_PST_FIELD");var c=SiebelApp.S_App.BusObj.prototype;var v=SiebelApp.S_App.BusObj;SiebelApp.S_App.BusObj=function(){v.call(this);var z=false;var f={};f.busCompReExecArray=[];f.busCompPosByIdOnlyArray=[];f.idValueArray=[];f.rowNumArray=[];var n=null;this.GetInterface=function(){if(!n){n=new SiebelApp.S_App.OfflineBOInterface(this)}return n};this.ResetInterface=function(){if(n){n.EndLife()}n=null};this.SetActivationBlockStatus=function(A){z=A};this.GetActivationBlockStatus=function(){return z};this.GetActivationStates=function(){return f};this.ResetActivationStates=function(){f.busCompReExecArray=[];f.busCompPosByIdOnlyArray=[];f.idValueArray=[];f.rowNumArray=[]};var y=this.RemoveBusComp;this.RemoveBusComp=function(B){if(SiebelApp.OfflineAppSettings.GetMode()===true){var A=this.GetView();if(A){A.RemoveBCBroker(B)}}return y.call(this,B)}};SiebelApp.S_App.BusObj.prototype=c;SiebelApp.S_App.BusObj.prototype.constructor=SiebelApp.S_App.BusObj;var m=SiebelApp.S_App.BusObj;var l={};l.AddBusComp=m.prototype.AddBusComp;l.ProcessObjectInfo=m.prototype.ProcessObjectInfo;l.ProcessChildObjInfo=m.prototype.ProcessChildObjInfo;l.EndLife=m.prototype.EndLife;m.prototype.ProcessObjectInfo=function(f){if(!(i.GetMode())){return(l.ProcessObjectInfo.call(this,f))}else{this.BeginActivationBlock();l.ProcessObjectInfo.call(this,f)}};m.prototype.EndLife=function(){this.ResetInterface();l.EndLife.call(this)};m.prototype.ProcessChildObjInfo=function(L){if(!i.GetMode()){return(l.ProcessChildObjInfo.call(this,L))}else{var z=L.GetProperty(h.get("STAND_ALONE_INST"));var I=(!u.IsTrue(z));this.GetUIState=function(){return I};var y=L.EnumChildren(true);if(!y){return}var C=SiebelApp.S_App.BusComp;var M=L.GetProperty("isPopup");var A={};do{var G=y.GetType();var H=true;switch(G){case b:var f;if(!u.IsTrue(z)){var K=y.GetChild(0);var n=K.GetProperty(p);f=this.GetBusCompX(n,true);if(u.IsEmpty(f)||M){f=new C();H=false}if(M){var J=K.GetValue();if(J==SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBCId()){var E=this.MaxBCIndex()+1;K.SetValue("S_BC"+E)}}f.ProcessObjectInfo(K,H);if(M){var B=f.GetDefn();var D;if(B.PopupVisType===h.get("SALES_REP")){D=0}else{if(B.PopupVisType===h.get("ORGANIZATION")){D=5}else{if(B.PopupVisType===h.get("CONTACT")){D=6}else{if(u.IsTrue(B.PopupVisAutoAll)||u.IsEmpty(F)){D=5}}}}D=D.toString();f.SetViewMode(D);f.SetIsPopup(M)}if(!A.hasOwnProperty(f.GetVarName())){A[f.GetVarName()]=f}if(!H){if(!f.GetDefn().isSetup){x.call(this,f)}}}break;case r:var F=this.GetBCtoProcess(y);if(!u.IsEmpty(F)){F.ProcessObjectInfo(y)}if(!A.hasOwnProperty(F.GetVarName())){A[F.GetVarName()]=F}break}}while((y=L.EnumChildren(false)));if(!u.IsTrue(z)){s.call(this,A,!M)}}};function s(y,n){var A=this.GetBCMap();if(n){for(var f in A){if(A[f]){delete this.GetBCMap()[f]}}}for(var z in y){if(y[z]){this.GetBCMap()[z]=y[z]}}}function x(f){e.call(this,f);f.GetDefn().isSetup=true}function e(f){var E=f.GetDefn();var n=E.Fields;var z;for(var D in n){if(!f.GetDefn().Fields[D].fDepArray){f.GetDefn().Fields[D].fDepArray=[]}if(!f.GetDefn().Fields[D].bDepArray){f.GetDefn().Fields[D].bDepArray=[]}z=n[D];if(z.DataType==="Currency"){f.GetDefn().Fields[D].bDepArray.push(z.m_currCodeFieldName);f.GetDefn().Fields[D].bDepArray.push(z.m_exchDateFieldName)}if(z.pickMap&&z.pickMap.length>0){var y;for(var A=0;A<z.pickMap.length;A++){y=z.pickMap[A].FldName;if(n[y]){f.GetDefn().Fields[D].bDepArray.push(y)}else{continue}}}if(u.IsTrue(z.IsCalculated)){if(!f.GetDefn().CalcFieldArray){f.GetDefn().CalcFieldArray=[]}f.GetDefn().CalcFieldArray.push(D);if(f.GetDefn().CalcFieldArray){var B;if(!u.IsEmpty(z.CalExpr)){B=SiebelApp.Query.GetFieldsFromExp("Calc",z.CalExpr);for(var C=0;C<B.length;C++){if(!f.GetDefn().Fields[B[C]].fDepArray){f.GetDefn().Fields[B[C]].fDepArray=[]}f.GetDefn().Fields[B[C]].fDepArray.push(D)}}}}}}m.prototype.MaxBCIndex=function(){var z=this.GetBCMap();var y=0;for(var n in z){if(z[n]){var f=parseInt(n.substring(4));if(y<f){y=f}}}return y};m.prototype.AddBusComp=function(f){if(!SiebelApp.OfflineAppSettings.GetMode()){return(l.AddBusComp.call(this,f))}else{if(!(this.GetBCMap()[f.GetVarName()])||this.GetBCMap()[f.GetVarName()].GetName()!==f.GetName()){this.GetBCMap()[f.GetVarName()]=f}}};m.prototype.BeginActivationBlock=function(n){this.SetActivationBlockStatus(true);for(var f in n){if(n[f]){n[f].SaveFieldArray()}}};m.prototype.EndActivationBlock=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusObj.EndActivationBlock ")}var E=this.GetActivationBlockStatus();var B=this.GetBCMap();var C=false;for(var D in B){if(B[D]){C=true;break}}if(!E||!(C)){$.setReturnValue({err:true});return}var A=function(){var F=z;return function(){return[B[F]]}};var f=[];var y=0;var n;for(var z in B){n=A();if(B[z]){f[y++]={execute:this.CheckBusCompActivation,executeScope:this,preExecute:n}}}$.eachAsyncOp(this,f);$.callback(this,function(){var H=this.GetActivationStates();var F=H.busCompReExecArray;var G=H.busCompPosByIdOnlyArray;var L=H.idValueArray;var M=F.length;var J;if(M>0){var I=function(N){J=F[N];return[(G[N].GetVarName()===J.GetVarName()),J,L[N]]};var K={iterations:M,execute:k,executeScope:this,preExecute:I};$.eachAsyncOp(this,K);$.callback(this,function(N){this.ResetActivationStates();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusObj.EndActivationBlock ")}$.setReturnValue(N)})}else{$.setReturnValue({err:false})}})};function k(n,y,f){if(!n){$.setReturnValue({err:false})}else{y.Execute();$.callback(this,function(z){if(!z.err){y.SetExtObjProp("reExecute",false);if(y.IsNotifyEnabled()){y.DisableNotify()}var A;if(u.IsEmpty(f)){y.Home()}else{y.PositionById(f)}$.callback(this,function(B){if(!B.err){y.EnableNotify();if(y.CheckActiveRow()){y.NotifyNewActiveRow()}$.setReturnValue({err:false})}else{$.setReturnValue(B)}})}else{$.setReturnValue(z)}})}}m.prototype.CheckBusCompActivation=function(f){var n=false;var E=false;var y=null;var D;if(!f.IsExecuted()){$.setReturnValue({err:false,retval:false});return}var C=(this.GetActivationStates()).busCompReExecArray;var B=C.length;for(var A=0;A<B;A++){if(f.GetVarName()===C[A].GetVarName()){$.setReturnValue({err:false,retval:true});return}}var z=f.GetParentBusComp();if(z){this.CheckBusCompActivation(z)}$.callback(this,function(F){if(z){E=(z.GetExtObjProp("reExecute")||F.retVal)}n=(f.GetExtObjProp("reExecute")||f.CheckActivation());if(!n&&!E){$.setReturnValue({err:true,retval:false});return}(this.GetActivationStates()).busCompReExecArray.push(f);if(!n&&E){(this.GetActivationStates()).busCompPosByIdOnlyArray.push(f)
}else{(this.GetActivationStates()).busCompPosByIdOnlyArray.push(f)}if(f.GetActiveRow()>=0){f.GetIdValueX()}$.callback(this,function(G){if(!G.err){y=G.retVal;(this.GetActivationStates()).idValueArray.push(y);D=f.GetRowNum();if(!D){D=-1}(this.GetActivationStates()).rowNumArray.push(D);$.setReturnValue({err:G.err,retval:true});return}})})};m.prototype.InterpolateBCPS=function(F){var E=this.GetBCMap();var A=F.GetChildCount();var f;var n,y=[],z=0,D;var C=0;for(var B=0;B<A;B++){f=F.GetChild(B);n=f.GetValue();y[B]={execute:E[n].InterpolateBCState,executeScope:E[n],preExecute:function(){D=F.GetChild(C);C++;return[D]}}}$.eachAsyncOp(this,y);$.callback(this,function(G){$.setReturnValue(G)})};m.prototype.GetBCPS=function(E,f){var I=CCFMiscUtil_CreatePropSet();var H=SiebelApp.Metadata.GetBusCompDef(E);I.SetType(r);I.SetPropertyStr(h.get("STAND_ALONE_INST"),"true");if(H){I.SetValue(H.Name);I.SetPropertyStr(p,H.Name);I.SetPropertyStr(q,H.SortSpec);I.SetPropertyStr(w,H.SrchSpec);I.SetPropertyStr(a,H.HierParField);var A=SiebelApp.Metadata.GetBusObjDef(this.GetName())[E];if(!u.IsEmpty(A)&&!f){var G=SiebelApp.Metadata.GetLinkDef(A);if(!u.IsEmpty(G.parentBusCompName)){I.SetPropertyStr("pi",G.parentBusCompName)}}var D=H.Fields;var F=CCFMiscUtil_CreatePropSet();F.SetType(g);var z=CCFMiscUtil_CreatePropSet();z.SetType(j);var C;if(D){for(var n in D){if(D.hasOwnProperty(n)){var B=CCFMiscUtil_CreatePropSet();B.SetType(t);var y=SiebelApp.S_App.LookupSCMap(n);if(y){C=y}else{SiebelApp.S_App.GetStringCache().push(n);C=SiebelApp.S_App.GetStringCache().length-1}B.SetPropertyStr(p,C);B.SetPropertyStr(o.get("CALCEXPR"),D[n].CalExpr);B.SetPropertyStr(o.get("COLUMN_NAME"),D[n].ColName);B.SetPropertyStr(o.get("SWE_PROP_TYPE"),D[n].DataType);B.SetPropertyStr(o.get("DISABLE_SEARCH"),D[n].DisableSearch);B.SetPropertyStr(o.get("DISABLE_SORT"),D[n].DisableSort);B.SetPropertyStr(o.get("FORCE_ACTIVE"),D[n].ForceActive);B.SetPropertyStr(o.get("FORCE_CASE"),D[n].ForeceCase);B.SetPropertyStr(o.get("SWE_PROP_IS_HIDDEN"),D[n].Hidden);B.SetPropertyStr(o.get("SWE_PROP_IS_POST_CHANGES"),D[n].ImPostChg);B.SetPropertyStr(o.get("SWE_PROP_IS_CALC"),D[n].IsCalculated);B.SetPropertyStr(o.get("LINKNAME"),D[n].LinkName);B.SetPropertyStr(o.get("NOCOPY"),D[n].NoCopy);B.SetPropertyStr(o.get("SWE_PROP_LENGTH"),D[n].OldtextLen);B.SetPropertyStr(o.get("PICKLISTNAME"),D[n].PickListName);B.SetPropertyStr(o.get("POSTDEFAULT"),D[n].PostDefault);B.SetPropertyStr(o.get("PREDEFAULT"),D[n].PreDefault);B.SetPropertyStr(o.get("PRECISION"),D[n].Precision);if(D[n].ReadOnly){B.SetPropertyStr(o.get("SWE_PROP_IS_READONLY"),D[n].ReadOnly)}if(D[n].Required){B.SetPropertyStr(o.get("SWE_PROP_IS_REQ"),D[n].Required)}B.SetPropertyStr(o.get("SWE_PROP_SCALE"),D[n].Scale);B.SetPropertyStr(o.get("VALIDATIONSPEC"),D[n].ValidationSpec);F.AddChild(B)}}}I.AddChild(F)}return I};m.prototype.GetBusCompX=function(z,y){var B;var C=this.GetBCMap();for(var A in C){if(C.hasOwnProperty(A)){if(C[A]){var n=C[A].GetName();if((n===z)){return C[A]}}}}A="";if(y){return(A)}B=A;if(u.IsEmpty(B)){var f=this.GetBCPS(z);B=new SiebelApp.S_App.BusComp();B.ProcessObjectInfo(f);if(!B.GetDefn().isSetup){x.call(this,B)}this.AddBusComp(B);B.SetBusObj(this)}return B};m.prototype.DrillDownByField=function(B,n,f,C,y){var z=false;var A=this.GetBusCompByName(n);if(!A){return}if(y&&y!=="4"){A.SetViewMode(y)}A.SetFldSearchSpec(f,C);z=A.IsNotifyEnabled();if(z){A.DisableNotify()}A.Execute();$.callback(this,function(D){if(!D.err){}else{A.EnableNotify()}A.Home();$.callback(this,function(E){if(!E.err){if(!A.CheckActiveRow()){A.EnableNotify();return}if(z){A.EnableNotify()}}else{A.EnableNotify()}})})};m.prototype.GetLastErrCode=function(){return d.OfflineErrorObject.GetErrorCode()};m.prototype.GetLastErrText=function(){return d.OfflineErrorObject.GetErrorText()}}())}if(typeof(SiebelApp.S_App.OfflineBOInterface)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.OfflineBOInterface");SiebelApp.S_App.OfflineBOInterface=(function(){function a(b){var e=b;var d=this;for(var c in b){(function(){var g=c;var f=b;if(typeof(b[g])==="function"&&!d[g]){d[g]=function(){if(f.constructor.prototype[g]){return(f.constructor.prototype[g].apply(f,arguments))}else{return(f[g].apply(f,arguments))}}}return d[g]}())}this.GetOfflineBO=function(){return e};this.EndLife=function(){e=null;d=null;var h=SiebelApp.S_App.Model.GetBOArray();var f=h.length;for(var g=f-1;g>=0;g--){if(h[g]===this.GetOfflineBO()){h.splice(g,1);SiebelApp.S_App.Model.SetBOArray(h);break}}}}a.prototype.GetBusComp=function(c,b){var e=SiebelApp.S_App.Model.GetIsInterFace();if(e>0){var f=this.GetOfflineBO().GetBusCompX(c,b);return f.GetInterface()}else{var d=this.GetOfflineBO();return(d.GetBusComp.call(d,c))}};a.prototype.Name=function(){return this.GetOfflineBO().GetName()};return a}())};