SiebelApp.EventManager=function(){var a={};return{addListner:function(e,d,c){a[e]=a[e]||[];var f=a[e];if(f&&f.length){for(var b=0;b<f.length;b++){if((f[b].fn===d)&&(f[b].scope===c)){return}}}a[e].push({fn:d,scope:c})},removeListner:function(e,d,c){var f=a[e];if(f&&f.length){for(var b=0;b<f.length;b++){if((f[b].fn===d)&&(f[b].scope===c)){f.splice(b,1)}}}},cleanListners:function(b){a[b]=[]},fireEvent:function(d,b){var e=a[d]||{};for(var c in e){if(typeof e[c]!="function"){e[c].fn.call(e[c].scope||window,b)}}}}}();SiebelApp.contentUpdater={loadContent:function(bSetFree){var counter=$("div[src]").length;bSetFree=(bSetFree===undefined?false:bSetFree);$("div[src]").each(function(){var that=this;var src=$(that).attr("src");$(that).removeAttr("src");if(!src){counter--;return}if(src.indexOf("Javascript:")!=-1||src.indexOf("javascript:")!=-1){var script=src.split(":")[1];if(script.indexOf("<!")==-1){eval(script)}counter--}else{SiebelApp.AjaxRequestMgr.Get(src,function(data){if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimeGoToView("","Have Layout");SiebelApp.S_App.GetTimer().TimePopupApplet("","Have Layout")}SiebelApp.contentUpdater.CleanLayout($(that));var prevValue=$.ajaxSetup().cache;try{if(data.indexOf("SWEWriteObjectTag")!=-1){data=data.replace(/SWEWriteObjectTag/g,"SiebelApp.contentUpdater.Nullify")}data=data.replace(/\<title\>\w*\s*\w*\<\/title\>/i,"");data=data.replace(/top.document.title\w*\s*\w*;/i,"");data=data.replace(/top.document.title\W*\w*\s*\w*\W*;/i,"");$.ajaxSetup({cache:true});$(that).html("<div style='height:100%;'>"+data+"</div>");counter--}catch(error){SiebelJS.Log("[ContentLoader]  Error -> "+error.message)}finally{$.ajaxSetup({cache:prevValue});that=data=null}if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimeGoToView("","Processed Layout");SiebelApp.S_App.GetTimer().TimePopupApplet("","Processed Layout")}var myChildrenSrc=SiebelApp.contentUpdater.loadContent();if(SiebelApp.contentUpdater.callBackMap[src]){if(myChildrenSrc==0){SiebelApp.contentUpdater.viewLoaded(src)}else{SiebelApp.contentUpdater.callBackMap.ViewLoadedDeferred=SiebelApp.contentUpdater.callBackMap[src];delete SiebelApp.contentUpdater.callBackMap[src]}}else{if(counter==0){SiebelApp.contentUpdater.viewLoaded("ViewLoadedDeferred")}}})}});return counter},CleanLayout:function(a){if($.browser.msie&&a.attr("name")==="_svf0"&&a.find("*").length>10000){a[0].innerHTML=""}},viewLoaded:function(b){var a=SiebelApp.contentUpdater.callBackMap[b]?SiebelApp.contentUpdater.callBackMap[b].pop():{};if(a&&a.handler){a.handler.call(a.object)}if(SiebelApp.contentUpdater.callBackMap[b]&&SiebelApp.contentUpdater.callBackMap[b].length===0){delete SiebelApp.contentUpdater.callBackMap[b]}},Nullify:function(a){SiebelJS.Log("[ContentLoader] -> Nullifying ActiveX")},updateSrc:function(a,b){$(a).attr("src",b);this.loadContent()},updateSrcForFrame:function(a,b){var c=a.split(".");this.updateSrc("[name="+c[c.length-1]+"]",b)},AddCallBack:function(b,c,a){this.callBackMap[b]=this.callBackMap[b]||[];this.callBackMap[b].push({handler:c,object:a})},callBackMap:{}};$(function(){SiebelApp.contentUpdater.loadContent()});