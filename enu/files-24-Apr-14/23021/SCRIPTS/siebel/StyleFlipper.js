SiebelApp.ThemeManager=function(){var e={};var g=[];var a=0;var f=[];var b=[];function d(k){$.ajaxSetup({async:false});for(var l=0,j=k.length;l<j;l++){$.getScript(k[l],function(i,m){})}$.ajaxSetup({async:true})}d(b);function c(l){var k,j;if(l&&l.objList){for(k=0,j=l.objList.length;k<j;k++){l.objList[k].detach()}}for(k=0,j=f.length;k<j;k++){$("#"+f[k]).remove()}f=[]}function h(k){if(k){if(typeof(k.css)==="object"){for(var j in k.css){if(k.css[j]){if($("#"+j)[0]){$("#"+j).attr("href",k.css[j])}else{if(document.createStyleSheet){document.createStyleSheet(k.css[j]);$("link[href='"+k.css[j]+"'").attr("id",j)}else{$("head").append("<link id='"+j+"' type='text/css' href='"+k.css[j]+"' rel='stylesheet' />")}f.push(j)}}}}if(typeof(k.reqJs)==="object"&&k.reqJs.length){d(k.reqJs)}k.reqJs=[];if(typeof(k.objList)==="object"){for(var i in k.objList){if(typeof k.objList[i]!="function"){k.objList[i].attach()}}}k.firstLoad=(k.firstLoad===undefined)?true:false}}return{getActiveTheme:function(){return g[a]},getTheme:function(i){return e[i]||{}},isChangeAllowed:function(){return true},addTheme:function(i,j){e[i]=j;g.push(i);if(g.length===1){this.flipTheme(i)}},addResource:function(i,j){if(SiebelApp.Utils.IndexOf(g,i)!==-1){c(e[i]);$.extend(true,e[i],j);h(e[i])}return false},flipTheme:function(i){var j=-1;if(i){for(var k=0;k<g.length;k++){if(g[k]==i){j=k;break}}if(j==-1){return}}else{j=(a+1)%g.length}c(e[g[a]]);h(e[g[j]]);a=j;setTimeout(function(){SiebelApp.EventManager.fireEvent("themechange",{theme:g[j]})},(e[g[j]].firstLoad)?500:10)}}}();SiebelApp.ThemeFlipper=function(b){var a=b;this.getDelegate=function(){return a}};SiebelApp.ThemeFlipper.prototype.FlipStyle=function(){this.getDelegate().flipTheme()};SiebelApp.ThemeFlipper.prototype.setStyleState=function(){this.getDelegate().setStyleState()};new SiebelApp.ThemeFlipper(SiebelApp.ThemeManager);