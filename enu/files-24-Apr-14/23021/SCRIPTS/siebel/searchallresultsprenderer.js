if(typeof(SiebelAppFacade.SearchAllResultsPRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.SearchAllResultsPRenderer");if(typeof(SiebelApp)!=="undefined"&&typeof(SiebelApp.S_App)!=="undefined"){if(typeof(SiebelApp.Constants)!=="undefined"){SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_SEARCH_ALL_RESULTS_PRENDR"),"SiebelAppFacade.SearchAllResultsPRenderer")}}SiebelAppFacade.SearchAllResultsPRenderer=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");var l=SiebelApp.S_App.LocaleObject;var b=0;var g=0;var h="";var k=0;var e=0;var f=0;function a(n){SiebelAppFacade.SearchAllResultsPRenderer.superclass.constructor.call(this,n);var m=n;this.GetPM=function(){return m};m.AttachPMBinding("ShowRefineResultsDialog",function(){var o=m.Get("ShowRefineResultsDialog");if(o){c.call(this,m.Get("ShowRefineKeywords"))}},{scope:this});m.AttachPMBinding("ShowTotResults",function(){var o=m.Get("ShowTotResults");if(o){d.call(this,m.Get("ShowTotalCount"))}},{scope:this})}SiebelJS.Extend(a,SiebelAppFacade.PhysicalRenderer);a.prototype.ShowUI=function(){var G=this.GetPM();var p=CCFMiscUtil_CreatePropSet();G.OnControlEvent("OnLoadGetParams",p);var M=p.GetProperty("TotalRecords");var J=p.GetProperty("SearchFor");h=p.GetProperty("BCType");f=M;if(J===""){J="Empty"}if(j.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){var u=CCFMiscUtil_CreatePropSet();var r='<span class="siebui-search-refine-newline-dialog"></span>';$("#srchrefine").append(r).trigger("create");var E=0;var z=G.Get("GetRecordSet");var n='<span class="siebui-search-bigitallictext-dialog">'+l.GetLocalString("IDS_SWE_JQGRID_SEARCH_CAPTION")+"</span>";var w=l.GetLocalString("RTCReplaceCount");var A=w.replace(/%1/,M);var q='<button type = "button" id= "srch-prev-button" class="paginationappletButton" title="'+l.GetLocalString("IDS_SWE_DATEPICKER_PREV_TEXT")+'"><img src="images/arrowLeft.png" alt="PREV" height="15" width="15" /></button>';var v='<button type = "button" id= "srch-next-button" class="paginationappletButton" title="'+l.GetLocalString("IDS_SWE_DATEPICKER_NEXT_TEXT")+'"><img src="images/arrowRight.png" alt="NEXT" height="15" width="15" /></button>';var O='<span id="total-records" class="siebui-search-titletext-dialog">'+A+"</span>";var K='<span class="siebui-search-bigitallictext-dialog">'+M+"</span>";var B='<span class="siebui-search-bigitallictext-dialog">'+J+"</span>";var N='<span id="text-with" class="siebui-search-titletext-dialog">'+l.GetLocalString("RTCReplaceWith")+"</span>";var y='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_NAME")+"</span>";var s='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_SOURCE")+"</span>";var D='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_CALENDAR_DATE_COMBOBOX_TITLE")+"</span>";var t="<table id='table-header-search-results' width=100%><tr class=siebui-applet-buttons><td>"+O+"&emsp;"+N+"&emsp; "+B+"</td><td>"+v+q+'</td></tr><tr><td><button type ="button" id="srch-refine-button" class="refineappletButton">'+l.GetLocalString("IDS_SWE_CKEDITOR_MORE_SUGGESTIONS")+"</button></td></tr></table>";var I=t+r+r+"<table id='table-search-results' class=ui-jqgrid-htable><tr class=ui-jqgrid-labels><td>"+y+"&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</td><td>"+s+"&emsp;&emsp;&emsp;&emsp;&emsp;</td><td>"+D+"&emsp;</td></tr>";var F=z.length;e=F;var H="";var x=0;var o;for(E=0;E<F;E++){u=j.DecodeFromQueryString(z[E]["URL"]);if(u.GetProperty("SWEView")){H="SWECmd="+u.GetProperty("SWECmd")+"&SWEView="+u.GetProperty("SWEView")+"&SWEApplet0="+u.GetProperty("SWEApplet0")+"&SWERowId0="+u.GetProperty("SWERowId0");o='<a href="javascript:void(0)"id="URL'+E+'"value ="'+H+'">'+z[E]["Title"]+"</a>"}else{H=z[E]["URL"];o="<a href="+H+' target = _blank value ="'+H+'">'+z[E]["Title"]+"</a>"}var L='<span class="siebui-search-colorbigtext-dialog">'+z[E]["Title"]+"</span>";var m='<span class="siebui-search-itallictext-dialog">'+z[E]["Summary"]+"</span>";var C='<span class="siebui-search-itallictext-dialog">'+z[E]["URL"]+"</span>";I+="<tr><td>"+o+"</td><td>"+z[E]["DataSource"]+"</td><td>"+z[E]["Date"]+"</td></tr><tr><td>"+m+"</td></tr>"}I+="</table>";$("#srchrefine").append(I).trigger("create")}};a.prototype.BindEvents=function(r){var p=this.GetPM();switch(r){case"RefineKeyword":var n=0;for(n=0;n<k;n++){var m="button-keyword"+n;$(document).delegate("#"+m+"","click",{ctx:this},function(u){var x=u.currentTarget.value;var v="TRUE";var w=[];var t=$("#"+m+"").val();p.SetProperty("Freetext",x);p.SetProperty("BCType",h);$("#Refine_Search_Dialog").dialog("close");p.OnControlEvent("OnExecuteRefineSearch")})}break;case"drilldown":var o=0;for(o=0;o<e;o++){var q="URL"+o;var s;$("#"+q+"").bind("click",{ctx:this},function(t){s=t.currentTarget.getAttribute("value");SiebelApp.S_App.GotoView("","",s,"")})}break;default:$("#srch-refine-button").bind("click",{ctx:this},function(t){p.SetProperty("SubOperation","GetKeywords");p.OnControlEvent("OnExecuteRefineResults")});$("#srch-next-button").bind("click",{ctx:this},function(t){p.SetProperty("BCType",h);p.OnControlEvent("OnExecuteNextRecordSet")});$("#srch-prev-button").bind("click",{ctx:this},function(t){p.SetProperty("BCType",h);p.OnControlEvent("OnExecutePrevRecordSet")});var o=0;for(o=0;o<e;o++){var q="URL"+o;var s;$("#"+q+"").bind("click",{ctx:this},function(t){s=t.currentTarget.getAttribute("value");SiebelApp.S_App.GotoView("","",s,"")})}break}};a.prototype.BindData=function(C){if(C){var G=this.GetPM();var E=0;var M=f;var y=G.Get("GetRecordSet");if(y){var J=G.Get("GetRecordSet")[0]["Search for"]}$("#table-search-results tr").remove();var q='<span class="siebui-search-refine-newline-dialog"></span>';var n='<span class="siebui-search-bigitallictext-dialog">'+l.GetLocalString("IDS_SWE_JQGRID_SEARCH_CAPTION")+"</span>";var v=l.GetLocalString("RTCReplaceCount");var z=v.replace(/%1/,M);var p='<button type = "button" id= "srch-prev-button" class="appletButton"><img src="images/arrowRight.png" alt="PREV" height="15" width="15"/></button>';var u='<button type = "button" id= "srch-next-button" class="appletButton"><img src="images/arrowLeft.png" alt="NEXT" height="15" width="15"/></button>';var O='<span id="total-records" class="siebui-search-bigitallictext-dialog">'+v+"</span>";var K='<span class="siebui-search-bigitallictext-dialog">'+z+"</span>";var A='<span class="siebui-search-bigitallictext-dialog">'+J+"</span>";var N='<span id="text-with" class="siebui-search-titletext-dialog">'+l.GetLocalString("RTCReplaceWith")+"</span>";var x='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_NAME")+"</span>";var r='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_SOURCE")+"</span>";var D='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_CALENDAR_DATE_COMBOBOX_TITLE")+"</span>";
var t=A;$(t).insertAfter("#text-with");var I="<table id='table-search-results' class=ui-jqgrid-htable><tr class=ui-jqgrid-labels><td>"+x+"&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</td><td>"+r+"&emsp;&emsp;&emsp;&emsp;&emsp;</td><td>"+D+"&emsp;</td></tr>";var F=y.length;var s=CCFMiscUtil_CreatePropSet();var o;for(E=0;E<F;E++){var H="";var w=0;s=j.DecodeFromQueryString(y[E]["URL"]);if(s.GetProperty("SWEView")){H="SWECmd="+s.GetProperty("SWECmd")+"&SWEView="+s.GetProperty("SWEView")+"&SWEApplet0="+s.GetProperty("SWEApplet0")+"&SWERowId0="+s.GetProperty("SWERowId0");o='<a href="javascript:void(0)"id="URL'+E+'"value ="'+H+'">'+y[E]["Title"]+"</a>"}else{H=y[E]["URL"];o="<a href="+H+' target = _blank value ="'+H+'">'+y[E]["Title"]+"</a>"}var L='<span class="siebui-search-colorbigtext-dialog">'+y[E]["Title"]+"</span>";var m='<span class="siebui-search-itallictext-dialog">'+y[E]["Summary"]+"</span>";var B='<span class="siebui-search-itallictext-dialog">'+y[E]["URL"]+"</span>";I+="<tr><td>"+o+"</td><td>"+y[E]["DataSource"]+"</td><td>"+y[E]["Date"]+"</td></tr><tr><td>"+m+"</td></tr>"}I+="</table>";$(I).insertAfter("#srch-refine-button").trigger("create");this.BindEvents("drilldown")}};a.prototype.ShowSearchResultsDialog=function(q){var w="";var v='<button type = "button" id= "srch-showall-button" class="appletButton">Show All</button>';$("srch-button").append(v).trigger("create");var r='<span class="siebui-search-refine-newline-dialog"> </span>';$("srch-showall-button").append(r).trigger("create");var o=CCFMiscUtil_CreatePropSet();var t='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_NAME")+"</span>";var s='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_SWE_CKEDITOR_SOURCE")+"</span>";var x='<span class="siebui-search-bigheadingtext-dialog">'+l.GetLocalString("IDS_CALENDAR_DATE_COMBOBOX_TITLE")+"</span>";var p='<span class="siebui-search-bigheadingtext-dialog">----------------------------------------------------------------------------------------</span>';var C='<span class="siebui-search-bigheadingtext-dialog">-------------</span>';var m='<span class="siebui-search-bigheadingtext-dialog">------</span>';shtml="<table><tr><td>"+t+"</td><td>"+s+"</td><td>"+x+"</td></tr><tr><td>"+p+"</td><td>"+C+"</td><td>"+m+"</td></tr>";var y=5;var z=0;if(q.GetChildCount()<y){y=q.GetChildCount()}for(z=0;z<y;z++){o=q.GetChild(z);var n='<span class="siebui-search-bigtext-dialog">'+o.GetProperty("Title")+"</span>";var u='<span class="siebui-search-itallictext-dialog">'+o.GetProperty("Summary")+"</span>";shtml+="<tr><td>"+n+"</td><td>"+o.GetProperty("DataSource")+"</td><td>"+o.GetProperty("Date")+"</td></tr><tr><td>"+u+"</td></tr>"}shtml+="</table>"+r+v;var D=navigator.userAgent.toString().toLowerCase();var A=(D.indexOf("msie")!=-1);w=l.GetLocalString("IDS_SWE_SEARCH_WATER_MARK");var E='<span class="siebui-search-titletext-dialog">'+w+"</span>";if(A){var B=$('<div id="Srch_Dialog" class="siebui-search-dialog" ></div>').html(shtml).dialog({autoOpen:false,title:E,position:["center",80],height:800,width:500,modal:false,cleanOnClose:true,resizable:false,open:function(F,G){}})}else{var B=$('<div id="Srch_Dialog" class="siebui-search-dialog" ></div>').html(shtml).dialog({autoOpen:false,title:E,position:["center",80],height:800,width:500,modal:false,cleanOnClose:true,resizable:false,show:{effect:"drop",direction:"up",duration:1000},hide:{effect:"drop",direction:"up",duration:1000},open:function(F,G){}})}B.dialog("open")};function c(t){var p="";var s=0;var q="<table id='table-refine'>";k=t.length;for(s=0;s<k;s++){var o='<span class="siebui-search-itallictext-dialog" id="refine-keyword" value="'+t[s]+'">'+t[s]+"</span>";var r='<button type="button" class="appletButton" id="button-keyword'+s+'" value="'+t[s]+'">'+o+"</button>";$("srch-refine-button").append(r).trigger("create");q+="<tr><td>"+r+"</td></tr>"}q+="</table>";var v=navigator.userAgent.toString().toLowerCase();var u=(v.indexOf("msie")!=-1);p=l.GetLocalString("IDS_SWE_CKEDITOR_OPTIONS");var m='<span class="siebui-search-titletext-dialog">'+p+"</span>";if(u){var n=$('<div id="Refine_Search_Dialog" class="siebui-search-dialog" ></div>').html(q).dialog({autoOpen:false,title:m,position:["right",50],height:500,width:400,modal:false,cleanOnClose:true,resizable:false,open:function(w,x){}})}else{var n=$('<div id="Refine_Search_Dialog" class="siebui-search-dialog" ></div>').html(q).dialog({autoOpen:false,title:m,position:["right",50],height:500,width:400,modal:false,cleanOnClose:true,resizable:false,show:{effect:"drop",direction:"up",duration:1000},hide:{effect:"drop",direction:"up",duration:1000},open:function(w,x){}})}n.dialog("open");this.BindEvents("RefineKeyword");this.GetPM().SetProperty("ShowRefineResultsDialog",false)}function d(n){f=n;$("#total-records").remove();var p=l.GetLocalString("RTCReplaceCount");var o=p.replace(/%1/,f);var m='<span id="total-records" class="siebui-search-titletext-dialog">'+o+" </span>";$(m).insertBefore("#text-with").trigger("create");this.GetPM().SetProperty("ShowTotResults",false)}return a}())};