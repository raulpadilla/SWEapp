if(typeof(SiebelAppFacade.NavigationPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.NavigationPresentationModel");if(typeof(SiebelApp)!="undefined"&&typeof(SiebelApp.S_App)!="undefined"){if(typeof(SiebelApp.Constants)!="undefined"){SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_UIDEF_SCR_PMODEL"),"SiebelAppFacade.NavigationPresentationModel")}}SiebelAppFacade.NavigationPresentationModel=(function(){var g=SiebelJS.Dependency("SiebelApp.Constants");var h=SiebelJS.Dependency("SiebelApp.Utils");function d(j,k){this.type=k;SiebelAppFacade.NavigationPresentationModel.superclass.constructor.call(this,j)}SiebelJS.Extend(d,SiebelAppFacade.PresentationModel);d.prototype.Init=function(){this.AddProperty("GetType",this.type);this.AddProperty("placeholder",this.type===g.get("SWE_PROP_NC_ID_SCREEN_CONTROL")?g.get("SWE_PROP_NC_ID_SCREEN_CONTROL"):g.get("SWE_PROP_NC_ID_VIEW_CONTROL"));this.AddProperty("IsScreen",(this.Get("GetType")===g.get("SWE_PROP_NC_ID_SCREEN_CONTROL")));this.AddProperty("GetTitle",SiebelApp.S_App.GetScreenNavTitle());if(this.Get("GetType")===g.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){this.AttachPSHandler(g.get("SWE_PROP_NC_SCREENCTRL_INFO"),function(j){c.call(this,j)});this.AttachPSHandler(g.get("SWE_PROP_NC_FLOATING_TAB_INFO"),function(j){b.call(this,j);c.call(this,j)});this.AttachPSHandler(g.get("SWE_PROP_NC_AGGREGATE_INFO"),function(j){b.call(this,j);c.call(this,j)})}else{this.AttachPSHandler(g.get("SWE_PROP_NC_SUBDETAIL_INFO"),function(j){b.call(this,j);c.call(this,j)});this.AttachPSHandler(g.get("SWE_PROP_NC_DETAIL_INFO"),function(j){b.call(this,j);c.call(this,j)})}this.AddMethod("Refresh",null,{core:true});this.AttachEventHandler("OnClick",function(j){return SiebelApp.S_App.GotoView(j)})};d.prototype.Setup=function(j){SiebelAppFacade.NavigationPresentationModel.superclass.Setup.call(this,j);if(this.Get("GetType")===g.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){c.call(this,j)}};function c(j){var k=j.GetType();if(k===g.get("SWE_PROP_NC_SCREENCTRL_INFO")){i.call(this,j)}else{if(k===g.get("SWE_PROP_NC_FLOATING_TAB_INFO")){f.call(this,j)}else{if(k===g.get("SWE_PROP_NC_AGGREGATE_INFO")||k===SiebelApp.Constants.get("SWE_PROP_NC_SUBDETAIL_INFO")){e.call(this,j,false)}else{if(k===g.get("SWE_PROP_NC_DETAIL_INFO")){e.call(this,j,true)}else{return}}}}}function i(m){var n=m.GetChildCount();var q="";var p;var j=g.get("SWE_PST_QTP_INFO");var r=g.get("SWE_PROP_NC_ITEM_INFO");if(this.Get("GetTabInfo")===null||this.Get("GetTabInfo")===undefined){this.AddProperty("GetTabInfo",{})}if(this.Get("GetTabItemsQTPInfo")===undefined){this.AddProperty("GetTabItemsQTPInfo",[])}for(var l=0,k=0;l<n;l++){var o=m.GetChild(l);p=o.GetType();if(p===j){this.AddProperty("GetTabContainerQTPInfo",o);continue}else{if(p!==r){continue}}this.Get("GetTabInfo")["tabScreen"+k]=a.call(this,o);k++}q=m.GetProperty(g.get("SWE_PROP_NC_SELECTED_INDEX"));this.AddProperty("GetSelectedTabKey","tabScreen"+q);this.AddProperty("GetDataReload",true)}function a(j){if(h.IsEmpty(j)){return}var k={};k.screenName=j.GetProperty(g.get("SWE_PROP_NC_SCREEN_NAME"));k.defaultViewName=j.GetProperty(g.get("SWE_PROP_NC_VIEW_NAME"));k.captionName=j.GetProperty(g.get("SWE_PROP_NC_CAPTION"));k.tabIcon=j.GetProperty(g.get("SWE_PROP_NC_SCREEN_TAB_ICON"));var m=g.get("SWE_PST_QTP_INFO");for(var l=0;l<j.GetChildCount();l++){if(j.GetChild(l).GetType()===m){this.Get("GetTabItemsQTPInfo").push(j.GetChild(l))}}return k}function f(j){if(h.IsEmpty(j)||j.GetType()!==g.get("SWE_PROP_NC_FLOATING_TAB_INFO")){return}var n=j.GetChild(0);if(n.GetType()!==g.get("SWE_PROP_NC_ITEM_INFO")){return}var q=false;var o=0;var p=n.GetProperty(g.get("SWE_PROP_NC_SCREEN_NAME"));var m=g.get("SWE_PROP_NC_SELECTED_INDEX");var l;var k=this.Get("GetTabInfo");for(var r in k){if(k.hasOwnProperty(r)){if(this.Get("GetTabInfo")[r].screenName===p){p=l.GetProperty(m);if(p){this.AddProperty("GetSelectedTabKey","tabScreen"+p)}else{this.AddProperty("GetSelectedTabKey",r)}q=true}o++}}if(q){return}this.Get("GetTabInfo")["tabScreen"+o]=a.call(this,n);this.AddProperty("GetSelectedTabKey","tabScreen"+o);this.AddProperty("GetDataReload",true)}function e(s,v){if(v){this.AddProperty("GetTabInfo",{});this.AddProperty("GetTabContainerQTPInfo ",null);this.AddProperty("GetTabItemsQTPInfo",[])}else{var l={};this.AddProperty("GetSelectedTabLinkInfo",l);this.AddProperty("GetTabViewLinkContainerQTPInfo",null);this.AddProperty("GetTabViewLinkItemsQTPInfo",[])}var p=s.GetChildCount();var u;var k=g.get("SWE_PST_QTP_INFO");var w=g.get("SWE_PROP_NC_ITEM_INFO");if(!((p===1)&&(s.GetChild(0).GetType()===k))){for(var o=0,t=0;o<p;o++){var n={};var q=s.GetChild(o);var r=q.GetType();if(r===k){if(v){this.AddProperty("GetTabContainerQTPInfo ",q)}else{this.AddProperty("GetTabViewLinkContainerQTPInfo",q)}continue}else{if(r===g.get("SWE_QTP_JUMP_TAB_INFO")){if(q.GetChild(0).GetType()===k){this.AddProperty("GetJumpTabQTPInfo",q.GetChild(0))}continue}else{if(r!==w){continue}}}u=q.GetProperty(g.get("SWE_PROP_NC_VIEW_NAME"));n.viewName=u;u=q.GetProperty(g.get("SWE_PROP_NC_CAPTION"));n.captionName=u;if(v){this.Get("GetTabInfo")["tabScreen"+t]=n}else{this.Get("GetSelectedTabLinkInfo")["tabView"+t]=n}for(var m=0;m<q.GetChildCount();m++){if(q.GetChild(m).GetType()===k){if(v){this.Get("GetTabItemsQTPInfo").push(q.GetChild(m))}else{this.Get("GetTabViewLinkItemsQTPInfo").push(q.GetChild(m))}}}t++}}u=s.GetProperty(g.get("SWE_PROP_NC_SELECTED_INDEX"));if(u!==undefined){v?this.AddProperty("GetSelectedTabKey","tabScreen"+u):this.AddProperty("GetSelectedLinkKey","tabView"+u)}this.AddProperty("GetDataReload",true)}function b(o){var k=true;var r=null;var q=null;var m=SiebelApp.S_App;var n=g.get("SWE_PROP_NC_SELECTED_INDEX");var j=g.get("SWE_PST_QTP_INFO");q=o.GetType();if((q===g.get("SWE_PROP_NC_PDQ_INFO"))||(q===g.get("SWE_PST_QTP_INFO"))){return}for(k=true;(r=o.EnumProperties(k))!==null;k=false){if(r!==n){q=o.GetProperty(r);if(m===null||m===undefined){break}else{var p=m.LookupStringCache(q);if(p===null||p===undefined){continue}o.SetProperty(r,p)}}}for(var l=0;l<o.GetChildCount();l++){if(o.GetType()!==j){b.call(this,o.GetChild(l))}}}return d}())};