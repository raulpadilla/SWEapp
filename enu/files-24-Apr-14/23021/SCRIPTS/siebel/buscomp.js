if(typeof(SiebelApp.S_App.BusComp)=="undefined"){Namespace("SiebelApp.S_App.BusComp");SiebelApp.S_App.BusComp=(function(){var X=SiebelApp.Utils;var D=SiebelApp.Constants;var G=D.get("SWE_PROP_BC_OPERATION");var au=D.get("SWE_PROP_BC_NOTI_BEGIN");var y=D.get("SWE_PROP_BC_NOTI_GENERIC");var t=D.get("SWE_PROP_BC_NOTI_STATE_CHANGED");var x=D.get("SWE_PROP_BC_NOTI_NEW_ACTIVE_ROW");var ab=D.get("SWE_PROP_BC_NOTI_DELETE_RECORD");var aa=D.get("SWE_PROP_BC_NOTI_DELETE_WORKSET");var ai=D.get("SWE_PROP_BC_NOTI_INSERT_WORKSET");var az=D.get("SWE_PROP_BC_NOTI_NEW_SELECTION");var h=D.get("SWE_PROP_BC_NOTI_NEW_DATA");var a=D.get("SWE_PROP_BC_NOTI_NEW_RECORD");var ak=D.get("SWE_PROP_BC_NOTI_NEW_DATA_WS");var Y=D.get("SWE_PROP_BC_NOTI_NEW_FIELD_DATA");var ac=D.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA");var g=D.get("SWE_PROP_BC_NOTI_NEW_RECORD_DATA_WS");var O=D.get("SWE_PROP_BC_NOTI_END");var ah=D.get("SWE_PROP_BC_NOTI_CHANGE_SELECTION");var e=D.get("SWE_PROP_BC_NOTI_NEW_PRIMARY");var at=D.get("SWE_PROP_BC_NOTI_BEGIN_QUERY");var b=D.get("SWE_PROP_BC_NOTI_NEW_QUERYSPEC");var S=D.get("SWE_PROP_BC_NOTI_NEW_FIELD_QUERYSPEC");var N=D.get("SWE_PROP_BC_NOTI_END_QUERY");var A=D.get("SWE_PROP_BC_NOTI_EXECUTE");var v=D.get("SWE_PROP_BC_NOTI_SCROLL_AMOUNT");var ag=D.get("SWE_PROP_IS_IN_QUERY");var n=D.get("SWE_NOTIFY_PAGE_REFRESH");var V=D.get("SWE_PROP_BC_NOTI_NEW_FIELD_LIST");function J(){fieldName="";newValue="";changed=false;setOnServer=false}function al(){var aA={};var a1=[];var aU=null;var aN=[];var aW=[];var aY=null;var aH=new SiebelApp.S_App.NotifyObject();var aZ;var aD=false;var aM=true;var aR=-1;var aL=-1;var aE=0;var aI=false;var aJ=false;var aX=false;var aS=true;var a2=true;var aV=true;var aQ=true;var aP=true;this.canUpdate=true;this.canUpdateDynamic=true;this.commitPending=false;this.tempCommitPending=false;var aO=false;var a0=false;var aT=false;var aK=false;var aC=false;var aG;var aB;var aF=0;this.m_bHierarchyBusComp=false;this.m_bHierarchyParentIdFld=null;this._EndLife=function(){aY=aH=null};this.IsStale=function(){return aM};this.SetStale=function(a3){aM=a3};this.Reset=function(){aA={};aN=[]};this.GetEnumUpdatePos=function(){return aF};this.SetEnumUpdatePos=function(a3){aF=a3};this.GetUpdateMode=function(){return m_updateMode};this.SetUpdateMode=function(a3){m_updateMode=a3};this.GetUpdateArray=function(){return a1};this.SetUpdateArray=function(a3){a1=a3};this.SetUpdateArrayValue=function(a3,a4){a1[a3]=a4};this.IsDeletePending=function(){return aO};this.IsInsertPending=function(){return a0};this.IsCommitPending=function(){return(this.commitPending||(this.GetUpdateArray()&&this.GetUpdateArray().length!==0)||X.IsTrue(this.GetCommitPending()))};this.SetSortSpec=function(a3){aG=a3};this.GetSortSpec=function(){return aG};this.SetSearchSpec=function(a3){aB=a3};this.GetSearchSpec=function(){return aB};this.HasCommitPending=function(){return(this.commitPending||this.tempCommitPending)};this.IsInQueryState=function(){return aK};this.SetInQueryState=function(a3){aK=a3};this.GetNotifyObject=function(){return aH};this.GetFieldMap=function(){return aA};this.GetFieldList=function(){return aN};this.RemoveAllFields=function(){aN=[];aA=null;aA={}};this.GetRawRecords=function(){return aW};this.ReInitializeRawRecords=function(){aW=[]};this.SetBusObj=function(a3){aY=a3};this.GetBusObj=function(){SiebelApp.S_App.ErrorObject.ClearErrorMsg();return aY};this.SetSelection=function(a3){this.ClearUpdates();aR=parseInt(a3);return(true)};this.GetSelection=function(){while(this.GetRawRecords().length<=aR){aR--}return aR};this.IsNumRowsKnown=function(){return aI};this.GetNumRows=function(){return aE};this.SetNumRowsKnown=function(a3){aI=a3};this.SetNumRows=function(a3){aE=a3};this.GetCurRowNum=function(){return aL};this.SetCurRowNum=function(a3){aL=a3};this.GetParentBusComp=function(){if(X.IsEmpty(this.GetParentId())){aZ=null}else{aZ=this.GetBusObj().GetBusComp(this.GetParentId())}this.GetParentBuscomp=function(){return aZ};return aZ};this.GetRecordSet=function(a9){var a7=this.GetFieldList();var a8=[];var a5=this.GetRawRecords().length;for(var a4=0;a4<a5;a4++){var a3={};for(var a6=0;a6<a7.length;a6++){var ba=a7[a6];ba=SiebelApp.S_App.LookupStringCache(ba);a3[ba]=this.GetRawRecords()[a4][a6]}a8.push(a3)}if(true==this.IsHierarchyBusComp()){a8=this.UpdateHierInfo(a8)}this.GetRecordSet=function(bg){if(bg==true||this.IsStale()){var bf=this.GetFieldList();var bd=this.GetRawRecords().length;a8=[];for(var bc=0;bc<bd;bc++){var bb={};for(var be=0;be<bf.length;be++){var bh=bf[be];bh=SiebelApp.S_App.LookupStringCache(bh);bb[bh]=this.GetRawRecords()[bc][be]}a8.push(bb)}if(true==this.IsHierarchyBusComp()){a8=this.UpdateHierInfo(a8)}this.SetStale(false);return a8}else{return a8}};return a8};this.UpdateHierInfo=function(a5){var bc=a5.length;var a9,a4,a3,a7,a8;var bb=this.GetHierarchyParentId();for(var ba=0;ba<bc;ba++){a9=a5[ba]["Outline Number"];a4=false;a3=0;a7=null;a8=false;for(var a6=0;a6<a9.length;a6++){if(a9.charAt(a6)=="."){a3++}}a5[ba]["Hierarchy Level"]=a3;a8=a5[ba]["Has Children"];if(X.IsTrue(a8)){a4=false}else{a4=true}a5[ba]["Is Leaf"]=a4;a7=this.GetHierarchyParentRowIdx(a5,a5[ba][bb]);a5[ba]["Parent Id"]=a7;if(X.IsTrue(a5[ba]["Is Expanded"])){a5[ba]["Is Expanded"]=true}else{a5[ba]["Is Expanded"]=false}}return a5};this.GetHierarchyParentRowIdx=function(a6,a7){var a4=a6.length;var a5=null;for(var a3=0;a3<a4;a3++){if(a7==a6[a3]["Id"]){a5=a3}}return(a5+1)};this.ClearUpdates=function(){if(this.GetUpdateArray()!=null){this.tempCommitPending=true}this.SetUpdateArray(null);this.SetUpdateMode(null)};this.NewSelection=function(a3){var a4;if(a3<-1||this.GetRawRecords()==null||a3>=this.GetRawRecords().length){return}if(a3==this.GetSelection()){return}this.ClearUpdates();this.SetSelection(a3)};this.NewFieldData=function(a4,a3){};this.HasCustomShadow=function(){return aD};this.SetCustomShadow=function(a3){aD=a3}}al.prototype.CanUpdate=function(){return this.canUpdate};al.prototype.EndLife=function(){var aB=this.GetFieldMap();for(var aA in aB){if(aB.hasOwnProperty(aA)){aB[aA].SetBusComp(null);delete aB[aA]}}aB=null;this._EndLife()};al.prototype.GetFieldValue=function(aA){return this.GetRecordSet()[this.GetSelection()][aA]};al.prototype.WSHome=function(aA){this.GetNotifyObject().SetCurrRow(aA,0);if(this.GetNotifyObject().GetCurrRow(aA)>this.GetRawRecords().length){this.GetNotifyObject().SetCurrRow(aA,-1);return false}return true};al.prototype.WSNextRecord=function(aA){var aD=this.GetNotifyObject();var aC=aD.GetCurrRow(aA);var aB=aD.GetWorkSetSize(aA);if(aC+1>=aB){return(false)}if(aD.GetBegRow(aA)+aC+1>=this.GetRawRecords().length){return false}this.GetNotifyObject().SetCurrRow(aA,aC+1);return(true)};al.prototype.IsCurWSRecActive=function(aB){var aE=this.GetSelection();var aC=this.GetNotifyObject();var aA=aC.GetBegRow(aB);var aD=aC.GetCurrRow(aB);if((aE>=0)&&(aA+aD==aE)){return true}return false};al.prototype.SetWorkSetSize=function(aA,aB){if(this.GetNotifyObject().GetCurrRow(aA)>=aB){this.GetNotifyObject().SetCurrRow(aA,aB-1);return}else{this.GetNotifyObject().SetWorkSetSize(aA,aB)
}};al.prototype.GetCurRow=function(aA){return this.GetNotifyObject().GetCurrRow(aA)};al.prototype.SetCurRow=function(aA,aB){return this.GetNotifyObject().SetCurrRow(aA,aB)};al.prototype.EnumUpdates=function(aA){if(aA){this.SetEnumUpdatePos(0)}if(this.GetUpdateArray()==null||this.GetEnumUpdatePos()>=this.GetUpdateArray().length){return(null)}var aB=this.GetUpdateArray()[this.GetEnumUpdatePos()];while((aB==null||!aB.changed||aB.setOnServer)&&(this.GetEnumUpdatePos()<this.GetUpdateArray().length)){this.SetEnumUpdatePos(this.GetEnumUpdatePos()+1);aB=this.GetUpdateArray()[this.GetEnumUpdatePos()]}if(this.GetEnumUpdatePos>=this.GetUpdateArray().length){return(null)}this.SetEnumUpdatePos(this.GetEnumUpdatePos()+1);return(aB)};al.prototype.AddRecord=function(aA){this.GetRawRecords().push(aA)};al.prototype.InsertRecord=function(aB,aA){this.GetRawRecords().splice(aB,0,aA)};al.prototype.PositionById=function(aB){for(var aA=0;aA<this.GetRawRecords().length;aA++){if(this.GetRecordSet()[aA]["Id"]==aB){m_selectedRow=this.GetRawRecords()[aA];this.SetSelection(aA);this.GetNotifyObject().Notify(D.get("SWE_NOTIFICATION_TYPE_POSITION"));break}}};al.prototype.HandleQuery=function(aF){var aC=this.GetRecordSet();var aE=[];for(var aB=0;aB<aC.length;aB++){var aA=true;for(var aG in aF){for(var aH in aF[aG]){var aD=aF[aG][aH];if(aC[aB][aG].indexOf(aD)==-1){aA=false;break}}}if(aA){aE.push(aC[aB])}}this.GetRecordSet=function(){return aE};this.GetNotifyObject().Notify(D.get("SWE_NOTIFICATION_TYPE_REQUERY"));this.GetRecordSet=function(){return aC}};al.prototype.GetIdValue=function(){var aA=this.GetRecordSet();if(this.GetSelection()<0){return""}if(aA.length>0&&this.GetSelection()>=0){return aA[this.GetSelection()][D.get("SWE_ROW_ID_FIELD")]}return""};al.prototype.Register=function(aA){this.GetNotifyObject().Register(aA)};al.prototype.DeRegister=function(aA){this.GetNotifyObject().DeRegister(aA)};al.prototype.ProcessObjectInfo=function(aA){if(aA.GetType()!=D.get("SWE_PST_BUSCOMP_INFO")){return}this.SetBusObj(SiebelApp.S_App.GetActiveBusObj());var aC=X.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,aA);aC("GetName","SWE_PROP_NAME");aC("GetCommitPending","SWE_PROP_IS_COMMIT");aC("IsHierarchyBusComp","SWE_PROP_HAS_HIER");aC("GetNewRecPending","SWE_PROP_IS_NEW_REC_PEND");aC("IsTransientBC","SWE_PROP_IS_TRANSIENT");if(aA.PropertyExists(ag)){this.SetInQueryState(X.IsTrue(aA.GetProperty(ag)))}var aB=this.IsHierarchyBusComp();if(!X.IsEmpty(aB)&&aB=="1"){this.m_bHierarchyBusComp=true}var aE=aA.GetValue();this.GetVarName=function(){return aE};var aD=aA.GetProperty(D.get("SWE_PROP_SHADOW"));if(aD!=null&&aD!=undefined){if(SiebelApp.S_App.CreateJSShadow(this,aD)){this.SetCustomShadow(true)}}this.ProcessObjectInfoDync(aA);this.ProcessChildObjectInfo(aA);aA=null};al.prototype.ProcessObjectInfoDync=function(aA){var aC=X.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,aA);aC("GetParentId","SWE_PROP_PARENT_ID");aC("GetHierarchyParentId","SWE_PROP_HIER_PAR_ID_FLD");var aB=this.GetHierarchyParentId();if(!X.IsEmpty(aB)){this.m_bHierarchyParentIdFld=aB}};al.prototype.ProcessNFLObjectInfo=function(aE){var aB=SiebelApp.S_App.BCField;var aA=aE.EnumChildren(true);do{var aD=aA.GetProperty(D.get("SWE_PROP_NAME"));if(!this.GetFieldMap()[SiebelApp.S_App.LookupStringCache(aD)]){var aC=new aB();aC.SetBusComp(this);aC.ProcessObjectInfo(aA);this.AddField(aC)}}while(aA=aE.EnumChildren(false))};al.prototype.ProcessRLObjectInfo=function(aG){var aF;var aE=D.get("SWE_PROP_RECORD");var aB=D.get("SWE_PROP_VALUE");this.ReInitializeRawRecords();var aA=aG.EnumChildren(true);aF=parseInt(aG.GetProperty(D.get("SWE_PROP_IS_NROWS_KNOWN")));if(aF===1){this.SetNumRowsKnown(true)}else{this.SetNumRowsKnown(false)}aF=parseInt(aG.GetProperty(D.get("SWE_PROP_CURR_RNUM")));if(aF){this.SetCurRowNum(aF)}aF=parseInt(aG.GetProperty(D.get("SWE_PROP_NUM_ROWS")));if(aF){this.SetNumRows(aF)}do{if(aA.GetType()==aE){var aD=[];var aC=aA.GetPropertyAsStr(aB);CCFMiscUtil_StringToArray(aC,aD);this.AddRecord(aD);this.SetSelection(parseInt(aG.GetProperty(D.get("SWE_PROP_ACTIVE_ROW"))))}}while(aA=aG.EnumChildren(false))};al.prototype.ProcessChildObjectInfo=function(aB){var aF=aB.EnumChildren(true);if(!aF){return}do{var aC=aF.GetType();var aD=D.get("SWE_PST_FIELD_LIST");var aA=D.get("SWE_PST_REMOVE_FIELD_LIST");var aE=D.get("SWE_PST_REC_LIST");switch(aC){case aA:this.RemoveAllFields();break;case aD:this.ProcessNFLObjectInfo(aF);break;case aE:this.ProcessRLObjectInfo(aF);break}}while(aF=aB.EnumChildren(false))};al.prototype.AddField=function(aA){if(!this.GetFieldMap()[SiebelApp.S_App.LookupStringCache(aA.GetName())]){aA.index=this.GetFieldList().length;var aB=SiebelApp.S_App.LookupStringCache(aA.GetName());this.GetFieldMap()[aB]=aA;this.GetFieldList().push(aA.GetName())}};al.prototype.GetField=function(aA){return this.GetFieldMap()[aA]};al.prototype.HandleServerNotifications=function(aA){var aC=SiebelApp.Constants;var aD=aA.GetProperty(aC.get("SWE_PROP_BC_NOTI_ACTIVE_ROW"));if(aD&&aD>=-1&&this.GetRawRecords()!=null&&aD<this.GetRawRecords().length){if(aD!=this.GetSelection()){this.NewSelection(aD)}}var aB=aA.GetProperty(G);switch(aB){case au:q.call(this,aA);break;case y:av.call(this,aA);break;case az:w.call(this,aA);break;case t:ay.call(this,aA);break;case x:aj.call(this,aA);break;case ab:u.call(this,aA);break;case aa:k.call(this,aA);break;case ai:m.call(this,aA);break;case h:ap.call(this,aA);break;case e:o.call(this,aA);break;case a:aq.call(this,aA);case ac:ad.call(this,aA);break;case ak:E.call(this,aA);break;case Y:F.call(this,aA);break;case V:I.call(this,aA);break;case g:d.call(this,aA);break;case ah:l.call(this,aA);break;case O:s.call(this,aA);break;case at:ax.call(this,aA);break;case b:T.call(this,aA);break;case S:Q.call(this,aA);break;case N:af.call(this,aA);break;case A:aw.call(this,aA);break;case v:Z.call(this,aA);break;case n:M.call(this,aA);break;default:break}};function q(aA){this.GetNotifyObject().NotifyBeginNotifys()}function av(aA){var aC=aA.GetProperty(D.get("SWE_PROP_NOTI_TYPE"));var aB=aA.GetProperty(D.get("SWE_PROP_ARGS_ARRAY"));var aD=[];if(aB){CCFMiscUtil_StringToArray(aB,aD)}this.GetNotifyObject().NotifyGeneric(aC,aD)}function w(aA){var aB=aA.GetProperty(D.get("SWE_PROP_NOTI_SELECTED"));H.call(this,aB)}function H(aA){this.GetNotifyObject().NotifyNewSelection(aA)}function l(aA){this.GetNotifyObject().NotifyChangeSelection()}function o(aA){var aD;var aC;var aB;var aE;aE=aA.GetProperty("f");if(aE==null){alert("Missing primary field name for NotifyNewPrimary!");return}aB=this.GetSelection();for(aD=0;aD<this.GetRawRecords().length;aD++){this.SetSelection(aD);ae.call(this,aE,"N")}this.SetSelection(aB);ae.call(this,aE,"Y");this.GetNotifyObject().NotifyNewPrimary(aE)}function E(aH){var aI=[];var aE=[];var aK,aJ,aA;this.SetStale(true);var aJ=aH.GetProperty(D.get("SWE_PROP_NOTI_FIELD"));if(aJ==null){return}var aB=D.get("SWE_PROP_FIELD_VALUES");var aF=aH.GetChildCount();for(var aD=0;aD<aF;aD++){var aM=aH.GetChild(aD);if(aM.GetType()==aB){var aG=aM.GetProperty(D.get("SWE_PROP_FIELD_ARRAY"));
var aC=aM.GetProperty(D.get("SWE_PROP_VALUE_ARRAY"));break}}if(aD==aF){return}if((CCFMiscUtil_StringToArray(aG,aI)==true)&&(CCFMiscUtil_StringToArray(aC,aE)==true)){var aL=aE.length;for(aD=0;aD<aL;aD++){if(aI.length==0){aJ=this.GetFieldList()[aD];if(!aJ){continue}}else{aJ=aI[aD];if(!aJ){break}fieldIndex=parseInt(aJ);if(isNaN(fieldIndex)){return}if(fieldIndex<0||fieldIndex>this.GetFieldList().length){continue}aJ=this.GetFieldList()[fieldIndex];if(!aJ){continue}}aA=aE[aD];aJ=SiebelApp.S_App.LookupStringCache(aJ);ae.call(this,aJ,aA)}}this.GetNotifyObject().NotifyNewDataWS(aJ)}function ae(aG,aD){var aE;var aB;if(this.GetSelection()<0){return}if(aG==null||aG==""){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return(false)}aE=this.GetField(aG);if(aE==null){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aG);return(false)}aB=aE.index;if(aB<0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aG);return(false)}var aC=this.GetUpdateArray();if(aC&&aB<aC.length){var aF=aC[aB];if(aF&&aF.newValue!=aD){this.SetUpdateArrayValue(aB,null)}}var aA=this.GetRawRecords()[this.GetSelection()];aA[aB]=aD}function F(aA){var aB=aA.GetProperty(D.get("SWE_PROP_NOTI_FIELD"));if(aB==null){alert("missing fieldname for new field notification");return}this.GetNotifyObject().NotifyNewFieldData(aB)}function I(aA){this.GetNotifyObject().NotifyNewFieldList()}function aq(aA){this.SetStale(true);this.GetNotifyObject().NotifyNewRecord()}function d(aG){var aH=[];var aD=[];var aF;var aB;var aA=D.get("SWE_PROP_FIELD_VALUES");var aE=aG.GetChildCount();for(var aC=0;aC<aE;aC++){var aJ=aG.GetChild(aC);if(aJ.GetType()==aA){aF=aJ.GetProperty(D.get("SWE_PROP_FIELD_ARRAY"));aB=aJ.GetProperty(D.get("SWE_PROP_VALUE_ARRAY"))}}if(aC==aE){}if((CCFMiscUtil_StringToArray(aF,aH)==true)&&(CCFMiscUtil_StringToArray(aB,aD)==true)){var aI=aD.length;for(aC=0;aC<aI;aC++){if(aH.length==0){fieldName=this.GetFieldList()[aC];if(!fieldName){continue}}else{fieldName=aH[aC];if(!fieldName){break}fieldIndex=parseint(fieldName);if(isNaN(fieldIndex)){return}if(fieldIndex<0||fieldIndex>this.GetFieldList().length){continue}fieldName=this.GetFieldList()[fieldIndex];if(!fieldName){continue}}fieldValue=aD[aC];fieldName=SiebelApp.S_App.LookupStringCache(fieldName);ae.call(this,fieldName,fieldValue)}}this.GetNotifyObject().NotifyNewRecordDataWS(fieldName)}function ad(aA){this.GetNotifyObject().NotifyNewRecordData(aA)}function ay(aA){var aC;var aB;aC=aA.GetProperty("state");if(aC==null||aC==""){return}aB=parseInt(aA.GetProperty("value"));if(isNaN(aB)){aB=0}switch(aC){case"activeRow":case"ar":this.SetSelection(aB);this.NewSelection(aB);break;case"bCanAssociate":case"ca":this.canAssociate=(aB!=0);break;case"bCanDelete":case"cd":this.canDelete=(aB!=0);break;case"bCanInsert":case"ci":this.canInsert=(aB!=0);break;case"bCanInsertDynamic":case"cid":this.canInsertDynamic=(aB!=0);break;case"bCanMergeRecords":case"cm":this.canMerge=(aB!=0);break;case"bCanQuery":case"cq":this.canQuery=(aB!=0);break;case"bCanUpdate":case"cu":this.canUpdate=(aB!=0);break;case"bCanUpdateDynamic":case"cud":this.canUpdateDynamic=(aB!=0);break;case"bCommitPending":case"cp":this.commitPending=(aB!=0);if(!this.commitPending){this.ClearUpdates();this.GetCommitPending=function(){return false}}break;case"bDelRecPending":case"dp":this.deletePending=(aB!=0);break;case"bHasAssocList":case"hal":this.hasAssocList=(aB!=0);break;case"bNewRecPending":case"np":this.insertPending=(aB!=0);break;case"curRowNum":case"cr":this.SetCurRowNum(aB);break;case"numRows":case"nr":this.SetNumRows(aB);break;case"bNumRowsKnown":case"nrk":this.SetNumRowsKnown(aB!==0);break;case"bNotifyEnabled":case"n":this.disableNotfiy=(aB==0);break;case"bInMultiSelMode":case"ms":this.inMultiSelMode=(aB!=0);break;case"bInverseSelection":case"is":break;case"numSelected":case"ns":break;case"bNumSelectedKnown":case"nsk":break;case"bInQueryState":case"qs":this.inQueryState=(aB!=0);if(!this.inQueryState){this.SetInQueryState(false)}else{this.SetInQueryState(true)}break}this.GetNotifyObject().NotifyStateChanged(aC,aB)}function ap(aA){this.GetNotifyObject().NotifyNewData(aA)}function s(aA){this.GetNotifyObject().NotifyEndNotifys(aA)}function aj(aA){var aB;aB=aA.GetProperty("ar");if(aB==null){alert("Missing row index in NotifyNewActiveRow!");return}aB=parseInt(aB);if(isNaN(aB)||aB<0||aB>=this.GetRawRecords().length){alert("Invalid row index in NotifyNewActiveRow!");return}this.NewSelection(aB);this.GetNotifyObject().NotifyNewActiveRow()}function u(aC){var aB;var aA;aB=(aC.GetProperty("bSetup")=="true");aA=(aC.GetProperty("bUp")=="true");this.GetNotifyObject().NotifyDeleteRecord(aB,aA)}function k(aB){var aF;var aE;var aD;var aC;var aA;var aG;aD=parseInt(aB.GetProperty("index"));if(isNaN(aD)){alert("Missing index property for NotifyDeleteWorkSet!");return}aC=parseInt(aB.GetProperty("nr"));if(isNaN(aC)){alert("Missing numRecords property for NotifyDeleteWorkSet!");return}if((aC!=-1)&&(aD<0||aD>=this.GetRawRecords().length)){alert("Index out of bounds for NotifyDeleteWorkSet!");return}if(aD<=this.GetSelection()){this.ClearUpdates()}if(aC>0){aG=aD+aC}else{if(aC==-1){aG=this.GetRawRecords().length}else{aG=aD}}aA=(aC==1)?this.GetRawRecords()[aD]:null;if(aD<aG){if(aC==-1){aC=aG-aD}this.GetRawRecords().splice(aD,aC)}if(this.GetRawRecords().length<1){this.ReInitializeRawRecords()}this.GetNotifyObject().NotifyDeleteWorkSet(aD,aC,aA)}function ax(aA){this.ClearUpdates();this.GetNotifyObject().NotifyBeginQuery()}function T(aA){var aB=aA.GetProperty(D.get("SWE_NOTIFY_SEARCHSPEC_STR"));if(X.IsEmpty(aB)){var aC=this.GetFieldMap();if(!X.IsEmpty(aC)){for(field in aC){aC[field].SetSearchSpec("")}}}this.SetSearchSpec(aB);this.GetNotifyObject().NotifyNewQuerySpec()}function Q(aA){var aG;var aE;var aD;aD=(aA.GetProperty("err"));if(!X.IsEmpty(aD)){return}aG=(aA.GetProperty("f"));if(X.IsEmpty(aG)){return}aE=(aA.GetProperty("v"));var aC=this.GetFieldMap()[aG];if(aC){aC.SetSearchSpec(aE);var aB=aC.index}else{return}if(this.GetUpdateArray()!=null&&aB>=0&&aB<this.GetUpdateArray().length){var aF=this.GetUpdateArray()[aB];if(aF!=null&&aE!=aF.newValue){delete aF;this.SetUpdateArrayValue(aB,null)}}this.GetNotifyObject().NotifyNewFieldQuerySpec(aG)}function af(aA){this.ClearUpdates();this.GetNotifyObject().NotifyEndQuery()}function aw(aA){m_sortSpec=(aA.GetProperty("srt"));m_searchSpec=(aA.GetProperty("s"));this.GetNotifyObject().NotifyExecute()}function Z(aA){var aB;var aC=0;aB=X.IsTrue(aA.GetProperty("bUp"));aC=aA.GetProperty("scrollAmount");this.GetNotifyObject().NotifyScrollAmount(aB,aC)}function M(aA){this.GetNotifyObject().NotifyPageRefresh()}al.prototype.GetFieldValue=function(aB){var aA="";if(this.IsInQueryState()){aA=this.GetFieldSearchSpec(aB)}else{aA=this.DoGetFieldValue(aB)}return aA};al.prototype.WSGetFieldValue=function(aA){return this.WSDoGetFieldValue(aA)};al.prototype.DoGetFieldValue=function(aE){var aB;var aA;var aD;var aC;if(this.GetSelection()<0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoActiveRow");return""
}if(aE==null||aE==""){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return(null)}field=this.GetField(aE);if(field==null){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aE);return(false)}aB=field.index;if(aB<0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aE);return(null)}if(this.GetUpdateArray()!=null){aD=this.GetUpdateArray()[aB];if(aD!=null){return(aD.newValue)}}if(this.GetRawRecords()[this.GetSelection()]!=null&&!this.IsInQueryState()){aC=this.GetRawRecords()[this.GetSelection()][aB];if(aC==null){aC=""}}else{aC=""}return(aC)};al.prototype.WSDoGetFieldValue=function(aE){var aB;var aA;var aD;var aC;if(this.GetSelection()<0){return""}if(aE==null||aE==""){return(null)}field=this.GetField(aE);if(field==null){return(false)}aB=field.index;if(aB<0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aE);return(null)}if(this.GetRawRecords()[this.GetSelection()]!=null){aC=this.GetRawRecords()[this.GetSelection()][aB];if(aC==null){aC=""}}else{aC=""}return(aC)};function m(aG){var aE=[];var aB;var aH;var aI;var aC;var aJ;var aF;var aD;var aA;if(this.GetFieldList()==null){alert("Missing field array for NotifyInsertWorkSet!");return}aF=parseInt(aG.GetProperty("index"));if(isNaN(aF)){alert("Missing index property for NotifyInsertWorkSet!");return}if(aF<0){aF=0}if(aF>this.GetRawRecords().length){aF=this.GetRawRecords().length}aI=aG.GetChildByType("FieldValues");if(aI==null){return}if(aF<=this.GetSelection()){this.ClearUpdates()}aA=aI.GetProperty("ValueArray");CCFMiscUtil_StringToArray(aA,aE);this.InsertRecord(aF,aE);this.GetNotifyObject().NotifyInsertWorkSet(aF,aE)}al.prototype.GetFormattedValue=function(aK,aC,aM){var aN="";if(!aC||aC.length==0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return aN}if(this.inQueryState){aN=this.GetFieldSearchSpec(aC);return aN}if(aK!=-1){aN=this.WSGetFieldValue(aC)}else{aN=this.GetFieldValue(aC)}var aB=false;if(aN!=""&&SiebelApp.S_App.LocaleObject){var aD=GetField(aC);if(!aD){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aC);return""}if(aD.GetDataType()=="currency"){var aG;var aH;var aJ,aI;var aE=aD.GetCurrField();aJ=aE.indexOf("|");if(aJ>=0){aI=(aE.substring(aJ+1).indexOf("|")==-1)?-1:(aE.substring(aJ+1).indexOf("|")+aJ);if(aI<0){aI=aE.length}aG=aE.substr(0,aJ);if(aG.length!=0){bHasCurrCode=true;sCurrCode=this.GetFieldValue(aG);if(sCurrCode){SiebelApp.S_App.LocaleObject.SetCurrencyCode(sCurrCode)}else{SiebelApp.S_App.LocaleObject.SetCurrencyCode("")}}aG=aE.substr(aJ+1,aI-aJ-1);if(aG.length!=0){aH=this.GetFieldValue(aG);if(aH){SiebelApp.S_App.LocaleObject.SetExchDate(aH)}}}}if(aD.GetScale()!=0){SiebelApp.S_App.LocaleObject.SetScale(aD.GetScale());aB=true}var aA=aD.GetDataType();var aO=aN;var aF=outFormat;var aL=SiebelApp.S_App.LocaleObject.StringToFormatted(aA,aO,aF);aN=aL;if(aB){SiebelApp.S_App.LocaleObject.SetScale(0)}if(SiebelApp.S_App.LocaleObject.HasErrorMsg()){SiebelApp.S_App.ErrorObject.SetErrorMsg(SiebelApp.S_App.LocaleObject.GetErrorCode());return""}}return aN;SiebelApp.S_App.ErrorObject.ClearErrorMsg()};al.prototype.SetFormattedValue=function(aK,aB,aG){var aH;var aC;if(this.IsInQueryState()&&!X.IsEmpty(aK)){this.GetFieldMap()[aK].SetSearchSpec(aB)}if(X.IsEmpty(aB)){return this.SetFieldValue(aK,"")}if(X.IsEmpty(aK)){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return false}aH=this.GetField(aK);if(aH==null){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aK);return(false)}aC=aB;if(SiebelApp.S_App.LocaleObject){var aA=aH.GetDataType();var aJ=aB;var aD=aG;var aI=0;if(aA=="utcdatetime"&&aD&&((aI=aD.indexOf("MMM "))!=-1)){if((SiebelApp.Utils.FindIndexOfFrom(aD,"DD,YYYY",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd,yyyy",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd,yy",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd,YYYY",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd,YY",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"DD, YYYY",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd, yyyy",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd, yy",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd, YYYY",aI+4)!=-1)||(SiebelApp.Utils.FindIndexOfFrom(aD,"dd, YY",aI+4)!=-1)){strVal=aJ.split("");var aE=strVal.length;if((aE>(aI+3))&&(strVal[aI+3]==" ")){strVal.splice(aI+3,1);strVal[aI+3]="-"}if((aE>(aI+5))&&(strVal[aI+5]==",")){if((aE>(aI+6))&&(strVal[aI+6]==" ")){strVal.splice(aI+5,2)}else{strVal.splice(aI+5,1)}strVal[aI+5]="-"}else{if((aE>(aI+6))&&(strVal[aI+6]==",")){if((aE>(aI+7))&&(strVal[aI+7]==" ")){strVal.splice(aI+6,2)}else{strVal.splice(aI+6,1)}strVal[aI+6]="-"}}aJ=strVal.join("")}}var aF=SiebelApp.S_App.LocaleObject.FormattedToString(aA,aJ,aD);aC=aF;if(SiebelApp.S_App.LocaleObject.HasErrorMsg()){SiebelApp.S_App.ErrorObject.SetErrorMsg(SiebelApp.S_App.LocaleObject.GetErrorCode(),aB);aC="";return(false)}}return this.SetFieldValue(aK,aC)};al.prototype.SetFieldValue=function(aB,aA){if(!r.call(this,aB,aA)){return(false)}if(!this.DoFieldValidation(aB,aA)){return false}if(!this.DoFieldDataUpdate(aB,aA)){return false}if(!this.DoFieldDataNotify(aB,aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true};al.prototype.UpdateRecord=function(){if(this.GetUpdateArray()!=null){SiebelApp.S_App.ErrorObject.ClearErrorMsg();return(true)}if(!this.CanUpdate(true)){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrCantUpdate");return(false)}var aA=new Array(this.GetFieldList().length);this.SetUpdateArray(aA);this.SetUpdateMode("update");SiebelApp.S_App.ErrorObject.ClearErrorMsg();return(true)};al.prototype.DoFieldValidation=function(aD,aB){var aC;var aA;if(this.GetUpdateArray()==null&&!this.UpdateRecord()){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrCantUpdate");return(false)}if(aD==null||aD==""){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return(false)}aC=this.GetField(aD);if(aC==null){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aD);return(false)}aA=aC.index;if(aA<0){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aD);return(false)}return(true)};al.prototype.DoFieldDataUpdate=function(aE,aB){var aD;var aA;var aC;aC=this.GetField(aE);aA=aC.index;aD=this.GetUpdateArray()[aA];if(aD==null){aD=this.GetUpdateArray()[aA]=new J;aD.fieldName=aE;aD.field=aC;aD.oldValue=this.GetRawRecords()[this.GetSelection()][aA];aD.newValue=aD.oldValue}if(aB!=aD.newValue){aD.fieldName=aE;aD.newValue=aB;aD.changed=true;aD.setOnServer=false}return(true)};al.prototype.DoFieldDataNotify=function(aB,aA){this.GetNotifyObject().NotifyNewFieldData(aB,aA);return true};al.prototype.CanUpdate=function(){return this.CanUpdate()};al.prototype.GetFieldSearchSpec=function(aE){if(!aE){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrInvalidFieldName");return""}var aB=this.GetFieldMap()[aE];if(!aB){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoSuchField",aE);return""}if(aB){var aA=aB.index}if(aA>=0){if(this.GetUpdateArray()!=null&&aA<this.GetUpdateArray().length){var aD=this.GetUpdateArray()[aA];if(aD!=null){aC=aD.newValue;
return}}}if(aB){var aC=aB.GetSearchSpec()}return aC};al.prototype.InvokeMethod=function(aA,aB){var aC;aB=aB||CCFMiscUtil_CreatePropSet();aC=B.call(this,aA,aB);return(aC)};function B(aG,aB){var aF;var aC;var aA;var aE;var aD;SiebelApp.S_App.ErrorObject.ClearErrorMsg();switch(aG){case"CanDeleteRecords":aE=this.CanDelete();break;case"CanInsertRecords":aE=this.CanInsert(true);break;case"CanMergeRecords":aE=this.CanMerge();break;case"CanUpdateRecords":aE=this.CanUpdate(true);break;case"CopyRecord":aE=this.CopyRecord();break;case"DeleteRecord":aE=this.DeleteRecord();break;case"End":aE=this.End();break;case"Home":aE=this.Home();break;case"NewRecord":aE=this.NewRecord();break;case"NextSet":aE=this.NextSet(null);break;case"PriorRecord":aE=this.PriorRecord();break;case"PriorSet":aE=this.PriorSet(null);break;case"RedoRecord":aE=this.RedoRecord();break;case"UndoRecord":aE=this.UndoRecord();break;case"UpdateRecord":aE=this.UpdateRecord();break;case"WriteRecord":aE=this.WriteRecord();break;default:aA=CCFMiscUtil_CreatePropSet();aA.SetType("InvokeMethod");if(this.GetSelection()>=0){aA.SetProperty("r",this.GetIdValue())}else{aA.SetProperty("r","")}aA.SetProperty("Method",aG);aA.SetProperty("ArgCount","0");aE=C.call(this,aG,aA);break}if(aE){return("Y")}return("N")}function C(aE,aD){var aC;var aA=CCFMiscUtil_CreatePropSet();var aB;aC=CCFMiscUtil_CreatePropSet();aC.SetProperty("SWECmd","InvokeMethod");aC.SetProperty("SWEVI",this.GetBusObj().GetZone());aC.SetProperty("SWEBusComp",this.GetVarName());aC.SetProperty("SWEMethod",aE);aC.SetProperty("SWEIPS",aD.EncodeAsString());SiebelApp.S_App.CallServer(aC,aA,true);if(aA!=null){aB=aA.GetProperty("Status");if(aB===D.get("SWE_RPC_PROP_STATUS_ERROR")){SiebelApp.S_App.ErrorObject.ProcessError();SiebelApp.S_App.ErrorObject.ClearErrorMsg()}return(aB!="Error")}return(true)}al.prototype.CanDelete=function(){return P.call(this)};al.prototype.CanInsert=function(aA){return f.call(this,aA)};al.prototype.CanUpdate=function(aA){return c.call(this,aA)};al.prototype.CanMergeRecords=function(){return L.call(this)};al.prototype.CopyRecord=function(aA){return i.call(this,aA)};al.prototype.DeleteRecord=function(){return K.call(this)};al.prototype.End=function(){return W.call(this)};al.prototype.Home=function(){return ar.call(this)};al.prototype.NewRecord=function(aA){return ao.call(this,aA)};al.prototype.NextSet=function(aA){return z.call(this,aA)};al.prototype.PriorRecord=function(){return j.call(this)};al.prototype.PriorSet=function(aA){return an.call(this,aA)};al.prototype.RedoRecord=function(){return U.call(this)};al.prototype.UndoRecord=function(){return p.call(this)};al.prototype.WriteRecord=function(){return R.call(this)};function P(){return(this.canDelete)}function f(aA){if(aA){return(this.canInsertDynamic)}else{return(this.canInsert)}}function L(){return(this.canMerge)}function i(aB){var aA;if(!this.CanInsert()){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrCantInsert");return false}this.ClearUpdates();if(this.GetSelection()<0||this.GetSelection()>=this.GetRecordSet().length){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoActiveRow");return false}aA=CCFMiscUtil_CreatePropSet();aA.SetType("CopyRecord");aA.SetProperty("r",this.GetIdValue());aA.SetProperty("Before",aB?"Y":"N");if(!C.call(this,"CopyRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function K(){var aA;if(!this.CanDelete()){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrCantDelete");return false}this.ClearUpdates();if(this.GetSelection()<0||this.GetSelection()>=this.GetRecordSet().length){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrNoActiveRow");return false}aA=CCFMiscUtil_CreatePropSet();aA.SetType("DeleteRecord");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"DeleteRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function W(){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("End");if(!C.call(this,"End",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function ar(){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("Home");if(!C.call(this,"Home",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function ao(aB){var aA;this.ClearUpdates();if(!this.CanInsert(true)){SiebelApp.S_App.ErrorObject.SetErrorMsg("BCErrCantInsert");return false}aA=CCFMiscUtil_CreatePropSet();aA.SetType("NewRecord");aA.SetProperty("r",this.GetIdValue());aA.SetProperty("Before",aB?"Y":"N");if(!C.call(this,"NewRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function am(){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("NextRecord");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"NextRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function z(aB){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("NextSet");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"NextSet",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function j(){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("PriorRecord");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"PriorRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function an(aB){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("PriorSet");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"PriorSet",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function U(){var aA;this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("RedoRecord");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"RedoRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function p(){var aA;if(this.GetUpdateArray()==null){SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}this.ClearUpdates();aA=CCFMiscUtil_CreatePropSet();aA.SetType("UndoRecord");aA.SetProperty("r",this.GetIdValue());if(!C.call(this,"UndoRecord",aA)){return false}SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}function R(){var aE;var aF;var aG;var aC;var aB;var aH;var aA;var aD;if(!this.IsCommitPending()){SiebelApp.S_App.ErrorObject.ClearErrorMsg();return true}aE=0;if(this.GetUpdateArray()!=null){for(aC=0;aC<this.GetUpdateArray().length;aC++){aH=this.GetUpdateArray()[aC];if(aH!=null&&aH.changed&&!aH.setOnServer){aE++}}}if(aE>0||this.IsCommitPending()){aB=CCFMiscUtil_CreatePropSet();aB.SetType("WriteRecord");aB.SetProperty("r",this.GetIdValue());if(aE>0){aA=new Array();aD=new Array();aG=CCFMiscUtil_CreatePropSet();aG.SetType("FieldValues");aF=0;for(aC=0;aC<this.GetUpdateArray().length;aC++){aH=this.GetUpdateArray()[aC];if(aH!=null&&aH.changed&&!aH.setOnServer){aA[aF]=aH.field.name;aD[aF]=aH.newValue;aF++}}aG.SetProperty("FieldArray",CCFMiscUtil_ArrayToString(aA));aG.SetProperty("ValueArray",CCFMiscUtil_ArrayToString(aD));aB.AddChild(aG)}if(!C.call(this,"WriteRecord",aB)){return false}}this.ClearUpdates();SiebelApp.S_App.ErrorObject.ClearErrorMsg();
return true}function c(aA){if(aA){return(this.canUpdateDynamic)}else{return(this.canUpdate)}}function r(aC,aB){var aA;if(this.HasCustomShadow()&&this.shadow&&typeof(this.shadow.OnPreSetFieldValue)==="function"){aA=this.shadow.OnPreSetFieldValue(aC,aB);if(aA=="CancelOperation"){return false}return true}return true}return al}())};