if(typeof(SiebelAppFacade.MsgBrdCstPhyRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.MsgBrdCstPhyRenderer");var HTMLMessages="";var HTMLMsgCount="";var isMsgChanged=false;var m_strNormal="";var m_strAuto="";var m_strHigh="";var m_strUrgent="";var m_strUrgentWA="";var m_normalColor="";var m_highColor="";var m_urgentColor="";var m_updateInterval=120;var m_prefixNormal="";var m_prefixHigh="";var m_prefixUrgent="";var msgArray=[];var consts=SiebelJS.Dependency("SiebelApp.Constants");var utils=SiebelJS.Dependency("SiebelApp.Utils");var myDlg;var isMsgDeleteEvent=false;var objPM="";var m_blinkFlg=false;var m_strRdLtstClrCode="siebui-msgbarbkgrnd-msgread-nomsgs";var m_strUnRdLtstClrCode="";var m_blinktimer="";var m_strNtfcSummaryText="";var m_strNtfcDetailsText="";var m_strCloseText="";var m_dWidth="";var m_dPosY="";var m_strNotification="";var m_selectedrowId="";var m_msgexpired="";var m_isUnrdUwA=false;SiebelAppFacade.MsgBrdCstPhyRenderer=(function(){function d(g){var f=g;this.GetPM=function(){return f}}d.prototype.ShowUI=function(){var g=this.GetPM();var h=document.getElementById("HTMLMessageBar");if(h){g.OnControlEvent("ShowMessageBar")}objPM=g;var f=SiebelApp.S_App.LocaleObject;m_strNtfcSummaryText=f.GetLocalString("IDS_MSG_NOTIFICATION_SUMMARY");m_strNtfcDetailsText=f.GetLocalString("IDS_MSG_NOTIFICATION_DETAILS");m_strCloseText=f.GetLocalString("IDS_MSG_CLOSE");m_strNotification=f.GetLocalString("IDS_MSG_NOTIFICATION");m_msgexpired=f.GetLocalString("IDS_MSG_EXPIRED");if(m_strNtfcSummaryText===undefined||m_strNtfcSummaryText===""){m_strNtfcSummaryText="Notification Summary"}if(m_strNtfcDetailsText===undefined||m_strNtfcDetailsText===""){m_strNtfcDetailsText="Notification Details"}if(m_strCloseText===undefined||m_strCloseText===""){m_strCloseText="Close"}if(m_strNotification===undefined||m_strNotification===""){m_strNotification="Notification"}if(m_msgexpired===undefined||m_msgexpired===""){m_msgexpired="Message Expired"}};d.prototype.CreateMsgBar=function(){msgArray=objPM.Get("MsgObjArray");var i=objPM.Get("MsgChanged");var f=objPM.Get("MsgUserPrefPS");m_strNormal=f.GetProperty("Normal");m_strAuto=f.GetProperty("Automation");m_strHigh=f.GetProperty("High");m_strUrgent=f.GetProperty("Urgent");m_strUrgentWA=f.GetProperty("UrgentWA");m_normalColor=f.GetProperty("NormalColor");m_highColor=f.GetProperty("HighColor");m_urgentColor=f.GetProperty("UrgentColor");m_updateInterval=f.GetProperty("UpdateInterval");m_prefixNormal=f.GetProperty("PrefixNormal");m_prefixHigh=f.GetProperty("PrefixHigh");m_prefixUrgent=f.GetProperty("PrefixUrgent");if(i){c()}if(SiebelApp.S_App.IsMobileApplication()==="true"){$("div[id='HTMLMessageBar']").append('<a id="MsgBar" class="siebui-mobile-msgbar" title="'+m_strNotification+'"><h5>'+HTMLMsgCount+"</h5></a>").trigger("create");if(m_strAuto.toString()==="TRUE"){$("div[id='HTMLMessageBar']").attr("ot","MsgBrdCstIcon");$("div[id='HTMLMessageBar']").attr("rt","MsgBrdCstIcon");$("div[id='HTMLMessageBar']").attr("un","Notification")}}else{$("div[id='HTMLMessageBar']").append('<a id="MsgBar" href="javascript:void(0)" class="siebui-msgbar" aria-label="'+HTMLMsgCount+' Unread Notification"  title="'+m_strNotification+'">'+HTMLMsgCount+"</a>").trigger("create");if(m_strAuto.toString()==="TRUE"){$("div[id='HTMLMessageBar']").attr("ot","MsgBrdCstIcon");$("div[id='HTMLMessageBar']").attr("rt","MsgBrdCstIcon");$("div[id='HTMLMessageBar']").attr("un","Notification")}}if(m_blinkFlg){this.blink(2000);m_blinkFlg=false}if(m_strUnRdLtstClrCode!==""){if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strUnRdLtstClrCode)}else{$("#MsgBar").addClass(m_strUnRdLtstClrCode)}}else{if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strRdLtstClrCode)}else{$("#MsgBar").addClass(m_strRdLtstClrCode)}}if(SiebelApp.S_App.IsMobileApplication()!=="true"){var h=$("#MsgBar").attr("aria-label");var g=a();h=h+" Priority :"+g;$("#MsgBar").attr("aria-label",h)}};function c(){var l=0;var k=0;var n;var o;m_strUnRdLtstClrCode="";m_blinkFlg=false;var m;var g;var p;var q=[];if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages="<div id='MsgBrdCst_Summary' class='siebui-mobile-msgbrdcst-heading'><h4>"+m_strNtfcSummaryText+"</h4><ul data-role='listview' data-split-icon='delete' data-split-theme='b'>"}else{HTMLMessages="<div id='MsgBrdCst_Summary' class='siebui-msgbrdcst-heading'><ul role='listbox' tabindex='0' data-role='listview'>"}var f=msgArray.length;HTMLMsgCount=f;for(l=0;l<f;l++){m=b(msgArray[l],true);g=msgArray[l].id;p=msgArray[l].status;n=msgArray[l].type;o=msgArray[l].dismiss;if(n===m_strUrgent.valueOf()||n===m_strUrgentWA.valueOf()){m_strMsgRowClass="siebui-msgbar-row-urgent"}else{if(n===m_strHigh.valueOf()){m_strMsgRowClass="siebui-msgbar-row-high"}else{if(n===m_strNormal.valueOf()){m_strMsgRowClass="siebui-msgbar-row-normal"}else{m_strMsgRowClass="undefined"}}}if(m_strMsgRowClass==="undefined"){HTMLMsgCount--}else{if(p==="1"){HTMLMsgCount--;q[k]=msgArray[l];k++}else{if(p==="2"){HTMLMsgCount--}else{if(p==="9"){HTMLMessages+="<li id='"+g+"' class='"+m_strMsgRowClass+"' data-status='"+p+"'>"+m+"</li>"}else{if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="<li id='"+g+"' class='unreadmessage "+m_strMsgRowClass+"' data-icon='false' data-status='"+p+"'><a>"+m;if(o==="Y"){HTMLMessages+="</a><a id='DeleteMsgBtnId' class='siebui-mobile-deletemsgbtn' href='#'></a></li>"}else{HTMLMessages+="</li>"}}else{HTMLMessages+="<li id='"+g+"' role='presentation' class='unreadmessage "+m_strMsgRowClass+"' data-status='"+p+"'>"+m;if(o==="Y"){HTMLMessages+="<div><div><a id='DeleteMsgBtnIdNonMobile' aria-label='Delete Notification' tabindex='0' class='siebui-deletemsgbtn ui-state-default ui-corner-all' role='button' href='javascript:void(0)'><span class='ui-icon ui-icon-circle-close'></span></a></div></div></li>"}else{HTMLMessages+="</li>"}}if(n===m_strUrgent.valueOf()||n===m_strUrgentWA.valueOf()){if(n===m_strUrgentWA.valueOf()){m_blinkFlg=true;m_isUnrdUwA=true}m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-urgent"}else{if(n===m_strHigh.valueOf()&&(m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-urgent")){m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-high"}else{if(n===m_strNormal.valueOf()&&((m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-urgent")&&(m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-high"))){m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-normal"}}}}}}}}var h=q.length;for(l=0;l<h;l++){m=b(q[l],true);g=q[l].id;o=q[l].dismiss;p=q[l].status;n=q[l].type;if(n===m_strUrgent.valueOf()||n===m_strUrgentWA.valueOf()){m_strMsgRowClass="siebui-msgbar-row-urgent"}else{if(n===m_strHigh.valueOf()){m_strMsgRowClass="siebui-msgbar-row-high"}else{if(n===m_strNormal.valueOf()){m_strMsgRowClass="siebui-msgbar-row-normal"}}}if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="<li id='"+g+"' class='readmessage "+m_strMsgRowClass+"' data-icon='false' data-status='"+p+"'><a>"+m;if(o==="Y"){HTMLMessages+="</a><a id='DeleteMsgBtnId' class='siebui-mobile-deletemsgbtn' href='#'></a></li>"
}else{HTMLMessages+="</li>"}}else{HTMLMessages+="<li id='"+g+"' role='presentation' class='readmessage "+m_strMsgRowClass+"' data-status='"+p+"'>"+m;if(o==="Y"){HTMLMessages+="<div><div><a id='DeleteMsgBtnIdNonMobile' aria-label='Delete Notification' tabindex='0' class='siebui-deletemsgbtn ui-state-default ui-corner-all' role='button' href='javascript:void(0)'><span class='ui-icon ui-icon-circle-close'></span></a></div></div></li>"}else{HTMLMessages+="</li>"}}}if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="</ul><a id='CloseDialog' class='siebui-mobile-msgclosedialog' rel='close' data-role='button' name='ParentClose'>"+m_strCloseText+"</a></div>"}else{HTMLMessages+="</ul></div>"}}function e(v,n){var s;var u=[];var o=0;var k=0;HTMLMessages="";m_blinkFlg=false;var p;var q;var h;m_strUnRdLtstClrCode="";var g;var m;if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages="<div id='MsgBrdCst_Summary' class='siebui-mobile-msgbrdcst-heading'><h4>"+m_strNtfcSummaryText+"</h4><ul data-role='listview' data-split-icon='delete' data-split-theme='b'>"}else{HTMLMessages="<div id='MsgBrdCst_Summary' class='siebui-msgbrdcst-heading'><ul role='listbox' tabindex='0' data-role='listview'>"}var f=msgArray.length;HTMLMsgCount=f;for(o=0;o<f;o++){m=b(msgArray[o],true);g=msgArray[o].id;p=msgArray[o].type;q=msgArray[o].dismiss;p=msgArray[o].type;if(p===m_strUrgent.valueOf()||p===m_strUrgentWA.valueOf()){m_strMsgRowClass="siebui-msgbar-row-urgent"}else{if(p===m_strHigh.valueOf()){m_strMsgRowClass="siebui-msgbar-row-high"}else{if(p===m_strNormal.valueOf()){m_strMsgRowClass="siebui-msgbar-row-normal"}else{m_strMsgRowClass="undefined"}}}if(g===n){msgArray[o].status=v;s=v}else{s=msgArray[o].status}if(m_strMsgRowClass==="undefined"){HTMLMsgCount--}else{if(s==="1"){HTMLMsgCount--;u[k]=msgArray[o];k++}else{if(s==="2"){HTMLMsgCount--}else{if(s==="9"){HTMLMessages+="<li id='"+g+"' data-status='"+s+"'>"+m+"</li>"}else{if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="<li id='"+g+"' class='unreadmessage "+m_strMsgRowClass+"' data-icon='false' data-status='"+s+"'><a>"+m;if(q==="Y"){HTMLMessages+="</a><a id='DeleteMsgBtnId' class='siebui-mobile-deletemsgbtn' href='#'></a></li>"}else{HTMLMessages+="</li>"}}else{HTMLMessages+="<li id='"+g+"' role='presentation' class='unreadmessage "+m_strMsgRowClass+"' data-status='"+s+"'>"+m;if(q==="Y"){HTMLMessages+="<div><div><a id='DeleteMsgBtnIdNonMobile' aria-label='Delete Notification' tabindex='0' class='siebui-deletemsgbtn ui-state-default ui-corner-all' role='button' href='javascript:void(0)'><span class='ui-icon ui-icon-circle-close'></span></a></div></div></li>"}else{HTMLMessages+="</li>"}}if(p===m_strUrgent.valueOf()||p===m_strUrgentWA.valueOf()){if(p===m_strUrgentWA.valueOf()){m_blinkFlg=true;m_isUnrdUwA=true}m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-urgent"}else{if(p===m_strHigh.valueOf()&&(m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-urgent")){m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-high"}else{if(p===m_strNormal.valueOf()&&((m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-urgent")&&(m_strUnRdLtstClrCode!=="siebui-msgbar-bkgrnd-msg-high"))){m_strUnRdLtstClrCode="siebui-msgbar-bkgrnd-msg-normal"}}}}}}}}h=u.length;for(o=0;o<h;o++){m=b(u[o],true);g=u[o].id;q=u[o].dismiss;s=u[o].status;p=u[o].type;if(p===m_strUrgent.valueOf()||p===m_strUrgentWA.valueOf()){m_strMsgRowClass="siebui-msgbar-row-urgent"}else{if(p===m_strHigh.valueOf()){m_strMsgRowClass="siebui-msgbar-row-high"}else{if(p===m_strNormal.valueOf()){m_strMsgRowClass="siebui-msgbar-row-normal"}}}if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="<li id='"+g+"' class='readmessage "+m_strMsgRowClass+"' data-icon='false' data-status='"+s+"'><a>"+m;if(q==="Y"){HTMLMessages+="</a><a id='DeleteMsgBtnId' class='siebui-mobile-deletemsgbtn' href='#'></a></li>"}else{HTMLMessages+="</li>"}}else{HTMLMessages+="<li id='"+g+"' role='presentation' class='readmessage "+m_strMsgRowClass+"' data-status='"+s+"'>"+m;if(q==="Y"){HTMLMessages+="<div><div><a id='DeleteMsgBtnIdNonMobile' aria-label='Delete Notification' tabindex='0' class='siebui-deletemsgbtn ui-state-default ui-corner-all' role='button' href='javascript:void(0)'><span class='ui-icon ui-icon-circle-close'></span></a></div></div></li>"}else{HTMLMessages+="</li>"}}}if(SiebelApp.S_App.IsMobileApplication()==="true"){HTMLMessages+="</ul><a id='CloseDialog' class='siebui-mobile-msgclosedialog' rel='close' data-role='button' name='ParentClose'>"+m_strCloseText+"</a></div>"}else{HTMLMessages+="</ul></div>"}var t=document.getElementById("MsgBar");if(SiebelApp.S_App.IsMobileApplication()==="true"){t.innerHTML="<h5>"+HTMLMsgCount+"</h5>"}else{t.innerText=HTMLMsgCount}if(m_strUnRdLtstClrCode!==""){if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strUnRdLtstClrCode)}else{$("#MsgBar").addClass(m_strUnRdLtstClrCode)}}else{if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strRdLtstClrCode)}else{$("#MsgBar").addClass(m_strRdLtstClrCode)}}if(!m_blinkFlg){window.clearInterval(m_blinktimer);m_blinkFlg=false}objPM.OnControlEvent("UpdateServer",n,v);if(SiebelApp.S_App.IsMobileApplication()!=="true"){var r=$("#MsgBar").attr("aria-label");var l=a();r=r+" Priority :"+l;$("#MsgBar").attr("aria-label",r)}}d.prototype.blink=function(f){if(SiebelApp.S_App.IsMobileApplication()==="true"){m_blinktimer=window.setInterval(function(){$("#MsgBar h5").addClass("msgblinkstylemobi");window.setTimeout(function(){$("#MsgBar h5").removeClass("msgblinkstylemobi")},1000)},f)}else{m_blinktimer=window.setInterval(function(){$("#MsgBar").addClass("msgblinkstyle");window.setTimeout(function(){$("#MsgBar").removeClass("msgblinkstyle")},1000)},f)}};d.prototype.BindEvents=function(){var f=this;$(document).delegate("#DeleteMsgBtnId","click",function(){var h=$(this).parent().attr("data-status");if(h!=="9"){isMsgDeleteEvent=true;var g=$(this).parent().attr("id");e("2",g);$(this).parent().addClass("deletemessage");if($("[name=popup]").length>0){$("[name=popup]").simpledialog("close")}}});$(document).delegate("#DeleteMsgBtnIdNonMobile span.ui-icon-circle-close","click",function(){var h=$(this).closest("li").attr("data-status");if(h!=="9"){isMsgDeleteEvent=true;var g=$(this).closest("li").attr("id");e("2",g);$(this).closest("li").addClass("deletemessage")}});$(document).delegate(".ui-widget-overlay","click",function(){if($("#dialog_content").length>0){$("#dialog_content").remove()}if($("#Msg_Summary").length>0){$("#Msg_Summary").remove()}});$("#HTMLMessageBar").delegate(" a","click",function(){if(SiebelApp.S_App.IsMobileApplication()==="true"){$(this).simpledialog({mode:"blank",prompt:false,forceInput:false,cleanOnClose:true,useModal:true,left:"70px",fullHTML:HTMLMessages,useDialogForceFalse:true});$(".ui-simpledialog-container").css("width","45%");var g=$(".ui-simpledialog-container");m_dWidth=g.outerWidth();m_dPosY=g[0].offsetTop;$("[name=ParentClose]").bind("click",function(l){if($("[name=popup]").length>0){$("[name=popup]").simpledialog("close")
}});var h=navigator.userAgent.match(/(iPhone)|(iPod)|(Android.*Mobile)/i);if(h){$(".siebui-mobile-msgbrdcst-heading").parent().addClass("siebui-MsgBrdCst-Heading-phone")}if(m_strAuto.toString()==="TRUE"){$("div[id='MsgBrdCst_Summary']").attr("ot","MsgBrdCstSummary");$("div[id='MsgBrdCst_Summary']").attr("rt","MsgBrdCstSummary");$("div[id='MsgBrdCst_Summary']").attr("un","Notification Summary")}}else{var j=navigator.userAgent.toString().toLowerCase();var k=(j.indexOf("msie")!=-1);if(k){var i=$('<div id="Msg_Summary"></div>').html(HTMLMessages).dialog({title:m_strNtfcSummaryText,position:["right",40],autoOpen:false,width:500,draggable:false,minHeight:100,modal:true,resizable:false,open:function(l,m){$(this).parent().find("div.ui-dialog-titlebar").addClass("titleClass")},beforeClose:function(l,m){if($("#dialog_content").length>0){$("#dialog_content").remove()}if($("#Msg_Summary").length>0){$("#Msg_Summary").remove()}}})}else{var i=$('<div id="Msg_Summary"></div>').html(HTMLMessages).dialog({title:m_strNtfcSummaryText,position:["right",40],autoOpen:false,draggable:false,width:500,minHeight:100,modal:true,resizable:false,show:{effect:"drop",direction:"up",duration:1000},hide:{effect:"drop",direction:"up",duration:1000},open:function(l,m){$(this).find("span").first().focus();$(this).parent().find("div.ui-dialog-titlebar").addClass("titleClass")},beforeClose:function(l,m){if($("#dialog_content").length>0){$("#dialog_content").remove()}if($("#Msg_Summary").length>0){$("#Msg_Summary").remove()}}})}if(m_strAuto.toString()==="TRUE"){$("div[id='Msg_Summary']").attr("ot","MsgBrdCstSummary");$("div[id='Msg_Summary']").attr("rt","MsgBrdCstSummary");$("div[id='Msg_Summary']").attr("un","Notification Summary")}i.dialog("open")}});$(document).delegate("#MsgBrdCst_Summary li","keydown",function(g){var h=(g.keyCode)?g.keyCode:g.charCode;var i=$(this)[0];switch(h){case 38:$(i).prev().find("span").first().focus();g.preventDefault();break;case 40:$(i).next().find("span").first().focus();g.preventDefault();break;case 13:$(this).trigger("click");g.preventDefault();break}});$(document).delegate("#MsgBrdCst_Summary li","click",function(x){var v=0;var h;var o,p;if($("#dialog_content").length>0){$("#dialog_content").remove()}var B=f.GetPM().Get("MsgUserPrefPS");m_strNormal=B.GetProperty("Normal");m_strHigh=B.GetProperty("High");m_strUrgent=B.GetProperty("Urgent");m_strUrgentWA=B.GetProperty("UrgentWA");m_normalColor=B.GetProperty("NormalColor");m_highColor=B.GetProperty("HighColor");m_urgentColor=B.GetProperty("UrgentColor");m_updateInterval=B.GetProperty("UpdateInterval");m_prefixNormal=B.GetProperty("PrefixNormal");m_prefixHigh=B.GetProperty("PrefixHigh");m_prefixUrgent=B.GetProperty("PrefixUrgent");if(!isMsgDeleteEvent){var w=$(this)[0].innerText;var r=$(this)[0].id;var n=$(this).attr("data-status");if(n!=="9"){$(this).addClass("readmessage")}var l=msgArray.length;for(v=0;v<l;v++){var g=msgArray[v];if(g.id===r){var y=g.body;var s=g.type;var u=g.summary;break}}if(s===m_strUrgent.valueOf()||s===m_strUrgentWA.valueOf()){m_strMsgRowClass="siebui-msgbar-row-urgent"}else{if(s===m_strHigh.valueOf()){m_strMsgRowClass="siebui-msgbar-row-high"}else{if(s===m_strNormal.valueOf()){m_strMsgRowClass="siebui-msgbar-row-normal"}}}var z=u.match(/\[D\]/);if(z===null){var k=b(msgArray[v],false);if(SiebelApp.S_App.IsMobileApplication()==="true"){var j="";var m=70+parseInt(m_dWidth,10);j=m+"px";o=this.offsetTop+parseInt(m_dPosY,10);var q=navigator.userAgent.match(/(iPhone)|(iPod)|(Android.*Mobile)/i);if(q){m=$(this).parents(".ui-simpledialog-container:first")[0].offsetLeft+0.05*parseInt(m_dWidth,10);j=m+"px";o=0.45*$(this).parents(".ui-simpledialog-container:first")[0].offsetHeight+parseInt(m_dPosY,10)}if($("[name=popup]").length>0){$("[name=popup]").simpledialog("close");$("[name=popup]").remove()}if($("[name=popup]").length===0){h=$('<div name="popup" id="MsgBrdCst_Details" class="siebui-mobile-msgbrdcst_details"><ul data-role="listview"><li class="'+m_strMsgRowClass+'">'+k+'</li></ul><a id="CloseDialog" class="siebui-mobile-msgclosedialog" rel="close" data-role="button">'+m_strCloseText+"</a></div>")}SiebelApp.S_App.GetTargetViewContainer().append(h);$("[name=popup]").simpledialog({mode:"blank",prompt:false,forceInput:false,cleanOnClose:true,top:o,left:j,fullHTML:$("[name=popup]"),useDialogForceFalse:true});$("[name=popup]").simpledialog("open");$(".ui-simpledialog-container").css("width","45%");if(m_strAuto.toString()==="TRUE"){$("div[id='MsgBrdCst_Details']").attr("ot","MsgBrdCstDetails");$("div[id='MsgBrdCst_Details']").attr("rt","MsgBrdCstDetails");$("div[id='MsgBrdCst_Details']").attr("un","Notification Details")}if(q){$(".siebui-mobile-msgbrdcst_details").parent().addClass("siebui-MsgBrdCst-Details-phone")}}else{p=$(window).width()-1002;o=x.clientY-10;var t="<div id='MsgBrdCst_Details_BigSbl' class='siebui-msgbrdcst_details "+m_strMsgRowClass+"'>"+k+"</div>";var A=$('<div id= "dialog_content"></div>').html(t).dialog({title:m_strNtfcDetailsText,position:[p,o],autoOpen:false,width:500,minHeight:100,draggable:false,modal:false,resizable:false,open:function(i,C){$(this).attr("tabindex","0");$(this).focus();$(this).parent().find("div.ui-dialog-titlebar").addClass("titleClass")},close:function(i,C){var D=$("#MsgBrdCst_Summary").find('li[id="'+r+'"]');$(D).find("span").first().focus();if($("#dialog_content").length>0){$("#dialog_content").remove()}}});A.dialog("open");if(m_strAuto.toString()==="TRUE"){$("div[id='MsgBrdCst_Details_BigSbl']").attr("ot","MsgBrdCstDetails");$("div[id='MsgBrdCst_Details_BigSbl']").attr("rt","MsgBrdCstDetails");$("div[id='MsgBrdCst_Details_BigSbl']").attr("un","Notification Details")}}}else{objPM.OnControlEvent("DownLoadFileFromServer",y)}if(n!=="1"){if(n!=="9"){$(this).attr("data-status","1");e("1",r)}}}isMsgDeleteEvent=false;m_selectedrowId=r})};d.prototype.BindData=function(){};d.prototype.UpdateMsgBar=function(){var h=this.GetPM().Get("MsgChanged");var i=this.GetPM().Get("MsgCount");msgArray=this.GetPM().Get("MsgObjArray");if(h===true){c();if(SiebelApp.S_App.IsMobileApplication()==="true"){$("div[id='HTMLMessageBar']").children().remove();$("div[id='HTMLMessageBar']").append('<a id="MsgBar" class="siebui-mobile-msgbar" title="'+m_strNotification+'"><h5>'+HTMLMsgCount+"</h5></a>").trigger("create")}else{$("div[id='HTMLMessageBar']").children().remove();$("div[id='HTMLMessageBar']").append('<span class="ui-icon ui-icon-info"></span><a id="MsgBar" href="javascript:void(0)" class="siebui-msgbar" aria-label="'+HTMLMsgCount+' Unread Notification"  title="'+m_strNotification+'">'+HTMLMsgCount+"</a>").trigger("create")}if(m_blinkFlg){this.blink(2000);m_blinkFlg=false}else{window.clearInterval(m_blinktimer)}if(m_strUnRdLtstClrCode!==""){if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strUnRdLtstClrCode)}else{$("#MsgBar").addClass(m_strUnRdLtstClrCode)}}else{if(SiebelApp.S_App.IsMobileApplication()==="true"){$("#MsgBar h5").addClass(m_strRdLtstClrCode)}else{$("#MsgBar").addClass(m_strRdLtstClrCode)
}}if(SiebelApp.S_App.IsMobileApplication()==="true"){if($(".siebui-mobile-msgbrdcst-heading").length>0){$(".siebui-mobile-msgbrdcst-heading").parent().html(HTMLMessages);$(".siebui-mobile-msgbrdcst-heading").trigger("create");if($(".siebui-mobile-msgbrdcst_details").length>0){if($("#"+m_selectedrowId).length>0){$(".siebui-mobile-msgbrdcst_details").parent().remove();$("#"+m_selectedrowId).trigger("click")}else{$(".siebui-mobile-msgbrdcst_details").prepend("<span class ='siebui-mobile-msg-expired'>["+m_msgexpired+"]</span>")}}}}else{if($("#Msg_Summary").length>0){$("#Msg_Summary").html(HTMLMessages)}if($("#dialog_content").length>0){if($("#"+m_selectedrowId).length>0){$("#dialog_content").remove();$("#"+m_selectedrowId).trigger("click")}else{$("#dialog_content").prepend("<span class ='siebui-msg-expired'>["+m_msgexpired+"]</span>")}}}if(SiebelApp.S_App.IsMobileApplication()!=="true"){var g=$("#MsgBar").attr("aria-label");var f=a();g=g+" Priority :"+f;$("#MsgBar").attr("aria-label",g)}}};function b(f,t){var o;var s="siebui-msgbar-msg-normal";var h="";var u="";var q;if(t){o=f.summary;var j=f.body;var p=f.dismiss;if(f.type===m_strHigh.valueOf()){s="siebui-msgbar-msg-high"}else{if(f.type===m_strUrgent.valueOf()||f.type===m_strUrgentWA.valueOf()){s="siebui-msgbar-msg-urgent"}}o=HtmlEncode(o);if(o.indexOf("[D]")!=-1){o=o.replace(/\[D\]/g,"");u=o;if(j.indexOf("View")!=-1){q=true}if(SiebelApp.S_App.IsMobileApplication()==="false"){if(q==true){o="<span class='siebui-msgbrdcst-drilldown-icon'></span><span class='siebui-msgbrdcst-drilldown'>"+o+"</span>"}else{o="<span class='siebui-msgbrdcst-attachment-icon'></span><span class='siebui-msgbrdcst-drilldown'>"+o+"</span>"}}else{if(q==true){o="<span class='siebui-mobile-msgbrdcst-drilldown-text'>"+o+"</span><span class='siebui-mobile-msgbrdcst-drilldown-icon'></span>"}else{o="<span class='siebui-mobile-msgbrdcst-drilldown-text'>"+o+"</span><span class='siebui-mobile-msgbrdcst-attachment-icon'></span>"}}}if(SiebelApp.S_App.IsMobileApplication()==="true"){if(utils.IsEmpty(u)){h+="<span class ="+s+" role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+o+"'>"}else{h+="<span class ="+s+" role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+u+" Hyperlink'>"}h+=o+"</span>"}else{if(utils.IsEmpty(u)){if(p==="Y"){h+="<span class ='"+s+"' id='siebui-delmsg-span' role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+o+"'>"}else{h+="<span class ="+s+" role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+o+"'>"}}else{if(p==="Y"){h+="<span class ='"+s+"' id='siebui-delmsg-span' role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+u+" Hyperlink'>"}else{h+="<span class ="+s+" role='option' tabindex='0' aria-label='Notification Severity :"+f.type+" Notification Summary : "+u+" Hyperlink'>"}}h+=o+"</span>"}return h}else{var g="siebui-msgbar-msg-normal";var n=m_prefixNormal;var l;o=f.body;var m=f.type;var v=o.length+n.length;if(m===m_strUrgent.valueOf()||m===m_strUrgentWA.valueOf()){n=m_prefixUrgent}else{if(m===m_strHigh.valueOf()){n=m_prefixHigh}else{if(m===m_strNormal.valueOf()){n=m_prefixNormal}}}o=HtmlEncode(o);o=o.replace(/\[N\]/g,"<span class='siebui-msgbar-msg-normal'>"+m_prefixNormal);o=o.replace(/\[H\]/g,"<span class='siebui-msgbar-msg-high'>"+m_prefixHigh);o=o.replace(/\[U\]/g,"<span class='siebui-msgbar-msg-urgent'>"+m_prefixUrgent);var k=0;var r="";while(1){k=o.indexOf("<span",k);if(k>0){k+=5}else{break}r+="</span>"}o+=r;o="<span class='"+g+"'>"+n+o+"</span>";return o}}function a(){var f;if(m_strUnRdLtstClrCode!==""){if(m_strUnRdLtstClrCode==="siebui-msgbar-bkgrnd-msg-urgent"){if(m_isUnrdUwA===true){f=m_strUrgentWA.valueOf()}else{f=m_strUrgent.valueOf()}}else{if(m_strUnRdLtstClrCode==="siebui-msgbar-bkgrnd-msg-high"){f=m_strHigh.valueOf()}else{if(m_strUnRdLtstClrCode==="siebui-msgbar-bkgrnd-msg-normal"){f=m_strNormal.valueOf()}}}}else{f=m_strNormal.valueOf()}return f}d.prototype.CloseMainDialog=function(){if($("#Msg_Summary").length>0){$("#Msg_Summary").remove()}};return d}())};