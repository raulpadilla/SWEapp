if(typeof(SiebelAppFacade.SearchAllResultsPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.SearchAllResultsPresentationModel");if(typeof(SiebelApp)!="undefined"&&typeof(SiebelApp.S_App)!="undefined"){if(typeof(SiebelApp.Constants)!="undefined"){SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_SEARCH_ALL_RESULTS_PMODEL"),"SiebelAppFacade.SearchAllResultsPresentationModel")}}SiebelAppFacade.SearchAllResultsPresentationModel=(function(){var g=SiebelJS.Dependency("SiebelAppFacade.FacadeConstants");var d=SiebelJS.Dependency("SiebelApp.Constants");var b=" ";var c="All";var e=0;var f=10;var i=1;var h=10;function a(j){SiebelAppFacade.SearchAllResultsPresentationModel.superclass.constructor.call(this,j)}SiebelJS.Extend(a,SiebelAppFacade.ListPresentationModel);a.prototype.Init=function(){SiebelAppFacade.SearchAllResultsPresentationModel.superclass.Init.call(this);this.AddProperty("ShowRefineResultsDialog","");this.AddProperty("ShowRefineKeywords","");this.AddProperty("SubOperation","");this.AddProperty("Freetext","");this.AddProperty("BCType","");this.AddProperty("ShowTotResults","");this.AddProperty("ShowTotalCount","");this.AddMethod("InvokeServiceMethod",function(s,k,r){var j=CCFMiscUtil_CreatePropSet();var p=0;var t=[];var q=SiebelApp.S_App.GetService("Invoke Search");if(!q){return}r=q.InvokeMethod("GetResultParams",j);var m=r.GetChild(0);var u=m.GetProperty("Freetext");var l=m.GetProperty("BCType");var n=m.GetProperty("ResultsFound");var o=n.length;for(p=0;p<o;p++){if(n[p]===" "){break}t+=n[p]}k.SetProperty("TotalRecords",t);k.SetProperty("SearchFor",u);k.SetProperty("BCType",l);e=t;b=u;c=l});this.AttachEventHandler("OnLoadGetParams",function(k){var j=CCFMiscUtil_CreatePropSet();this.ExecuteMethod("InvokeServiceMethod","GetResultParams",k,j)});this.AttachEventHandler("OnExecuteRefineResults",function(){var j=CCFMiscUtil_CreatePropSet();var s=CCFMiscUtil_CreatePropSet();j.SetProperty("Pagination","FALSE");j.SetProperty("SubOperation",this.Get("SubOperation"));var o=SiebelApp.S_App.GetService("Invoke Search");if(!o){return}s=o.InvokeMethod("Search",j);var k=true;var r=null;var q=null;var n=[];var m=0;var l=s.GetChildCount();for(m=0;m<l;m++){var p=s.GetChild(m);if(p&&p.GetType()==="ResultSet"){for(k=true;(r=p.EnumProperties(k))!=null;k=false){q=p.GetProperty(r);if(r!=="GotoOUIResultsView"){n.push(r)}}}}j.RemoveProperty("SubOperation");this.SetProperty("ShowRefineKeywords",n);this.SetProperty("ShowRefineResultsDialog",true)});this.AttachEventHandler("OnExecuteRefineSearch",function(){var q=0;var k=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();k.SetProperty("Pagination","TRUE");k.SetProperty("Freetext",this.Get("Freetext"));k.SetProperty("BCType",this.Get("BCType"));k.SetProperty("SubOperation","");var r=SiebelApp.S_App.GetService("Invoke Search");if(!r){return}u=r.InvokeMethod("Search",k);var l=CCFMiscUtil_CreatePropSet();var o=[];var p=u.GetPropertyCount();for(q=0;q<p;q++){var s=u.GetChild(q);if(s){var n=0;var t=s.GetPropertyCount();if(s.GetType()==="ResultSet"){var m=s.GetProperty("TotalRecords")}}}this.SetProperty("ShowTotalCount",m);this.SetProperty("ShowTotResults",true)});this.AttachEventHandler("OnExecuteNextRecordSet",function(){var l=e%f;if(h<e){i+=f;if((h+f)>=e){if(l!=0){h+=l}}else{h+=f}var m=CCFMiscUtil_CreatePropSet();var k=CCFMiscUtil_CreatePropSet();m.SetProperty("Pagination","TRUE");m.SetProperty("Freetext",this.Get("Freetext"));m.SetProperty("BCType",this.Get("BCType"));m.SetProperty("From",i);m.SetProperty("To",h);m.SetProperty("SubOperation","");var j=SiebelApp.S_App.GetService("Invoke Search");if(!j){return}k=j.InvokeMethod("Search",m)}});this.AttachEventHandler("OnExecutePrevRecordSet",function(){var l=e%f;if(i>1){i-=f;if((h===(e-0))&&(l!=0)){h-=l}else{h-=f}var m=CCFMiscUtil_CreatePropSet();var k=CCFMiscUtil_CreatePropSet();m.SetProperty("Pagination","TRUE");m.SetProperty("Freetext",this.Get("Freetext"));m.SetProperty("BCType",this.Get("BCType"));m.SetProperty("From",i);m.SetProperty("To",h);m.SetProperty("SubOperation","");var j=SiebelApp.S_App.GetService("Invoke Search");if(!j){return}k=j.InvokeMethod("Search",m)}})};return a}())};