if(typeof(SiebelAppFacade.MsgBrdCstPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.MsgBrdCstPresentationModel");SiebelAppFacade.MsgBrdCstPresentationModel=(function(){var A="";var s="";var v=false;var p="";var a="";var c="";var o="";var g="";var D="";var f="";var j="";var i=120;var q="";var b="";var n="";var u=[];var r=SiebelJS.Dependency("SiebelApp.Constants");var B=SiebelJS.Dependency("SiebelApp.Utils");function x(E){SiebelAppFacade.MsgBrdCstPresentationModel.superclass.constructor.call(this,E)}SiebelJS.Extend(x,SiebelAppFacade.PresentationModel);function e(){var G=0;var F=SiebelApp.S_App.GetService("Message Bar");var I=SiebelApp.S_App.NewPropertySet();I.SetProperty(r.get("SWE_BUSINESS_SERVICE"),r.get("SWE_NUMERIC_TRUE"));var E=SiebelApp.S_App.NewPropertySet();if(F){E=null;var H={};H.async=false;H.selfbusy=true;H.scope=this;H.cb=function(){E=arguments[2];if(E!==null){var J=E.GetChildCount();for(var L=0;L<J;L++){var K=E.GetChild(L);if(K!==null&&K.GetType()==="ResultSet"){G=K.GetProperty("IsMsgBarEnabled")}}}};F.InvokeMethod("IsMsgBarEnabled",I,H)}return G}x.prototype.Init=function(){var E=e.call(this);if(E==="1"){this.AttachEventHandler("ShowMessageBar",function(G){h.call(this);var F=this;setInterval(function(){F.ExecuteMethod("UpdateMessageBar")},i*1000)});this.AddMethod("UpdateMessageBar",y);this.AddMethod("AddNotification",C);this.AddMethod("DeleteNotification",w);this.AddMethod("UpdateNotification",z);this.AddMethod("ReadNotification",m);this.AttachEventHandler("UpdateServer",function(K,J){var G=SiebelApp.S_App.GetService("Message Bar");var I=SiebelApp.S_App.NewPropertySet();var F=SiebelApp.S_App.NewPropertySet();I.SetProperty("User MsgId",K);I.SetProperty("User MsgStatus",J);I.SetProperty(r.get("SWE_BUSINESS_SERVICE"),r.get("SWE_NUMERIC_TRUE"));if(G){F=null;var H={};H.async=true;H.npr=true;H.selfbusy=true;H.scope=this;G.InvokeMethod("UpdateUserMsg",I,H);F=arguments[2]}});this.AttachEventHandler("DownLoadFileFromServer",function(M){var I=false;var L=SiebelApp.S_App.GetService("Message Bar");var F=SiebelApp.S_App.NewPropertySet();var P=SiebelApp.S_App.NewPropertySet();var H=M.split(";");for(var J=0;J<H.length;J++){var O=H[J].indexOf(":");if(O<0){continue}var K=$.trim(H[J].substr(0,O)).toLowerCase();var G=$.trim(H[J].substr(O+1));switch(K){case"bo":F.SetProperty("BO",G);break;case"bc":F.SetProperty("BC",G);break;case"view":F.SetProperty("View",G);I=true;break;case"field":F.SetProperty("Field",G);break;case"file ext":F.SetProperty("File Ext",G);break;case"id":F.SetProperty("Id",G);break;default:break}}if(L){P=null;var N={};N.async=true;N.npr=false;N.selfbusy=true;N.scope=this;N.cb=function(){if(I===true){this.GetRenderer().CloseMainDialog()}};L.InvokeMethod("DownLoadReport",F,N)}})}};x.prototype.Show=function(){var E=this.GetRenderer();E.ShowUI();E.BindEvents()};x.prototype.Setup=function(E){SiebelAppFacade.MsgBrdCstPresentationModel.superclass.Setup.call(this,E)};function C(H){var F,I,N;var L=SiebelApp.S_App.GetService("Message Bar");var E=SiebelApp.S_App.NewPropertySet();var K=true;if(H!==null){var G=H.GetChildCount();for(var J=0;J<G;J++){var E=H.GetChild(J);E.GetProperty("Type",F);E.GetProperty("Body",N);if(N===null||F===null){SiebelJS.Log("Type Body and Id are the required fields");K=false}}}if(K){if(L){var M={};M.async=false;M.selfbusy=true;M.npr=false;M.scope=this;return L.InvokeMethod("AddNotification",H,M)}}}function w(F){var K;var L=0;var G=true;var E=SiebelApp.S_App.GetService("Message Bar");var J=SiebelApp.S_App.NewPropertySet();if(F!==null){nRecordCountdelete=F.GetChildCount();for(var H=0;H<nRecordCountdelete;H++){var J=F.GetChild(H);J.GetProperty("Msg Id",K);if(K===null){SiebelJS.Log("Row id is required");G=false}}}if(G){if(E){var I={};I.async=false;I.selfbusy=true;I.npr=false;I.scope=this;return E.InvokeMethod("DeleteNotification",F,I)}}}function m(F){var K;var L=0;var G=true;var E=SiebelApp.S_App.GetService("Message Bar");var J=SiebelApp.S_App.NewPropertySet();if(F!==null){nRecordCountRead=F.GetChildCount();for(var H=0;H<nRecordCountRead;H++){var J=F.GetChild(H);J.GetProperty("Msg Id",K);if(K===null){SiebelJS.Log("Row Id is required");G=false}}}if(G){if(E){var I={};I.async=false;I.npr=false;I.selfbusy=true;I.scope=this;return E.InvokeMethod("ReadNotification",F,I)}}}function z(F){var L;var G=true;var E=SiebelApp.S_App.GetService("Message Bar");var K=SiebelApp.S_App.NewPropertySet();if(F!==null){var I=F.GetChildCount();for(var H=0;H<I;H++){var K=F.GetChild(H);K.GetProperty("Msg Id",L);if(L===null){SiebelJS.Log("Row Id is required");G=false}}}if(G){if(E){var J={};J.async=false;J.selfbusy=true;J.npr=false;J.scope=this;return E.InvokeMethod("UpdateNotification",F,J)}}}function y(){var I,G;var F=SiebelApp.S_App.GetService("Message Bar");var L=SiebelApp.S_App.NewPropertySet();L.SetProperty(r.get("SWE_BUSINESS_SERVICE"),r.get("SWE_NUMERIC_TRUE"));var E=SiebelApp.S_App.NewPropertySet();if(F){E=null;var J=this;var H="UpdatePrefMsg";var K={};K.async=true;K.scope=this;K.npr=true;K.selfbusy=true;K.cb=function(){E=arguments[2];if(E!==null){var M=E.GetChildCount();for(var O=0;O<M;O++){var N=E.GetChild(O);if(N!==null&&N.GetType()==="ResultSet"){var P=N.GetProperty("returnVal");l.call(J,P);J.GetRenderer().UpdateMsgBar()}}}};F.InvokeMethod(H,L,K)}}function h(){var I,G;var F=SiebelApp.S_App.GetService("Message Bar");var L=SiebelApp.S_App.NewPropertySet();L.SetProperty(r.get("SWE_BUSINESS_SERVICE"),r.get("SWE_NUMERIC_TRUE"));var E=SiebelApp.S_App.NewPropertySet();if(F){E=null;var J=this;var H="Init";var K={};K.async=true;K.selfbusy=true;K.scope=this;K.cb=function(){E=arguments[2];if(E!==null){var M=E.GetChildCount();for(var O=0;O<M;O++){var N=E.GetChild(O);if(N!==null&&N.GetType()==="ResultSet"){var P=N.GetProperty("returnVal");J.MsgInit(P)}}}J.MsgBrdCstInit(F)};F.InvokeMethod(H,L,K)}}x.prototype.MsgBrdCstInit=function(F){var J=SiebelApp.S_App.NewPropertySet();J.SetProperty(r.get("SWE_BUSINESS_SERVICE"),r.get("SWE_NUMERIC_TRUE"));var E=SiebelApp.S_App.NewPropertySet();if(F){var G="UpdatePrefMsg";var H=this;var I={};I.async=true;I.scope=this;I.selfbusy=true;I.cb=function(){E=arguments[2];if(E!==null){var L=E.GetChildCount();for(var N=0;N<L;N++){var M=E.GetChild(N);if(M!==null&&M.GetType()==="ResultSet"){var O=M.GetProperty("returnVal");l.call(H,O);H.AddProperty("MsgCount",s);H.AddProperty("MsgObjArray",u);var K=CCFMiscUtil_CreatePropSet();K.SetProperty("Normal",p);K.SetProperty("Automation",a);K.SetProperty("High",c);K.SetProperty("Urgent",o);K.SetProperty("UrgentWA",g);K.SetProperty("NormalColor",D);K.SetProperty("HighColor",f);K.SetProperty("UrgentColor",j);K.SetProperty("UpdateInterval",i);K.SetProperty("PrefixNormal",q);K.SetProperty("PrefixHigh",b);K.SetProperty("PrefixUrgent",n);H.AddProperty("MsgUserPrefPS",K);H.GetRenderer().CreateMsgBar()}}}};F.InvokeMethod(G,J,I)}};x.prototype.MsgInit=function(G){var F=new Array(1);F[0]=0;var E=k(G,F);E=k(G,F);p=k(G,F);a=k(G,F);c=k(G,F);o=k(G,F);g=k(G,F)};function l(E){v=false;var K=new Array(1);K[0]=0;K[0]=E.indexOf("-$$$-");
if(K[0]>=0){if(K[0]>0){var O=E.substring(0,K[0])}K[0]+=5}else{K[0]=0}var N,M,L,G=0,H=0;N=E.indexOf("-|||-",K[0]);M=E.indexOf("--saMe--",K[0]);L=E.indexOf("--saMe--",N);if((M===-1)||(M>N)){var I=parseInt(k(E,K),10);var P=parseInt(k(E,K),10);var J=parseInt(k(E,K),10);var F=d(k(E,K));D=d(k(E,K));f=d(k(E,K));j=d(k(E,K));i=parseInt(k(E,K),10);q=k(E,K);b=k(E,K);n=k(E,K)}if(L===-1){u=null;u=[];K[0]=E.indexOf("Msg",N);while(N<K[0]&&K[0]<E.length){K[0]+=3;u[H]=this.MsgBarMessage(E,K);H++}v=true}if(v){this.AddProperty("MsgChanged",v);s=u.length;this.AddProperty("MsgCount",s);this.AddProperty("MsgObjArray",u)}else{this.AddProperty("MsgChanged",v)}}x.prototype.MsgBarMessage=function(N,L){if(N===null){return}var G=k(N,L);var I=k(N,L);var K=k(N,L);var J=k(N,L);var E=k(N,L);var M=k(N,L);var O=k(N,L);var H=k(N,L);var F={};F.id=G;F.body=I;F.type=K;F.summary=M;F.status=O;F.dismiss=H;return F};function d(I){var H=0;if(I.charAt(0)==="#"){return I}var E=I.split(",");var G="#",F;for(H=0;H<3;H++){F=t(E[H],16);if(F.length===1){F="0"+F}G+=F}return G}function t(I,G){var E="",H=Math.floor(Math.abs(I)),F;if(!H||typeof(H)==="undefined"){return"0"}while(true){F=H%G;E="0123456789abcdefghijklmnopqrstuvwxyz".charAt(F)+E;H=(H-F)/G;if(H===0){break}}return((I<0)?"-"+E:E)}function k(I,J){var F="*4*TRUE*";var G,H,E=null;if(I.charAt(J[0])==="*"){J[0]++;G=I.indexOf("*",J[0]);if(G>0){E=parseInt(I.substring(J[0],G),10);if(E===null){return""}}if(G<I.length&&I.charAt(G)==="*"){H=I.substring(G+1,E+G+1);J[0]=G+E+1;return H}}return""}return x}())};