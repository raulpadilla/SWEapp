/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.FlowchartPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.FlowchartPresentationModel");define("siebel/flowchartpmodel",[],function(){SiebelAppFacade.FlowchartPresentationModel=(function(){function b(n){SiebelAppFacade.FlowchartPresentationModel.superclass.constructor.call(this,n)}SiebelJS.Extend(b,SiebelAppFacade.PresentationModel);b.prototype.Init=function(){SiebelAppFacade.FlowchartPresentationModel.superclass.Init.call(this);this.AddProperty("shapePathMap",{});this.AddProperty("shapeMarkupMap",{});this.AddProperty("optionsMarkup","");this.AddProperty("menuMarkup","");this.AddProperty("disabledMenuList","");this.AddProperty("SelectedId","");this.AddProperty("gfcObjectsMap",{});this.AddProperty("gfcDeltaMap",{});this.AddProperty("drawFlowchart","");this.AddProperty("paletteItems",[]);this.AddMethod("NotifyServer",k);this.AttachEventHandler("eventBtnClick",function(p,o){if(p&&o){var n=CCFMiscUtil_CreatePropSet();n.SetProperty("sel",o);k.call(this,p,n)}});this.AttachEventHandler("eventDblClick",function(o){if(o.indexOf("to-end-")===-1){var n=CCFMiscUtil_CreatePropSet();n.SetProperty("gfcId",o);n.SetProperty("sel",o);k.call(this,"dblClk",n)}});this.AttachEventHandler("eventMenuClick",function(q,n){var p=n.join(" ");if(q&&p){var o=CCFMiscUtil_CreatePropSet();o.SetProperty("sel",p);k.call(this,q,o)}});this.AttachEventHandler("eventKeyup",l);this.AttachEventHandler("eventMouseup",e);this.AttachEventHandler("eventDrop",a);this.AttachEventHandler("eventMenuSelect",i);this.AttachNotificationHandler("g",function(o){var q=o.GetProperty("type");if(q==="MsgFCNotifyClient"){var p=o.GetProperty("ArgsArray");p=p.substr(p.indexOf("@"));var n=CCFMiscUtil_CreatePropSet();n.DecodeFromString(p);var q=n.GetType();if(q==="PSFlowChartUI"){m.call(this,n);this.SetProperty("drawFlowchart","full")}else{if(q==="PSFCGraphics"){g.call(this,n,true);this.SetProperty("drawFlowchart","canvas")}}}})};b.prototype.Setup=function(n){SiebelAppFacade.FlowchartPresentationModel.superclass.Setup.call(this,n)};function k(p,n){n.SetType("PSFCClientAction");n.SetProperty("action",p);var o=CCFMiscUtil_CreatePropSet();o.SetProperty("SWEMethod","MsgFCNotifyServer");o.SetProperty("SWEIPS",n.EncodeAsString());this.ExecuteMethod("InvokeMethod","MsgFCNotifyServer",o)}function l(p,s,r,o){if(s&&p){var q;switch(s){case 30:q="MoveDown1";if(r){q="MoveDown"}if(o){q="ExpandDown"}break;case 37:q="MoveLeft1";if(r){q="MoveLeft"}if(o){q="ExpandLeft"}break;case 38:q="MoveUp1";if(r){q="MoveUp"}if(o){q="ExpandUp"}break;case 39:q="MoveRight1";if(r){q="MoveRight"}if(o){q="ExpandRight"}break;case 46:q="delete";if(r){q="Delete"}break}if(q){var n=CCFMiscUtil_CreatePropSet();n.SetProperty("sel",p);k.call(this,q,n)}}}function e(p){var n;if(p&&p!=="canvas-content"){n=p}else{n=""}var q=this.Get("SelectedId");if(q!==n){this.SetProperty("SelectedId",n);var o=CCFMiscUtil_CreatePropSet();o.SetProperty("sel",n);k.call(this,"selChanged",o)}}function a(u,q,v,A,y,r,x,t){var o=CCFMiscUtil_CreatePropSet();if(A==="paletteitems"){if(v!=="0"){o.SetProperty("shpId",v);o.SetProperty("frId","");o.SetProperty("rect",u+" "+q+" "+(u+30)+" "+(q+30));o.SetProperty("sel","");k.call(this,"newGfc",o);return false}else{if(r){o.SetProperty("shpId","0");o.SetProperty("frId",r);o.SetProperty("rect",u+" "+q+" "+(u+40)+" "+q);o.SetProperty("sel","");k.call(this,"newGfc",o)}return false}}else{if(v.indexOf("to-end-")!==-1){var w;if(r){var s=x.split(" ");var p=s[0];var z=parseInt(s[1],10)+parseInt(s[3]/2,10);w=p+" "+z}else{w=u+" "+q}o.SetProperty("pt",w);o.SetProperty("ptPos","1");o.SetProperty("sel",y);k.call(this,"resize",o)}else{var n=t.split(":");o.SetProperty("pt",Math.round(u-n[1])+" "+Math.round(q-n[2]));o.SetProperty("sel",v);k.call(this,"move",o)}}}function i(q,o){var n="1Zoom|Connection_1Points|Sho1w_Grid|Snap_to_1Grid|1Print|Auto_1Size_Page|Set_Default_Si1ze";var p=this.Get("optionsMarkup");if(q===1){if(o){if(o==="100"||o==="110"){n+="|1Undo|1Redo|Add_1Point|1Remove_Point|Move_Text_1Back|Move_Text_1Forward|Move_Text_1Default|1Align|1Make_Same_Size"}else{n="";p=this.Get("shapeMarkupMap")[o]}}}else{if(q===0){n+="|1Edit|1Layout"}else{if(q>1){n+="|1Edit"}}}this.SetProperty("disabledMenuList",n);this.SetProperty("menuMarkup",p)}function h(q,p){var o={};for(var n in q){o[n]=q[n]}for(n in p){o[n]=p[n]}return o}function m(n){if(n.GetChildCount()>0){var o;if(o=n.GetChildByType("")){c.call(this,o)}if(o=n.GetChildByType("PSFCTemplate")){j.call(this,o)}if(o=n.GetChildByType("PSFCGraphics")){this.SetProperty("gfcObjectsMap",{});g.call(this,o,false)}if(o=n.GetChildByType("PSFCMenu")){d.call(this,o)}}}function g(A,n){var F=this.Get("gfcObjectsMap");var E={};var q=A.GetProperty("sel");if(q){E.Selected=q}var B=A.GetChildCount();for(var C=0;C<B;C++){var t=A.GetChild(C);if(t.GetType()==="PSFCGraphic"){var s=t.GetProperty("id");var z=t.GetProperty("action");if(z==="Deleted"){delete F[s];if(n){E[s]=t.propArray}continue}var v=t.GetProperty("shpId");var D=this.Get("shapePathMap");var o=D[v];if(!o){o="images/oui_fc_default.png"}var u=t.GetChildCount();for(var y=0;y<u;y++){var p=t.GetChild(y);if(p.GetType()==="PSFCGfcProps"){var r=h.call(this,h.call(this,t.propArray,p.propArray),{imgSrc:o});F[s]=r;if(n){E[s]=r}}}}}this.SetProperty("gfcObjectsMap",F);this.SetProperty("gfcDeltaMap",E)}function j(r){var n=[];var p=r.GetChildCount();for(var q=0;q<p;q++){var s=r.GetChild(q);if(s.GetType()==="PSFCTemplateShape"){var u=s.GetProperty("shpId");var t=s.GetProperty("txt");var v=this.Get("shapePathMap");var o=v[u];if(!o){o="images/oui_fc_default.png"}n.push('<div id="'+u+'"> <img src="'+o+'" width=40 height= 30>'+t+"</div>")}}this.SetProperty("paletteItems",n)}function d(x){var n;var B=x.GetChildCount();for(var z=0;z<B;z++){var C=x.GetChild(z);if((C.GetType())===""){if(z==0){n="<ul>"}var F=C.GetProperty("txt");if(F){var v=F.replace("&","");F=F.replace("&","1");F=F.replace(" ","_");F=F.replace(" ","_")}var q=C.GetProperty("cmd");if(!F&&(q==="SEPARATOR")){n+='<li data-caption="" class="siebui-appmenu-item siebui-appmenu-separator ui-menu-item" role="presentation"><a href="javascript:void(0)" class="ui-state-disabled ui-corner-all" role="menuitem"></a>'}else{if(q){n+='<li id="'+q+'" data-caption="'+v+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" tabindex="-1" role="menuitem" id="'+F+'">'+v+"</a>"}else{n+='<li data-caption="'+v+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" aria-haspopup="true" id="'+F+'" tabindex="-1" role="menuitem" > <span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'+v+"</a>"}}var o=C.GetChildCount();for(var D=0;D<o;D++){var I=C.GetChild(D);if((I.GetType())===""){if(D==0){n+='<ul class="siebui-fcMenu ui-menu ui-widget ui-widget-content ui-corner-all" role="menu" aria-expanded="false" aria-hidden="true" style="display: none;"'}var w=I.GetProperty("txt");if(w){var E=w.replace("&","");w=w.replace("&","1");
w=w.replace(" ","_");w=w.replace(" ","_")}var y=I.GetProperty("cmd");if(!w&&(y==="SEPARATOR")){n+='<li data-caption="" class="siebui-appmenu-item siebui-appmenu-separator ui-menu-item" role="presentation"><a href=\'javascript:void(0)\' class="ui-state-disabled ui-corner-all" role="menuitem"></a>'}else{if(y){n+='<li id="'+y+'" data-caption="'+E+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" tabindex="-1" role="menuitem" id="'+w+'">'+E+"</a>"}else{n+='<li data-caption="'+E+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" aria-haspopup="true" id="'+w+'" tabindex="-1" role="menuitem" > <span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'+E+"</a>"}}var H=I.GetChildCount();for(var A=0;A<H;A++){var s=I.GetChild(A);if((s.GetType())===""){if(A==0){n+='<ul class="siebui-fcMenu ui-menu ui-widget ui-widget-content ui-corner-all" role="menu" aria-expanded="false" aria-hidden="true" style="display: none;"'}var G=s.GetProperty("txt");if(G){var p=G.replace("&","");G=G.replace("&","1");G=G.replace(" ","_");G=G.replace(" ","_")}var r=s.GetProperty("cmd");if(!G&&(r==="SEPARATOR")){n+='<li data-caption="" class="siebui-appmenu-item siebui-appmenu-separator ui-menu-item" role="presentation"><a href=\'javascript:void(0)\' class="ui-state-disabled ui-corner-all" role="menuitem"></a>'}else{if(r){n+='<li id="'+r+'" data-caption="'+p+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" tabindex="-1" role="menuitem" id="'+G+'">'+p+"</a>"}else{n+='<li data-caption="'+p+'" class="siebui-appmenu-item ui-menu-item" role = "presentation"><a href="javascript:void(0)" class="ui-corner-all" aria-haspopup="true" id="'+G+'" tabindex="-1" role="menuitem" > <span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'+p+"</a>"}}n+="</li>";if(A==(H-1)){n+="</ul>"}}}n+="</li>";if(D==(o-1)){n+="</ul>"}}}n+="</li>";if(z==(B-1)){n+="</ul>"}}}this.SetProperty("optionsMarkup",n)}function c(n){var u={};var p={};u["0"]="images/oui_fc_connector.png";u["100"]="images/oui_fc_start.png";u["110"]="images/oui_fc_end.png";var r=n.GetChildCount();for(var o=0;o<r;o++){var q=n.GetChild(o);var v=f(q);var t=q.GetProperty("Shape Id");var s=q.GetProperty("File Name");if(t&&s){u[t]=s}if(t){p[t]=v}}this.SetProperty("shapePathMap",u);this.SetProperty("shapeMarkupMap",p)}function f(q){if(q){var u=q.GetChildCount();var r="";for(var p=0;p<u;p++){var o=q.GetChild(p);var t=o.GetProperty("cmd");var n=o.GetProperty("txt");n=n.replace("&","");var s=o.GetProperty("IsEnabled");if(t){if(s==="true"){r+='<li role="presentation" class="ui-menu-item" id ="'+t+'"><a role="menuitem" href="#">'+n+"</a></li>"}else{r+='<li role="presentation" class="ui-menu-item ui-state-disabled" id ="'+t+'"><a role="menuitem" href="#">'+n+"</a></li>"}}}return r}}return b}());return"SiebelAppFacade.FlowchartPresentationModel"})};