/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.GanttPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.GanttPresentationModel");define("siebel/ganttpmodel",["siebel/pmodel"],function(){SiebelAppFacade.GanttPresentationModel=(function(){var d=SiebelJS.Dependency("SiebelApp.Constants"),aK=d.get("SWE_GANTT_DAYINFO"),G=d.get("SWE_GANTT_DRILLDOWN_CLS"),n=d.get("SWE_GANTT_DYNAMIC"),aX=d.get("SWE_GANTT_STATIC"),aQ=d.get("SWE_GANTT_START_DATE"),W=d.get("SWE_GANTT_TIME_SCALE"),af=d.get("SWE_GANTT_STARTMILLIS"),aC=d.get("SWE_GANTT_COLOR"),w=d.get("SWE_GANTT_ACTIVITY_START_TIME"),a=d.get("SWE_GANTT_ACTIVITY_END_TIME"),m=d.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),N=d.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),l=d.get("SWE_GANTT_BOTTOMAXIS"),X=d.get("SWE_GANTT_NOOFHRS"),v=d.get("SWE_GANTT_ENDMILLIS"),P=d.get("SWE_PROP_BC_NOTI_GENERIC"),D=d.get("SWE_PST_CNTRL_LIST"),aO=d.get("SWE_PST_CUSTOM_CTRL"),Y=d.get("SWE_PROP_NOTI_TYPE"),aU=d.get("SWE_PROP_ARGS_ARRAY"),aD=d.get("SWE_GANTT_PREFERENCES"),e=d.get("SWE_GANTT_RESOURCE_PANE"),aT=d.get("SWE_GANTT_TIMESCALE_PANE"),aE=d.get("SWE_GANTT_UTILIZATION_PANE"),ax=d.get("SWE_GANTT_DRILLDOWN"),A=d.get("SWE_GANTT_DAY_HOUR"),f=d.get("SWE_GANTT_DAY_TWOHOUR"),O=d.get("SWE_GANTT_DAY_DAY_FOURHOUR"),T=d.get("SWE_GANTT_DAY_DAYPART"),S=d.get("SWE_GANTT_WEEK_DAY_DAYPART"),Q=d.get("SWE_GANTT_MONTH_DOW_DAYPART"),x=d.get("SWE_GANTT_WEEK_DAY"),aV=d.get("SWE_GANTT_MONTH_DAY"),j=d.get("SWE_GANTT_MONTH_DOW"),ap=d.get("SWE_GANTT_RESHEADER"),R=d.get("SWE_GANTT_RENDER_INFO"),u=d.get("SWE_GANTT_SPL_DATE"),al=d.get("SWE_GANTT_ICONINFO"),h=d.get("SWE_GANTT_DRILLDOWN_CLS"),V="Weekend Axis Color TS",F="Weekends",aF="TS COLOR",J="ICON_INFO",i="CurrentDate",c="NextDate",aA="PrevDate",L="TSUnints",aw="TNT Utility Service",am="Hour Axis Color",M="LIC Field",t="Booking Colors",C="EventDefaultColor",aR="Color Display By",a3="Status Abbreviations",aa={1:7,2:1,4:1,32:35,64:31,128:7,256:35,512:1,1024:1,2048:1,4096:1,8192:366,16384:366,32768:35},az={1:6,2:0,4:0,32:28,64:30,128:6,256:28,512:0,1024:0,2048:0,4096:0,8192:364,16384:364,32768:34},aq=SiebelApp.S_App.LocaleObject,at=aq.GetLocalString("IDS_TNT_PREV_DAY_TOOLTIP"),z=aq.GetLocalString("IDS_TNT_NEXT_DAY_TOOLTIP"),ag=aq.GetLocalString("IDS_TNT_PREV_WEEK_TOOLTIP"),aH=aq.GetLocalString("IDS_TNT_NEXT_WEEK_TOOLTIP"),ae=aq.GetLocalString("IDS_CALENDAR_PREVIOUS_MONTH_STRING"),aj=aq.GetLocalString("IDS_CALENDAR_NEXT_MONTH_STRING"),g="MMMM D, YYYY",a2="MM/dd/yyyy",U="MM/DD/YYYY",a0="Splitter Position",aN="Column Width",H=SiebelApp.S_App.GetService("Gantt UI Service");function aZ(){SiebelAppFacade.GanttPresentationModel.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(aZ,SiebelAppFacade.PresentationModel);aZ.prototype.Init=function(){SiebelAppFacade.GanttPresentationModel.superclass.Init.call(this);this.AddProperty("CustCtlrName","");this.AddProperty("RevertInfo","");this.AddProperty("TSDDInfo","");this.AddProperty("ResSeq","");this.AddProperty("ResEvents","");this.AddProperty("IsRefreshNeeded",false);this.AddProperty("RevertBooking",false);this.AddProperty("DisableExtendShrinkTS","");this.AddProperty("Round Minutes Events",15);this.AddProperty("fx","");this.AddProperty("RESOURCEHEADER","");this.AddProperty("Activity_DDInfo","");this.AddProperty("DDrag","");this.AddProperty("DRSZ","");this.AddProperty(w,"");this.AddProperty(a,"");this.AddProperty(m,"");this.AddProperty(N,"");this.AddProperty(aQ,"");this.AddProperty(aK,"");this.AddProperty(l,"");this.AddProperty(W,"");this.AddProperty(X,"");this.AddProperty(af,"");this.AddProperty(v,"");this.AddProperty(R,"");this.AddProperty("tooltipMap","");this.AddProperty(u,"");this.AddProperty(J,"");this.AddProperty("Newpages",false);this.AddProperty("RecordSet","");this.AddProperty("ResIDtoIndex",{});this.AddProperty("InEvent","");this.AddProperty(C,"");this.AddProperty("RTL Mode","");this.AddProperty("SERVICE_NAME","");this.AddProperty("TotalHPages","");this.AddProperty("VScrollPos",0);this.AddProperty("Scale_factor",1);this.AddProperty("FilterGantt_CLS","");this.AddProperty("MinGanttsize","");this.AddProperty("PanesToRefresh",0);this.AddProperty("RevertDate","");this.AddProperty("Resource Id","");this.AddProperty(a0,"");this.AddProperty(aN,"");this.AddProperty("EnableTooltip","");this.AddProperty("ShowLegend",true);this.AddProperty("TurnTime","");this.AddProperty("expcolpse",true);this.AddProperty("datePaddingMap","");this.AddProperty("IsTotalHPagesChanged","Y");this.AddMethod("getEvent",ar);this.AddMethod("gettaskSeqEvents",E);this.AddMethod("gettimescaleDDcls",aL);this.AddMethod("prepareResInfo",K);this.AddMethod("prepareResStaticInfo",aW);this.AddMethod("prepareGanttInfo",r);this.AddMethod("prepareTimeScaleInfo",aG);this.AddMethod("prepareGridInfo",o);this.AddMethod("prepareEventInfo",au);this.AddMethod("RefreshGanttChart",y);this.AddMethod("InvokeServer",ad);this.AddMethod("CustomDrillDown",Z);this.AddMethod("setHoursFrom",q);this.AddMethod("setDefaults",ay);this.AddMethod("InvokeOperation",aB);this.AddMethod("CanExtendShrinkEvents",aP);this.AddMethod("getTooltip",aY);this.AddMethod("prepareRespage",av);this.AddMethod("getTimeScaleUnits",a1);this.AddMethod("getTimeScalePeriods",B);this.AddMethod("getDateRange",ac);this.AddMethod("prepareLegendMap",aS);this.AddMethod("CanInvokeMethod",b,{sequence:true,scope:this});this.AddMethod("InvokeMethod",ab,{sequence:true,scope:this});this.AddMethod("saveUserPref",an);this.AddMethod("saveControlValues",ah);this.AttachNotificationHandler(P,aJ)};aZ.prototype.Setup=function(a6){SiebelAppFacade.GanttPresentationModel.superclass.Setup.call(this,a6);var bb=a6.EnumChildren(true),a8,a7=a6.GetChildByType("apm"),a4=a6.GetChildByType(D);if(a7){aM.call(this,a7);if(this.Get("Date Padding for TimeScale LIC")){var ba=this.Get("Date Padding for TimeScale LIC"),a5={};ba=ba.replace(/;/g,":");ba=ba.split(":");for(var a9=0;a9<ba.length;a9++){a5[ba[a9]]=ba[++a9]}this.SetProperty("datePaddingMap",a5)}}if(a4){a8=a4.EnumChildren(true);do{if(a8.GetType()===aO){this.SetProperty("PanesToRefresh",63);this.ExecuteMethod("prepareGanttInfo",a8.GetChild(0));break}a8=a4.EnumChildren(false)}while(a8)}};function aP(){var a4=":"+this.Get(W)+":",a5=String(this.Get("DisableExtendShrinkTS"));return(a5.indexOf(a4)===-1)}function Z(a4){this.ExecuteMethod("InvokeMethod","DoInvokeDrilldown",a4)}function aB(a4){this.ExecuteMethod("InvokeMethod","InvokeOperation",a4)}function aL(){if(this.Get("TSDDInfo")){return G}else{return}}function E(a5){var a4=this.Get("ResEvents");if(a4&&a4[a5]&&a4[a5].BOOKINGS){return a4[a5].BOOKINGS}else{return}}function ar(a5,a6){var a4=this.Get("ResEvents");if(a4&&a4[a5]&&a4[a5].EVENTS){return a4[a5].EVENTS[a6]}else{return}}function aJ(a5){var a4,a6=[],bd=0,ba,bc,a8=[],bb=0;if(a5.GetProperty(Y)==="Gantt"){a4=a5.GetProperty(aU);if(a4){CCFMiscUtil_StringToArray(a4,a6)}ba=CCFMiscUtil_CreatePropSet();bd=a6.length;for(var a9=0;a9<bd;a9++){ba.SetProperty(a9.toString(),a6[a9])}bc=CCFMiscUtil_CreatePropSet();bc.DecodeFromString(ba.GetProperty("0"));this.ExecuteMethod("prepareGanttInfo",bc);
bb=this.Get("PanesToRefresh");if(!(bb&(1<<2))&&((bb&(1<<3))||(bb&(1<<4)))){this.SetProperty("IsRefreshNeeded",true)}}else{if(a5.GetProperty(Y)==="ClosePopup"){this.SetProperty("RevertBooking",true)}else{if(a5.GetProperty(d.get("SWE_PROP_NOTI_TYPE"))==="EI"){a4=a5.GetProperty(d.get("SWE_PROP_ARGS_ARRAY"));if(a4){CCFMiscUtil_StringToArray(a4,a6)}ba=CCFMiscUtil_CreatePropSet();for(var a7=0;a7<a6.length;a7++){ba.SetProperty(a7.toString(),a6[a7])}bc=CCFMiscUtil_CreatePropSet();bc.DecodeFromString(ba.GetProperty("0"));this.ExecuteMethod("prepareEventInfo",bc);this.SetProperty("Newpages",true)}else{if(a5.GetProperty(Y)==="RevertBooking"){this.SetProperty("RevertBooking",true)}}}}}function y(a5,a9,a7){var a8=this.Get(aQ),a6=this.Get("TST"),ba=SiebelApp.S_App.NewPropertySet(),a4=0;a4=a4|(1<<1);a4=a4|(1<<2);a4=a4|(1<<3);a4=a4|(1<<4);this.SetProperty("PanesToRefresh",a4);ba.SetProperty("PanesToRefresh",a4);if((a8!==a5)||(a9&&a6!==a9)){if(typeof(a5)!=="undefined"){if(a5!==0){this.SetProperty(aQ,a5)}ba.SetProperty(aQ,a5)}if(a9){this.SetProperty("TST",a9)}this.ExecuteMethod("InvokeMethod","RefreshGantt",ba,a7)}}function aS(){var a4=this.Get("Booking Colors"),ba=this.Get("Color Display By"),a6=this.Get("Status Abbreviations"),a5,a8,a9={};if(a6){a5=a6.substring(a6.indexOf(ba)+ba.length+1,a6.indexOf(";",a6.indexOf(ba)))}a5=a5+"_";for(var a7 in a4){if(a7.indexOf(a5)===0){a8=a7.substring(a5.length,a7.length);a9[a8]=a4[a7]}}return a9}function ad(a6){var a5=CCFMiscUtil_CreatePropSet(),a4=0;a5.SetProperty(aQ,this.Get(aQ));a4=this.Get("PanesToRefresh");a5.SetProperty("PanesToRefresh",a4);this.ExecuteMethod("InvokeMethod","RefreshGantt",a5)}function r(a9){var a4,bc,a5={},bb="DDrag",a8=this.Get("datePaddingMap"),a6=0,a7="DRSZ";this.SetProperty("RecordSet",this.Get("GetRawRecordSet"));this.SetProperty("CustCtlrName",a9.GetValue());this.SetProperty("RTL Mode",a9.GetProperty("RTL Mode"));this.SetProperty("SERVICE_NAME",a9.GetProperty("Gantt Service Name"));if(a9.GetProperty("SD")){this.SetProperty("SD",a9.GetProperty("SD"))}this.SetProperty("ResEvents",{});if(a9&&a9 instanceof JSSPropertySet){a4=a9.GetChildCount();for(var ba=0;ba<a4;ba++){bc=a9.GetChild(ba);switch(bc.GetType()){case (aD):case ("DisplayControls"):aM.call(this,bc);if(a8[this.Get(W)]){a6=a8[this.Get(W)]}this.SetProperty("TotalHPages",1+(a6*2));break;case (e):this.ExecuteMethod("prepareResInfo",bc);break;case (aT):this.ExecuteMethod("prepareTimeScaleInfo",bc);break;case (aE):this.ExecuteMethod("prepareGridInfo",bc);break;case ("Custom Controls"):this.SetProperty("DateBarControl",bc.GetProperty("DateBar Control Name"));this.SetProperty("LegendControl",bc.GetProperty("Legend Control Name"));break}}a5[J]=this.Get(J);a5.TotalHPages=this.Get("TotalHPages");this.SetProperty(R,a5)}}function aG(ba){var bd,be,a5,bc,a7,a6,a8,a9=this.Get("TotalHPages"),bb=false;if(ba&&ba instanceof JSSPropertySet){a5=ba.GetChildCount();for(a7=0;a7<a5;a7=a7+1){bd=ba.GetChild(a7);if(bd.GetType()==aX){a8=bd.EnumProperties(true);if(a8){do{this.SetProperty(a8,bd.GetProperty(a8));a8=bd.EnumProperties(false)}while(a8)}bc=bd.GetChildCount();for(a6=bc-1;a6>=0;a6=a6-1){be=bd.GetChild(a6);switch(be.GetType()){case (ax):this.SetProperty("TSDDInfo",ak(be));break;case (aK):this.SetProperty(aK,I(be));break;case (aC):this.SetProperty(aF,ak(be));break;case (al):this.SetProperty(J,ak(be,this.Get(J)));break;case (am):var a4=ak(be);this.SetProperty(am,p(a4));break}}}else{if(bd.GetType()==n){a8=bd.EnumProperties(true);if(a8){do{this.SetProperty(a8,bd.GetProperty(a8));a8=bd.EnumProperties(false)}while(a8)}this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(a9/2,10),a9);bc=bd.GetChildCount();for(a6=bc-1;a6>=0;a6=a6-1){be=bd.GetChild(a6);if(be.GetType()==l){this.SetProperty(l,s(be))}else{if(be.GetType()==u){this.SetProperty(u,ai.call(this,be))}}}bb=true}}if(!bb){this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(a9/2,10),a9)}}}}function ay(){var a4;a4=this.Get(W);if(!a4){a4="4";this.SetProperty(W,a4)}this.SetProperty(X,ao(a4))}aZ.prototype.createPeriod=function(ba,a9){var a4,a7,bf,a6,a8,bc,bb=3600000,bd=24,a5=this.ExecuteMethod("getTimeScaleUnits"),bg=this.Get(aK),be="";a4=new Date(this.Get(aQ));if(!a4||!a4 instanceof Date){a4=new Date()}if(this.Get(m)){a8=String(this.Get(m))}else{a8=7}if(this.Get(N)){bc=String(this.Get(N))}else{bc=a4.format("EEEE")}this.SetProperty("EndTime","");this.SetProperty("FinalWeekDays",aI(a4,bc,a8,be));switch(Number(this.Get(W))){case (A):case (f):case (O):a4.setDate(a4.getDate()+(ba*a5));a4.setHours(0,0,0,0);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-1);a7.setHours(23,59,59,999);break;case (T):a4.setDate(a4.getDate()+(ba*a5));a6=bg[0];this.ExecuteMethod("setHoursFrom",a4,a6.ST);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5));break;case (S):a4.setDate(a4.getDate()+(ba*a5));a6=bg[0];this.ExecuteMethod("setHoursFrom",a4,a6.ST);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-1);break;case (Q):a4.setDate(a4.getDate()+(ba*a5));a6=bg[0];this.ExecuteMethod("setHoursFrom",a4,a6.ST);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-7);this.SetProperty("StartTime","0");this.SetProperty("EndTime",24*bb-1);this.SetProperty("TDays",7*24*bb);this.SetProperty("AxisDuration",24*bb-1);break;case (x):a4.setDate(a4.getDate()+(ba*a5));a4.setHours(0,0,0,0);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-1);a7.setHours(23,59,59,999);break;case (aV):a4.setDate(a4.getDate()+(ba*a5));a4.setHours(0,0,0,0);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-1);a7.setHours(23,59,59,999);break;case (j):a4.setDate(a4.getDate()+(ba*a5));a4.setHours(0,0,0,0);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-7);a7.setHours(23,59,59,999);break;default:a4.setDate(a4.getDate()+(ba*a5));a4.setHours(0,0,0,0);a7=new Date(a4.getTime());a7.setDate(a4.getDate()+(a9*a5)-1);a7.setHours(23,59,59,999);break}this.SetProperty(af,a4.getTime());this.SetProperty(v,a7.getTime());this.SetProperty(m,a8);if(this.Get("EndTime")||this.Get("TST")==="256"){this.calcDayLeft()}};function q(a9,a5){var a8=0,a6,a7=0,a4=a5.length;a9.setHours(0,0,0,0);for(a6=0;a6<a4;a6++){if(a5.charAt(a6)!=":"){a7=(a7*10)+Number(a5.charAt(a6))}else{if(a8===0){a9.setHours(a7)}else{if(a8==1){a9.setMinutes(a7)}else{a9.setSeconds(a7);break}}a7=0;a8=a8+1}}}function aI(bb,a6,a9,a5){var a4=86400000,a7,a8;var ba=new Date();for(a7=1;a7<8;a7++){if(ba.format("EEEE")===a6){bb=ba;break}ba=new Date((bb.getTime())+a4*a7)}a5=bb.getDay()+",";for(a7=1;a7<a9;a7++){a8=new Date((bb.getTime())+a4*a7);a5+=a8.getDay()+","}return a5}function ao(a4){switch(Number(a4)){case (A):case (aV):return 1;case (f):return 2;case (O):return 4;case (j):return 7;default:return 1}}function K(a6){var a7,a4=0;if(a6&&a6 instanceof JSSPropertySet){a4=a6.GetChildCount();for(var a5=0;a5<a4;a5++){a7=a6.GetChild(a5);if(a7.GetType()==aX){this.ExecuteMethod("prepareResStaticInfo",a7)}}}}function aW(a7){var a6,a5=0;if(a7&&a7 instanceof JSSPropertySet){a5=a7.GetChildCount();aM.call(this,a7);for(var a4=0;
a4<a5;a4++){a6=a7.GetChild(a4);switch(a6.GetType()){case (ap):this.SetProperty("RESOURCEHEADER",I(a6));break;case (al):this.SetProperty(J,ak(a6,this.Get(J)));break}}}}function o(a6){var ba,a8,a9,bb,a4;if(a6&&a6 instanceof JSSPropertySet){a9=a6.GetChildCount();for(var a7=0;a7<a9;a7++){ba=a6.GetChild(a7);if(ba.GetType()==aX){bb=ba.GetChildCount();for(var a5=0;a5<bb;a5++){a8=ba.GetChild(a5);switch(a8.GetType()){case ax:this.SetProperty("Activity_DDInfo",ak(a8));break;case al:this.SetProperty(J,ak(a8,this.Get(J)));break;case"Color":this.SetProperty(t,ak(a8));if(!this.Get(aR)){this.SetProperty(aR,this.Get(t)["Event Status"])}break;case M:this.SetProperty(M,ak(a8));break}}a4=ba.GetProperty("Disable ExtendShrink Views");if(a4){this.SetProperty("DisableExtendShrinkTS",":"+a4+":")}a4="";a4=ba.GetProperty("Round Minutes Events");if(a4){this.SetProperty("Round Minutes Events",a4)}a4="";a4=ba.GetProperty(a3);if(a4){this.SetProperty(a3,a4)}a4="";a4=ba.GetProperty("Event Default Color");if(a4){this.SetProperty(C,a4)}}else{if(ba.GetType()==n){this.ExecuteMethod("prepareEventInfo",ba)}}}}}function au(a5){var a4="",a7=0,a9,ba,a6=this.Get("ResEvents");if(a5){aM.call(this,a5);a7=a5.GetChildCount();for(var a8=0;a8<a7;a8++){a9=[];ba=a5.GetChild(a8);a4=ba.GetType();a6[a4]={};a6[a4].EVENTS=k(ba,a9);a6[a4].BOOKINGS=a9}}}function k(ba,a9){var a6,a5={},a4,a8,a7=ba.GetChildCount();for(a6=0;a6<a7;a6++){a8=ba.GetChild(a6);a4=a8.GetProperty("ID");a5[a4]=ak(a8);a9[a6]=a4}return a5}function I(a7){var a5,a4=[],a6=a7.GetChildCount();for(a5=0;a5<a6;a5++){a4[a5]=ak(a7.GetChild(a5))}return a4}function ak(a6,a7){var a4,a5={};if(a7){a5=a7}if(a6){a4=a6.EnumProperties(true);do{if(a4){if(!a5){a5={}}a5[a4]=a6.GetProperty(a4)}a4=a6.EnumProperties(false)}while(a4)}return a5}function aM(a5){var a4=a5.EnumProperties(true);if(a4){do{this.SetProperty(a4,a5.GetProperty(a4));a4=a5.EnumProperties(false)}while(a4)}}function s(a8){var a5,ba={},a9,a4,a6=a8.GetChildCount(),a7;for(a5=0;a5<a6;a5++){a4=a8.GetChild(a5);a9=a4.GetType();if(!a9){break}a7=new Date(a9).format("MM/dd/yyyy");ba[a7]=ak(a4)}return ba}aZ.prototype.calcDayLeft=function(){var bb=new Date(this.Get(af)),a4=new Date(this.Get(v)),a7,a9=this.Get("TDays"),a6=0,a5={},a8=this.Get("TST"),ba=this.ExecuteMethod("getTimeScaleUnits");a7=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);if(a8==="256"){if(ba){a7=a7/ba*7}}while(bb.getTime()<=a4.getTime()){a5[(bb).format("MM/dd/yyyy")]=a6;a6=a6+a7;bb.setTime(bb.getTime()+a9)}this.SetProperty("DayLoc",a5);this.SetProperty("PixelsPerUnit",a7);if(this.Get("EndTime")-this.Get("StartTime")>0){this.SetProperty("miniFX",a7/(this.Get("EndTime")-this.Get("StartTime")))}};aZ.prototype.calcLeftWidth=function(bi,a4){var a9,bc,bg,bj,bf,be=new Object(),a6=this.Get("StartTime"),ba=this.Get("EndTime"),a8=this.Get("PixelsPerUnit"),a5=this.Get("AxisDuration"),a7=new Date(this.Get(af)),bb=this.Get("DayLoc"),bd=60000,bh=this.Get("TST");if(bh==="256"){if(typeof bb[(bi).format("MM/dd/yyyy")]==="undefined"){bi.setDate(bi.getDate()+((a7.getDay()-bi.getDay()+7)%7));bi.setHours(0,0,0,0)}if(typeof bb[(a4).format("MM/dd/yyyy")]==="undefined"){a4.setDate(a4.getDate()+((a7.getDay()-a4.getDay()+7)%7));a4.setHours(0,0,0,0)}}be.Left=bb[(bi).format("MM/dd/yyyy")];bj=bb[(a4).format("MM/dd/yyyy")];a9=(bi.getHours()*60+bi.getMinutes())*bd;bc=(a4.getHours()*60+a4.getMinutes())*bd;if(a9>=a6&&a9<=ba){be.Left=be.Left+(a9-a6)*this.Get("miniFX")}else{if(a9>ba){be.Left=be.Left+a8}}if(bc>=a6&&bc<=ba){bj=bj+(bc-a6)*this.Get("miniFX")}else{if(bc>ba){bj=bj+a8}}be.Width=bj-be.Left;be.Left=be.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");be.Width=be.Width*100*this.Get("TotalHPages")*this.Get("Scale_factor");be.Left=isNaN(be.Left)?0:be.Left;be.Width=isNaN(be.Width)?0:be.Width;return be};function aY(a6){if(this.Get("EnableTooltip")==="Y"){if(H){var a4=null;var a5={};a5.async=false;a5.selfbusy=true;a5.scope=this;a5.cb=function(){a4=arguments[2];if(a4){this.SetProperty("tooltipMap",a4.GetChildByType("ResultSet"))}};H.InvokeMethod(("GetTooltipInfo"),a6,a5)}}}function ai(bi){var a9,bg={},bc,be,a4,a6,bj,bd,a8,bh,bf,ba=this.Get(af),a5=this.Get(v),bb=bi.GetChildCount();for(a9=0;a9<bb;a9++){var a7=false;bj=bi.GetChild(a9);a4=bj.GetProperty("SD");if(!a4){break}else{bh=new Date(a4);bh.setHours(0,0,0,0);bf=bh}a6=bj.GetProperty("ED");if(!a6){a7=true}else{bf=new Date(a6);bf.setHours(0,0,0,0)}bd=new Date(ba);bd.setHours(0,0,0,0);a8=new Date(a5);a8.setHours(0,0,0,0);while(bd.getTime()<=a8.getTime()){if((!a7&&bd.getTime()>=bh.getTime()&&bd.getTime()<=bf.getTime())){be={};if(bg[bd.format("MM/dd/yyyy")]){be=bg[bd.format("MM/dd/yyyy")];bc=bj.EnumProperties(true);if(bc){do{if(bc!=="SD"&&bc!="ED"&&bj.GetProperty(bc)){be[bj.GetProperty(bc)]=""}bc=bj.EnumProperties(false)}while(bc)}}else{bc=bj.EnumProperties(true);if(bc){do{if(bc!="SD"&&bc!="ED"){be[bj.GetProperty(bc)]=""}bc=bj.EnumProperties(false)}while(bc);bg[bd.format("MM/dd/yyyy")]=be}}}bd=new Date(bd);bd.setDate(bd.getDate()+1)}}return bg}function av(bf,bg){var a4=this.Get("RecordSet"),a8=this.Get("ResIDtoIndex"),bh=a4.length,a9=this.Get("RJoinFld"),a6=this.Get("RParentFld"),bd="",a7=0,bj="",bi=this.Get(R)[J],be=0,bc=this.Get("RColorFld"),a5="";if(!a4){return}if(!a8){return}if(this.Get("RESOURCEHEADER")[0]&&this.Get("RESOURCEHEADER")[0]["ICONFLDS"]){bd=this.Get("RESOURCEHEADER")[0]["ICONFLDS"].split(",");a7=bd.length}for(var bb=bf;bb<bg&&bb<bh;bb=bb+1){a8[a4[bb][a9]]=bb;if(a4[bb]["Outline Number"]){a5=a4[bb]["Outline Number"].match(/./g);if(a5){a4[bb].LEVEL=a5.length-1}}if(a4[bb]["Has Children"]){if(a4[bb].LEVEL===0&&a4[bb]["Has Children"]==="1"){a4[bb].CLS="siebui-expcoll ui-icon ui-icon-triangle-1-se"}else{if(a4[bb].LEVEL!==0){a4[bb].CLS="siebui-expnone ui-icon ui-icon-radio-off"}}}else{a4[bb].CLS="siebui-noIcon"}a4[bb]["Index"]=bb;for(var ba=0;ba<a7;ba++){if(a4[bb][bd[ba]]==="Y"){if(bi&&bi[bd[ba]]){bj=bj+"<span><span class='"+bi[bd[ba]]+"'></span></span>"}be=be+1}}if(a4[bb].LEVEL>=be){a4[bb].LEVEL=a4[bb].LEVEL-be}a4[bb]["Icons"]=bj;bj="";be=0;a4[bb].STCLS="";if(a4[bb][bc]){a4[bb].STCLS=" siebui-"+a4[bb][bc]}}this.SetProperty("RecordSet",a4);this.SetProperty("ResIDtoIndex",a8)}aZ.prototype.prepareUtillpage=function(bb,bx){var bw=this.Get("ResEvents"),bt=this.Get(af),bd=this.Get("fx"),bh=this.Get("RecordSet"),bg=0,a7=this.Get("RJoinFld"),bm=this.Get("RParentFld"),bu=this.Get(v),a5="ST",bq,bl;ETF="ET";bg=bh?bh.length:0;if(this.Get("TurnTime")==="Y"){a5="AST";ETF="AET"}for(var bs=bb;bs<bx;bs=bs+1){if(bw[bh[bs][a7]]){bh[bs].EVENTS=bw[bh[bs][a7]].EVENTS;bh[bs].BOOKINGS=bw[bh[bs][a7]].BOOKINGS;var bc="",bj=0,bv="",bo=20,bn=0;if(bh[bs].BOOKINGS){var a9=bh[bs].BOOKINGS.length,bk=0,bi=0,a6=0;for(var br=0;br<a9;br=br+1){bv=bh[bs].EVENTS[bh[bs].BOOKINGS[br]];var bf=new Date(bv[a5]);var be=new Date(bv[ETF]);if(bu<bf.getTime()){continue}if(bu<be.getTime()){be=new Date(bu)}if(bv.OLPCNT&&bc!==""&&bc.loco){bj=0}if(bv.OLPCNT){bj++;bi=(bo/bv.OLPCNT);a6=bi;if(bj==1){bk=bn}else{if(bv.OTE){}else{bk=bk+bi}}}else{bj=0;bk=bn;a6=bo}bq=0;bl=null;
if(this.Get("EndTime")||this.Get("TST")=="256"){bl=this.calcLeftWidth(bf,be);bq=1}bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["left"]=bq?bl.Left:((bf.getTime()-bt)*100*this.Get("TotalHPages"))/(bu-bt)*this.Get("Scale_factor");bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["width"]=bq?bl.Width:((be-bf)/(bu-bt))*100*this.Get("TotalHPages")*this.Get("Scale_factor");bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["top"]=bk;bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["height"]=a6;if(this.Get("TurnTime")==="Y"&&bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["STTF"]==="Y"){var ba=new Date(bv.ST);if(ba.getTime()!==bf.getTime()){bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["SW"]=((ba.getTime()-bf.getTime())/(be-bf))*100}var a4=new Date(bv.ET);if(a4.getTime()!==be.getTime()){bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["TW"]=((be.getTime()-a4.getTime())/(be-bf))*100}}var a8="";var by=((this.Get("DDrag")!="Y")&&(bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["DRG"]==="Y"));var bp=((this.Get("DRSZ")!="Y")&&(bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["RSZ"]?bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["RSZ"]==="Y":bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["DRG"]==="Y"));if(by){a8=a8+" Dragpble"}if(bp){a8=a8+" Rsizable"}if(bv.OLPCNT&&bv.OLPCNT==="2"){a8=a8+" siebui-overlapEvent"}if(bv.BT&&bv.BT==="Backup"){a8=a8+" siebui-backupEvent"}bh[bs].EVENTS[bh[bs].BOOKINGS[br]]["CLS"]=a8;bc=bv}}}else{bh[bs].EVENTS={};bh[bs].BOOKINGS={}}}this.SetProperty("RecordSet",bh)};function p(a5){var a4={},a6,bd,a9,a7,bb,bc,a8,ba;for(ba in a5){if(a5.hasOwnProperty(ba)){a8=ba.indexOf("-");if(a8==-1){continue}bb=Number(ba.substring(0,a8));bc=Number(ba.substring(a8+1,ba.length));while(bb<bc){a4[bb]=a5[ba];bb=bb+1}}}return a4}function a1(){return aa[this.Get(W)]}function B(){return az[this.Get(W)]}function ac(a4){var a8,a6=this.ExecuteMethod("getTimeScalePeriods"),a5,a7;if(a4===""){a4=this.Get(aQ)}a8=aq.GetStringFromDateTime(a4,U,g);if(a6>0){a7=new Date(a4);a7.setDate(a7.getDate()+a6);a5=aq.GetStringFromDateTime(a7.format(a2),U,g);return(a8+" - "+a5)}else{return a8}}function ab(a6,a8,a7,a5){var a4=0;if(a6==="FilterGantt"||a6==="ReSetFilterGantt"){a4=a4|(1<<1);a4=a4|(1<<2);a4=a4|(1<<4);this.SetProperty("PanesToRefresh",a4);a8.SetProperty("PanesToRefresh",a4);a5.CancelOperation=false}else{if(a6==="RefreshGantt"){a4=this.Get("PanesToRefresh");a8.SetProperty("PanesToRefresh",a4);a8.SetProperty("TST",this.Get("TST"));a5.CancelOperation=false}else{if(a6==="Show Legends"){this.SetProperty("ShowLegend",true);a5.CancelOperation=true}else{if(a6==="Hide Legends"){this.SetProperty("ShowLegend",false);a5.CancelOperation=true}else{if(a6==="ExpandAll"){this.SetProperty("expcolpse",true);a5.CancelOperation=true}else{if(a6==="CollapseAll"){this.SetProperty("expcolpse",false);a5.CancelOperation=true}else{if(a6==="FilterDisplayOptions"||a6==="ResetDisplayOptions"){if(a6==="ResetDisplayOptions"){a4=a4|(1<<0);this.SetProperty(aR,"");this.SetProperty("Redraw Legends","Y")}a4=a4|(1<<1);a4=a4|(1<<2);a4=a4|(1<<4);this.SetProperty("PanesToRefresh",a4);a8.SetProperty("PanesToRefresh",a4);a5.CancelOperation=false}else{a5.CancelOperation=false}}}}}}}}function b(a5,a4){if(a5==="Show Legends"){a4.CancelOperation=true;a4.ReturnValue=!this.Get("ShowLegend")}else{if(a5==="Hide Legends"){a4.CancelOperation=true;a4.ReturnValue=this.Get("ShowLegend")}else{a4.CancelOperation=false}}}function an(a6){var a5=SiebelApp.S_App.GetService(this.Get("SERVICE_NAME"));if(a5){var a4={};a4.async=false;a4.npr=true;a4.selfbusy=true;a4.scope=this;a4.cb=function(){};a5.InvokeMethod("SaveGanttUserPref",a6,a4)}}function ah(a4){this.ExecuteMethod("InvokeMethod","SaveControlValues",a4)}return aZ}());return"SiebelAppFacade.GanttPresentationModel"})};