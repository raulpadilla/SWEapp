if(typeof(SiebelApp.OfflineUtils)==="undefined"){SiebelJS.Namespace("SiebelApp.OfflineUtils");SiebelApp.OfflineUtils=(function(){var c=SiebelAppFacade.FacadeConstants;var a=SiebelApp.OfflineCacheConfig;var b=new d();function d(){var e;f=function f(){return e};f.prototype=this;e=new f();e.constructor=f;return e}d.prototype.RefreshPage=function(){window.location.reload()};d.prototype.GetBrowserStorage=function(g){var i=c.get("WEB_DB");var f=c.get("LOCAL_STORAGE");var h=c.get("INDEX_DB");var e;switch(g){case i:if(window.openDatabase){e=SiebelApp.WebDB}break;case f:e=SiebelApp.BrowserLocalStorage;break;default:if(window.openDatabase){e=SiebelApp.WebDB}else{e=SiebelApp.BrowserLocalStorage}break}return e};d.prototype.GetOfflineCacheConfig=function(h){var f={};switch(h){case a.get("PRO_METADATASTORE_DB"):f.dbName=a.get("PRO_METADATASTORE_DB");f.version=a.get("PRO_METADATASTORE_DB_VERSION");f.displayName=a.get("PRO_METADATASTORE_DB_DISP_NAME");f.maxSize=a.get("PRO_METADATASTORE_DB_MAXSIZE");f.tables=[a.get("PRO_METADATASTORE_DB_TBL"),a.get("PRO_DB_PICKAPPLET_INFO_TBL"),a.get("PRO_DB_PICKFLD_MAP_TBL")];f.columns={};var l=a.get("PRO_METADATASTORE_DB_TBL_COLS");var e="";f.columns[a.get("PRO_METADATASTORE_DB_TBL")]=[];for(e in l){f.columns[a.get("PRO_METADATASTORE_DB_TBL")].push(l[e])}l=a.get("PRO_DB_PICKAPPLET_INFO_TBL_COLS");f.columns[a.get("PRO_DB_PICKAPPLET_INFO_TBL")]=[];for(e in l){f.columns[a.get("PRO_DB_PICKAPPLET_INFO_TBL")].push(l[e])}l=a.get("PRO_DB_PICKFLD_MAP_TBL_COLS");f.columns[a.get("PRO_DB_PICKFLD_MAP_TBL")]=[];for(e in l){f.columns[a.get("PRO_DB_PICKFLD_MAP_TBL")].push(l[e])}break;case a.get("PRO_DATASTORE_DB"):f.dbName=a.get("PRO_DATASTORE_DB");f.version=a.get("PRO_DATASTORE_DB_VERSION");f.displayName=a.get("PRO_DATASTORE_DB_DISP_NAME");f.maxSize=a.get("PRO_DATASTORE_DB_MAXSIZE");break;case a.get("PRO_SYNCQUEUE_DB"):f.dbName=a.get("PRO_SYNCQUEUE_DB");f.version=a.get("PRO_SYNCQUEUE_DB_VERSION");f.displayName=a.get("PRO_SYNCQUEUE_DB_DISP_NAME");f.maxSize=a.get("PRO_SYNCQUEUE_DB_MAXSIZE");f.tables=[a.get("PRO_SYNCQUEUE_DB_TBL")];f.columns={};var k=a.get("PRO_SYNCQUEUE_DB_TBL_COLS");f.columns[a.get("PRO_SYNCQUEUE_DB_TBL")]=[];for(var g in k){f.columns[a.get("PRO_SYNCQUEUE_DB_TBL")].push(k[g])}break;default:f.dbName=a.get("OFFLINE_CACHE_DB_NAME");f.version=a.get("OFFLINE_CACHE_DB_VERSION");f.displayName=a.get("OFFLINE_CACHE_DB_DISP_NAME");f.maxSize=a.get("OFFLINE_CACHE_DB_MAXSIZE");f.tables=[a.get("REACTIVE_CACHE_TBL"),a.get("PRO_SYNCQUEUE_DB_TBL")];f.columns={};var m=a.get("REACTIVE_CACHE_TBL_COLS");f.columns[a.get("REACTIVE_CACHE_TBL")]=[];for(var i in m){f.columns[a.get("REACTIVE_CACHE_TBL")].push(m[i])}var j=a.get("PRO_SYNCQUEUE_DB_TBL_COLS");f.columns[a.get("PRO_SYNCQUEUE_DB_TBL")]=[];for(var n in j){f.columns[a.get("PRO_SYNCQUEUE_DB_TBL")].push(j[n])}}return f};d.prototype.IsValidServerResponse=function(f){var e=f.indexOf("<!DOCTYPE");if(e===0){return false}else{return true}};d.prototype.RemoveNonAlphaChars=function(e){e=e.replace(/ /g,"");e=e.replace(/#/g,"");e=e.replace(/\//g,"");e=e.replace(/-/g,"");e=e.replace(/\./g,"");e=e.replace(/%/g,"");e=e.replace(/\+/g,"");return e};d.prototype.Log=function(f){var e=false;if(IsOfflineModeEnabled()&&e){SiebelJS.Log(f+" "+SiebelApp.OfflineUtils.GetTS())}};d.prototype.GetRequestParam=function(f,h){var e=-1;e=f.indexOf(h);if(e!==-1){var g=f.substring(e,f.length);if(g.indexOf("&")===-1){g=g.substring(g.indexOf("=")+1,g.length)}else{g=g.substring(h.length,g.indexOf("&"))}var i=g.replace(/%20/g," ")}return i};d.prototype.GetTS=function(){var f=new Date();var i=f.getMonth()+1;var e=f.getDate();var g=f.getFullYear();var h=i+"/"+e+"/"+g;h+=" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();return h};d.prototype.RTrim=function(e,f){if(e===undefined||f===undefined){return""}if(e.substring((e.length-f.length),(e.length))===f){e=e.substring(0,(e.length-(f.length)))}return e};return b}())};