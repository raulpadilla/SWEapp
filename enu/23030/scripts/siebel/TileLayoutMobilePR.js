/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.TileLayoutPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.TileLayoutPR");define("siebel/TileLayoutMobilePR",["order!3rdParty/jqmobile/mobiscroll.custom-2.5.0.min","order!3rdParty/jqmobile/jquery.swipeButton.min","order!3rdParty/jqmobile/jquery.easing.1.3","order!3rdParty/jqmobile/jquery.mobile.scrollview","order!3rdParty/jquery.mobile.scrollview-ext","order!siebel/jqmsearchctrl","order!siebel/jqmformrenderer","order!siebel/jqmscrollcontainer"],function(){SiebelAppFacade.TileLayoutPR=(function(){var w=SiebelJS.Dependency("SiebelApp.Utils");var q=SiebelJS.Dependency("SiebelApp.Constants");var u=q.get("SWE_PST_BUTTON_CTRL");var x=q.get("SWE_CTRL_DETAIL");var g=q.get("SWE_CTRL_MVG");var b=q.get("SWE_CTRL_PICK");var k=q.get("SWE_CTRL_CHECKBOX");var E=q.get("SWE_CTRL_COMBOBOX");var d=q.get("SWE_CTRL_DATE_TIME_PICK");var c=q.get("SWE_CTRL_DATE_PICK");var r=q.get("SWE_CTRL_DATE_TZ_PICK");var n=q.get("SWE_CTRL_TEXT");var D=q.get("SWE_CTRL_RTCEMBEDDED");var l=q.get("SWE_PST_COL");var v=q.get("SWE_PST_APPLET_MODE_QUERY");var A=q.get("SWE_PST_APPLET_MODE_EDIT");var s=q.get("SWE_PST_APPLET_MODE_NEW");var t=SiebelApp.S_App.LocaleObject;var j=t.GetLocalString("IDS_SWE_MOBILE_ON")||"On";var z=t.GetLocalString("IDS_SWE_MOBILE_OFF")||"Off";var C=t.GetLocalString("IDS_SWE_MOBILE_NO_RECORDS_TO_DISPLAY");var m=t.GetLocalString("IDS_SWE_MOBILE_TAP_TO_CREATE");function a(I){SiebelAppFacade.TileLayoutPR.superclass.constructor.call(this,I);var F=null;var L;var S=false;var P=new SiebelAppFacade.ListColumnHelper();this.m_Offset=0;this.IsScroll=false;this.comboName="";this.refreshIndx=null;this.refresh=false;this.GetColumnHelper=function(){return P};this.GetCurRowSel=function(){return L};this.SetCurRowSel=function(T){L=T};this.SetFirstControl=function(T){F=T};this.GetFirstControl=function(){return F};var O=null;this.SetNumberOfTiles=function(T){O=T};this.GetNumberOfTiles=function(){return O};var M;this.SetBasicLayout=function(T){M=T};this.GetBasicLayout=function(){return M};var R;this.SetSelectedTile=function(T){R=T};this.GetSelectedTile=function(){return R};var J;this.SetBaseShowDone=function(T){J=T};this.GetBaseShowDone=function(){return J};this.GetToggleFlag=function(){return S};this.SetToggleFlag=function(T){S=T};var G=new SiebelAppFacade.JQMMapCtrl(this);this.GetMapCtrl=function(){return G};var Q=null;this.SetMapFieldArray=function(){Q=this.GetPM().Get("GetMapFields")};this.GetMapFieldArray=function(){return Q};var K=null;this.GetMapLocationArray=function(){return K};this.SetMapLocationArray=function(T){K=T};var H;this.GetMapControl=function(){return H};this.SetMapControl=function(T){H=T};var N="#tile_container";this.GetContainer=function(){return N}}SiebelJS.Extend(a,SiebelAppFacade.JQMScrollContainer);a.prototype.Init=function(){SiebelAppFacade.TileLayoutPR.superclass.Init.call(this);this.AttachPMBinding("CellChange",this.ChangeControlValue);this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue);this.AttachPMBinding("HandleRowSelect",function(){SiebelAppFacade.JQMLayout.ToggleMobileLayout(true)},{scope:this,when:function(){return $("#"+this.GetPM().Get("GetFullId")).parent().children("div[enabletoggle='true']").length===1||$("#s_"+this.GetPM().Get("GetFullId")+"_div").children("div[enabletoggle='true']").length===1}})};a.prototype.GetListHeight=function(){return $("#"+this.GetScrollcontainer()).children().height()};a.prototype.GetPhysicalControlValue=function(J){SiebelAppFacade.TileLayoutPR.superclass.GetPhysicalControlValue.call(this,J);var I,H;if(J){var G=this.GetColumnHelper().GetModifiedColumnName(J.GetFieldName());var L=this.GetPM().Get("GetPlaceholder");var K=this.GetCurRowSel();K=K+this.m_Offset;var F="jqmlist_"+L+"_"+K+"_"+G;I=$("#"+F);if(I.length>0){H=I.attr("value")||"";switch(J.GetUIType()){case c:case d:case r:H=w.toISOFormat(this.ConvertToDispTimeAMPM(w.Trim(H)),(J.GetUIType()!==c))||H;break}this.GetPM().AddProperty("PhysicalCtrlVal",H)}}};a.prototype.ShowSearch=function(){if(false===this.IsPopup()){var J=this.GetPM().Get("GetPlaceholder");$(".siebui-tile-container").before("<div id ='"+this.GetPM().Get("GetPlaceholder")+"'> </div>");var H=[];var I=this.GetPM().Get("ListOfColumns");for(var G=0,F=I.length;G<F;G++){H.push(I[G].control.GetDisplayName())}this.GetSearchCtrl().ShowUI(H,J)}};a.prototype.GetSelectedRow=function(G){var I=this.GetPM().Get("GetPlaceholder");var F="jqmlist_"+I+"_";G=G.replace(F,"");var J=G;var H=G.indexOf("_");if(H>=0){J=G.slice(0,H)}J=parseInt(J,10);J=J-this.m_Offset;I=null;return J};a.prototype.ShowUI=function(L){if($(this.GetContainer()).length===0){SiebelAppFacade.TileLayoutPR.superclass.ShowUI.call(this);return}var H=this.GetPM();var M=H.Get("GetRecordSet");var J=H.Get("GetPlaceholder");var O="scrollviewcontainer_"+J;this.SetMapFieldArray();var G=H.Get("GetSelection");if(!L){var N=H.Get("GetControls");for(var I in N){if(N[I].GetUIType()===u){if(N[I].GetMethodName().match("GotoNextSet")||N[I].GetMethodName().match("GotoPreviousSet")){}else{var F={str:""};this.ShowUIControl(N[I],F,"Tile")}if(N[I].GetMethodName().match("ShowMapLocations")){this.SetMapControl(N[I])}this.EnableControl(N[I],H.ExecuteMethod("CanInvokeMethod",N[I].GetMethodName()),G)}}if($("#"+H.Get("GetFullId")).parent().children("div[enabletoggle='true']").length===1||$("#s_"+H.Get("GetFullId")+"_div").children("div[enabletoggle='true']").length===1){this.SetToggleFlag(true)}this.ShowSearch()}$(this.GetContainer()).addClass("clearfix");if(M.length>0&&L){$(this.GetContainer()).append(this.GetBasicLayout())}if(!L){$(this.GetContainer()).find(".siebui-tile").find("input").each(function(P){$(this).hide()});this.SetBasicLayout($(this.GetContainer()).html())}if(!$(this.GetContainer()).is("visible")){$(this.GetContainer()).show()}try{$(this.GetContainer()).wrap("<div id='"+O+"'>");this.MakecontainerScrollable(O,true,false,true)}catch(K){SiebelJS.Log(K)}};function h(G,F){if(typeof(G.GetSpanPrefix)==="function"){return G.GetSpanPrefix()+F}else{return G.GetInputName().replace("_0","_"+F)}}a.prototype.ClearData=function(){var H=this.GetPM();var G=$(this.GetContainer()).children().length;for(var F=0;F<G;F++){$("#"+H.Get("GetFullId")+"_tile_"+(F+1)).remove()}};function e(R,U,J){var N="";var K="";var I=R.length;var L=this.m_Offset;var O=0;var V=this.GetPM();var Q=V.Get("GetFullId");if($(this.GetContainer()).children().length>1){L=0;this.m_Offset=0}if(!$(this.GetContainer()).is("visible")){$(this.GetContainer()).show()}var S=$.parseHTML(this.GetBasicLayout());$(this.GetContainer()).empty();$(this.GetContainer()).append(S);var T=$(this.GetContainer()).parent().find(".siebui-tile").find("input").attr("name");var M=T.substring(T.lastIndexOf("_")+1);for(var G=L+1;G<(L+I);G++){N=this.GetBasicLayout();N=N.replace("tile_1",Q+"_tile_"+(G+1));for(var P=0;P<U.length;P++){var F=U[P].control.GetSpanPrefix()+"0";if(N.search(F)===-1){F=U[P].control.GetSpanPrefix()+M}N=N.replace(new RegExp(F,"g"),U[P].control.GetSpanPrefix()+G)}K+=N}var W=this.m_Offset;$(this.GetContainer()).find(".siebui-tile").find("input").each(function(X){var Y=$(this).attr("name");
if(L!==0){$(this).removeAttr("name").attr("name",Y.substring(0,Y.lastIndexOf("_")+1)+W)}else{$(this).removeAttr("name").attr("name",Y.substring(0,Y.lastIndexOf("_")+1)+"0")}});$(this.GetContainer()).children().first().removeAttr("id").attr("id",Q+"_tile_"+(this.m_Offset+1));$(this.GetContainer()).append(K);for(var H=L;H<(L+I);H++){$("#"+Q+"_tile_"+(H+1)).addClass("siebui-tilelayoutpr siebui-tile siebui-tileshadow");this.BindRowData(O,H);O++}}function f(T,ac,L,V,J,U,ae,Y){var P="";var O="";var K=T.length;var af;var Z;var ad=this.GetPM();var S=ad.Get("GetFullId");var H=Y;var X=$.parseHTML(this.GetBasicLayout());$(this.GetContainer()).append(X);var aa=$(this.GetContainer()).find("#tile_1").find("input").attr("name");var N=aa.substring(aa.lastIndexOf("_")+1);$("#tile_1").remove();for(var I=ae;I<H;I++){var W=I+this.m_Offset+1;P=this.GetBasicLayout();P=P.replace("tile_1",S+"_tile_"+W);for(var R=0;R<ac.length;R++){var F=ac[R].control.GetSpanPrefix()+"0";if(P.search(F)===-1){F=ac[R].control.GetSpanPrefix()+N}P=P.replace(new RegExp(F,"g"),ac[R].control.GetSpanPrefix()+(W-1))}W++;O+=P}if(V){for(var G=1;G<=U;G++){if(J){af=this.m_Offset-G+1}else{af=this.m_Offset+G+K}$("#"+S+"_tile_"+af).addClass("removediv");$(this.GetContainer()).undelegate("#"+S+"_tile_"+af,"click")}}if(J!==null&&!J&&$(this.GetContainer()).children().length>1){Z=this.m_Offset+U+1;$("#"+S+"_tile_"+(Z)).before(O)}else{if($(this.GetContainer()).children().length>1){Z=K+this.m_Offset-U;$("#"+S+"_tile_"+(Z)).after(O)}else{$(this.GetContainer()).empty();$(this.GetContainer()).append(O);$(this.GetContainer()).first().addClass("siebui-tile-selected");this.refresh=true}}var Q;var ab;if(this.refreshIndx&&J){ae=0;Q=this.refreshIndx;for(ab=ae;ab<Y;ab++){$("#"+S+"_tile_"+(Q)).addClass("siebui-tilelayoutpr siebui-tile siebui-tileshadow");this.BindRowData(ab,(Q-1));Q++}this.refreshIndx=null}else{for(ab=ae;ab<Y;ab++){Q=ab+this.m_Offset+1;$("#"+S+"_tile_"+(Q)).addClass("siebui-tilelayoutpr siebui-tile siebui-tileshadow");this.BindRowData(ab,(Q-1));Q++}}if(V){$(this.GetContainer()).find(".removediv").remove();$("#tile_"+(ad.Get("GetSelection")+1)).addClass("siebui-tile-selected");this.SetNewscrollpos(J,U);if(this.refresh){var M=$(this.GetContainer()).first().children().first().attr("id");this.refreshIndx=parseInt(M.substring(M.lastIndexOf("_")+1),10);this.refresh=false}}}a.prototype.BindData=function(M){if($(this.GetContainer()).length===0){return}var X=this.GetPM();var R=X.Get("GetRecordSet");var W=X.Get("ListOfColumns");var L=R?R.length:0;var V=X.Get("GetSelection");var I=null;var S=0;var Q=X.Get("GetRecordSet").length;var T=Q;var Y=0;var Z=X.Get("GetPlaceholder");var aa=this.GetMapFieldArray();var H=X.Get("GetRawRecordSet");var K=[];this.SetNumberOfTiles(L);I=X.Get("GetScrollDir");S=X.Get("GetScrollAmount");S=parseInt(S,10);var U="jqml_"+Z+"_NR";if($("#"+U).length===1){$("#"+U).remove()}if(Q===0){var O=false;var J=jQuery.event.special.orientationchange.orientation();if(this.GetToggleFlag()){if($("div["+J+"='Hide']").length>0){O=true}}var G='<div id="'+U+'" class="jqmNoRecord">';if(O){G=G.concat('<a href="#" data-role="link">'+m+"</a></div>")}else{G=G.concat("<span>"+C+"</span></div>")}$("#scrollviewcontainer_"+Z).prepend(G);if(O){$("#"+U+" a").bind("click",{ctx:this},function(ab){SiebelAppFacade.JQMLayout.ToggleMobileLayout(true)})}}if(I!==null&&S!==0&&S<Q){this.IsScroll=true;if(S<0){S=-S}if(I){Y=Q-S;this.m_Offset=this.m_Offset+S}else{Y=0;T=S;this.m_Offset=this.m_Offset-S}f.call(this,R,W,M,this.IsScroll,I,S,Y,T);this.IsScroll=false}else{if(M){if(this.GetNumberOfTiles()!==L){this.ClearData();e.call(this,R,W,M)}else{this.ClearData();e.call(this,R,W,M)}}else{if(!M){e.call(this,R,W,M);this.SetNumberOfTiles(L)}}}if(L===0){$(this.GetContainer()).empty();$(this.GetContainer()).hide();return}for(var F=0;F<L;F++){if(aa!==null){for(var N=0;N<aa.length;N++){var P=HtmlEncode(H[F][aa[N]]);if(!w.IsEmpty(P)){P=P.replace(/(^,)|(,$)/g,"");P=P.replace(/^\s+|\s+$/g,"")}if(!w.IsEmpty(P)){K.push(P)}}}}this.SetMapLocationArray(K);W=null;R=null;if(this.IsScroll){this.SetNewscrollpos(I,S);this.IsScroll=false}};a.prototype.BindRowData=function(H,G){var J=this.GetPM();var L=J.Get("ListOfColumns");var F=L.length;for(var I=0;I<F;I++){var K=this.GetColumnHelper();K.AddColumn(L[I].control.GetFieldName(),L[I].control);i.call(this,L[I].control,H,G,L[I].isLink)}};function p(I,F,G,J,H){if(H===""){return'<a id = "jqmlist_'+J+"_"+G+'" href="javascript:void(0);" class="listdrilldown '+I+'" name="'+F+'"></a>'}else{return'<a id = "jqmlist_'+J+"_"+G+'" href="javascript:void(0);" class="listdrilldown '+I+'" name="'+F+'">'+H+"</a>"}}function i(S,P,ad,Y){var H=!P?0:P;var ab=this.GetPM();var Q=S.GetName();var ag=this.GetColumnHelper().GetModifiedColumnName(S.GetFieldName());var F=ab.Get("IsInQueryMode");var J=ab.Get("IsPure");var M=ab.ExecuteMethod("IsPrivateField",Q);var ae=this.GetPM().Get("GetPlaceholder");var G="jqmlist_"+ae+"_"+ad+"_"+ag;var L=S.GetUIType();var aa=ab.ExecuteMethod("CanUpdate",Q);var N;var Z="";if(!w.IsEmpty(ag)||M||!J){if(F||M||!J){if(!F||!J){if(P===undefined||P===null){Z=ab.ExecuteMethod("GetFormattedFieldValue",S,false)}else{Z=ab.ExecuteMethod("GetFormattedFieldValue",S,true,H)}}else{var V=ab.Get("GetRecordSet");Z=w.IsEmpty(V[H][ag])?"":V[H][ag]}}else{if(P===undefined||P===null){Z=ab.ExecuteMethod("GetFormattedFieldValue",S,true)}else{Z=ab.ExecuteMethod("GetFormattedFieldValue",S,true,H)}}}var I=$("[name="+h.call(this,S,ad)+"]")||$("#"+h.call(this,S,ad));if(I.nextAll().length>0){I.nextAll(":not(img)").remove()}I.next().show();var af="";var K="ui-icon-siebui-drilldown";N=y.call(this,S);var R=this;I.nextAll(":not(img)").hide();$("#"+I.attr("name")+"_icon").removeClass();$("#"+I.attr("name")+"_icon").addClass("applet-form-img-hide");I.hide();if(Y){if(S.GetIconMap()){af=R.IconMapFormatter("DrilldownIcon",S)}if(af!==""){I.after("<div>'"+p(K,Q,ad,ae,af)+"'</div><div> <span class='jqmlist_"+L+"' "+N+" id='"+G+"' value='"+Z+"'>"+Z+"</span>")}else{I.after("<div>"+p(K,Q,ad,ae,af)+"</div><div> <span class='jqmlist_"+L+"' "+N+" id='"+G+"' value='"+Z+"'>"+Z+"</span>")}}else{if(I.nextAll().length>0){I.nextAll().after("<span class='jqmlist_"+L+"' "+N+" id='"+G+"' value='"+Z+"'>"+Z+"</span>")}else{I.after("<span class='jqmlist_"+L+"' "+N+" id='"+G+"' value='"+Z+"'>"+Z+"</span>");if(L===k){var T="<select class='jqmlist_CheckBox_slide' name="+G+" "+N+" id='"+G+"' data-role='slider'><option value='N'>"+z+"</option><option value='Y'>"+j+"</option></select>";$("#"+G).html(T).trigger("create");var W=R.IconMapFormatter("Y",S);var O=R.IconMapFormatter("N",S);if(W!==""&&O!==""){var U=$("#"+G).parent();var X=$(U).find("span.ui-slider-label:first");var ac=X.html()===j?W:O;X.empty().append(ac);X=$(U).find("span.ui-slider-label:last");ac=X.html()===z?O:W;X.empty().append(ac)}$("#"+G+".jqmlist_CheckBox_slide").val(Z);$("#"+G+".jqmlist_CheckBox_slide").slider("disable");$("#"+G+".jqmlist_CheckBox_slide").slider("refresh")}}}if(Y){I.next().bind("click",{ctx:R,ctrl:S,el:I},function(aj){var ai=aj.data.ctx;
SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:true});var ak=$(this).children().attr("id");var ah="jqmlist_"+ae+"_";ak=ak.replace(ah,"");ak=parseInt(ak,10);ak=ak-ai.m_Offset;aj.data.ctx.OnRowSelect(ak);if(ai.GetPM().OnControlEvent(q.get("PHYEVENT_DRILLDOWN_LIST"),Q,H)===false){SiebelApp.S_App.uiStatus.Free();return false}})}else{if(!L.match(E)){I.next().bind("focusout",{ctx:R,ctrl:S,el:I},function(ah){SiebelAppFacade.TileLayoutPR.superclass.OnBlurInput.call(this,ah)})}I.next().bind("click",{ctx:R,ctrl:S,el:I},function(ah){if(L.match(E)){this.comboName=I.attr("name");I.removeAttr("name");SiebelAppFacade.TileLayoutPR.superclass.OnFocusInput.call(this,ah)}else{SiebelAppFacade.TileLayoutPR.superclass.OnFocusInput.call(this,ah);ah.preventDefault()}})}}a.prototype.ShowSelection=function(){var G=this.GetPM();var H=G.Get("GetSelection")+1;var F=H+this.m_Offset;$(".siebui-tile-selected").find(".siebui-ipe-enabled").removeClass("siebui-ipe-enabled");$(".siebui-tile-selected").find(".jqmlist_CheckBox_slide").slider("disable");$(".siebui-tile-selected").removeClass("siebui-tile-selected");$("#"+G.Get("GetFullId")+"_tile_"+(F)).addClass("siebui-tile-selected");this.SetSelectedTile(F);this.SetCurRowSel(G.Get("GetSelection"));SiebelAppFacade.TileLayoutPR.superclass.ShowSelection.call(this)};a.prototype.ChangeControlValue=function(J,I,K){var H=this.GetPM();var L=H.Get("ListOfColumns");var F=L.length;for(var G=0;G<F;G++){if(L[G].control.GetName()===I){this.SetControlValue(L[G].control,K,H.Get("GetSelection"));break}}};a.prototype.SetControlValue=function(L,R,K){if($(this.GetContainer()).length===0){SiebelAppFacade.TileLayoutPR.superclass.SetControlValue.call(this,L,R);return}if(!o(L)){return}var T=this.GetPM();var F=!K?T.Get("GetSelection"):K;F=F+this.m_Offset;var I="";var S=this.GetPM().ExecuteMethod("CanUpdate",L.GetName());var V=T.Get("GetPlaceholder");var W=this.GetColumnHelper().GetModifiedColumnName(L.GetFieldName());var N="jqmlist_"+V+"_"+F+"_"+W;var G=$("#"+N);if(!G){G=$("[name="+h.call(this,L,F)+"]")}G=$(G);switch(L.GetUIType()){case n:case c:case d:case r:G.html(R);G.attr("value",R);break;case k:var M="<select class='jqmlist_CheckBox_slide' name="+N+" id='"+N+"' data-role='slider'><option value='N'>"+z+"</option><option value='Y'>"+j+"</option></select>";G.html(M).trigger("create");var P=this.IconMapFormatter("Y",L);var J=this.IconMapFormatter("N",L);if(P!==""&&J!==""){var O=G.parent();var Q=$(O).find("span.ui-slider-label:first");var U=Q.html()===j?P:J;Q.empty().append(U);Q=$(O).find("span.ui-slider-label:last");U=Q.html()===z?J:P;Q.empty().append(U)}$("#"+N+".jqmlist_CheckBox_slide").val(R);$("#"+N+".jqmlist_CheckBox_slide").slider("refresh");break;case b:var H=G.find("input").length;if(H!==0){G.find("input").attr("value",R);G.find("input").focus()}else{G.html(R)}break;case E:G.html(R);G.attr("value",R);G.attr("name",this.comboName);break;default:G.html(R);break}};a.prototype.EnableControl=function(H,O,M){if($(this.GetContainer()).length===0){SiebelAppFacade.TileLayoutPR.superclass.EnableControl.call(this,H,O);return}if(H.GetUIType().match(u)){SiebelAppFacade.TileLayoutPR.superclass.EnableControl.call(this,H,O)}else{var K=this.GetPM().Get("GetSelection");var G=K+this.m_Offset;var L=this.GetPM().Get("GetPlaceholder");var J=this.GetColumnHelper().GetModifiedColumnName(H.GetFieldName());var I=$("[name="+h.call(this,H,G)+"]")||$("#"+h.call(this,H,G));var F="jqmlist_"+L+"_"+G+"_"+J;var N=this.GetPM().ExecuteMethod("CanNavigate",H.GetName());if(H.GetUIType().match(k)){if(O){$("#"+F+".jqmlist_CheckBox_slide").slider("enable")}else{$("#"+F+".jqmlist_CheckBox_slide").slider("disable")}$("#"+F+".jqmlist_CheckBox_slide").slider("refresh")}if(O&&N){I.last().addClass("siebui-ipe-enabled")}else{if(O){I.next().addClass("siebui-ipe-enabled")}else{I.next().removeClass("siebui-ipe-enabled")}}}};a.prototype.OnRowSelect=function(G){var F=this.GetPM();SiebelApp.S_App.uiStatus.Busy({});if(!F.OnControlEvent(q.get("PHYEVENT_SELECT_ROW"),G,"","")){SiebelApp.S_App.uiStatus.Free();return false}SiebelApp.S_App.uiStatus.Free();return true};a.prototype.BindEvents=function(O,F,I,N){if($(this.GetContainer()).length===0){SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this);return}var G=this.GetPM();var P=this.GetMapControl();if(!O){var R=G.Get("GetControls");var L=this.GetPM().Get("GetPlaceholder");var Q=G.Get("ListOfColumns");var S=false;for(var K in R){if(R.hasOwnProperty(K)){S=false;for(var H=0;H<Q.length;H++){if(Q[H].control.GetName()===K){S=true;break}}if(!S&&R.hasOwnProperty(K)){this.BindControlEvents(R[K])}}}R=null;$("#s_"+this.GetPM().Get("GetFullId")+"_div").delegate(".jqmform_pick_input","click",{ctx:this},this.OnPick);$("#s_"+this.GetPM().Get("GetFullId")+"_div").delegate(".jqmlist_CheckBox_slide","slidestop",{ctx:this},this.OnBlurInput);$("#s_"+this.GetPM().Get("GetFullId")+"_div").delegate(".jqmlist_CheckBox_slide","slidestart",{ctx:this},this.OnFocusInput)}$(this.GetContainer()).undelegate(".siebui-tile","click");$(this.GetContainer()).delegate(".siebui-tile","click",{ctx:this},function(W){var X=$(this).attr("id").lastIndexOf("_");X=parseInt($(this).attr("id").substring(X+1),10);var T=W.data.ctx;var V=T.GetPM();var U=$(this).attr("id");U=parseInt(X,10);U=U-T.m_Offset;$("#"+V.Get("GetFullId")+"_tile_"+W.data.ind).addClass("siebui-tile-selected");U=U-1;var Y=T.GetPM().Get("GetActiveControl");if(Y===null||Y===undefined){T.OnRowSelect(U)}});if(P!==undefined&&P!==null){if(P.GetMethodName()==="ShowMapLocations"&&typeof(google)!=="undefined"){var M=this.GetMapCtrl();var J=[];$("#"+(P.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:P},function(T){var U=new SiebelApp.UIStatus();U.Busy({});setTimeout(function(){J=T.data.ctx.GetMapLocationArray();M.ShowMapLocations(J);U.Free()},0);return false})}}P=null};function o(F){return(typeof(F.GetInputName)==="function")}a.prototype.GetSelectedControl=function(G){var I=this.GetPM().Get("GetPlaceholder");var F="jqmlist_"+I+"_";G=G.replace(F,"");var H=G.indexOf("_");G=G.slice(H+1);I=null;return G};a.prototype.GetColumnControl=function(F){return this.GetColumnHelper().GetColumnControl(F)};a.prototype.BindControlEvents=function(J,I){if($(this.GetContainer()).length===0){SiebelAppFacade.TileLayoutPR.superclass.BindControlEvents.call(this,J);return}if(!o(J)){return}var G=I?I:0;var F=h(J,G);var K=$("[name="+F+"]");var H=this.GetPM();switch(J.GetUIType()){case x:case u:if(J.GetMethodName()==="NewFileAttachment"||J.GetMethodName()==="ShowMapLocations"){return false}else{if(J.GetMethodName()==="ClearSignature"){$("#"+(F+"_Ctrl")).bind("click",{ctx:this,ctrl:J},function(L){var N=L.data.ctx.GetPM().Get("GetControls");for(var M in N){if(N[M].GetUIType()==="JInkData"){$(".siebui-ctrl"+h(N[M],G)+"-clearButton").trigger("click");$("."+h(N[M],G)).attr({value:""});$("#"+h(N[M],G)).trigger("vmouseup")}}})}else{$("#"+(F+"_Ctrl")).bind("click",{ctx:this,ctrl:J},function(L){var M=new SiebelApp.UIStatus();setTimeout(function(){SiebelAppFacade.TileLayoutPR.superclass.InvokeControlMethod.call(L.data.ctx,L.data.ctrl)
},0);L.preventDefault()})}}break}};a.prototype.EndLife=function(){this.SetSelectedTile(null);this.SetBasicLayout(null);this.GetSearchCtrl().SetContainer(null);this.SetMapLocationArray(null);$("#s_"+this.GetPM().Get("GetFullId")+"_div").undelegate(".jqmform_pick_input","click");$("#s_"+this.GetPM().Get("GetFullId")+"_div").undelegate(".jqmlist_CheckBox_slide","slidestart");$("#s_"+this.GetPM().Get("GetFullId")+"_div").undelegate(".jqmlist_CheckBox_slide","slidestop");SiebelAppFacade.TileLayoutPR.superclass.EndLife.call(this)};a.prototype.IconMapFormatter=function B(F,I){var J=SiebelApp.S_App.GetIconMap();var K=SiebelApp.S_App.LookupStringCache(I.GetIconMap());if(K){var H=J[K];if(H){for(var G=0;G<H.length;G++){if(H[G].iconName===F){if(H[G].iconName==="DrilldownIcon"){return H[G].iconImage}else{return H[G].iconImage+"<span style='display:none;'>"+(F)+"</span>"}}}}}return F};function y(I,H){var F="";var G=I;if((G!==undefined)){if(!w.IsEmpty(H)){H="_"+H}else{H=""}if(typeof(G.GetObjectType)==="function"){F=F+'ot="'+G.GetObjectType()+H+'"'}if(typeof(G.GetRepstrName)==="function"){F=F+' rn="'+G.GetRepstrName()+H+'"'}if(typeof(G.GetUIName)==="function"){F=F+' un="'+G.GetUIName()+H+'" '}}return F}return a}());return"SiebelAppFacade.TileLayoutPR"});SiebelAppFacade.ListColumnHelper=function(){var b={};var a={};var c={};this.GetColMap=function(){return b};this.GetColControl=function(){return a};this.GetColField=function(){return c}};SiebelAppFacade.ListColumnHelper.prototype={AddColumn:function(c,b){var a=null;if(typeof(c)==="string"){a=c.replace(/ /g,"_");a=a.replace(/\//g,"_");a=a.replace(/#/g,"_");this.GetColMap()[a]=c;this.GetColControl()[a]=b;this.GetColField()[b.GetFieldName()]=c}return a},GetActualControlName:function(a){return this.GetColMap()[a]},GetActualColumnName:function(a){return this.GetColControl()[a].GetDisplayName()},GetModifiedColumnName:function(b){var a=null;if(typeof(b)==="string"){a=b.replace(/ /g,"_");a=a.replace(/\//g,"_");a=a.replace(/#/g,"_")}return a},GetColumnControl:function(a){return this.GetColControl()[a]},GetColumnOfField:function(a){return this.GetColField()[a]},TranslateObject:function(c,f){var d={};var b=null;for(var a=0;a<c.length;a++){var e=c[a].control.GetFieldName();b=c[a].name;if(!SiebelApp.Utils.IsEmpty(b)){d[b.replace(/ /g,"_").replace(/\//g,"_").replace(/#/g,"_")]=f[e]}}if(f.Id){d.Id=f.Id}return d}}};