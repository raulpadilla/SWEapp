if(typeof(SiebelAppFacade.PhysicalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PhysicalRenderer");SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_UIDEF_APPLET_PRENDR"),"SiebelAppFacade.PhysicalRenderer");SiebelAppFacade.PhysicalRenderer=(function(){var am=SiebelJS.Dependency("SiebelApp.Utils");var R=SiebelJS.Dependency("SiebelApp.Constants");var V=R.get("SWE_PST_BUTTON_CTRL");var al=R.get("SWE_CTRL_DETAIL");var W=R.get("SWE_CTRL_MVG");var y=R.get("SWE_CTRL_PICK");var ae=R.get("SWE_CTRL_RADIO");var N=R.get("SWE_CTRL_CHECKBOX");var q=R.get("SWE_CTRL_COMBOBOX");var ak=R.get("SWE_CTRL_CHART");var af=R.get("SWE_CTRL_PLAINTEXT");var f=R.get("SWE_CTRL_DATE_TIME_PICK");var H=R.get("SWE_CTRL_DATE_PICK");var w=R.get("SWE_CTRL_CALC");var Y=R.get("SWE_CTRL_DATE_TZ_PICK");var h=R.get("SWE_CTRL_CURRENCY_CALC");var J=R.get("SWE_CTRL_TEXT");var a=R.get("SWE_CTRL_TEXTAREA");var z=R.get("SWE_CTRL_RTCEMBEDDED");var u=R.get("SWE_CTRL_RTCEMBEDDEDTEXTONLY");var g=R.get("SWE_CTRL_RTCEMBEDDEDLINKFIELD");var M=R.get("SWE_CTRL_RTCPOPUP");var s=R.get("SWE_CTRL_RTCIO");var ab=R.get("SWE_CTRL_INKDATA");var l=R.get("SWE_CTRL_LINK");var aa=R.get("SWE_CTRL_LABEL");var S=R.get("SWE_CTRL_URL");var Z=R.get("SWE_CTRL_MAILTO");var U=/(About Record Applet\w*)|(About SRF Applet\w*)|(About Siebel Applet\w*)|(About View Applet\w*)|(Record Count Applet\w*)|(Technical Support Applet\w*)/;var L=R.get("SWE_CTRL_EFFDAT");var E=R.get("SWE_CTRL_IMAGECONTROL");var P=R.get("SWE_CTRL_FILE");var r=R.get("SWE_PST_COL");var d=R.get("SWE_PST_APPLET_MODE_QUERY");var T=R.get("SWE_PST_APPLET_MODE_EDIT");var G=R.get("SWE_PST_APPLET_MODE_NEW");function C(ao){var an=ao;this.GetPM=function(){return an};var aq=null;this.SetFirstControl=function(ar){aq=ar};this.GetFirstControl=function(){return aq};var ap=new SiebelAppFacade.SearchCtrl(this);this.GetSearchCtrl=function(){return ap};this.GetPM().AttachPMBinding("UpdateQuickPickInfo",this.UpdatePick,{scope:this});this.GetPM().AttachPMBinding("UpdateAppletMessage",this.UpdateAppletMessageUI,{scope:this});this.GetPM().AttachPMBinding("UpdateCurrencyCalcInfo",p,{scope:this});this.GetPM().AttachPMBinding("UpdateConditionals",j,{scope:this});this.GetPM().AttachPMBinding("ProcessCancelQueryPopup",aj,{scope:this});this.GetPM().AttachPMBinding("FocusOnApplet",c,{scope:this});this.GetPM().AttachPMBinding("HandleCtrlDefChange",this.RefreshControl,{scope:this});this.GetPM().AttachPMBinding("SetCanInvokeState",ad,{scope:this});this.GetPM().AttachPMBinding("BeginQueryState",ag,{scope:this});this.GetPM().AttachPMBinding("EndQueryState",v,{scope:this});this.GetPM().AttachPMBinding("UpdateRowCounter",t,{scope:this});this.GetPM().AttachPMBinding("ShowPopup",function(ar){this.ShowPopup(ar)},{scope:this});this.GetPM().AttachPMBinding("isControlPopupOpen",o,{scope:this});this._EndLife=function(){an=null;aq=null;ap=null}}C.prototype.RefreshControl=function(ao){var an=$("#"+ao.GetInputName())[0]||$("[name="+ao.GetInputName()+"]");if(an.length>0){an.nextAll().remove();this.ShowUIControl(ao);this.BindControlEvents(ao);this.EnableControl(ao,this.GetPM().ExecuteMethod("CanUpdate",ao.GetName()));e.call(this,ao)}};C.prototype.EndLife=function(){$("#s_"+this.GetPM().Get("GetFullId")+"_div").off("click click.drilldown");this._EndLife()};C.prototype.ResetRendererState=function(){};C.prototype.UpdatePick=function(){var an=arguments[arguments.length-1];var ao=this.GetPM().Get("GetActiveControl");if(!ao){return}m.call(this,ao,an);delete this.inProgress};function m(ap,an){var ao=$('input[name="'+ap.GetInputName()+'"]');if(ap){if(!this.GetPM().ExecuteMethod("CanUpdate",ap.GetName())){ao.focus();return false}}if(an===null){ao.autocomplete("option","source",[]);this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_COMBO"),ap);return}if(ao.length!==0){if(an.length>0){this.GetPM().SetProperty("isControlPopupOpen",true)}ao.autocomplete("option","source",an).autocomplete("option","minLength",0).autocomplete("search","");ao.autocomplete("widget").attr("role","combobox");ao.autocomplete("widget").children().find("a").attr("role","option");ao.focus()}ao=null}function p(){var ao=this.GetPM();var ar=SiebelApp.S_App.GetPopupPM();$("div[name='popup']").find("div[name=CurrencyCalc]").remove();var ap=ao.ExecuteMethod("GetCurrencyCalInfo");var at={pickId:ap[0],pickName:ap[1],pickValue:ap[2],dateId:ap[3],dateName:ap[4],dateValue:ap[5],calcId:ap[6],calcName:ap[7],calcValue:ap[8],hideExchDate:ap[9],CCodeReadOnly:ap[10],eDateReadOnly:ap[11],AmountReadOnly:ap[12],sourceField:ap[13]};var aq=ao.Get("GetActiveControl");if(!aq){var av=ao.Get("GetControls");for(var au in av){if(av[au].GetInputName()===at.sourceField){aq=av[au];break}}}var an='<div name="CurrencyCalc" class="siebui-popup-currency">';an+='<div id="'+at.pickId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+at.pickName+'</span><input type="text" id="'+at.pickId+'" aria-label="'+at.pickName+'" value="'+at.pickValue+'" '+(at.CCodeReadOnly?'readonly="readonly" ':"")+"></div>";if(!at.hideExchDate){an+='<div id="'+at.dateId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+at.dateName+'</span><input type="text" id="'+at.dateId+'" aria-label="'+at.dateName+'" value="'+at.dateValue+'" '+(at.eDateReadOnly?' readonly="readonly" ':"")+"></div>"}an+='<div id="'+at.calcId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+at.calcName+'</span><input type="text" id="'+at.calcId+'" aria-label="'+at.calcName+'" value="'+at.calcValue+'" '+(at.AmountReadOnly?'readonly="readonly" ':"")+"></div>";an+="</div>";if(ar.Get("state")===R.get("POPUP_STATE_UNLOADED")){ar.Setup()}ar.SetProperty("isCurrencyOpen",true);ar.ExecuteMethod("OpenPopup",an,0,0,false,false,true);$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").hide().end().end().bind("keydown",{ctx:this,ctrl:aq,popPM:ar},function(ax){if(ax.keyCode===$.ui.keyCode.ESCAPE){if(ax.data.popPM.Get("isCurrencyOpen")){ax.data.popPM.SetProperty("isCurrencyOpen",false);ax.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");ax.data.popPM.ExecuteMethod("ClearPopup");ax.data.ctx.SetFocusToControl(ax.data.ctrl.GetName(),true)}}if(ax.keyCode===$.ui.keyCode.ESCAPE||ax.keyCode===$.ui.keyCode.ENTER){ax.stopPropagation()}});$("div[name=CurrencyCalc]").parents("div.ui-dialog-content").removeClass("minWidthContainer");SiebelAppFacade.ControlBuilder.Pick({target:"#"+at.pickId,className:"applet-form-pick",scope:this,control:aq,click:function(ax){this.GetPM().ExecuteMethod("ShowPickPopup")}});SiebelAppFacade.ControlBuilder.DatePick({target:"#"+at.dateId,className:"applet-form-date",control:aq,scope:this,showPopup:false,click:function(az,ay){if(!at.eDateReadOnly){this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{date:ay});var ax=this;SiebelAppFacade.ControlBuilder.DatePick({target:ay,className:"applet-form-date",control:az,scope:this,showPopup:true,getISOVal:function(){return am.toISOFormat($(this.target).val(),false)
},onClose:function(aC,aB){$(this).datetimepicker("destroy").focus();ax.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");var aA=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aC,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aA)}})}}});SiebelAppFacade.ControlBuilder.Calculator({target:"#"+at.calcId,className:"applet-form-calculator",control:aq,scope:this,click:function(az,ay){if(!this.GetPM().ExecuteMethod("CanUpdate",az.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{calc:ay});this.SetControlValue(az,this.GetPM().ExecuteMethod("GetFieldValue",az));var ax=this;SiebelAppFacade.ControlBuilder.Calculator({target:ay,className:"applet-form-calculator",control:az,show:true,beforeShow:function(aE,aD){var aC=aE;var aA=$("#"+at.pickId).val();if(aA){var aB;var aF=SiebelApp.S_App.LocaleObject.GetCurrency(aA);aF=aF?aF.m_sSymbol:null;aB=aF?aF.length:0;if(aF&&aC.substr(0,aB)===aF){aC=parseFloat(aC.substring(aB))}}$(this).val(aC)},close:function(aA){var aB=aA.replace(/\[/g,"").replace(/\]/g,"");ax.SetControlValue(az,aB);$(this).calculator("destroy").next("img").show().end().focus();ax.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");ax.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),az)}})}});$("#"+at.pickId).bind("focus",{ctx:this,ctrl:aq},function(ax){ax.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ax.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aq,ctrlType:at.pickName},function(ay){ay.data.ctx.onBlurCurrency(ay.data.ctrlType,$(this).val());ay.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var az=ay.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var ax=$("#"+az[6]);ax.val(az[8])}).bind("keydown",{ctx:this,ctrl:aq,readOnly:at.CCodeReadOnly},function(ax){b.call(ax.data.ctx,$(this),ax,$(this).val())});$("#"+at.calcId).bind("focus",{ctx:this,ctrl:aq},function(ax){ax.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ax.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aq},function(az){if(az.data.ctx.GetPM().Get("isControlPopupOpen")===false){var aA=$(this).val();var ay=0;while(isNaN(aA.charAt(ay))){ay++}aA=aA.substring(ay);az.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),az.data.ctrl,aA);az.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aB=az.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var ax=$("#"+aB[6]);ax.val(aB[8])}}).bind("keydown",{ctx:this,ctrl:aq,readOnly:at.AmountReadOnly},function(ax){b.call(ax.data.ctx,$(this),ax,$(this).val())});$("#"+at.dateId).bind("blur",{ctx:this,ctrl:aq,readOnly:at.eDateReadOnly},function(ay){if(!ay.data.readOnly){var az=am.Trim($(this).val());var aA=am.toISOFormat(az,(ay.data.ctrl.GetUIType()!==H));var ax=az;if(!aA){ax=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aA,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat())}$(this).val(ax)}return false}).bind("keydown",{ctx:this,ctrl:aq,readOnly:at.eDateReadOnly},function(ax){b.call(ax.data.ctx,$(this),ax,$(this).val())});$("div.ui-widget-overlay").bind("click",{ctx:this,ctrl:aq,popPM:ar},function(ax){if(ax.data.popPM.Get("isCurrencyOpen")){ax.data.popPM.SetProperty("isCurrencyOpen",false);ax.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");ax.data.popPM.ExecuteMethod("ClearPopup");ax.data.ctx.SetFocusToControl(ax.data.ctrl.GetName(),true)}});var aw=this;setTimeout(function(){var ax=$("#"+aq.GetInputName()+"_icon");if(ax.length===0&&typeof(aw.GetColumnHelper)==="function"){ax=$('[name="'+aw.GetColumnHelper().GetModifiedColumnName(aq.GetName())+'"]').next("img");if(ax.length===0){ax=ax.end()}}$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").position({my:"top",at:"bottom",collision:"flip",of:ax});setTimeout(function(){$("#"+at.pickId).focus()},5)},15)}C.prototype.onBlurCurrency=function(ap,ao){var an=this.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aq;ao=ao.toUpperCase();if(ap==="Currency Code"){aq=an[0];var ar=SiebelApp.S_App.LocaleObject.GetCurrency(ao);if(ar){$("#"+aq).val(ao)}else{$("#"+aq).val(an[2])}}};C.prototype.UpdateAppletMessageUI=function(){var aq=this.GetPM().Get("GetQueryModePrompt");var ap=this.GetPM().Get("GetId");var ao=$(".AppletButtons","#a_"+ap);var an=$("#"+ap+"_msg");if(an.length===0){ao.append("<td nowrap><span id="+ap+"_msg><span></td>")}if(aq!==null){$("#"+ap+"_msg").html("<b>"+aq+"</b>")}};function aj(){var at=SiebelApp.S_App.GetPopupPM();$("[name=cancelQuery]").remove();var ar=$('<div name="cancelQuery"></div>');var aw="";var ay=SiebelApp.S_App.LocaleObject;var av=ay.GetLocalString("IDS_CANCELQRY_INITIALTEXT");var ap=ay.GetLocalString("IDS_CANCELQRY_RESPONSETEXT");var ax=ay.GetLocalString("IDS_CANCELQRY_HEADERTEXT");var ao=ay.GetLocalString("IDS_CANCELQRY_BUTTONTEXT");aw+='<div align ="center" id = "responseTxt_div"><p id="initTxt_CQ"><b>'+av+"</b></p></div><br />";var an='<button id="cancelQry_Ctrl_CQ" class="appletButton" type="button" title="'+ao+'" >'+ao+"</button>";aw+='<div align="center" id = "cancelbtn_div">'+an+"</div>";ar.append(aw);if(at.Get("state")===R.get("POPUP_STATE_UNLOADED")){at.Setup()}at.SetProperty("IsCancelQryPopupOpen",true);at.SetProperty("content",ar);var au=$("#cancelQry_Ctrl_CQ");if(au.length!==0){var aq=this;au.bind("click",function(az){var aA='<p id="responseTxt_CQ"><b>'+ap+"</b></p>";$("#initTxt_CQ").replaceWith(aA);at.OnControlEvent(R.get("PHYEVENT_CANCEL_QRY_POPUP"),az)})}}function ad(){var an=this.GetPM();var ao=$("#s_"+an.Get("GetFullId")+"_div");if(an.ExecuteMethod("IsMethodDefault","MaximizeApplet")&&an.ExecuteMethod("CanInvokeMethod","MaximizeApplet")===false){ao.removeClass("siebui-applet-minimize").addClass("siebui-applet-maximize")}else{if(an.ExecuteMethod("IsMethodDefault","MinimizeApplet")&&an.ExecuteMethod("CanInvokeMethod","MinimizeApplet")===false){ao.removeClass("siebui-applet-maximize").addClass("siebui-applet-minimize")}else{ao.removeClass("siebui-applet-maximize siebui-applet-minimize")}}}C.prototype.ShowUI=function(){ad.call(this);var aq=$("#s_"+this.GetPM().GetProxy().GetFullId()+"_div");if(am.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){aq.attr({role:"region",title:this.GetPM().Get("LandMarkTitle")})}var an=this.GetPM().Get("GetControls");for(var ap in an){if(an.hasOwnProperty(ap)){this.ShowUIControl(an[ap])}}if(!this.GetPM().Get("IsPopup")){this.ShowSearch()}var ao=this.GetPM().GetProxy();this.InjectQTPInfo(aq,ao);I.call(this)};function I(){var an="#s_"+this.GetPM().Get("GetFullId")+"_div";setTimeout(function(){$(an).find("div.mceGridField input, td.siebui-form-data input, td.scField input, span.mceField input").not("[type=checkbox]").not(".siebui-input-popup").each(function(){$(this).width($(this).width()+16)})},2)}C.prototype.ShowUIControl=function(ay){if(!n(ay)){return}var au=this;var an=ay.GetSeq()||0;switch(ay.GetUIType()){case S:var ap=$("[name="+ay.GetInputName()+"]")[0]||$("#"+ay.GetInputName())[0];ap=$(ap);
ap.attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);if(ay.GetName()==="BookmarkImage"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){$("[name='"+ay.GetInputName()+"']").remove();$($("table.FormSection")[0]).remove()}this.InjectQTPInfo(ap,ay);ap=null;break;case V:case al:var ap=$("#"+ay.GetInputName());var ao=ay.GetMethodName();var aC=ay.GetDisplayName();var aN=this.GetPM().ExecuteMethod("CanInvokeMethod",ao);var at=this.GetPM().Get("GetAppletLabel");if(at!==""){at=at+":"}var av;if(ao==="NewFileAttachment"){var aP=aN?ay.GetEnabledBmp():ay.GetDisabledBmp();var aH=ay.GetInputName()+"_"+R.get("SWE_FILE_NAME_STR");if(!aP){av="<div id='"+ay.GetInputName()+"' class='siebui-file-label "+((aN===true)?"appletButton":"appletButtonDis")+"'"+((aN===true)?" ":' disabled="disabled" ')+">"+aC+"<input id='"+aH+"' tabindex='"+an+"' title='"+at+aC+"' aria-label='"+at+aC+"' type='file' class='siebui-file-input' multiple name='"+R.get("SWE_FILE_NAME_STR")+"'/></div>"}else{av="<div id='"+ay.GetInputName()+"' class='"+((aN===true)?"siebui-btn-icon-e siebui-file-label":"siebui-btn-icon-d siebui-file-label")+"'"+((aN===true)?' tabindex="'+an+'"':" disabled='disabled' tabindex='-1'")+'><a role="button">'+aP+"</a><input id='"+aH+"' aria-label='"+at+aC+"' type='file' class='siebui-file-input' multiple name='"+R.get("SWE_FILE_NAME_STR")+"'/></div>"}$("#"+ay.GetInputName()).replaceWith(av);var aE=$("#"+aH);var aB=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));SiebelAppFacade.ControlBuilder.FileUploader({url:SiebelApp.S_App.GetPageURL(),dropZone:aB,fileInput:aE,formData:{},change:Q,fail:A,done:ac,drop:Q,scope:this});av=aE=aB=null}else{av='<button id="'+ay.GetInputName()+'_Ctrl" class="'+(aN?"appletButton":"appletButtonDis")+'" type="button" data-display="'+aC+'" tabindex="'+an+'" title="'+at+aC+'" aria-label="'+at+aC+'" '+((aN===true)?" ":'disabled="disabled"')+">"+aC+"</button>";if(ao==="ShowQueryAssistant"){av+='<div id="'+ay.GetInputName()+'"class="SearchCtrl"/>'}}if(ao==="NewFileAttachment"){}else{var aP=aN?ay.GetEnabledBmp():ay.GetDisabledBmp();if(aP){ap.append('<a  role="button" >'+aP+"</a>").addClass(aN?"siebui-btn-icon-e":"siebui-btn-icon-d").children("a").attr("tabindex",aN?an:"-1").find("img").attr("alt",at+$(aP).attr("alt")).attr("title",at+$(aP).attr("title"));this.InjectQTPInfo(ap,ay)}else{ap.replaceWith(av);this.InjectQTPInfo($("#"+ay.GetInputName()+"_Ctrl"),ay)}}ap=null;break;case P:var ap=$("#"+ay.GetInputName());var ao=ay.GetMethodName();var aC=ay.GetDisplayName();var aN=this.GetPM().ExecuteMethod("CanInvokeMethod",ao);var av="<input id='"+ay.GetInputName()+"' tabindex='"+an+"' type='file' name='"+R.get("SWE_FILE_NAME_STR")+"'/>";$("#"+ay.GetInputName()).replaceWith(av);var aE=$("#"+ay.GetInputName());var aB=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));SiebelAppFacade.ControlBuilder.FileUploader({url:SiebelApp.S_App.GetPageURL(),dropZone:aB,fileInput:aE,formData:{},change:Q,fail:A,done:ac,drop:Q,scope:this});this.InjectQTPInfo($("#"+ay.GetInputName()),ay);ap=aE=aB=null;break;case q:var aq='[name="'+ay.GetInputName()+'"]';var aL=($(aq).eq(0).clone().html("").wrap("<p/>").parent().html()||"").replace(/select/ig,"input");$(aq).replaceWith(aL);aq='input[name="'+ay.GetInputName()+'"]';$(aq).attr("maxlength",ay.GetMaxSize()||256);$(aq).bind("keydown",{ctx:this,ctrl:ay},function(aR){if(aR.which===$.ui.keyCode.TAB&&$(this).prop("readonly")){aR.stopImmediatePropagation()}return b.call(aR.data.ctx,$(this),aR,$(this).val())});SiebelAppFacade.ControlBuilder.SelectCtrl({target:aq,className:"applet-form-combo",scope:this,click:function(aR){m.call(this,aR,null)},control:ay});$(aq).width(Number(ay.GetWidth())!==0?ay.GetWidth():R.get("DFLT_COMBO_WIDTH")).height(Number(ay.GetHeight())!==0?ay.GetHeight():R.get("DFLT_COMBO_HEIGHT")).autocomplete({source:[]}).autocomplete("option","position",{my:"center top",at:"center bottom",of:$(aq),collision:"flip flip"}).attr("role","combobox").attr("tabindex",an).bind("autocompletefocus",function(aR,aS){$(this).attr("aria-activedescendant",$(this).autocomplete("widget").attr("aria-activedescendant"))});this.InjectQTPInfo($(aq),ay);break;case af:if(am.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){var ap=$("#"+ay.GetInputName())[0]||$("[name="+ay.GetInputName()+"]")[0];$(ap).append('<Label tabindex="" + cti + "" id="'+$(ap).attr("id")+'_Label"></Label>');ap=null}break;case ae:var aO=ay.GetRadioGroupPropSet();var aQ=ay.GetDisplayName();if(aO.IsEmpty()){break}var aM=ay.GetInputName();var aw=$("[name="+aM+"]");var aF=aw.outerWidth();var ax=aw.parent();aw.remove();var aA="";for(var aK=0;aK<aO.GetChildCount();aK++){var az=aO.GetChild(aK);var ar=az.GetProperty("DisplayName");aA+="<input type='radio' tabindex=\""+an+"\" role='radio' name = '"+ay.GetInputName()+"' value = '"+az.GetProperty("FieldValue")+"' aria-label='"+(aQ?(aQ+" "):"")+ar+"'>"+ar+"<br>"}ax.append(aA);aw=ax=null;break;case W:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);SiebelAppFacade.ControlBuilder.Mvg({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-mvg",scope:this,click:function(aR){this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_MVG"),aR)},control:ay});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case L:SiebelAppFacade.ControlBuilder.EffDat({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-effdat",scope:this,click:function(aR){this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_EFFDAT"),aR)},control:ay});$("[name='"+ay.GetInputName()+"']").attr("tabindex",an);this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case y:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);SiebelAppFacade.ControlBuilder.Pick({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-pick",scope:this,click:function(aR){this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_PICK"),aR)},control:ay});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case H:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);SiebelAppFacade.ControlBuilder.DatePick({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-date",control:ay,scope:this,showPopup:false,click:function(aS,aT){if(!this.GetPM().ExecuteMethod("CanUpdate",$(aT).attr("name"))){return}this.GetPM().SetProperty("isControlPopupOpen",true);var aR=this;SiebelAppFacade.ControlBuilder.DatePick({target:aT,className:"applet-form-date",control:aS,scope:aR,showPopup:true,getISOVal:function(){return am.toISOFormat($(this.target).val(),false)},onClose:function(aV,aU){$(this).datetimepicker("destroy");aR.GetPM().SetProperty("isControlPopupOpen",false);aR.SetFocusToControl(aS.GetName(),true);aR.GetPM().GetProxy().LeaveField(aS,aV,true)}})}});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case f:case Y:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);
SiebelAppFacade.ControlBuilder.DateTimePick({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-datetime",control:ay,scope:this,showPopup:false,click:function(aS,aT){if(!au.GetPM().ExecuteMethod("CanUpdate",$(aT).attr("name"))){return}this.GetPM().SetProperty("isControlPopupOpen",true);var aR=this;SiebelAppFacade.ControlBuilder.DateTimePick({target:aT,className:"applet-form-datetime",control:aS,scope:aR,showPopup:true,getISOVal:function(){return am.toISOFormat($(this.target).val(),true)},onClose:function(aV,aU){$(this).datetimepicker("destroy");aR.GetPM().SetProperty("isControlPopupOpen",false);aR.SetFocusToControl(aS.GetName(),true);aR.GetPM().GetProxy().LeaveField(aS,$(this).val(),true)}})}});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case w:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);SiebelAppFacade.ControlBuilder.Calculator({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-calculator",control:ay,scope:this,click:function(aS,aR){if(!au.GetPM().ExecuteMethod("CanUpdate",aS.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);au.SetControlValue(aS,au.GetPM().ExecuteMethod("GetFieldValue",aS));SiebelAppFacade.ControlBuilder.Calculator({target:aR,className:"applet-form-calculator",control:aS,show:true,close:function(aT){var aU=aT.replace(/\[/g,"").replace(/\]/g,"");au.SetControlValue(aS,aU);$(this).calculator("destroy");$(this).next("img").show();$(this).focus();au.GetPM().SetProperty("isControlPopupOpen",false);au.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),aS)}})}});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case h:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);SiebelAppFacade.ControlBuilder.Currency({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-currency",scope:this,click:function(aR){this.GetPM().OnControlEvent(R.get("PHYEVENT_CURRENCY_POPUP"),aR)},control:ay});this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case z:SiebelAppFacade.ControlBuilder.RTCeditor({target:$("[name='"+ay.GetInputName()+"']"),blur:function(aS,aR){au.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),aS,aR)},focus:function(aS,aR){au.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),aS,aR)},control:ay});$("[name='"+ay.GetInputName()+"']").attr("tabindex",an);this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;case ab:var aD=ay.GetInputName();aw=$("[name="+aD+"]");var aG=aw.attr("value");ax=aw.parent();aw.remove();ap='<div id ="'+aD+'" name ="'+aD+'" class = "siebui-ctrl-sigpad"><canvas class="siebui-ctrl-pad" width="632" height="144"></canvas><p class="siebui-ctrl'+aD+'-clearButton" style="display:none"></p><input class = "'+aD+'" style="display:none"></input></div>';ax.append(ap);if(this.GetPM().ExecuteMethod("CanUpdate",ay.GetName())){$("#"+aD).signaturePad({output:$("."+aD),clear:".siebui-ctrl"+aD+"-clearButton"})}else{try{if(aG===""){aG=this.GetPM().ExecuteMethod("GetFieldValue",ay)}$("#"+aD).signaturePad({displayOnly:true}).regenerate(aG)}catch(aJ){if(aJ.name==="SyntaxError"){if(aG===""||aG.match("Cancelled*")){$("#"+aD).signaturePad({displayOnly:true}).regenerate("[]")}else{$("#"+aD).empty().append("<span>Unexpected Format</span>")}}else{SiebelJS.Log(aJ)}}}this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);aw=ax=null;break;case l:var ap=$("#"+ay.GetInputName());if(ap.length===1){var ao=ay.GetMethodName();var aN=this.GetPM().ExecuteMethod("CanInvokeMethod",ao);var aP=aN?ay.GetEnabledBmp():ay.GetDisabledBmp();if(aP){ap.append('<a href= "javascript:void()" role="link">'+aP+"</a>").addClass(aN?"siebui-link-icon-e":"siebui-link-icon-d");ap.children("a").attr("tabindex",aN?an:"-1")}else{ap.append(F.call(this,ay)).addClass("siebui-ctrl-link")}}this.InjectQTPInfo(ap,ay);ap=null;break;case aa:if(ay.GetMethodName()){var ap=$("#"+ay.GetInputName());ap.append(F.call(this,ay)).addClass("siebui-ctrl-label").attr("tabindex",an);this.InjectQTPInfo(ap,ay);ap=null}break;case J:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);if(ay.GetPopupType()){SiebelAppFacade.ControlBuilder.DetailPopup({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-pick",scope:this,click:function(aR){this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_DETAIL_POPUP"),aR)},control:ay})}else{if(SiebelApp.S_App.CommToolbar){var aI=this.GetPM().ExecuteMethod("GetFieldDataType",ay.GetFieldName());if(aI.toLowerCase()===R.get("SWE_CTRL_PHONE").toLowerCase()){SiebelAppFacade.ControlBuilder.PhoneCtrl({target:$("[name='"+ay.GetInputName()+"']"),className:"applet-form-phone",click:function(aR){if(SiebelApp.S_App.CommToolbar.CallContactFromUIEnabled()){SiebelApp.S_App.CommToolbar.OpenCallContactFromUIPopup(aR.val(),$(this))}},control:ay})}}}this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break;default:$("[name='"+ay.GetInputName()+"']").attr("maxlength",ay.GetMaxSize()||256).attr("tabindex",an);this.InjectQTPInfo($("[name='"+ay.GetInputName()+"']"),ay);break}};function F(an){return'<a  id ="'+an.GetInputName()+'_mb" tabindex ="'+an.GetSeq()+'" href="javascript:void(0)" >'+an.GetDisplayName()+"</a>"}C.prototype.ShowSearch=function(){};C.prototype.BindEvents=function(ap){var an=ap||this.GetPM().Get("GetControls");for(var aq in an){if(an.hasOwnProperty(aq)){this.BindControlEvents(an[aq])}}an=null;$("#s_"+this.GetPM().Get("GetFullId")+"_div").bind("click",{ctx:this},function(at){var ar=at.data.ctx;if(ar&&ar.GetPM()){ar.GetPM().OnControlEvent(R.get("PHYEVENTS_APPLET_FOCUS"))}});$("#s_"+this.GetPM().Get("GetFullId")+"_div").on("click",".siebui-btn-icon-e",{ctx:this},function(au){var ar=au.data.ctx.GetPM().Get("GetControls");var at=this.id;for(var aw in ar){if(ar.hasOwnProperty(aw)){var av=ar[aw];if(av.GetInputName()===at&&av.GetMethodName()!=="NewFileAttachment"){return ah.call(au.data.ctx,av)}}}});$("#s_"+this.GetPM().Get("GetFullId")+"_div").on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(av){var ar=av.data.ctx.GetPM().Get("GetControls");var at=this.id.indexOf("_mb");var au=this.id.substring(0,at);for(var ax in ar){if(ar.hasOwnProperty(ax)){var aw=ar[ax];if(aw.GetInputName()===au){av.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_DRILLDOWN_FORM"),aw)}}}});var ao=this.GetPM().ExecuteMethod("GetControlId");if(ao){$("[name="+ao+"]").bind("change",{ctx:this},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_TOGGLE_TO"),$(this).val())})}};function ah(aq){SiebelApp.S_App.uiStatus.Busy({});var ao={};ao.async=true;ao.cb=function(){var ar=Array.prototype.slice.call(arguments);var at=ar?ar[ar.length-1]:"";if(at!==R.get("SWE_RPC_PROP_NEW_LAYOUT")&&at!==R.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&at!==R.get("SWE_RPC_PROP_NEW_PAGE")){SiebelApp.S_App.uiStatus.Free()}};var ap=aq.GetMethodPropSet();var an=ap.Clone();this.GetPM().OnControlEvent(R.get("PHYEVENT_INVOKE_CONTROL"),aq.GetMethodName(),an,ao)
}C.prototype.IsValidClick=function(an){return(am.IndexOf(["input","button","a"],an.tagName.toLowerCase())===-1)};C.prototype.BindControlEvents=function(ap){if(!n(ap)){return}var aq=$("[name="+ap.GetInputName()+"]");var ao=this.GetPM();if(aq.length===0&&ap.GetControlType()===r&&am.IndexOf([d,T,G],ao.Get("GetMode"))!==-1){var an=ap.GetSpanPrefix()+"0";aq=$("[name="+an+"]")}switch(ap.GetUIType()){case al:case V:if(ap.GetMethodName()==="NewFileAttachment"){return false}else{if(ap.GetMethodName()==="ClearSignature"){$("#"+(ap.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:ap},function(ar){var au=ar.data.ctx.GetPM().Get("GetControls");for(var at in au){if(au[at].GetUIType()==="JInkData"){$(".siebui-ctrl"+au[at].GetInputName()+"-clearButton").trigger("click");$("."+au[at].GetInputName()).attr({value:""});$("#"+au[at].GetInputName()).trigger("vmouseup")}}})}else{$("#"+(ap.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:ap},function(ar){var at=new SiebelApp.UIStatus();setTimeout(function(){ah.call(ar.data.ctx,ar.data.ctrl)},0);ar.preventDefault()})}}break;case q:aq.bind("focus",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ar.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),ar.data.ctrl,$(this).val())}).bind("autocompleteclose",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().SetProperty("isControlPopupOpen",false)});break;case ae:case N:aq.bind("keydown",{ctx:this,ctrl:ap},function(ar){return b.call(ar.data.ctx,$(this),ar,$(this).val())}).bind("focus",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ar.data.ctrl,$(this).val())}).bind("mousedown",{ctx:this},function(ar){if($.browser.webkit){$(this).data("webkit-mousedown",true)}}).bind("blur",{ctx:this,ctrl:ap},function(at){var ar=$(this);if(ar.data("webkit-mousedown")){ar.removeData("webkit-mousedown");return}at.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),at.data.ctrl,ar.val())}).bind("click",{ctx:this,ctrl:ap},function(au){var at=$(this);var ar=at.attr("readonly");if(typeof ar!=="undefined"&&ar!==false){at.prop("checked",!at.prop("checked"))}if(at.attr("type")==="checkbox"){at.val(at.prop("checked")?"Y":"N")}if(at.data("webkit-mousedown")){at.removeData("webkit-mousedown")}if($.browser.webkit){var av=$(document.activeElement);if((at.attr("id")||"")!==(av.attr("id")||"")||(at.attr("name")||"")!==(av.attr("name")||"")){at.focus()}}});break;case l:case aa:if(ap.GetMethodName()){aq=$("#"+ap.GetInputName());aq.bind("click",{ctx:this,ctrl:ap},function(ar){ah.call(ar.data.ctx,ar.data.ctrl)})}break;case ab:aq.bind("mouseup",{ctx:this,ctrl:ap},function(ar){ar.data.ctrl.GetApplet().SetActiveControl(ar.data.ctrl);ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),ar.data.ctrl,$("."+ar.data.ctrl.GetInputName()).attr("value"))});aq.bind("mouseover",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ar.data.ctrl,$("."+ar.data.ctrl.GetInputName()).attr("value"))});break;case H:case f:case Y:aq.bind("keydown",{ctx:this,ctrl:ap},function(ar){var at=$(this).val();at=am.toISOFormat(at,(ar.data.ctrl.GetUIType()!==H))||at;return b.call(ar.data.ctx,$(this),ar,at)});aq.bind("blur",{ctx:this,ctrl:ap},function(ar){var at=$(this).val();at=am.toISOFormat(at,(ar.data.ctrl.GetUIType()!==H))||at;ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),ar.data.ctrl,at)});aq.bind("focus",{ctx:this,ctrl:ap},function(ar){var at=$(this).val();at=am.toISOFormat(at,(ar.data.ctrl.GetUIType()!==H))||at;ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ar.data.ctrl,at)});break;default:aq.bind("keydown",{ctx:this,ctrl:ap},function(ar){return b.call(ar.data.ctx,$(this),ar,$(this).val())});aq.bind("blur",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_CHANGE"),ar.data.ctrl,$(this).val())});aq.bind("focus",{ctx:this,ctrl:ap},function(ar){ar.data.ctx.GetPM().OnControlEvent(R.get("PHYEVENT_VALUE_FOCUS"),ar.data.ctrl,$(this).val())});break}aq=null};function b(ap,aq,at){var an=false;var ao=this.GetPM();if(ap&&ap.length===1&&aq){var ar=aq.data.ctrl;if(ar){switch(aq.which){case $.ui.keyCode.ENTER:an=O.call(this,ap,ar,aq);break;case $.ui.keyCode.ESCAPE:an=D.call(this,ap,ar,aq);break;case $.ui.keyCode.UP:an=B.call(this,ap,ar,aq);break;case $.ui.keyCode.DOWN:an=K.call(this,ap,ar,aq);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:an=k.call(this,ap,ar,aq);break;case $.ui.keyCode.BACKSPACE:an=X.call(this,ap,ar,aq);if(an){aq.preventDefault()}break;case R.get("SWE_F2_KEY"):an=i.call(this,ap,ar,aq);break}}}if(an){aq.stopImmediatePropagation()}}function B(an,ap,ao){switch(ap.GetUIType()){case q:if(ao.ctrlKey||ao.altKey||ao.shiftKey){$(an).autocomplete("option","source",[])}break}return false}function K(an,ap,ao){switch(ap.GetUIType()){case q:if(ao.ctrlKey||ao.altKey||ao.shiftKey){$(an).autocomplete("option","source",[])}else{if(!($(an).autocomplete("widget").is(":visible"))){m.call(this,ap,null);return true}}}return false}function k(ao,aq,ap){var an=false;if(ap.altKey){an=D.call(this,ao,aq,ap)}return an}function O(an,ap,ao){switch(ap.GetUIType()){case a:case S:case ab:case z:case u:case g:case M:case s:case V:return true}return(this.GetPM().OnControlEvent(R.get("PHYEVENT_ENTER_KEY_PRESS"),ap))}function D(an,aq,ao){var ap=this.GetPM().Get("isControlPopupOpen");this.GetPM().OnControlEvent(R.get("PHYEVENT_ESCAPE_KEY_PRESS"),aq);if(this.GetPM().Get("isControlPopupOpen")!==ap){return true}return false}function X(ao,ar,ap){var an=ao.attr("type");if(an==="checkbox"){return true}var aq=this.GetPM().ExecuteMethod("CanUpdate",ar.GetName());if(!aq){return true}else{return false}}function i(an,ap,ao){if(!ao.data.readOnly){$(an).next().click()}return true}function o(){if(this.GetPM().Get("isControlPopupOpen")===false){var ar=this.GetPM().Get("GetActiveControl");if(ar){var aq=$($('input[name="'+ar.GetInputName()+'"]')[0]||$("#"+ar.GetInputName())[0]);switch(ar.GetUIType()){case q:aq.autocomplete("close");break;case H:case f:case Y:aq.datetimepicker("hide");break;case w:aq.calculator("hide");break;case h:var ap=$.data(this,"innerCtrlElem");if(ap&&ap.hasOwnProperty("calc")){var an=$(ap.calc);if(an&&an.size()>0){an.calculator("hide")}}else{if(ap.hasOwnProperty("date")){var ao=$(ap.date);if(ao&&ao.size()>0){ao.datetimepicker("hide")}}}break}}}}C.prototype.BindData=function(){this.ShowSelection()};C.prototype.ShowSelection=function(ap){if(this.inProgress){return false}var ao=!ap?0:ap;var aq=this.GetPM();var an=aq.Get("GetControls");for(var at in an){if(an.hasOwnProperty(at)){var ar=an[at];e.call(this,ar,ap)}}};function e(ap,av){var az=!av?0:av;var ao=this.GetPM();var ay=ao.Get("GetControls");var ax=ao.Get("GetRecordSet");var at=ax[ao.Get("GetSelection")];var au=ao.Get("IsInQueryMode");var ar=ap.GetName();var aq=ap.GetFieldName();var an=ao.ExecuteMethod("IsPrivateField",ar);
if(!am.IsEmpty(aq)||an||!ao.Get("IsPure")){var aw="";if(au||an||!ao.Get("IsPure")){if(!au||!ao.Get("IsPure")){if(av===undefined||av===null){aw=ao.ExecuteMethod("GetFormattedFieldValue",ap,false)}else{aw=ao.ExecuteMethod("GetFormattedFieldValue",ap,true,az)}}else{aw=am.IsEmpty(ax[az][aq])?"":ax[az][aq]}}else{if(av===undefined||av===null){aw=ao.ExecuteMethod("GetFormattedFieldValue",ap,true)}else{aw=ao.ExecuteMethod("GetFormattedFieldValue",ap,true,az)}}if(ao.Get("IsPure")||(!ao.Get("IsPure")&&ap.GetUIType()!==V)){if(av===undefined||av===null){this.EnableControl(ap,ao.ExecuteMethod("CanUpdate",ar));this.SetControlValue(ap,aw)}else{this.EnableControl(ap,ao.ExecuteMethod("CanUpdate",ar),az);this.SetControlValue(ap,aw,az)}}}}function x(aq,aw,ar){var an="";var av=SiebelApp.S_App.GetIconMap();var ap=av[SiebelApp.S_App.LookupStringCache(aq.GetIconMap())];if(ap){for(var at=0;at<ap.length;at++){var ax=$(ap[at].iconImage),ao=aq.GetDisplayName();if(ao){var au=ax.attr("alt");ax.attr("alt",(au?(ao+":"+au):au));au=ax.attr("title");ax.attr("title",(au?(ao+":"+au):au));ax=ax[0].outerHTML}else{ax=ap[at].iconImag}if(!am.IsEmpty(aw)&&ap[at].iconName==aw){return ax}if(ap[at].iconName=="Default"){an=ax}}if(!am.IsEmpty(an)){return an}}return""}function ai(ao,ap,an,ar,aq){if(an){if(ao.next("."+ap).length===1){ao.next("."+ap).html(an)}else{ao.after("<span class='"+ap+"'>"+an+"</span>")}ao.next("."+ap).show()}else{ao.next("."+ap).hide()}if(ar||(!ar&&am.IsEmpty(aq))){ao.val(aq).show()}else{ao.hide()}}C.prototype.SetControlValue=function(au,az,aw){if(!n(au)){return}var aA=!aw?0:aw;var ar=this.GetPM();var ao="";var ay=this.GetPM().ExecuteMethod("CanUpdate",au.GetName());var av=$("#"+au.GetInputName())[aA]||$("[name="+au.GetInputName()+"]")[aA];av=$(av);if(au.GetShowBase()&&au.GetUIType()!=="checkBoxCtrl"){ao=x.call(this,au,az,av)}var ax=this.GetPM().ExecuteMethod("CanNavigate",au.GetName());if(ax&&!ay&&au.GetUIType()!==W&&!am.IsEmpty(az)){setTimeout(function(){var aB='<a  id ="'+au.GetInputName()+'_mb"  class = "siebui-ctrl-drilldown"  name = "'+au.GetName()+'"  rowId = "'+(aA+1)+'"  href="javascript:void(0)" >'+HtmlEncode(az)+"</a>";if(av.next(":not(br,img)").length===1){if(av.next(":not(br,img)").attr("id")!==au.GetInputName()+"_mb"||av.next(":not(br,img)").html()!==az){av.next(":not(br,img)").html(aB)}}else{av.after(aB)}av.next().show();av.hide();av.nextAll("img#"+av.attr("name")+"_icon").hide();av=null},5);return}else{if(ax&&ay){av.val(az).show();av.nextAll("a#"+av.attr("name")+"_mb").hide();av.nextAll("img#"+av.attr("name")+"_icon").show()}}switch(au.GetUIType()){case af:if(am.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){if($("#"+au.GetInputName()+"_Label").length===1){av=$("#"+au.GetInputName()+"_Label")}}if(!am.IsEmpty(ao)){av.html(ao)}else{if(am.IsTrue(au.IsEncode())){am.IsEmpty(az)?av.html(""):av.html(HtmlEncode(az))}else{am.IsEmpty(az)?av.html(""):av.html(az)}}break;case N:av.val(az);if(av.prop("checked")!==am.IsTrue(az)){av.prop("checked",am.IsTrue(az))}break;case ae:$("[name="+au.GetInputName()+"]").filter('[value="'+az+'"]').attr("checked",true);break;case z:if($(av).length>0){$(av).ckeditor(function(){var aC=az;var aB=this;setTimeout(function(){aB.setData(aC)},2);av=null})}break;case S:var at="";var an=HtmlEncode(az);if(typeof(az)==="string"){if((an.indexOf("http://")!=0)&&(an.indexOf("https://")!=0)){an="http://"+an}}if(!ay&&!am.IsEmpty(az)){at="<a href='"+an+"' target='_blank' >"+an+"</a>"}else{if(ao){at="<a href='"+an+"' target='_blank' >"+ao+"</a>"}}if(au.GetName()==="BookmarkURL"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){var aq=av.replaceWith('<textarea name="'+au.GetInputName()+'" readonly="readonly" rows="3" cols="150" value=\''+az+"'>"+az+"</textarea>")}else{ai.call(this,av,"siebui-ctrl-url",at,ay,az)}break;case Z:var ap="";az=HtmlEncode(az);if(!ay&&!am.IsEmpty(az)){ap='<a href="mailto:'+az+'">'+az+"</a>"}else{if(ao){ap='<a href="mailto:'+az+'">'+ao+"</a>"}}ai.call(this,av,"siebui-ctrl-mail",ap,ay,az);break;case E:am.IsEmpty(az)?av.html(""):av.html('<a role="img" tabindex="0" >'+az+"<a>");break;case ak:am.IsEmpty(az)?av.html(""):av.replaceWith(az);break;default:if(U.test(ar.GetPMName())){av.replaceWith('<div role="document" tabindex="0" title="'+az+'" name="'+av.attr("name")+'" aria-label="'+au.GetDisplayName()+'">'+az+"</div>")}else{am.IsEmpty(az)?av.attr("value",""):av.attr("value",az)}break}};C.prototype.EnableControl=function(at,ar,ao){var ap;if(!n(at)){return}ao=!ao?0:ao;if(at.GetUIType()===V){var an=at.GetEnabledBmp();var aq=at.GetDisabledBmp();if(an||aq){var au=ar?an:aq;var ap=$("#"+at.GetInputName());if(au){ap.removeClass("siebui-btn-icon-e siebui-btn-icon-d").addClass(ar?"siebui-btn-icon-e":"siebui-btn-icon-d").find("a").attr("tabindex",ar?"0":"-1").html(au)}}else{$("#"+(at.GetInputName()+"_Ctrl")).removeAttr("disabled").attr("disabled",!ar);$("#"+(at.GetInputName()+"_Ctrl")).removeClass("appletButton appletButtonDis").addClass((ar?"appletButton":"appletButtonDis"))}}else{if(at.GetUIType()===z){ap=$("#"+at.GetInputName())[ao]||$("[name="+at.GetInputName()+"]")[ao];if($(ap).length>0&&CKEDITOR.instances[at.GetInputName()]){CKEDITOR.instances[at.GetInputName()].setReadOnly(!ar)}}else{ap=$("#"+at.GetInputName())[ao]||$("[name="+at.GetInputName()+"]")[ao];$(ap).removeAttr("readOnly").attr("readOnly",!ar).attr("aria-readonly",!ar)}}};C.prototype.UpdateUIControls=function(an){var an=this.GetPM().Get("GetControls");for(var ap in an){if(an.hasOwnProperty(ap)){var ao=an[ap];var aq=ao.GetFieldName();if(!am.IsEmpty(aq)){this.EnableControl(ao,this.GetPM().ExecuteMethod("CanUpdate",ao.GetName()))}}}};C.prototype.UpdateUIButtons=function(){var an=this.GetPM().Get("GetControls");for(var aq in an){if(an.hasOwnProperty(aq)){var ap=an[aq];if(ap.GetUIType()===V){var ao=ap.GetDisplayName();var ar=this.GetPM().ExecuteMethod("CanInvokeMethod",ap.GetMethodName());this.EnableControl(ap,ar)}}}};C.prototype.FocusFirstControl=function(){var ao=this.GetPM().Get("GetControls");var an=9999;this.SetFirstControl(null);for(var ar in ao){var aq=ao[ar];var at=aq.GetFieldName();if(!am.IsEmpty(at)){if(aq.GetIndex()&&aq.GetIndex()<an){var ap=false;if(this.GetPM().Get("IsInQueryMode")===false){ap=this.GetPM().ExecuteMethod("CanUpdate",ar)}else{ap=true}if(ap&&!am.IsEmpty(aq.GetUIType())&&(aq.isBasicControl()||aq.GetUIType()[0]==="J"||aq.GetUIType()===W||aq.GetUIType()===y)){an=aq.GetIndex();this.SetFirstControl($("#"+aq.GetInputName())[0]||$("[name="+aq.GetInputName()+"]")[0]);break}}}}if(this.GetFirstControl()!=null){this.GetFirstControl().focus();return}this.FocusFirstNonEditableControl()};C.prototype.FocusFirstNonEditableControl=function(){var ao=this.GetPM().Get("GetControls");var an=9999;var ar;for(var aq in ao){var ap=ao[aq];if(ap.GetIndex()<an&&(!am.IsEmpty(ap.GetUIType())&&ap.GetUIType()!=="Button"&&ap.GetUIType()!=="Label")){this.SetFirstControl($("#"+ap.GetInputName())[0]||$("[name="+ap.GetInputName()+"]")[0]);break}}ar=this.GetFirstControl();if(ar&&$(ar).length>0){$(ar).focus()
}};C.prototype.SetFocusToControl=function(ap,ao){var an=this.GetPM().Get("GetControls");var aq=null;for(var at in an){var ar=an[at];if(ap==at){if(!am.IsEmpty(ar.GetMethodName())){aq=$("#"+(ar.GetInputName()+"_Ctrl"))}else{aq=$("#"+ar.GetInputName())[0]||$("[name="+ar.GetInputName()+"]")[0]}if(ao){$(aq).focus()}else{$(aq).blur()}return true}}};C.prototype.SetHighlightState=function(ao,ap){var an=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));if(ao){an.addClass("Selected siebui-applet-active").removeClass("NotSelected siebui-applet-nonactive")}else{an.removeClass("Selected siebui-applet-active").addClass("NotSelected siebui-applet-nonactive")}};function c(){var an=$("#s_"+this.GetPM().Get("GetFullId")+"_div");an=an.find("#a_"+this.GetPM().Get("GetId"))[0]||an;$(an).attr("tabindex",0).focus()}function n(an){return(typeof(an.GetInputName)==="function")}function Q(aq,ap,ao){var an=this.GetPM().ExecuteMethod("NewFileAttachment");var ar=R.get("SWE_PROP_SESSION_RANDOM_NUMBER")+"="+SiebelApp.S_App.GetSRN();$(ao).fileupload("option","formData",an);$(ao).fileupload("option","url",SiebelApp.S_App.GetPageURL()+R.get("SWE_ARG_START")+ar)}function ac(ap,ao){var an;if(ao.dataType==="iframe "){an=$(ao.result).find("body").html()}else{an=ao.result}if(!am.IsEmpty(an)){SiebelApp.S_App.ProcessResponse(an);if(this.GetPM()){this.FocusFirstControl()}}}function A(ao,an){}C.prototype.InjectQTPInfo=function(ao,an){if((ao.length!=0)&&(an!=undefined)){if(typeof(an.GetObjectType)=="function"){$(ao).attr("ot",an.GetObjectType())}if(typeof(an.GetRepstrName)=="function"){$(ao).attr("rn",an.GetRepstrName())}if(typeof(an.GetUIName)=="function"){$(ao).attr("un",an.GetUIName())}}};C.prototype.ShowPopup=function(an){switch(an.GetUIType()){case w:case f:case H:case Y:case q:$("[name='"+an.GetInputName()+"']").next().click();break}return};C.prototype.GetPhysicalControlValue=function(ap){var ao,an;if(ap){this.GetPM().AddProperty("PhysicalCtrlVal",an);ao=$("[name='"+ap.GetInputName()+"']");an=ao.val()||"";switch(ap.GetUIType()){case H:case f:case Y:an=am.toISOFormat(am.Trim(an),(ap.GetUIType()!==H))||an;break;case ae:an=ao.filter(":checked").val()||"";break}this.GetPM().AddProperty("PhysicalCtrlVal",an)}};function j(){var ap=this.GetPM();var an=ap.Get("GetControls");var aq=ap.Get("IsInQueryMode");ap.ExecuteMethod("SetUpdateConditionals",false);for(var au in an){var at=an[au];var ar=at.GetMethodName();var ao=$("#"+(at.GetInputName()+"_Ctrl"))[0]||$("#"+at.GetInputName())[0];if($(ao).length===0&&am.IsEmpty(at.GetFieldName())){ao=$('[name="'+at.GetInputName()+'"]')[0]}ao=$(ao);if((au==="PopupQueryCombobox")||(au==="PopupQuerySrchspec")||(au==="PopupQueryExecute")){if(aq){ao.attr("disabled","disabled");if(au==="PopupQueryExecute"){if(ao.hasClass("appletButton")){ao.removeClass("appletButton")}ao.addClass("appletButtonDis")}}else{if(ao.attr("disabled")){ao.removeAttr("disabled");if(au==="disabled"){if(ao.hasClass("appletButtonDis")){ao.removeClass("appletButtonDis")}ao.addClass("appletButton")}}}continue}else{if(au==="QueryAssistant"){if(aq){if(ao.attr("disabled")){ao.removeAttr("disabled");if(ao.hasClass("appletButtonDis")){ao.removeClass("appletButtonDis")}ao.addClass("appletButton")}ao.next().hide()}else{ao.attr("disabled","disabled");if(ao.hasClass("appletButton")){ao.removeClass("appletButton")}ao.addClass("appletButtonDis");ao.next().show()}}}if((!aq&&am.IndexOf(["UndoQuery","ExecuteQuery","ShowQueryAssistant"],ar)!==-1)||(aq&&am.IndexOf(["NewQuery","ToggleListRowCount"],ar)!==-1)){$(ao).hide()}else{if(!am.IsEmpty(ar)&&ap.ExecuteMethod("CanInvokeMethod",ar)){ao.show()}else{if(aq&&am.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],ar)===-1){ao.hide()}else{ao.show()}}}}}function ag(){var an=this.GetPM().Get("GetControls");for(var aq in an){if(an.hasOwnProperty(aq)){var ap=an[aq];var aq=ap.GetInputName();var ao=$("#"+aq)[0]||$("input[name="+aq+"]")[0]||$("textarea[name="+aq+"]")[0];if(ao){$(ao).removeAttr("maxLength")}}}}function v(){var an=this.GetPM().Get("GetControls");for(var aq in an){if(an.hasOwnProperty(aq)){var ap=an[aq];var aq=ap.GetInputName();var ao=$("#"+aq)[0]||$("input[name="+aq+"]")[0]||$("textarea[name="+aq+"]")[0];if(ao){$(ao).attr("maxlength",ap.GetMaxSize()||256)}}}}function t(){var aq=this.GetPM();var ao=aq.ExecuteMethod("GetWSStartRowNum");var ar=Number(aq.Get("GetRowListRowCount"));var at=(ar>1)?R.get("SWE_ROW_COUNTER_LIST"):R.get("SWE_ROW_COUNTER_FORM");var an=[];var av;var au;var aw;if(ao===0){au=SiebelApp.S_App.GetRowCounterTemplateMap(R.get("SWE_ROW_COUNTER_NO_RECORDS"))}else{if(ao>0){an.push(ao);if(ar>1){an.push(Number(aq.Get("GetWSEndRowNum")))}an.push(Number(aq.Get("GetNumRows")));av=at+(aq.Get("IsNumRowsKnown")?R.get("SWE_ROW_COUNTER_TOTAL_KNOWN"):R.get("SWE_ROW_COUNTER_TOTAL_UNKNOWN"));au=SiebelApp.S_App.GetRowCounterTemplateMap(av)}else{if(ao<0&&ao>=-1*ar){if(ar>1){an.push(Number(-1*ao))}av=at+R.get("SWE_ROW_COUNTER_LAST_RECORD");au=SiebelApp.S_App.GetRowCounterTemplateMap(av)}else{an.push(Number((-1-ao)));if(ar>1){an.push(Number(-1-Number(aq.Get("GetWSEndRowNum"))))}av=at+R.get("SWE_ROW_COUNTER_FROM_LAST");au=SiebelApp.S_App.GetRowCounterTemplateMap(av)}}}aw=am.FormatString(au,an);var ap=$("#s_"+aq.Get("GetId")+"_rc");ap.addClass("siebui-row-counter").text(aw)}return C}())}if(typeof(SiebelAppFacade.PopupRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PopupRenderer");SiebelAppFacade.PopupRenderer=(function(){var g=SiebelJS.Dependency("SiebelApp.Utils");var e=SiebelJS.Dependency("SiebelApp.Constants");var a=Number(e.get("DEFAULT_POPUP_WIDTH"));var d=Number(e.get("DEFAULT_POPUP_HEIGHT"));function b(l){var k=l;this.GetPM=function(){return k};this.GetPM().AttachPMBinding("state",f,{scope:this});this.GetPM().AttachPMBinding("url",c,{scope:this});this.GetPM().AttachPMBinding("content",h,{scope:this});this.GetPM().AttachPMBinding("OnLoadPopupContent",j,{scope:this});this.GetPM().AttachPMBinding("OnLoadPopupContent",i,{scope:this});this.GetPM().AttachPMBinding("StandAlonePopup",this.ProcessStandAlonePopup,{scope:this})}function c(){SiebelApp.contentUpdater.AddCallBack(this.GetPM().Get("url"),function(){this.ExecuteMethod("OnLoadPopupContent")},this.GetPM());var k=$("[name=popup]");if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Call GetLayout")}k.attr("src",this.GetPM().Get("url"));k=null;setTimeout(function(){SiebelApp.contentUpdater.loadContent(true)},1)}function h(){SiebelApp.S_App.uiStatus.Free();$("[name=popup]").children().remove();$("[name=popup]").addClass("minWidthContainer");$("[name=popup]").dialog("open");$("[name=popup]").html("");$("[name=popup]").append(this.GetPM().Get("content"))}function f(){var l=this.GetPM().Get("state");var m=this.GetPM().Get("isCurrencyOpen");var k=true;if(m){k=false}if(l==e.get("POPUP_STATE_HIDDEN")){if(SiebelApp.S_App.IsMobileApplication()==="false"){$("[name=popup]").dialog("close")}$("[name=popup]").children().remove();
$("[class*=ui-dialog-buttonpane]").children().remove();this.GetPM().SetProperty("isCurrencyOpen",false)}else{if(l==e.get("POPUP_STATE_VISIBLE")){if(SiebelApp.S_App.IsMobileApplication()==="false"){$("div[name=popup]").dialog("open");$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").show();$("div[name=popup]").dialog("option","height","auto").dialog("option","width","auto").dialog("option","resizable",k).dialog("option","minWidth",a).dialog("option","minHeight",d);$("div[name=popup]").dialog("option","position","center");j.call(this);SiebelApp.S_App.uiStatus.LocalBusy({mask:true})}}}}function i(){var k=Number(this.GetPM().Get("width"))||0;var l=false;var m=$("div[name=popup]");if(m.find("div.ui-jqgrid").length>0){if(k===a){k*=2}m.width(k);$(window).resize()}else{if(k<a){m.width(a)}else{l=true}}if(l){setTimeout(function(){$("div[name=popup]").width($("div[name=popup]").width()).dialog("option","position","center")},3)}else{m.dialog("option","position","center")}m=null}function j(){if(this.GetPM().Get("currPopups")&&this.GetPM().Get("currPopups")[0]){$("[name='popup']").dialog("option","title",SiebelApp.S_App.LookupStringCache(this.GetPM().Get("currPopups")[0].GetTitle()))}else{$("[name='popup']").dialog("option","title","")}}b.prototype.BindData=function(){};b.prototype.ShowUI=function(){if($("[name=popup]").length===0){var k=$('<div name="popup"></div>');SiebelApp.S_App.GetTargetViewContainer().append(k);SiebelApp.S_App.uiStatus.LocalBusy({target:"[name=popup]",mask:false});if(SiebelApp.S_App.IsMobileApplication()==="false"){$("[name=popup]").dialog({position:"center",modal:true,autoOpen:false,closeOnEscape:false});$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").removeAttr("role")}}};b.prototype.BindEvents=function(){var k=this.GetPM();if(SiebelApp.S_App.IsMobileApplication()==="false"){$("[class*=ui-dialog-titlebar-close]").bind("click",function(l){k.OnControlEvent("ClosePopupByX",l)})}};b.prototype.ProcessStandAlonePopup=function(m,k){var l=window.open(m,"subWind",k)};return b})()};