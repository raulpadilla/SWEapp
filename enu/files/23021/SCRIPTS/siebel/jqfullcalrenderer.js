if(typeof(SiebelAppFacade.JQFullCalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.JQFullCalRenderer");if(typeof(SiebelApp)!=="undefined"&&typeof(SiebelApp.S_App)!=="undefined"){if(typeof(SiebelApp.Constants)!=="undefined"){SiebelApp.S_App.RegisterConstructorAgainstKey(SiebelApp.Constants.get("SWE_UIDEF_CALAPPLET_PRENDR"),"SiebelAppFacade.JQFullCalRenderer")}}SiebelAppFacade.JQFullCalRenderer=(function(){function f(j){SiebelAppFacade.JQFullCalRenderer.superclass.constructor.call(this,j);var p=$();var n=true;var i=this.GetPM();var l={};var k={};var m={};var o={};this.GetCal=function(){return p};this.SetCal=function(q){p=q};this.GetLocaleConverter=function(){return l};this.SetLocaleConverter=function(q){l=q};this.GetUtilityMap=function(){return k};this.SetUtilityMap=function(q){k=q};this.GetCalCtrlBuilder=function(){return m};this.SetCalCtrlBuilder=function(q){m=q};this.GetEventHandlerMap=function(){return o};this.SetEventHandlerMap=function(q){o=q};this.SetDefaultView=function(){if(!i.Get("ViewMode")){var r=i.Get("Default Calendar Mode");var q;switch(r){case"Monthly":q="2";break;case"Weekly":q="1";break;case"Daily":q="0";break;default:q="0";break}i.AddProperty("ViewMode",q)}};i.AttachPMBinding("ParseEventInfoOUI",function(){i.AddProperty("SelectedDate",$.fullCalendar.parseDate(i.Get("ReturnStartDate")));i.AddProperty("ReturnStartDate","")},{scope:this,when:function(){return i.Get("ReturnStartDate")&&(i.Get("ReturnStartDate")!=="")}});i.AttachPMBinding("ParseEventInfoOUI",function(){n=false;if(i.Get("SelectedDate")&&(i.Get("SelectedDate")>p.fullCalendar("getDate")||i.Get("SelectedDate")<p.fullCalendar("getDate"))){p.fullCalendar("gotoDate",i.Get("SelectedDate"))}if(i.Get("ViewMode")&&i.Get("ViewMode")!==k.ViewNameToMode(p.fullCalendar("getView").name)){p.fullCalendar("changeView",k.ViewModeToName(i.Get("ViewMode")))}},{scope:this,when:function(){return n}});i.AttachPMBinding("ParseEventInfoOUI",function(){this.BindData()},{scope:this})}SiebelJS.Extend(f,SiebelAppFacade.PhysicalRenderer);function a(){var i=this.GetPM();i.AddProperty("EnableProportionalRender",true);$("#"+i.Get("GetFullId")).css("overflow-x","auto");this.SetDefaultView();this.SetCal($("#calendar_"+this.GetPM().Get("GetPlaceholder")));this.SetLocaleConverter(new SiebelAppFacade.CalLocaleConverter());this.SetUtilityMap(new SiebelAppFacade.CalUtility());this.SetCalCtrlBuilder(new SiebelAppFacade.CalCtrlBuilder(i,this.GetCal(),this.GetUtilityMap()));this.SetEventHandlerMap(new SiebelAppFacade.CalEventHandlers(i,this.GetCal(),this.GetCalCtrlBuilder(),this.GetUtilityMap()))}f.prototype.BindEvents=function(i){$(window).bind("resize.JQFullCalRenderer",{ctx:this},function(j){j.data.ctx.resize()});$("#openSidebarButton").bind("click.JQFullCalRenderer",{ctx:this},function(j){j.data.ctx.resize()});$("#sidebarCloseButton").bind("click.JQFullCalRenderer",{ctx:this},function(j){j.data.ctx.resize()})};function e(){var o=this.GetPM();var q=o.Get("Start Day of the Week");var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var m=$.inArray(q,n);var p=[o.Get("Sunday Workday Flag"),o.Get("Monday Workday Flag"),o.Get("Tuesday Workday Flag"),o.Get("Wednesday Workday Flag"),o.Get("Thursday Workday Flag"),o.Get("Friday Workday Flag"),o.Get("Saturday Workday Flag")];var r=[];if(typeof q==="undefined"||m===-1){m=parseInt(o.Get("First Day of Week"),10)}o.AddProperty("Week Day Number",m);for(var l=0;l<p.length;l++){if(typeof p[l]==="undefined"){r=[];for(var k=m;k<m+5;k++){r.push(k)}break}else{if(p[l]==="Y"||p[l]==="1"){r.push(l)}}}o.AddProperty("Custom Week",r)}f.prototype.ShowUI=function(){SiebelAppFacade.JQFullCalRenderer.superclass.ShowUI.call(this);var j=this.GetPM();var o=this;a.call(this);e.call(this);var p=this.GetCal();var i=this.GetEventHandlerMap();var k;var m;var l;if(j.Get("RTL Mode")==="Y"){k={left:"",center:"next title prev today",right:""};m={today:j.Get("UISTR Today Button"),month:j.Get("UISTR Monthly Tab"),week:j.Get("UISTR Weekly Tab"),day:j.Get("UISTR Daily Tab"),prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"};l={prev:"circle-triangle-e",next:"circle-triangle-w"}}else{k={left:"",center:"today prev title next",right:""};m={today:j.Get("UISTR Today Button"),month:j.Get("UISTR Monthly Tab"),week:j.Get("UISTR Weekly Tab"),day:j.Get("UISTR Daily Tab")}}var n={allDaySlot:true,allDayText:"",axisFormat:"h(:mm)tt",buttonText:m,buttonIcons:l,columnFormat:{month:"dddd",week:"ddd M/d",day:"dddd M/d"},contentHeight:500,customWeek:j.Get("Custom Week"),dayClick:function(){i.OnDayClick.apply(i,arguments)},dayNames:j.Get("WeekDayStringArray"),defaultView:this.GetUtilityMap().ViewModeToName(j.Get("ViewMode")),droppable:true,editable:j.Get("CanUpdate"),eventAfterRender:function(){i.OnEventAfterRender.apply(i,arguments)},eventClick:function(){i.OnEventClick.apply(i,arguments)},eventDrop:function(){i.OnEventDrop.apply(i,arguments)},eventRender:function(){i.OnEventRender.apply(i,arguments)},eventResize:function(){i.OnEventResize.apply(i,arguments)},events:function(){i.OnEventRefresh.apply(i,arguments)},firstDay:{month:j.Get("Week Day Number"),agendaWeek:j.Get("Week Day Number")},firstHour:j.Get("Preferred Business Day Start Time").substr(0,2),header:k,isRTL:j.Get("RTL Mode")==="Y",lazyFetching:false,longDateFormat:j.Get("Long Date Format"),monthNames:j.Get("MonthStringArray"),resizable:true,resizeLabel:"",select:function(){i.OnCalSelect.apply(i,arguments)},selectable:true,selectHelper:true,slotMinutes:parseInt(j.Get("Preferred Timeslot Interval"),10),timeFormat:{agenda:"","":"h(:mm)t"},titleFormat:{month:"MMMM yyyy",week:"<'&#8212;'>",day:j.Get("Long Date Format")},viewDisplay:function(){i.OnViewDisplayChange.apply(i,arguments)},weekends:{month:true,agendaWeek:j.Get("Preferred Weekly Mode")==="7 Day Weekly",agendaDay:true},weekMode:"variable"};var q=this.GetLocaleConverter().ConvertLocale(n);n=$.extend(true,{},n,q);this.GetCal().fullCalendar(n);h.call(this)};function h(){var k=this.GetPM();var l=k.Get("UISTR Go to Today")||"Go to Today";var i;var j;var n;var m;if(k.Get("RTL Mode")!=="Y"){i=k.Get("UISTR Next Day")||"Next Day";j=k.Get("UISTR Previous Day")||"Previous Day"}else{j=k.Get("UISTR Next Day")||"Next Day";i=k.Get("UISTR Previous Day")||"Previous Day";n=$(".fc-button-next");m=$(".fc-button-prev");n.removeClass("fc-button-next");n.addClass("fc-button-prev");m.removeClass("fc-button-prev");m.addClass("fc-button-next")}$(".fc-button-today").attr("title",l);$(".fc-button-next").attr("title",i);$(".fc-button-prev").attr("title",j);this.GetCalCtrlBuilder().AddControls();k.AddProperty("MultViewFrames",$("#_swecontent").find("[id^='_svf']").filter(function(){return this.clientHeight!==0}).length);this.resize()}f.prototype.resize=function(){var i=this.GetPM();$("#"+i.Get("GetFullId")).width(0);$("#"+i.Get("GetFullId")).width($("#"+i.Get("GetFullId")).parent().width());$(".fc-content").css("width",$(".fc-header").width());if(i.Get("MultViewFrames")===1){if($(window).height()!==i.Get("WindowHeight")||$(window).width()!==i.Get("WindowWidth")){i.AddProperty("WindowHeight",$(window).height());
i.AddProperty("WindowWidth",$(window).width());this.GetCal().fullCalendar("option","contentHeight",($("#_swecontent").height()*0.9)-$(".fc-header").height())}}};f.prototype.EndLife=function(){$(window).unbind("resize.JQFullCalRenderer");$("#openSidebarButton").unbind("click.JQFullCalRenderer");$("#sidebarCloseButton").unbind("click.JQFullCalRenderer");this.GetCal().fullCalendar("destroy");this.SetCal(null);this.SetLocaleConverter(null);this.SetUtilityMap(null);this.SetCalCtrlBuilder(null);this.SetEventHandlerMap(null);SiebelAppFacade.JQFullCalRenderer.superclass.EndLife.call(this)};f.prototype.BindData=function(){var l=[];var E=this.GetPM();var B=[];var q=[];var y=this.GetCal();if(this.inProgress){return[]}var m=E.Get("EventInfo");if(this.GetCal()&&m){for(var D=0;D<m.length;D++){var t=m[D];var C=[];var u=[];var p=[];var o;var v;for(var A=0;A<t.DisplayField.length;A++){v=t.DisplayField[A];if((v.Name!=="Readonly"||!E.Get("CanUpdate"))&&(v.FieldValue===""&&v.IconFile!=="")){C.push(v.IconFile);u.push(v.ToolTip)}if(v.FieldValue===""){continue}o=parseInt(v.Sequence,10);p[o]=A}var s=[];var F;for(var z=1;z<p.length;z++){F=[];v=t.DisplayField[p[z]];F.FieldValue=v.FieldValue;F.ToolTip=v.ToolTip;F.DrillDown=v.DrillDown;F.FieldColor=v.FieldColor;F.CSSName=(this.GetUtilityMap().IsAllDayEvent(t))?"calendar-DisplayField-AllDayEventFont":"calendar-DisplayField-Font"+z.toString();s.push(F)}var x=t.EventStyle.replace(/\s/g,"");if(typeof t.EventStyle!=="undefined"){if($.inArray(t.EventLegend,B)<0){B.push(t.EventLegend)}if(typeof q[t.EventLegend]==="undefined"){q[t.EventLegend]=x}}var r=this.GetUtilityMap().IsAllDayEvent(t);if(t.Planned===t.PlannedCompletion){var n=$.fullCalendar.parseDate(t.Planned);var w=parseInt(E.Get("Preferred Timeslot Interval"),10);n.setMinutes(n.getMinutes()+w);t.PlannedCompletion=$.fullCalendar.formatDate(n,"MM/dd/yyyy HH:mm:ss");if(t.Buscomp==="Action"){r=false}}l.push({id:t.Id,title:"",start:t.Planned,end:t.PlannedCompletion,multiDisplay:s,displayFieldOne:t.DisplayField[p[1]].FieldValue,url:t.DisplayField[p[1]].DrillDown,repeating:t.Repeating,calendarId:t.CalendarId,readOnly:t.ReadOnly,icons:C,iconText:u,className:"calendar-EventStyle-"+x,allDay:r,editable:E.Get("CanUpdate")})}}y.fullCalendar("removeEvents");y.fullCalendar("addEventSource",l);c.call(this,l);E.AddProperty("CSSLegendsLDC",B);E.AddProperty("CSSLegendsLIC",q)};function g(){var n=this.GetPM();var r=this.GetCal();var u=r.fullCalendar("getView");var v=parseInt(n.Get("Preferred Timeslot Interval"),10);if(v===0){return}var t=Math.floor(60/v);var k=[];var l={};var m=Math.floor((u.end.valueOf()-u.start.valueOf())/(24*60*60*1000));var s=n.Get("Custom Week");var q=-1;var p,o;for(p=0;p<m;p++){if(s&&!r.fullCalendar("option","weekends")[u.name]){if($.inArray((u.start.getDay()+p)%7,s)===-1){continue}else{q+=1}}else{q=p}l[(u.start.getDay()+p)%7]=q;k[q]=[];for(o=0;o<t*24;o++){k[q].push({events:{},horzPos:62})}}return{bucket:k,dayToColumnMap:l}}function d(m,E,s){var B=this.GetPM();var C=this.GetUtilityMap();var v=this.GetCal().fullCalendar("getView");var t,w;var x,q;var o,n;var A,z,y;var r=[];var l=parseInt(B.Get("Preferred Timeslot Interval"),10);if(l===0){return}var D=Math.floor(60/l);for(A=0;A<m.length;A++){t=m[A];x=C.HourDecimal(t.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+t.start.getMinutes());q=C.HourDecimal(t.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+t.end.getMinutes());o=parseInt(x*D,10)<0?0:parseInt(x*D,10);n=parseInt(q*D,10)>D*24?D*24:parseInt(q*D,10);if(o===n){n+=1}if(!C.SameDay(t.start,t.end)){var p=new Date(t.start.valueOf());if(p<=v.start){p=new Date(v.start.valueOf())}p.setHours(0,0,0,0);var u=Math.min(t.end,v.end);r[t.id]={daysSpanned:0,daysCounted:0};for(z=p;z<=u;z.setDate(z.getDate()+1)){if(typeof(s[z.getDay()])==="undefined"){continue}r[t.id].daysSpanned+=1;w=E[s[z.getDay()]];for(y=0;y<D*24;y++){if(y<o&&C.SameDay(z,t.start)){continue}if(y>=n&&C.SameDay(z,t.end)&&y!==0){break}w[y].events[t.id]=0}}}else{if(typeof(s[t.start.getDay()])==="undefined"){continue}w=E[s[t.start.getDay()]];for(z=o;z<n;z++){w[z].events[t.id]=0}}}B.AddProperty("MultiDayCounter",r)}function b(n,G,t){var E=this.GetUtilityMap();var w=this.GetCal().fullCalendar("getView");var u,y;var z,r;var p,o;var C,s;var D,B,A;var l=parseInt(this.GetPM().Get("Preferred Timeslot Interval"),10);if(l===0){return}var F=Math.floor(60/l);for(D=0;D<n.length;D++){u=n[D];z=E.HourDecimal(u.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+u.start.getMinutes());r=E.HourDecimal(u.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+u.end.getMinutes());p=parseInt(z*F,10)<0?0:parseInt(z*F,10);o=parseInt(r*F,10)>F*24?F*24:parseInt(r*F,10);if(p===o){o+=1}if(!E.SameDay(u.start,u.end)){var q=new Date(u.start.valueOf());if(q<=w.start){q=new Date(w.start.valueOf())}q.setHours(0,0,0,0);var v=Math.min(u.end,w.end);var x;var m;for(B=q;B<=v;B.setDate(B.getDate()+1)){if(typeof(t[B.getDay()])==="undefined"){continue}if(E.SameDay(B,u.start)){C=p;x=p;m=F*24}else{if(E.SameDay(B,u.end)){C=0;x=0;if(o===x){m=o+1}else{m=o}}else{C=0;x=0;m=F*24}}y=G[t[B.getDay()]];s=E.GetObjectSize(y[C].events);for(A=x;A<m;A++){if(E.GetObjectSize(y[A].events)>s){C=A;s=E.GetObjectSize(y[C].events)}}for(A=x;A<m;A++){y[A].events[n[D].id]={maxSlot:C,maxSlotSize:s}}}}else{if(typeof(t[u.start.getDay()])==="undefined"){continue}C=p;y=G[t[u.start.getDay()]];s=E.GetObjectSize(y[C].events);for(B=p;B<o;B++){if(E.GetObjectSize(y[B].events)>s){C=B;s=E.GetObjectSize(y[C].events)}}for(B=p;B<o;B++){y[B].events[n[D].id]={maxSlot:C,maxSlotSize:s}}}}}function c(l){var k=this.GetPM();var j=this.GetCal().fullCalendar("getView");if(k.Get("EnableProportionalRender")&&(j.name==="agendaWeek"||j.name==="agendaDay")){var m=g.call(this);var n=m.bucket;var i=m.dayToColumnMap;l.sort(this.GetUtilityMap().EventSortOrder);d.call(this,l,n,i);b.call(this,l,n,i);k.AddProperty("DayToColumnMap",i);k.AddProperty("TimeslotBucket",n)}}return f}());SiebelAppFacade.CalCtrlEventHandlers=(function(){function a(d,c,e,g){var b=d;var i=c;var f=e;var h=g;this.GetPM=function(){return b};this.GetCal=function(){return i};this.GetCalCtrlBuilder=function(){return f};this.GetUtilityMap=function(){return h}}a.prototype={OnCancelClick:function(b){$("#"+b).dialog("close")},OnDatepickerSelect:function(e){var c=this.GetCal();var b=this.GetPM();var d=$("#"+e).datepicker("getDate");c.fullCalendar("gotoDate",d);b.AddProperty("SelectedDate",c.fullCalendar("getDate"));b.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",b.ExecuteMethod("PopulatePropSet"));this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnHomePageViewBtnClick:function(d){var c=this.GetPM();var b=CCFMiscUtil_CreatePropSet();b.SetProperty("SelectedDay",$.fullCalendar.formatDate(new Date(this.GetCal().fullCalendar("getDate")),"MM/dd/yyyy"));switch(d){case"month":c.ExecuteMethod("InvokeMethod","GoToMonthly",b);break;case"agendaWeek":c.ExecuteMethod("InvokeMethod","GotoWeekly",b);break;case"agendaDay":c.ExecuteMethod("InvokeMethod","GotoToday",b);
break;default:break}},OnQuickAddDialogOkClick:function(f,e,c){var d=this.GetPM();var b=$("input:text[name=eventDescription]").val();if($.trim(b)===""){b="";d.OnControlEvent("newEvent",b,e,c)}else{d.OnControlEvent("newEvent",b,e,c);this.GetCal().fullCalendar("refetchEvents")}$("#"+f).dialog("close");this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnRepeatDialogOkClick:function(h,e,b,d,c){var f=CCFMiscUtil_CreatePropSet();var g=$("input:radio[name=userchoice]:checked").val();if(g!=="SaveThisOne"&&g!=="SaveAll"){d();$("#"+h).dialog("close")}else{f.SetProperty("Repeating","Y");if(g==="SaveThisOne"){f.SetProperty("Modify","ThisOne")}else{f.SetProperty("Modify","AllFuture")}this.GetPM().OnControlEvent(b,$.fullCalendar.formatDate(e.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(e.end,"MM/dd/yyyy HH:mm:ss"),e.calendarId,f);c();$("#"+h).dialog("close")}},OnSettingsDialogOkClick:function(e){var c=this.GetPM();var b=false;if(c.Get("Enable Timezone Picker")==="Y"){if(c.Get("Timezone")!==$("#tzCombo").val()){c.AddProperty("Timezone",$("#tzCombo").val());b=true}}var d=$("#ownerCombo").val();if(c.Get("Enable Owner Picker")==="Y"){if(c.Get("Owner")!==d){if(d==="ALLEMPLOYEES"){c.ExecuteMethod("InvokeMethod","GoToEmployeeCalView",CCFMiscUtil_CreatePropSet())}else{c.AddProperty("Owner",d);c.ExecuteMethod("UpdateUserPermission");if((d===c.Get("User Login Name"))&&(c.Get("FromExternalCalendar")==="Y")){c.ExecuteMethod("InvokeMethod","GoToExternalCalView",c.ExecuteMethod("PopulatePropSet"))}}b=true}}if(b&&d!=="ALLEMPLOYEES"){c.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",c.ExecuteMethod("PopulatePropSet"))}$("#"+e).dialog("close");this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnViewBtnClick:function(b){this.GetPM().AddProperty("ViewMode",this.GetUtilityMap().ViewNameToMode(b));this.GetCal().fullCalendar("changeView",b);this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnPrintCalendar:function(){var p=this.GetPM();var m=$("#"+p.Get("GetFullId"));var g=0;var i="";var c=p.Get("ViewMode");var b=parseInt(p.Get("Preferred Timeslot Interval"),10);var s=Math.floor(60/(b===0?15:b));var r=s*24;var n=$("#calendar_"+p.Get("GetPlaceholder"));var q=m.parent().width();var h=$(".fc-content").width();var j=$(".fc-content").height();if(p.Get("ViewMode")==="2"){g=$(".fc-content").height()}else{g=r*($(".fc-slot1").height()>=21?$(".fc-slot2").height():21)+$(".fc-header").height()+$(".fc-agenda-allday").height()+60;if(c==="0"){i=$(".fc-view-agendaDay .calSlots").scrollTop()}else{if(c==="1"){i=$(".fc-view-agendaWeek .calSlots").scrollTop()}}}m.css("overflow-x","hidden");m.css("overflow-y","hidden");m.css("width",1002);$(".fc-content").css("width",995);if(p.Get("ViewMode")!=="2"){$(".fc-content").css("height",g)}n.fullCalendar("option","contentHeight",g);var e=m.clone();var l=document.createElement("div");$(l).append(e);$(l).attr("id","PrintCalendar");$(l).addClass("tempCalendar");m.css("width",q);$(".fc-content").css("width",h);if(p.Get("ViewMode")!=="2"){$(".fc-content").css("height",j)}n.fullCalendar("option","contentHeight",j);if(c==="0"){$(".fc-view-agendaDay .calSlots").scrollTop(i)}else{if(c==="1"){$(".fc-view-agendaWeek .calSlots").scrollTop(i)}}if(!$.browser.msie){$("#_swecontent").append($(l).css({top:"0px",left:"0px"}));var f=$("#_sweview").css("display");$("#_sweview").css("display","none");window.print();$("#_sweview").css("display",f);$(".tempCalendar").remove()}else{var d=$("#sp_theme").get(0).outerHTML;var u=$("#fc_theme").get(0).outerHTML;var k=$("#jq_theme").get(0).outerHTML;var o=$("#sca_them").get(0).outerHTML;var t=window.open("","","'width=1002, height="+g+", scrollbars=no, resizable=no'");t.document.open();t.document.write("<!DOCTYPE html>\n<html>\n<head>\n"+k+"\n"+u+"\n"+o+"\n"+d+"\n\n</head>\n<body onload='window.print();window.close();' >\n"+l.innerHTML+"\n</body>\n</html>");t.document.close()}n.fullCalendar("refetchEvents")}};return a}());SiebelAppFacade.CalCtrlBuilder=(function(){function e(h,g,j){var l=g;var f=h;var k=j;var i=new SiebelAppFacade.CalCtrlEventHandlers(h,g,this,j);this.GetCal=function(){return l};this.GetPM=function(){return f};this.GetCalCtrlEventHandlers=function(){return i};this.GetUtilityMap=function(){return k}}e.prototype.AddColorCodedLegends=function(o){var h=this.GetPM();var j=h.Get("CSSLegendsLDC")||[];var p=h.Get("CSSLegendsLIC")||[];if($("#siebui-cal-legend-row")){$("#siebui-cal-legend-row").remove()}var k=$("<tr id='siebui-cal-legend-row'><td COLSPAN=3 id='color_legend'/></tr>");k.appendTo(o);j.sort();for(var l=0;l<j.length;l++){var f=p[j[l]];if(j[l]!==""){var n=$("<font id='color_square_"+f+"'>&#9632</font><span id='legend_"+f+"'>"+j[l]+"</span>");$("#color_legend").append(n)}else{var m=$("<font id='color_square_"+f+"'>&#9632</font><span id='legend_"+f+"'>Undefined</span>");m.appendTo(o);$("#color_legend").append(m)}var g=$(".calendar-EventStyle-"+f).css("background-color");if(!g){$("#color_square_"+f).remove();$("#legend_"+f).remove()}}};e.prototype.AddControls=function(){var J=this.GetPM();var u=this;var r=this.GetCalCtrlEventHandlers();var P=J.Get("Home Page Mode");var y=[];var t=[];var A=[];if(J.Get("CanInsert")){if(J.Get("Enable New Contact Call Button")==="Y"){var L=J.Get("UISTR Contact Call")||"Contact Call";y.push(b.call(this,J.Get("UISTR Contact Call Button"),L,"newContactCall",function(){J.OnControlEvent("newLSCall","Contact")}))}if(J.Get("Enable New Account Call Button")==="Y"){var f=J.Get("UISTR Account Call")||"Account Call";y.push(b.call(this,J.Get("UISTR Account Call Button"),f,"newAccountCall",function(){J.OnControlEvent("newLSCall","Account")}))}if(J.Get("Enable New Meeting Button")==="Y"){var q=J.Get("UISTR Meeting")||"Meeting";y.push(b.call(this,J.Get("UISTR New Meeting Button"),q,"newMeetingCall",function(){J.OnControlEvent("newLSCall","Meeting")}))}if(J.Get("Enable New Button")==="Y"){var g=J.Get("UISTR New Record")||"New Record";t.push(b.call(this,"+",g,"newEvent",function(){var k=u.GetCal().fullCalendar("getDate");var n;var m=new Date();var j=m.getMinutes();var l=parseInt(J.Get("Preferred Timeslot Interval"),10);var i=parseInt(J.Get("Preferred Duration"),10);k.setHours(m.getHours()+Math.floor((j+l)/60));k.setMinutes(((Math.floor(j/l)+1)*l)%60);k.setSeconds(0);n=new Date(k);n.setMinutes(n.getMinutes()+i);J.OnControlEvent("newEvent","",k,n)}))}if(J.Get("Enable Print Button")==="Y"){var x=J.Get("UISTR Print")||"Print"}}if(J.Get("Enable Daily")==="Y"){var N=J.Get("UISTR Switch to daily view")||"Switch to daily view";if(P){A.push(b.call(this,"",N,"agendaDay",function(){r.OnHomePageViewBtnClick("agendaDay")}))}else{A.push(b.call(this,"",N,"agendaDay",function(){r.OnViewBtnClick("agendaDay")}))}}if(J.Get("Enable Weekly")==="Y"){var O=J.Get("UISTR Switch to week view")||"Switch to week view";if(P){A.push(b.call(this,"",O,"agendaWeek",function(){r.OnHomePageViewBtnClick("agendaWeek")}))}else{A.push(b.call(this,"",O,"agendaWeek",function(){r.OnViewBtnClick("agendaWeek")}))}}if(J.Get("Enable Monthly")==="Y"){var s=J.Get("UISTR Switch to month view")||"Switch to month view";
if(P){A.push(b.call(this,"",s,"month",function(){r.OnHomePageViewBtnClick("month")}))}else{A.push(b.call(this,"",s,"month",function(){r.OnViewBtnClick("month")}))}}if((J.Get("Enable Timezone Picker")==="Y"||J.Get("Enable Owner Picker")==="Y")&&(!P||P!=="Y")){var K=J.Get("UISTR Advanced Calendar Settings")||"Advanced Calendar Settings";A.push(b.call(this,"...",K,"settings",function(){u.BuildSettingsDialog()}))}var I=$(".fc-header");I.find("tr:first").attr("id","siebui-cal-button-row-1").addClass("siebui-cal-stdbutton-row");var C=$("<tr id='siebui-cal-button-row-2'><td colspan=3 id='cal-custom-buttons'/></tr>");if(y.length===0){C.addClass("siebui-cal-custombutton-row-empty")}else{C.addClass("siebui-cal-custombutton-row")}I.append(C);var z=C.find("td");var w=$(".fc-header-left");var p=$(".fc-header-right");var o=$(".fc-header-center");var v="<span class='fc-header-space'/>";var h="caldate_picker";var M="<input type='hidden' id='"+h+"'/>";if(J.Get("RTL Mode")!=="Y"){for(var H=0;H<t.length;H++){w.append(v);w.append(t[H])}A.push(v);for(var G=0;G<A.length;G++){p.append(v);p.append(A[G])}for(var F=0;F<y.length;F++){z.append(v);z.append(y[F])}z.attr("align","left");o.append(v+M+v)}else{w=$(".fc-header-right");p=$(".fc-header-left");t.unshift(v);for(var E=t.length-1;E>=0;E--){w.append(v);w.append(t[E])}for(var D=A.length-1;D>=0;D--){p.append(v);p.append(A[D])}for(var B=y.length-1;B>=0;B--){z.append(v);z.append(y[B])}z.attr("align","right");o.prepend(v+M+v)}a.call(this,h,function(){r.OnDatepickerSelect.call(r,h)});this.AddColorCodedLegends($(".fc-header"));$(".fc-button-next").click(function(){u.AddColorCodedLegends($(".fc-header"))});$(".fc-button-prev").click(function(){u.AddColorCodedLegends($(".fc-header"))});$(".fc-button-today").click(function(){u.AddColorCodedLegends($(".fc-header"))})};e.prototype.BuildQuickAddDialog=function(f,i){var h=this.GetPM();var r=this.GetCalCtrlEventHandlers();var l=this.GetCal();var q=CCFMiscUtil_CreatePropSet();var m=h.Get("UISTR Tooltip Field Label:Description")||"Description";var g=h.Get("UISTR Repeating Dialog OK Button");var k=h.Get("UISTR Repeating Dialog Cancel Button");var p=h.Get("UISTR New Event")||"New Event";var o=c.call(this,"QuickAddDialog");var n={};n[g]=function(){r.OnQuickAddDialogOkClick("quickAddDialog",f,i)};n[k]=function(){r.OnCancelClick("quickAddDialog")};var j=d.call(this,"quickAddDialog",o,p,n);j.dialog("open")};e.prototype.BuildRepeatDialog=function(f,g,l,r){var i=this.GetPM();var q=this.GetCalCtrlEventHandlers();var p=CCFMiscUtil_CreatePropSet();var o=c.call(this,"RepeatDialog");var h=i.Get("UISTR Repeating Dialog OK Button");var k=i.Get("UISTR Repeating Dialog Cancel Button");var n=i.Get("UISTR Repeating Event Dialog")||"Repeating Event Dialog";var m={};m[h]=function(){q.OnRepeatDialogOkClick("repeatDialog",f,g,l,r)};m[k]=function(){l();q.OnCancelClick("repeatDialog")};var j=d.call(this,"repeatDialog",o,n,m);j.dialog("option","close",function(s,t){if(s.originalEvent&&$(s.originalEvent.target).closest(".ui-dialog-titlebar-close").length!==0){l()}$("#repeatDialog").remove()});j.dialog("open")};e.prototype.BuildSettingsDialog=function(){var i=this.GetPM();var p=this.GetCalCtrlEventHandlers();var g=i.Get("UISTR Repeating Dialog OK Button");var k=i.Get("UISTR Repeating Dialog Cancel Button");var o=i.Get("UISTR Settings")||"Settings";var m=c.call(this,"SettingsDialog");var n={};n[g]=function(){p.OnSettingsDialogOkClick("calSettingsDialog")};n[k]=function(){p.OnCancelClick("calSettingsDialog")};var h=d.call(this,"calSettingsDialog",m,o,n);h.dialog("open");var l=i.Get("Timezone");if(i.Get("Enable Timezone Picker")==="Y"){if(typeof l==="undefined"){var j=i.Get("Default Timezone")||"(GMT-08:00) Pacific Time (US & Canada)";i.AddProperty("Timezone",j);l=j}$("#tzCombo").val(l)}var f=i.Get("Owner");if(i.Get("Enable Owner Picker")==="Y"){$("#ownerCombo").val(f)}};function b(g,f,h,j){var i=$("<span class='fc-button fc-button-"+h+" fc-state-default' id='cal-"+h+"-button' title='"+f+"'><span class='fc-button-inner'><span class='fc-button-content cal-ui-"+h+"'>"+g+"</span><span class='fc-button-effect'></span></span></span>");i.click(function(){if(!i.hasClass("fc-state-disabled")){j()}}).mousedown(function(){i.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-down")}).mouseup(function(){i.removeClass("fc-state-down")}).hover(function(){i.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-hover")},function(){i.removeClass("fc-state-hover").removeClass("fc-state-down")});return i}function a(m,l){var h=this.GetPM();var i=$("#"+m);i.css("position","relative");i.css("z-index","9999");var g=$.inArray("",h.Get("MonthShortStringArray"))?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:h.Get("MonthShortStringArray");var k=$.inArray("",h.Get("WeekDayShortStringArray"))?["Su","Mo","Tu","We","Th","Fr","Sa"]:h.Get("WeekDayShortStringArray");i.datepicker({buttonImageOnly:true,changeMonth:true,changeYear:true,dayNamesMin:k,isRTL:h.Get("RTL Mode")==="Y",monthNames:h.Get("MonthStringArray"),monthNamesShort:g,onSelect:l,showOn:"button"});var f="18px";$(".ui-datepicker-trigger").css("width",f);$(".ui-datepicker-trigger").css("height",f);var j=h.Get("UISTR Choose a date")||"Choose a date";$("#"+m+" ~ img.ui-datepicker-trigger").attr("alt",j);$("#"+m+" ~ img.ui-datepicker-trigger").attr("title",j);return i}function d(j,i,f,g){var h=$("#"+j);if($("#"+j).length===0){h=$('<div id="'+j+'"></div>').html(i).dialog({autoOpen:false,buttons:g,close:function(){$("#"+j).remove()},height:"auto",modal:true,resizable:false,title:f,width:"auto"})}return h}function c(n){var j=this.GetPM();var p="";switch(n){case"QuickAddDialog":var o=j.Get("UISTR Tooltip Field Label:Description")||"Description";var u=j.Get("DescriptionFieldLength");p="<p>"+o+"<br />";p+='<input type="text" name="eventDescription" maxlength="';p+=u+'" id="DescriptionId" />';p+="<br /></p>";break;case"RepeatDialog":var t=j.Get("UISTR Repeating Dialog Label 1");var r=j.Get("UISTR Repeating Dialog Label 2");var i=j.Get("UISTR Repeating Dialog This Instance");var q=j.Get("UISTR Repeating Dialog All Future Instances");p="<p>"+t+"<br /><br />";p+=r+"<br />";p+='<input type="radio" name="userchoice" id="SaveThisOneId" value="SaveThisOne" checked="checked" />'+i+"<br />";p+='<input type="radio" name="userchoice" id="SaveAllId" value="SaveAll" />'+q;p+="<br /></p>";break;case"SettingsDialog":var s=CCFMiscUtil_CreatePropSet();p="<table><td></td>";if(j.Get("Enable Timezone Picker")==="Y"){s.DecodeFromString(j.Get("Timezone List"));var g="<select id='tzCombo'>";for(var l=0;l<s.GetChildCount();l++){g+="<option value='"+s.GetChild(l).GetProperty("Name")+"'>"+s.GetChild(l).GetProperty("Value")+"</option>"}g+="</select>";p+="<tr><td>"+j.Get("UISTR Timezone Label")+"</td>";p+="<td>"+g+"</td></tr>"}if(j.Get("Enable Owner Picker")==="Y"){s.DecodeFromString(j.Get("Access List"));var h="<select id='ownerCombo'>";var f=s.EnumProperties(true);var k=[];while(f){k.push([f,s.GetProperty(f)]);
f=s.EnumProperties(false)}k.sort(this.GetUtilityMap().SortOrder);for(var m=0;m<k.length;m++){h+="<option value='"+k[m][0]+"'>"+k[m][1]+"</option>"}h+="</select>";p+="<tr><td>"+j.Get("UISTR Owner Label")+"</td>";p+="<td>"+h+"</td></tr>"}p+="</table>";break}return p}return e}());SiebelAppFacade.CalEventHandlers=(function(){function b(e,d,g,i){var j=d;var c=e;var h=g;var f=i;this.GetCal=function(){return j};this.GetPM=function(){return c};this.GetCalCtrlBuilder=function(){return h};this.GetUtilityMap=function(){return f}}b.prototype={OnCalSelect:function(e,c,d){if(this.GetPM().Get("CanInsert")&&this.GetCal().fullCalendar("getView").name!=="month"){this.GetCalCtrlBuilder().BuildQuickAddDialog(e,c)}},OnDayClick:function(e,f,d,c){this.GetCal().fullCalendar("gotoDate",e);this.GetPM().AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate"))},OnEventAfterRender:function(c,f,i){var e=this.GetPM();var k=parseInt(e.Get("Preferred Timeslot Interval"),10);var h="h:mm{ - h:mm}";var j=f.find(".fc-event-title");if(e.Get("EnableProportionalRender")&&(i.name==="agendaWeek"||i.name==="agendaDay")){a.call(this,c,f,i);if(!e.Get("NeedCounterReset")){e.AddProperty("NeedCounterReset",true)}}if(j.length===0){f.css("height","19px");f.find(".fc-event-time").text("");f.find(".fc-event-content").append('<div class="fc-event-title"></div>');e.AddProperty("NeedCounterReset",false);this.OnEventRender(c,f);if(e.Get("EnableProportionalRender")&&(i.name==="agendaWeek"||i.name==="agendaDay")){e.AddProperty("NeedCounterReset",true)}f.find(".fc-event-inner").css("height",f.css("height"))}var d=new Date(c.start);var g=new Date(c.end);if(typeof d==="undefined"||typeof g==="undefined"){return}if((i.name==="month"&&e.Get("Enable Monthly Time Display")==="Off-interval")||(i.name==="agendaWeek"&&e.Get("Enable 5Day Time Display")==="Off-interval")||(i.name==="agendaDay"&&e.Get("Enable Daily Time Display")==="Off-interval")){this.GetUtilityMap().SuppressTimeStamp(c,f,k)}else{if((i.name==="month"&&e.Get("Enable Monthly Time Display")==="Always")||(i.name==="agendaWeek"&&e.Get("Enable 5Day Time Display")==="Always")||(i.name==="agendaDay"&&e.Get("Enable Daily Time Display")==="Always")){j.prepend($.fullCalendar.formatDates(d,g,h)+" ")}}},OnEventClick:function(j,e,d){var g=this.GetPM();var f=this.GetCal();f.fullCalendar("gotoDate",j.start);g.AddProperty("SelectedDate",f.fullCalendar("getDate"));var c=SiebelApp.Constants;var i=j.url;var h=e.target||e.srcElement;if(h.tagName==="FONT"){i=h.parentElement.href}else{if(h.tagName==="IMG"){i=h.parentElement.parentElement.href}}g.OnControlEvent(c.get("PHYEVENT_DRILLDOWN"),i)},OnEventDrop:function(g,d,c,h,f){var e=this.GetCal();if(g.readOnly!=="N"){f()}else{if(g.repeating==="N"){this.GetPM().OnControlEvent("eventDrop",$.fullCalendar.formatDate(g.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(g.end,"MM/dd/yyyy HH:mm:ss"),g.calendarId,null);e.fullCalendar("refetchEvents");return}else{this.GetCalCtrlBuilder().BuildRepeatDialog(g,"eventDrop",f,function(){e.fullCalendar("refetchEvents")})}}},OnEventRender:function(q,d){var t=this.GetPM();var f=t.Get("CSSFontColors")||[];var h="";var s="";var r,p;if(q.icons){for(r=0;r<q.icons.length;r++){if(q.icons[r]!==""){h+="<img src='images/"+q.icons[r]+"' alt='"+q.iconText[r]+"'/>"}}}var w=q.multiDisplay;for(var o=0;o<w.length;o++){var n=w[o];var u=f[n.CSSName];if(!u){d.find(".fc-event-title").addClass(n.CSSName);u=$("."+n.CSSName).css("color");if(u){u=this.GetUtilityMap().Rgb2hex(u)}else{u="NOCSSFONTCOLOR"}d.find(".fc-event-title").removeClass(n.CSSName);f[n.CSSName]=u}if(u!=="NOCSSFONTCOLOR"&&u!=="#111111"){n.FieldColor=u}n.FieldColor=n.FieldColor||"#FFFFFF";var x=this.GetUtilityMap().MakeDisplayField(n);if(x!==""){s+=x}}if(t.Get("NeedCounterReset")){var y=t.Get("TimeslotBucket");var g=t.Get("DayToColumnMap");var e=t.Get("MultiDayCounter");var c=parseInt(t.Get("Preferred Timeslot Interval"),10);var v=Math.floor(60/c);for(r=0;r<y.length;r++){var m=y[r];for(p=0;p<v*24;p++){m[p].horzPos=62}}for(var k in e){if(e.hasOwnProperty(k)){e[k].daysCounted=0}}t.AddProperty("TimeslotBucket",y);t.AddProperty("MultiDayCounter",e);t.AddProperty("NeedCounterReset",false)}t.AddProperty("CSSFontColors",f);d.find(".fc-event-title").prepend(h+"&nbsp;"+s);d.find(".fc-event-title").find("a").tooltip()},OnEventResize:function(g,d,c,f){var e=this.GetCal();if(g.readOnly!=="N"){f()}else{if(g.repeating==="N"){this.GetPM().OnControlEvent("eventResize",$.fullCalendar.formatDate(g.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(g.end,"MM/dd/yyyy HH:mm:ss"),g.calendarId,null);e.fullCalendar("refetchEvents");return}else{this.GetCalCtrlBuilder().BuildRepeatDialog(g,"eventResize",f,function(){e.fullCalendar("refetchEvents")})}}},OnEventRefresh:function(f,c,e){var d=this.GetPM();d.AddProperty("CurViewShowDate",f);d.AddProperty("CurViewStartDate",f);d.AddProperty("CurViewEndDate",c);d.AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate"));d.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",d.ExecuteMethod("PopulatePropSet"));e([])},OnViewDisplayChange:function(o){var h="",e="",k="";var d=this.GetPM();if(o.name==="agendaDay"||o.name==="agendaWeek"){var p=this.GetUtilityMap();var r=parseInt(d.Get("Preferred Timeslot Interval"),10);var n=p.HourDecimal(d.Get("Preferred Business Day Start Time"));var c=p.HourDecimal(d.Get("Preferred Business Day End Time"));if(r===0){return}var m=Math.floor(60/r);var l=m*24;var q=parseInt(n*m,10)<0?0:parseInt(n*m,10);var j=parseInt(c*m,10)>l?l:parseInt(c*m,10);var g;for(var f=0;f<l;f++){g=$((".fc-slot"+f).replace(/"/g,"'")).find("div");if(f>=q&&f<j){if(o.name==="agendaDay"){g.removeClass("calendar-WorkingHr-agendaWeek");g.addClass("calendar-WorkingHr-agendaDay")}else{if(o.name==="agendaWeek"){g.removeClass("calendar-WorkingHr-agendaDay");g.addClass("calendar-WorkingHr-agendaWeek")}}}else{if(f<q||f>=j){if(o.name==="agendaDay"){g.removeClass("calendar-NonWorkingHr-agendaWeek");g.addClass("calendar-NonWorkingHr-agendaDay")}else{if(o.name==="agendaWeek"){g.removeClass("calendar-NonWorkingHr-agendaDay");g.addClass("calendar-NonWorkingHr-agendaWeek")}}}}}if(o.name==="agendaDay"){h=$(".fc-view-agendaDay").children("div");e=$(h).children("div");k=$(e).eq(2)}else{if(o.name==="agendaWeek"){h=$(".fc-view-agendaWeek").children("div");e=$(h).children("div");k=$(e).eq(2)}}k.removeClass("calSlots");k.addClass("calSlots")}}};function a(z,f,r){var C=this.GetPM();var D=this.GetUtilityMap();var c=parseInt(C.Get("Preferred Timeslot Interval"),10);if(c===0){return}var E=Math.floor(60/c);var t=D.HourDecimal(z.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+z.start.getMinutes());var g=D.HourDecimal(z.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+z.end.getMinutes());var e=parseInt(t*E,10)<0?0:parseInt(t*E,10);var d=parseInt(g*E,10)>E*24?E*24:parseInt(g*E,10);if(e===d){d+=1}var G=C.Get("TimeslotBucket");var m=C.Get("DayToColumnMap");var h=C.Get("MultiDayCounter");var B;var s,u;var A,y;var v=!D.SameDay(z.start,z.end);
var n=(v&&r.name==="agendaDay"&&D.SameDay(z.start,r.start))||(v&&r.name==="agendaWeek"&&m[z.start.getDay()]===(m[z.start.getDay()]+h[z.id].daysCounted));var p=(v&&r.name==="agendaDay"&&D.SameDay(z.end,r.start))||(v&&r.name==="agendaWeek"&&m[z.end.getDay()]===(m[z.start.getDay()]+h[z.id].daysCounted));if(v){if(r.name==="agendaDay"){s=G[0]}else{if(r.name==="agendaWeek"){s=G[m[z.start.getDay()]+h[z.id].daysCounted]}}if(n){B=s[e].events[z.id].maxSlot}else{if(p){B=s[0].events[z.id].maxSlot}else{B=s[0].events[z.id].maxSlot}}}else{s=G[m[z.start.getDay()]];B=s[e].events[z.id].maxSlot}var q=Infinity;var w;for(u in s[B].events){if(s[B].events.hasOwnProperty(u)){if(s[B].events[u].maxSlotSize<q){q=s[B].events[u].maxSlotSize;w=u}}}var o;var k=$(".fc-view-"+r.name+" .fc-agenda-days tbody .fc-first.fc-last .fc-col0").width();var x=Math.max(k-50,k*0.95);if(z.id===w){var F=0;for(u in s[B].events){if(s[B].events.hasOwnProperty(u)&&u!==w){F+=x/s[B].events[u].maxSlotSize}}o=Math.max(15,x-F)}else{o=Math.max(15,x/s[B].events[z.id].maxSlotSize)}f.width(o);if(C.Get("RTL Mode")==="Y"){var l=D.GetObjectSize(m);if(v){if(r.name==="agendaDay"){f.css("left",-(o-112+s[B].horzPos)+(l-m[r.start.getDay()])*(k-1))}else{if(r.name==="agendaWeek"){f.css("left",-(o-112+s[B].horzPos)+(l-(m[z.start.getDay()]+h[z.id].daysCounted))*(k-1))}}}else{f.css("left",-(o-112+s[B].horzPos)+(l-m[z.start.getDay()])*(k-1))}}else{if(v){if(r.name==="agendaDay"){f.css("left",s[B].horzPos+m[r.start.getDay()]*(k-1))}else{if(r.name==="agendaWeek"){f.css("left",s[B].horzPos+(m[z.start.getDay()]+h[z.id].daysCounted)*(k-1))}}}else{f.css("left",s[B].horzPos+m[z.start.getDay()]*(k-1))}}if(v){for(y=0;y<E*24;y++){if(n&&y<e){continue}if(p&&y>=d&&y!==0){break}s[y].horzPos+=o}if(r.name==="agendaWeek"){h[z.id].daysCounted+=1}}else{for(A=e;A<d;A++){s[A].horzPos+=o}}C.AddProperty("TimeslotBucket",G);C.AddProperty("MultiDayCounter",h)}return b}());SiebelAppFacade.CalUtility=(function(){function a(){}a.prototype={EventSortOrder:function(d,c){return d.start-c.start},GetObjectSize:function(d){var c=0;for(var b in d){if(d.hasOwnProperty(b)){c+=1}}return c},Hex:function(b){return("0"+parseInt(b,10).toString(16)).slice(-2)},HourDecimal:function(e){var c=e.split(SiebelApp.S_App.LocaleObject.GetDispTimeSeparator());if(c.length<2){return parseFloat(e)}var b=parseInt(c[0],10);var d=parseInt(c[1],10)/60;return b+d},IsAllDayEvent:function(c){if(c.Planned===c.PlannedCompletion){var b=$.fullCalendar.parseDate(c.Planned);if(b.getHours()===0&&b.getMinutes()===0&&b.getSeconds()===0){return true}}return false},MakeDisplayField:function(c){var g=c.FieldValue;var e=$("<div />").text(c.ToolTip).html();var f=c.DrillDown;var d=c.FieldColor;var b="";if(g===""){return b}if(f===""){f="javaScript:void(0)"}b+="<A TITLE='"+e+"' ";b+="HREF="+f+">";b+="<FONT COLOR="+d+">";b+=g+"</FONT></A>&nbsp;";return b},Rgb2hex:function(b){if(b.search("rgb")===-1){return b}else{b=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#"+this.Hex(b[1])+this.Hex(b[2])+this.Hex(b[3])}},SameDay:function(c,b){return c.getFullYear()===b.getFullYear()&&c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()},SortOrder:function(d,c){return(d[1]>c[1]?1:-1)},SuppressTimeStamp:function(e,d,c){var g="h:mm{ - h:mm}";var b=new Date(e.start);var f=new Date(e.end);if(typeof b==="undefined"||typeof f==="undefined"){return}var h=d.find(".fc-event-title");if((b.getMinutes()%c)===0&&(f.getMinutes()%c)===0){h.prepend(" ")}else{h.prepend($.fullCalendar.formatDates(b,f,g)+" ")}},ViewModeToName:function(b){var c="agendaDay";if(b==="0"){c="agendaDay"}else{if(b==="1"){c="agendaWeek"}else{if(b==="2"){c="month"}}}return c},ViewNameToMode:function(c){var b="0";if(c==="agendaDay"){b="0"}else{if(c==="agendaWeek"){b="1"}else{if(c==="month"){b="2"}}}return b}};return a}());SiebelAppFacade.CalLocaleConverter=(function(){function a(){var j={"hh:mm:ss":function(k){return b(k)},"mm:hh:ss":function(k){return b(k)},"ss:mm:hh":function(k){return b(k)},"mm:ss:hh":function(k){return b(k)},"hh:ss:mm":function(k){return b(k)},"ss:hh:mm":function(k){return b(k)},"h:mm:ss":function(k){return b(k)},"mm:h:ss":function(k){return b(k)},"ss:mm:h":function(k){return b(k)},"mm:ss:h":function(k){return b(k)},"ss:h:mm":function(k){return b(k)},"h:ss:mm":function(k){return b(k)},"m:hh:ss":function(k){return b(k)},"ss:m:hh":function(k){return b(k)},"hh:m:ss":function(k){return b(k)},"m:ss:hh":function(k){return b(k)},"hh:ss:m":function(k){return b(k)},"ss:hh:m":function(k){return b(k)},"hh:mm:s":function(k){return b(k)},"mm:hh:s":function(k){return b(k)},"s:mm:hh":function(k){return b(k)},"s:hh:mm":function(k){return b(k)},"mm:s:hh":function(k){return b(k)},"hh:s:mm":function(k){return b(k)},"h:m:ss":function(k){return b(k)},"m:h:ss":function(k){return b(k)},"ss:m:h":function(k){return b(k)},"ss:h:m":function(k){return b(k)},"m:ss:h":function(k){return b(k)},"h:ss:m":function(k){return b(k)},"hh:m:s":function(k){return b(k)},"hh:s:m":function(k){return b(k)},"m:hh:s":function(k){return b(k)},"s:hh:m":function(k){return b(k)},"s:m:hh":function(k){return b(k)},"m:s:hh":function(k){return b(k)},"h:mm:s":function(k){return b(k)},"mm:h:s":function(k){return b(k)},"mm:s:h":function(k){return b(k)},"s:mm:h":function(k){return b(k)},"h:s:mm":function(k){return b(k)},"s:h:mm":function(k){return b(k)},"h:m:s":function(k){return b(k)},"m:h:s":function(k){return b(k)},"s:m:h":function(k){return b(k)},"hh:mm":function(k){return b(k,"hm")},"mm:hh":function(k){return b(k,"hm")},"h:mm":function(k){return b(k,"hm")},"mm:h":function(k){return b(k,"hm")},"hh:m":function(k){return b(k,"hm")},"m:hh":function(k){return b(k,"hm")},"h:m":function(k){return b(k,"hm")},"m:h":function(k){return b(k,"hm")},"ss:mm":function(k){return b(k,"ms")},"ss:m":function(k){return b(k,"ms")},"m:ss":function(k){return b(k,"ms")},"mm:s":function(k){return b(k,"ms")},"s:mm":function(k){return b(k,"ms")},"s:m":function(k){return b(k,"ms")},"m:s":function(k){return b(k,"ms")},"dd/mm/yyyy":function(k){return c(k)},"mm/dd/yyyy":function(k){return c(k)},"dd/yyyy/mm":function(k){return c(k)},"yyyy/dd/mm":function(k){return c(k)},"mm/yyyy/dd":function(k){return c(k)},"yyyy/mm/dd":function(k){return c(k)},"d/mm/yyyy":function(k){return c(k)},"mm/d/yyyy":function(k){return c(k)},"d/yyyy/mm":function(k){return c(k)},"yyyy/d/mm":function(k){return c(k)},"mm/yyyy/d":function(k){return c(k)},"yyyy/mm/d":function(k){return c(k)},"dd/m/yyyy":function(k){return c(k)},"m/dd/yyyy":function(k){return c(k)},"dd/yyyy/m":function(k){return c(k)},"yyyy/dd/m":function(k){return c(k)},"m/yyyy/dd":function(k){return c(k)},"yyyy/m/dd":function(k){return c(k)},"dd/mm/yy":function(k){return c(k)},"mm/dd/yy":function(k){return c(k)},"dd/yy/mm":function(k){return c(k)},"yy/dd/mm":function(k){return c(k)},"mm/yy/dd":function(k){return c(k)},"yy/mm/dd":function(k){return c(k)},"d/m/yyyy":function(k){return c(k)},"m/d/yyyy":function(k){return c(k)},"d/yyyy/m":function(k){return c(k)},"yyyy/d/m":function(k){return c(k)
},"m/yyyy/d":function(k){return c(k)},"yyyy/m/d":function(k){return c(k)},"d/mm/yy":function(k){return c(k)},"mm/d/yy":function(k){return c(k)},"d/yy/mm":function(k){return c(k)},"yy/d/mm":function(k){return c(k)},"mm/yy/d":function(k){return c(k)},"yy/mm/d":function(k){return c(k)},"dd/m/yy":function(k){return c(k)},"m/dd/yy":function(k){return c(k)},"dd/yy/m":function(k){return c(k)},"yy/dd/m":function(k){return c(k)},"m/yy/dd":function(k){return c(k)},"yy/m/dd":function(k){return c(k)},"d/m/yy":function(k){return c(k)},"m/d/yy":function(k){return c(k)},"d/yy/m":function(k){return c(k)},"yy/d/m":function(k){return c(k)},"m/yy/d":function(k){return c(k)},"yy/m/d":function(k){return c(k)},"mm/yyyy":function(k){return c(k,"my")},"yyyy/mm":function(k){return c(k,"my")},"yyyy/m":function(k){return c(k,"my")},"m/yyyy":function(k){return c(k,"my")},"mm/yy":function(k){return c(k,"my")},"yy/mm":function(k){return c(k,"my")},"yy/m":function(k){return c(k,"my")},"m/yy":function(k){return c(k,"my")},"dd/mm":function(k){return c(k,"md")},"mm/dd":function(k){return c(k,"md")},"dd/m":function(k){return c(k,"md")},"m/dd":function(k){return c(k,"md")},"d/mm":function(k){return c(k,"md")},"mm/d":function(k){return c(k,"md")},"d/m":function(k){return c(k,"md")},"m/d":function(k){return c(k,"md")},s:function(k){return k.s},ss:function(k){return k.s},m:function(k){return k.n},mm:function(k){return k.n},h:function(k){return k.h},hh:function(k){return k.h},H:function(k){return k.h},HH:function(k){return k.h},d:function(k){return k.ld},dd:function(k){return k.ld},M:function(k){return k.lm},MM:function(k){return k.lm},yy:function(k){return k.ly},yyyy:function(k){return k.ly},ddd:function(k){return"ddd"},dddd:function(k){return"dddd"},MMM:function(k){return"MMM"},MMMM:function(k){return"MMMM"},t:function(k){return(k.h24?"":k.p)},tt:function(k){return(k.h24?"":k.p)},T:function(k){return(k.h24?"":k.p.toUpperCase())},TT:function(k){return(k.h24?"":k.p.toUpperCase())},"//":function(k){return"/"},"/":function(k){return k.ds},"::":function(k){return":"},":":function(k){return k.ts}};this.getFormatConverter=function(){return j}}a.prototype.ConvertLocale=function(o){var p=this;var j=[];var n=[];for(var k=1;k<13;k++){j.push(SiebelApp.S_App.LocaleObject.GetMonth(k));n.push(SiebelApp.S_App.LocaleObject.GetMonth(k,true))}var s=[];var l=[];for(var q=0;q<7;q++){s.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(q,0));l.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(q,1))}var r={ds:SiebelApp.S_App.LocaleObject.GetDispDateSeparator(),ts:SiebelApp.S_App.LocaleObject.GetDispTimeSeparator(),h24:true,df:"",tf:"",ldf:"",p:"",monthNames:j,monthNamesShort:n,dayNames:s,dayNamesShort:l,periodName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase(),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase()],periodShortName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase().charAt(0),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase().charAt(0)]};r=i(r);r=h(r);r=d(r,o.longDateFormat);return $.extend(true,{},r,{titleFormat:{month:g.call(p,o.titleFormat.month,r),week:g.call(p,o.titleFormat.week,r),day:g.call(p,o.titleFormat.day,r)},columnFormat:{month:g.call(p,o.columnFormat.month,r),week:g.call(p,o.columnFormat.week,r),day:g.call(p,o.columnFormat.day,r)},axisFormat:g.call(p,o.axisFormat,r),timeFormat:{"":g.call(p,o.timeFormat,r)}})};function i(l){var o,m,q,p,n="";var r=SiebelApp.S_App.LocaleObject.GetDateFormat();var k=r.length;for(o=0;o<k;o++){for(m=k;m>o;m--){q=e(r.substring(o,m),l,false);if(q){if(q!==l.ds){o=m-1;l=q}}}}return l}function d(s,o){var m,k,l,p,r="",q="";var n=o.length;var t=o.toUpperCase();for(m=0;m<n;m++){r=t.charAt(m);if(r==="'"){for(k=m+1;k<n;k++){if(t.charAt(k)==="'"){m=k;break}}}for(l=n;l>m;l--){p=e(t.substring(m,l),s,true);if(p){if(p!==s.ds){m=l-1;s=p}}}}return s}function h(l){var o,m,r,p,n="";var q=SiebelApp.S_App.LocaleObject.GetTimeFormat();var k=q.length;for(o=0;o<k;o++){for(m=k;m>o;m--){r=e(q.substring(o,m),l,false);if(r){if(r!==l.ts){o=m-1;l=r}}}}return l}function e(m,l,j){var k;switch(m){case l.ds:k=l.ds;break;case l.ts:k=l.ts;break;case"DDDD":if(j){k=l}break;case"DDD":if(j){k=l}break;case"DD":if(j){k=$.extend(true,{},l,{ld:"dd",ldf:l.ldf.concat("d")})}else{k=$.extend(true,{},l,{d:"dd",df:l.df.concat("d")})}break;case"D":if(j){k=$.extend(true,{},l,{ld:"d",ldf:l.ldf.concat("d")})}else{k=$.extend(true,{},l,{d:"d",df:l.df.concat("d")})}break;case"MMMM":k=$.extend(true,{},l,{lm:"MMMM",ldf:l.ldf.concat("m")});break;case"MMM":k=$.extend(true,{},l,{lm:"MMM",ldf:l.ldf.concat("m")});break;case"MM":if(j){k=$.extend(true,{},l,{lm:"MM",ldf:l.ldf.concat("m")})}else{k=$.extend(true,{},l,{m:"MM",df:l.df.concat("m")})}break;case"M":if(j){k=$.extend(true,{},l,{lm:"M",ldf:l.ldf.concat("m")})}else{k=$.extend(true,{},l,{m:"M",df:l.df.concat("m")})}break;case"YYYY":if(j){k=$.extend(true,{},l,{ly:"yyyy",ldf:l.ldf.concat("y")})}else{k=$.extend(true,{},l,{y:"yyyy",df:l.df.concat("y")})}break;case"YY":if(j){k=$.extend(true,{},l,{ly:"yy",ldf:l.ldf.concat("y")})}else{k=$.extend(true,{},l,{y:"yy",df:l.df.concat("y")})}break;case"HH":k=$.extend(true,{},l,{h:"HH",h24:true,tf:l.tf.concat("h")});break;case"H":k=$.extend(true,{},l,{h:"H",h24:true,tf:l.tf.concat("h")});break;case"hh":k=$.extend(true,{},l,{h:"hh",tf:l.tf.concat("h")});break;case"h":k=$.extend(true,{},l,{h:"h",tf:l.tf.concat("h")});break;case"mm":k=$.extend(true,{},l,{n:"mm",tf:l.tf.concat("m")});break;case"m":k=$.extend(true,{},l,{n:"m",tf:l.tf.concat("m")});break;case"ss":k=$.extend(true,{},l,{s:"ss",tf:l.tf.concat("s")});break;case"s":k=$.extend(true,{},l,{s:"s",tf:l.tf.concat("s")});break;case"p":k=$.extend(true,{},l,{h24:false,p:"tt"});break;default:return}return k}function g(q,s){var l,m=q.length,o,k,r,n="",j="";for(l=0;l<m;l++){o=q.charAt(l);if(o==="'"){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)==="'"){n+=q.substring(l+1,k);n+="'";l=k;break}}}else{if(o==="("){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)===")"){j=g.call(this,q.substring(l+1,k),s);n+=j;n+=")";l=k;break}}}else{if(o==="["){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)==="]"){var p=q.substring(l+1,k);j=g.call(this,p,s);n+=j;n+="]";l=k;break}}}else{if(o==="<"){k=q.indexOf(">",l);n+=f(s,q.substring(l+1,k));l=k}else{if(o==="{"){n+=o}else{if(o==="}"){n+=o}else{for(k=m;k>l;k--){r=this.getFormatConverter()[q.substring(l,k)]||this.getFormatConverter()[q.substring(l,k).toLowerCase()];if(r){n+=r(s);l=k-1;break}}if(k===l){n+=o}}}}}}}}return n}function b(k,l){var j;switch(k.tf){case"hms":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.n+k.ts+k.s:k.h+k.ts+k.n+k.ts+k.s));break;case"hsm":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.s+k.ts+k.n:k.h+k.ts+k.s+k.ts+k.n));break;case"smh":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.s+k.ts+k.n:k.s+k.ts+k.n+k.ts+k.h));break;case"shm":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.s+k.ts+k.n:k.s+k.ts+k.h+k.ts+k.n));break;case"msh":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.n+k.ts+k.s:k.n+k.ts+k.s+k.ts+k.h));break;case"mhs":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.n+k.ts+k.s:k.n+k.ts+k.h+k.ts+k.s));break}j+=(k.h24?k.p:"");
return j}function c(j,k){switch(j.df){case"dmy":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.d+j.ds+j.m:j.d+j.ds+j.m+j.ds+j.y));case"mdy":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.m+j.ds+j.d:j.m+j.ds+j.d+j.ds+j.y));case"dym":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.d+j.ds+j.m:j.d+j.ds+j.y+j.ds+j.m));case"myd":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.m+j.ds+j.d:j.m+j.ds+j.y+j.ds+j.d));case"ymd":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.m+j.ds+j.d:j.y+j.ds+j.m+j.ds+j.d));case"ydm":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.d+j.ds+j.m:j.y+j.ds+j.d+j.ds+j.m))}}function f(k,j){switch(k.ldf){case"dmy":return(k.ld+"[ "+k.lm+"][ "+k.ly+"]{ "+j+" "+k.ld+" "+k.lm+" "+k.ly+"}");case"mdy":return(k.lm+" "+k.ld+"[ "+k.ly+"]{ "+j+"[ "+k.lm+"] "+k.ld+" "+k.ly+"}");case"dym":return(k.ld+"[ "+k.ly+"][ "+k.lm+"]{ "+j+" "+k.ld+" "+k.ly+" "+k.lm+"}");case"myd":return(k.lm+" "+k.ly+" "+k.ld+"{ "+j+"[ "+k.lm+"][ "+k.ly+"] "+k.ld+"}");case"ymd":return(k.ly+" "+k.lm+" "+k.ld+"{ "+j+"[ "+k.ly+"][ "+k.lm+"] "+k.ld+"}");case"ydm":return(k.ly+" "+k.ld+"[ "+k.lm+"]{ "+j+"[ "+k.ly+"] "+k.ld+" "+k.lm+"}");case"dm":return(k.ld+"[ "+k.lm+"]{ "+j+" "+k.ld+" "+k.lm+"}");case"md":return(k.lm+" "+k.ld+"{ "+j+"[ "+k.lm+"] "+k.ld+"]}");case"my":return(k.lm+"[ "+k.ly+"]{ "+j+" "+k.lm+" "+k.ly+"}");case"ym":return(k.ly+" "+k.lm+"{ "+j+"[ "+k.ly+"] "+k.lm+"}")}}return a}())};