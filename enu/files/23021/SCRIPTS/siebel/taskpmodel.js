if(typeof(SiebelAppFacade.TaskPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.TaskPresentationModel");SiebelAppFacade.TaskPresentationModel=(function(){var e=SiebelJS.Dependency("SiebelApp.Constants");var i=SiebelJS.Dependency("SiebelApp.Utils");var j=e.get("TSK_PST_TYPE_LOCALE");var a=e.get("TSK_PST_TYPE_TASKCONTEXT");var c=e.get("TSK_PST_TYPE_CURRENTTASK");function f(){SiebelAppFacade.TaskPresentationModel.superclass.constructor.call(this,{GetName:function(){return"TaskObject"}})}SiebelJS.Extend(f,SiebelAppFacade.PresentationModel);f.prototype.Init=function(){this.AddProperty("GetContainer","s_TaskUIPane");this.AddMethod("InvokeServiceMethod",function(m,n,o){var l=SiebelApp.S_App.GetService(e.get("NAME_TASKUISVC"));if(l){o=l.InvokeMethod(m,n,true)}});this.AddMethod("OnTaskNavigate",function(m,n){var o=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();o.SetProperty(e.get("SWE_VIEW_ID_STR"),e.get("TASKPANE_VIEWNAME"));o.SetProperty("TaskName",n.data.key);o.SetProperty("GroupName",n.parent.data.key);this.ExecuteMethod("InvokeServiceMethod",m,o,l)});this.AttachEventHandler("TaskNavigate","OnTaskNavigate");this.AttachEventHandler(e.get("TASK_PANE_CLOSE"),function(){var m=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();m.SetProperty(e.get("SWE_VIEW_ID_STR"),e.get("TASKPANE_VIEWNAME"));this.ExecuteMethod("InvokeServiceMethod",e.get("METH_TOGGLETASKPANE"),m,l);SiebelApp.S_App.UnregisterExtObject("TaskUIPane")});this.AttachEventHandler(e.get("TASK_NAVIGATE_INBOX"),function(){var m=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();m.SetProperty(e.get("SWE_VIEW_ID_STR"),e.get("TASKPANE_VIEWNAME"));this.ExecuteMethod("InvokeServiceMethod",e.get("METH_GOTOINBOX"),m,l)})};f.prototype.Setup=function(l){l.SetProperty("SWE_OUI_RENDERER","TaskPhyRenderer");SiebelAppFacade.TaskPresentationModel.superclass.Setup.call(this,l);b.call(this,l)};f.prototype.HandleNotify=function(l){this.AddProperty("TaskContext",{});this.AddProperty("LocaleInfo",{});this.AddProperty("CurrentTask",{});this.AddProperty("CurrentTaskChapter",{});b.call(this,l);this.GetRenderer().BindData()};function b(m){for(var n=0,l=m.GetChildCount();n<l;n++){var o=m.GetChild(n);switch(o.GetType()){case j:this.AddProperty("LocaleInfo",d.call(this,o));break;case a:this.AddProperty("TaskContext",g.call(this,o));break;case c:this.AddProperty("CurrentTask",k.call(this,o));this.AddProperty("CurrentTaskChapter",h.call(this,o));break}}}function d(p){if(p.GetType()!==j){return}var o=true;var r;var m;var q={};for(var n=0,l=p.GetPropertyCount();n<l;n++){if(o){r=p.GetFirstProperty();o=false}else{r=p.GetNextProperty()}m=p.GetProperty(r);if(r==="IDS_TASKPANE_CAPTION"){q.CAPTION=m}else{if(r==="IDS_TASKPANE_PROGRESS"){q.PROGRESS=m}else{if(r==="IDS_TASKPANE_GOTOINBOX"){q.GOTOINBOX=m}}}}return q}function g(r){if(r.GetType()!==a){return}var u=[];for(var p=0,q=r.GetChildCount();p<q;p++){var t={};var s=r.GetChild(p);var n=[];t={GrpDispName:s.GetProperty(e.get("TSK_GROUP_DISPLAY_NAME")),grpName:s.GetProperty(e.get("TSK_GROUP_NAME")),goupSeq:s.GetProperty(e.get("TSK_GROUP_SEQUENCE"))};for(var o=0,m=s.GetChildCount();o<m;o++){var l={};var v=s.GetChild(o);l={TaskDispName:v.GetProperty(e.get("TSK_TASK_DISPLAY_NAME")),TaskName:v.GetProperty(e.get("TSK_TASK_NAME")),TaskSeq:v.GetProperty(e.get("TSK_SEQUENCE_NUMBER")),ItemType:v.GetProperty(e.get("TSK_ITEM_TYPE"))};n.push(l)}t.TASKLIST=n;u.push(t)}return u}function k(l){return{TACS:l.GetProperty(e.get("TSK_ACTIVE_CHAPTER_SEQ")),TASS:l.GetProperty(e.get("TSK_ACTIVE_STEP_SEQ")),TAT:l.GetProperty(e.get("TSK_ACTIVE_TASK")),TaskDispName:l.GetProperty(e.get("TSK_TASK_DISPLAY_NAME"))}}function h(r){var u=[];for(var o=0,q=r.GetChildCount();o<q;o++){var s=r.GetChild(o);var m={CDN:s.GetProperty(e.get("TSK_CHAPTER_DISPLAY_NAME")),CS:s.GetProperty(e.get("TSK_CHAPTER_SEQUENCE"))};var t=[];for(var n=0,l=s.GetChildCount();n<l;n++){var p=s.GetChild(n);t.push({TSN:p.GetProperty(e.get("TSK_SEQUENCE_NUMBER")),TSDN:p.GetProperty(e.get("TSK_STEP_DISPLAY_NAME")),SN:p.GetProperty(e.get("TSK_STEP_NAME")),TID:p.GetProperty(e.get("TSK_STEP_INSTANCE_ID"))})}m.STEPS=t;u.push(m)}return u}return f}())};