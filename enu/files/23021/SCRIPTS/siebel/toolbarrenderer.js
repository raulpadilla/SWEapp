if(typeof(SiebelAppFacade.ToolbarRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.ToolbarRenderer");var utils=SiebelJS.Dependency("SiebelApp.Utils");var consts=SiebelJS.Dependency("SiebelApp.Constants");SiebelAppFacade.ToolbarRenderer=(function(){function b(d){var c=d;this.GetPM=function(){return c}}b.prototype.ShowUI=function(){var h=this.GetPM();var e=h.Get("itemArray");var d=h.Get("placeholder");var c="<ul class='siebui-toolbar' role='toolbar'>";var g;for(g=0;g<e.length;g++){var i=e[g];var f=h.ExecuteMethod("CanInvoke",i.GetProperty("command"));if(i.GetProperty("type")==="Link"){c+="<li id = 'tb_"+g+"'class='"+(!f?"siebui-toolbar-disable":"siebui-toolbar-enable")+"' data-cmd='"+i.GetProperty("command")+"' role = 'button'  title = '"+i.GetProperty("caption")+"' name='"+i.GetProperty("name")+"' tabindex='"+(g===0?0:-1)+"'><img src='"+((!f&&!!i.GetProperty("offbitmap"))?i.GetProperty("offbitmap"):i.GetProperty("onbitmap"))+"'class='"+(!f?"ToolbarButtonOff":"ToolbarButtonOn")+"' /></li>"}}c=c+"</ul>";$("#"+d).html(c).attr("role","navigation").attr("title",SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPTOOLBAR_TITLE"))};b.prototype.BindEvents=function(){var d=new SiebelApp.UIStatus();var c=$("#"+this.GetPM().Get("placeholder"));c.delegate("li.siebui-toolbar-enable","click",{ctx:this},function(f){var g=$(this).attr("data-cmd");setTimeout(function(){f.data.ctx.GetPM().OnControlEvent("TOOLBAR_INVOKE",g)},0)});c.delegate("li.siebui-toolbar-enable","keydown",{ctx:this},function(f){a.call(f.data.ctx,$(this),f,d)});c=null};function a(d,e,g){var c=this.GetPM();g=g||new SiebelApp.UIStatus();if(d&&d.length===1&&e){switch(e.which){case $.ui.keyCode.LEFT:d=d.parent().children().filter('[tabindex^="0"]');d.attr("tabIndex","-1").prevAll("li.siebui-toolbar-enable").eq(0).attr("tabIndex","0").focus();break;case $.ui.keyCode.RIGHT:d=d.parent().children().filter('[tabindex^="0"]');d.attr("tabIndex","-1").nextAll("li.siebui-toolbar-enable").eq(0).attr("tabIndex","0").focus();break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:var f=$(d).attr("data-cmd");if(f){c.OnControlEvent("TOOLBAR_INVOKE",f)}break}}}b.prototype.BindData=function(){};b.prototype.UpdateControls=function(){var g=this.GetPM();var d=g.Get("itemArray");var c="#"+g.Get("placeholder");for(var f=0;f<d.length;f++){var h=d[f];var e=g.ExecuteMethod("CanInvoke",h.GetProperty("command"));if(h.GetProperty("type")==="Link"){$("li#tb_"+f,c).removeClass("siebui-toolbar-disable siebui-toolbar-enable").addClass(!e?"siebui-toolbar-disable":"siebui-toolbar-enable").children().eq(0).attr("src",(!e&&!!h.GetProperty("offbitmap"))?h.GetProperty("offbitmap"):h.GetProperty("onbitmap")).removeClass("ToolbarButtonOff ToolbarButtonOn").addClass(!e?"ToolbarButtonOff":"ToolbarButtonOn")}}};return b}())};