/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.JQFullCalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.JQFullCalRenderer");define("siebel/jqfullcalrenderer",["order!3rdParty/fullcalendar/fullcalendar","order!3rdParty/jquery-ui/current/ui/jquery.ui.tooltip","siebel/phyrenderer"],function(){SiebelAppFacade.JQFullCalRenderer=(function(){function g(m){SiebelAppFacade.JQFullCalRenderer.superclass.constructor.call(this,m);var r=$();var k=true;var l=this.GetPM();var o={};var n={};var p={};var q={};this.GetCal=function(){return r};this.SetCal=function(s){r=s};this.IsFirstLoad=function(){return k};this.SetFirstLoad=function(s){k=s};this.GetLocaleConverter=function(){return o};this.SetLocaleConverter=function(s){o=s};this.GetUtilityMap=function(){return n};this.SetUtilityMap=function(s){n=s};this.GetCalCtrlBuilder=function(){return p};this.SetCalCtrlBuilder=function(s){p=s};this.GetEventHandlerMap=function(){return q};this.SetEventHandlerMap=function(s){q=s};this.SetDefaultView=function(){if(!l.Get("ViewMode")){var t=l.Get("Default Calendar Mode");var s;switch(t){case"Monthly":s="2";break;case"Weekly":s="1";break;case"Daily":s="0";break;default:s="0";break}l.AddProperty("ViewMode",s)}}}SiebelJS.Extend(g,SiebelAppFacade.PhysicalRenderer);g.prototype.Init=function(){SiebelAppFacade.JQFullCalRenderer.superclass.Init.call(this);this.AttachPMBinding("ParseEventInfoOUI",j,{scope:this,when:function(){return this.GetPM().Get("ReturnStartDate")&&(this.GetPM().Get("ReturnStartDate")!=="")}});this.AttachPMBinding("ParseEventInfoOUI",h,{scope:this,when:function(){return this.IsFirstLoad()}});this.AttachPMBinding("ParseEventInfoOUI",this.BindData)};function d(){var k=this.GetPM();k.AddProperty("EnableProportionalRender",true);$("#"+k.Get("GetFullId")).css("overflow-x","auto");this.SetDefaultView();this.SetCal($("#calendar_"+this.GetPM().Get("GetPlaceholder")));this.SetLocaleConverter(new SiebelAppFacade.CalLocaleConverter());this.SetUtilityMap(new SiebelAppFacade.CalUtility());this.SetCalCtrlBuilder(new SiebelAppFacade.CalCtrlBuilder(k,this.GetCal(),this.GetUtilityMap()));this.SetEventHandlerMap(new SiebelAppFacade.CalEventHandlers(k,this.GetCal(),this.GetCalCtrlBuilder(),this.GetUtilityMap()))}function j(){var k=this.GetPM();k.AddProperty("SelectedDate",$.fullCalendar.parseDate(k.Get("ReturnStartDate")));k.AddProperty("ReturnStartDate","")}function h(){var l=this.GetPM();var k=this.GetCal();var m=this.GetUtilityMap();this.SetFirstLoad(false);if(l.Get("SelectedDate")&&(l.Get("SelectedDate")>k.fullCalendar("getDate")||l.Get("SelectedDate")<k.fullCalendar("getDate"))){k.fullCalendar("gotoDate",l.Get("SelectedDate"))}if(l.Get("ViewMode")&&l.Get("ViewMode")!==m.ViewNameToMode(k.fullCalendar("getView").name)){k.fullCalendar("changeView",m.ViewModeToName(l.Get("ViewMode")))}}g.prototype.BindEvents=function(k){$(window).bind("resize.JQFullCalRenderer",{ctx:this},function(l){if(l.target===window){l.data.ctx.resize()}});$("#openSidebarButton").bind("click.JQFullCalRenderer",{ctx:this},function(l){l.data.ctx.resize()});$("#sidebarCloseButton").bind("click.JQFullCalRenderer",{ctx:this},function(l){l.data.ctx.resize()});if(this.GetPM().Get("Enable External Drag And Drop")==="Y"){this.GetCal().bind("dragover",function(l){l.preventDefault()}).bind("drop",{ctx:this},this.GetEventHandlerMap().OnExtHTMLDropHandler)}};function e(){var o=this.GetPM();var q=o.Get("Start Day of the Week");var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var m=$.inArray(q,n);var p=[o.Get("Sunday Workday Flag"),o.Get("Monday Workday Flag"),o.Get("Tuesday Workday Flag"),o.Get("Wednesday Workday Flag"),o.Get("Thursday Workday Flag"),o.Get("Friday Workday Flag"),o.Get("Saturday Workday Flag")];var r=[];if(typeof q==="undefined"||m===-1){m=parseInt(o.Get("First Day of Week"),10)}o.AddProperty("Week Day Number",m);for(var l=0;l<p.length;l++){if(typeof p[l]==="undefined"){r=[];for(var k=m;k<m+5;k++){r.push(k)}break}else{if(p[l]==="Y"||p[l]==="1"){r.push(l)}}}o.AddProperty("Custom Week",r)}g.prototype.ShowUI=function(){SiebelAppFacade.JQFullCalRenderer.superclass.ShowUI.call(this);var o=this.GetPM();var p=this;d.call(this);e.call(this);var n=this.GetCal();var l=this.GetEventHandlerMap();var q;var m;if(o.Get("RTL Mode")==="Y"){q={left:"",center:"next title prev today",right:""};m={prev:"circle-triangle-e",next:"circle-triangle-w"}}else{q={left:"",center:"today prev title next",right:""}}var r={allDaySlot:true,allDayText:"",axisFormat:"h(:mm)tt",buttonText:{today:o.Get("UISTR Today Button"),month:o.Get("UISTR Monthly Tab"),week:o.Get("UISTR Weekly Tab"),day:o.Get("UISTR Daily Tab"),prev:"",next:"",prevYear:"",nextYear:""},buttonIcons:m,columnFormat:{month:"dddd",week:"ddd M/d",day:"dddd M/d"},contentHeight:500,customWeek:o.Get("Custom Week"),dayClick:function(){l.OnDayClick.apply(l,arguments)},dayNames:o.Get("WeekDayStringArray"),defaultView:this.GetUtilityMap().ViewModeToName(o.Get("ViewMode")),droppable:o.Get("Enable External Drag And Drop")==="Y",drop:function(){var s=Array.prototype.slice.call(arguments,0);s.push(this);l.OnExtJQueryDropHandler.apply(l,s)},editable:o.Get("CanUpdate"),eventAfterRender:function(){l.OnEventAfterRender.apply(l,arguments)},eventClick:function(){l.OnEventClick.apply(l,arguments)},eventDrop:function(){l.OnEventDrop.apply(l,arguments)},eventRender:function(){l.OnEventRender.apply(l,arguments)},eventResize:function(){l.OnEventResize.apply(l,arguments)},events:function(){l.OnEventRefresh.apply(l,arguments)},firstDay:{month:o.Get("Week Day Number"),agendaWeek:o.Get("Week Day Number")},firstHour:o.Get("Preferred Business Day Start Time").substr(0,2),header:q,isRTL:o.Get("RTL Mode")==="Y",lazyFetching:false,longDateFormat:o.Get("Long Date Format"),monthNames:o.Get("MonthStringArray"),resizable:true,select:function(){l.OnCalSelect.apply(l,arguments)},selectable:true,selectHelper:true,slotMinutes:parseInt(o.Get("Preferred Timeslot Interval"),10),timeFormat:{agenda:"","":"h(:mm)t"},titleFormat:{month:"MMMM yyyy",week:"<'&#8212;'>",day:o.Get("Long Date Format")},viewDisplay:function(){l.OnViewDisplayChange.apply(l,arguments)},weekends:{month:true,agendaWeek:o.Get("Preferred Weekly Mode")==="7 Day Weekly",agendaDay:true},weekMode:"variable"};var k=this.GetLocaleConverter().ConvertLocale(r);r=$.extend(true,{},r,k);o.AddProperty("ShortMonthNames",r.monthNamesShort);o.AddProperty("ShortDayNames",r.dayNamesShort);this.GetCal().fullCalendar(r);a.call(this)};function a(){var m=this.GetPM();var n=m.Get("UISTR Go to Today")||"Go to Today";var k;var l;var p;var o;if(m.Get("RTL Mode")!=="Y"){k=m.Get("UISTR Next Day")||"Next Day";l=m.Get("UISTR Previous Day")||"Previous Day"}else{l=m.Get("UISTR Next Day")||"Next Day";k=m.Get("UISTR Previous Day")||"Previous Day";p=$(".fc-button-next");o=$(".fc-button-prev");p.removeClass("fc-button-next");p.addClass("fc-button-prev");o.removeClass("fc-button-prev");o.addClass("fc-button-next")}$(".fc-button-today").attr("title",n);$(".fc-button-next").attr("title",k);$(".fc-button-prev").attr("title",l);
this.GetCalCtrlBuilder().AddControls();m.AddProperty("MultViewFrames",$("#_swecontent").find("[id^='_svf']").filter(function(){return this.clientHeight!==0}).length);this.resize()}g.prototype.resize=function(){var k=this.GetPM();$("#"+k.Get("GetFullId")).width(0);$("#"+k.Get("GetFullId")).width($("#"+k.Get("GetFullId")).parent().width());$(".fc-content").css("width",$(".fc-header").width());if(k.Get("MultViewFrames")===1){if($(window).height()!==k.Get("WindowHeight")||$(window).width()!==k.Get("WindowWidth")){k.AddProperty("WindowHeight",$(window).height());k.AddProperty("WindowWidth",$(window).width());this.GetCal().fullCalendar("option","contentHeight",($("#_swecontent").height()*0.9)-$(".fc-header").height())}}};g.prototype.EndLife=function(){$(window).unbind("resize.JQFullCalRenderer");$("#openSidebarButton").unbind("click.JQFullCalRenderer");$("#sidebarCloseButton").unbind("click.JQFullCalRenderer");this.GetCal().fullCalendar("destroy");this.SetCal(null);this.SetLocaleConverter(null);this.SetUtilityMap(null);this.SetCalCtrlBuilder(null);this.SetEventHandlerMap(null);SiebelAppFacade.JQFullCalRenderer.superclass.EndLife.call(this)};g.prototype.BindData=function(){var l=[];var G=this.GetPM();var D=[];var r=[];var A=this.GetCal();var H=this.GetUtilityMap();var F,C,B;if(this.inProgress){return[]}var v=G.Get("GetRecordSet");var m=G.Get("EventInfo");if(this.GetCal()&&m){for(F=0;F<m.length;F++){var u=m[F];var E=[];var w=[];var q=[];var o;var x;for(C=0;C<u.DisplayField.length;C++){x=u.DisplayField[C];if((x.Name!=="Readonly"||!G.Get("CanUpdate"))&&(x.FieldValue===""&&x.IconFile!=="")){E.push(x.IconFile);w.push(x.ToolTip)}if(x.FieldValue===""){continue}o=parseInt(x.Sequence,10);q[o]=C}var t=[];var I;for(B=1;B<q.length;B++){I=[];x=u.DisplayField[q[B]];I.FieldValue=x.FieldValue;I.ToolTip=x.ToolTip;I.DrillDown=x.DrillDown;I.FieldColor=x.FieldColor;I.CSSName=(this.GetUtilityMap().IsAllDayEvent(u))?"calendar-DisplayField-AllDayEventFont":"calendar-DisplayField-Font"+B.toString();t.push(I)}var z=u.EventStyle.replace(/\s/g,"");if(typeof u.EventStyle!=="undefined"){if($.inArray(u.EventLegend,D)<0){D.push(u.EventLegend)}if(typeof r[u.EventLegend]==="undefined"){r[u.EventLegend]=z}}var s=this.GetUtilityMap().IsAllDayEvent(u);if(u.Planned===u.PlannedCompletion){var n=$.fullCalendar.parseDate(u.Planned);var y=parseInt(G.Get("Preferred Timeslot Interval"),10);n.setMinutes(n.getMinutes()+y);u.PlannedCompletion=$.fullCalendar.formatDate(n,"MM/dd/yyyy HH:mm:ss");if(u.Buscomp==="Action"){s=false}}l.push({id:u.Id,title:"",start:u.Planned,end:u.PlannedCompletion,multiDisplay:t,displayFieldOne:u.DisplayField[q[1]].FieldValue,url:u.DisplayField[q[1]].DrillDown,repeating:u.Repeating,calendarId:u.CalendarId,readOnly:u.ReadOnly,icons:E,iconText:w,className:"fc-event-skin calendar-EventStyle-"+z,allDay:s,editable:G.Get("CanUpdate")})}}A.fullCalendar("removeEvents");A.fullCalendar("addEventSource",l);i.call(this,l);if(G.Get("DelayRenderUpdate")){G.AddProperty("DelayRenderUpdate",false);A.fullCalendar("refetchEvents")}G.AddProperty("CSSLegendsLDC",D);G.AddProperty("CSSLegendsLIC",r);var p=$(".fc-button-today").children("span");H.AttachAutoAttributes($(p).children(".fc-button-content"),"Button","today");p=$(".fc-button-prev").children("span");H.AttachAutoAttributes($(p).children(".fc-button-content"),"Button","prev");H.AttachAutoAttributes($(p),"Button","prev");p=$(".fc-button-next").children("span");H.AttachAutoAttributes($(p).children(".fc-button-content"),"Button","next");H.AttachAutoAttributes($(p),"Button","next")};function c(){var n=this.GetPM();var r=this.GetCal();var u=r.fullCalendar("getView");var v=parseInt(n.Get("Preferred Timeslot Interval"),10);if(v===0){return}var t=Math.floor(60/v);var k=[];var l={};var m=Math.floor((u.end.valueOf()-u.start.valueOf())/(24*60*60*1000));var s=n.Get("Custom Week");var q=-1;var p,o;for(p=0;p<m;p++){if(s&&!r.fullCalendar("option","weekends")[u.name]){if($.inArray((u.start.getDay()+p)%7,s)===-1){continue}else{q+=1}}else{q=p}l[(u.start.getDay()+p)%7]=q;k[q]=[];for(o=0;o<t*24;o++){k[q].push({events:{},horzPos:62})}}return{bucket:k,dayToColumnMap:l}}function f(m,E,s){var B=this.GetPM();var C=this.GetUtilityMap();var v=this.GetCal().fullCalendar("getView");var t,w;var x,q;var o,n;var A,z,y;var r=[];var l=parseInt(B.Get("Preferred Timeslot Interval"),10);if(l===0){return}var D=Math.floor(60/l);for(A=0;A<m.length;A++){t=m[A];x=C.HourDecimal(t.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+t.start.getMinutes());q=C.HourDecimal(t.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+t.end.getMinutes());o=parseInt(x*D,10)<0?0:parseInt(x*D,10);n=parseInt(q*D,10)>D*24?D*24:parseInt(q*D,10);if(o===n){n+=1}if(!C.SameDay(t.start,t.end)){var p=new Date(t.start.valueOf());if(p<=v.start){p=new Date(v.start.valueOf())}p.setHours(0,0,0,0);var u=Math.min(t.end,v.end);r[t.id]={daysSpanned:0,daysCounted:0};for(z=p;z<=u;z.setDate(z.getDate()+1)){if(typeof(s[z.getDay()])==="undefined"){continue}r[t.id].daysSpanned+=1;w=E[s[z.getDay()]];for(y=0;y<D*24;y++){if(y<o&&C.SameDay(z,t.start)){continue}if(y>=n&&C.SameDay(z,t.end)&&y!==0){break}w[y].events[t.id]=0}}}else{if(typeof(s[t.start.getDay()])==="undefined"){continue}w=E[s[t.start.getDay()]];for(z=o;z<n;z++){w[z].events[t.id]=0}}}B.AddProperty("MultiDayCounter",r)}function b(n,G,t){var E=this.GetUtilityMap();var w=this.GetCal().fullCalendar("getView");var u,y;var z,r;var p,o;var C,s;var D,B,A;var l=parseInt(this.GetPM().Get("Preferred Timeslot Interval"),10);if(l===0){return}var F=Math.floor(60/l);for(D=0;D<n.length;D++){u=n[D];z=E.HourDecimal(u.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+u.start.getMinutes());r=E.HourDecimal(u.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+u.end.getMinutes());p=parseInt(z*F,10)<0?0:parseInt(z*F,10);o=parseInt(r*F,10)>F*24?F*24:parseInt(r*F,10);if(p===o){o+=1}if(!E.SameDay(u.start,u.end)){var q=new Date(u.start.valueOf());if(q<=w.start){q=new Date(w.start.valueOf())}q.setHours(0,0,0,0);var v=Math.min(u.end,w.end);var x;var m;for(B=q;B<=v;B.setDate(B.getDate()+1)){if(typeof(t[B.getDay()])==="undefined"){continue}if(E.SameDay(B,u.start)){C=p;x=p;m=F*24}else{if(E.SameDay(B,u.end)){C=0;x=0;if(o===x){m=o+1}else{m=o}}else{C=0;x=0;m=F*24}}y=G[t[B.getDay()]];s=E.GetObjectSize(y[C].events);for(A=x;A<m;A++){if(E.GetObjectSize(y[A].events)>s){C=A;s=E.GetObjectSize(y[C].events)}}for(A=x;A<m;A++){y[A].events[n[D].id]={maxSlot:C,maxSlotSize:s}}}}else{if(typeof(t[u.start.getDay()])==="undefined"){continue}C=p;y=G[t[u.start.getDay()]];s=E.GetObjectSize(y[C].events);for(B=p;B<o;B++){if(E.GetObjectSize(y[B].events)>s){C=B;s=E.GetObjectSize(y[C].events)}}for(B=p;B<o;B++){y[B].events[n[D].id]={maxSlot:C,maxSlotSize:s}}}}}function i(n){var m=this.GetPM();var l=this.GetCal().fullCalendar("getView");if(m.Get("EnableProportionalRender")&&(l.name==="agendaWeek"||l.name==="agendaDay")){var o=c.call(this);var p=o.bucket;var k=o.dayToColumnMap;n.sort(this.GetUtilityMap().EventSortOrder);
f.call(this,n,p,k);b.call(this,n,p,k);m.AddProperty("DayToColumnMap",k);m.AddProperty("TimeslotBucket",p)}}return g}());SiebelAppFacade.CalCtrlEventHandlers=(function(){function a(d,c,e,g){var b=d;var i=c;var f=e;var h=g;this.GetPM=function(){return b};this.GetCal=function(){return i};this.GetCalCtrlBuilder=function(){return f};this.GetUtilityMap=function(){return h}}a.prototype={OnCancelClick:function(b){$("#"+b).dialog("close")},OnDatepickerSelect:function(e){var c=this.GetCal();var b=this.GetPM();var d=$("#"+e).datepicker("getDate");c.fullCalendar("gotoDate",d);b.AddProperty("SelectedDate",c.fullCalendar("getDate"));b.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",b.ExecuteMethod("PopulatePropSet"));this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnHomePageViewBtnClick:function(d){var c=this.GetPM();var b=CCFMiscUtil_CreatePropSet();b.SetProperty("SelectedDay",$.fullCalendar.formatDate(new Date(this.GetCal().fullCalendar("getDate")),"MM/dd/yyyy"));switch(d){case"month":c.ExecuteMethod("InvokeMethod","GoToMonthly",b);break;case"agendaWeek":c.ExecuteMethod("InvokeMethod","GotoWeekly",b);break;case"agendaDay":c.ExecuteMethod("InvokeMethod","GotoToday",b);break;default:break}},OnQuickAddDialogOkClick:function(f,e,c){var d=this.GetPM();var b=$("input:text[name=eventDescription]").val();if($.trim(b)===""){b="";d.OnControlEvent("newEvent",b,e,c,null)}else{d.OnControlEvent("newEvent",b,e,c,null);this.GetCal().fullCalendar("refetchEvents")}$("#"+f).dialog("close");this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnRepeatDialogOkClick:function(h,e,b,d,c){var f=CCFMiscUtil_CreatePropSet();var g=$("input:radio[name=userchoice]:checked").val();if(g!=="SaveThisOne"&&g!=="SaveAll"){d();$("#"+h).dialog("close")}else{f.SetProperty("Repeating","Y");if(g==="SaveThisOne"){f.SetProperty("Modify","ThisOne")}else{f.SetProperty("Modify","AllFuture")}this.GetPM().OnControlEvent(b,$.fullCalendar.formatDate(e.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(e.end,"MM/dd/yyyy HH:mm:ss"),e.calendarId,f);c();$("#"+h).dialog("close")}},OnSettingsDialogOkClick:function(e){var c=this.GetPM();var b=false;if(c.Get("Enable Timezone Picker")==="Y"){if(c.Get("Timezone")!==$("#tzCombo").val()){c.AddProperty("Timezone",$("#tzCombo").val());b=true}}var d=$("#ownerCombo").val();if(c.Get("Enable Owner Picker")==="Y"){if(c.Get("Owner")!==d){if(d==="ALLEMPLOYEES"){c.ExecuteMethod("InvokeMethod","GoToEmployeeCalView",CCFMiscUtil_CreatePropSet())}else{c.AddProperty("Owner",d);c.ExecuteMethod("UpdateUserPermission");if((d===c.Get("User Login Name"))&&(c.Get("FromExternalCalendar")==="Y")){c.ExecuteMethod("InvokeMethod","GoToExternalCalView",c.ExecuteMethod("PopulatePropSet"))}}b=true}}if(b&&d!=="ALLEMPLOYEES"){c.AddProperty("DelayRenderUpdate",true);c.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",c.ExecuteMethod("PopulatePropSet"))}$("#"+e).dialog("close");this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnViewBtnClick:function(b){this.GetPM().AddProperty("ViewMode",this.GetUtilityMap().ViewNameToMode(b));this.GetCal().fullCalendar("changeView",b);this.GetCalCtrlBuilder().AddColorCodedLegends($(".fc-header"))},OnNavBtnClick:function(b){this.GetCal().fullCalendar(b)},OnPrintCalendar:function(){var p=this.GetPM();var m=$("#"+p.Get("GetFullId"));var g=0;var i="";var c=p.Get("ViewMode");var b=parseInt(p.Get("Preferred Timeslot Interval"),10);var s=Math.floor(60/(b===0?15:b));var r=s*24;var n=$("#calendar_"+p.Get("GetPlaceholder"));var q=m.parent().width();var h=$(".fc-content").width();var j=$(".fc-content").height();if(p.Get("ViewMode")==="2"){g=$(".fc-content").height()}else{g=r*($(".fc-slot1").height()>=21?$(".fc-slot2").height():21)+$(".fc-header").height()+$(".fc-agenda-allday").height()+60;if(c==="0"){i=$(".fc-view-agendaDay .calSlots").scrollTop()}else{if(c==="1"){i=$(".fc-view-agendaWeek .calSlots").scrollTop()}}}m.css("overflow-x","hidden");m.css("overflow-y","hidden");m.css("width",1002);$(".fc-content").css("width",995);if(p.Get("ViewMode")!=="2"){$(".fc-content").css("height",g)}n.fullCalendar("option","contentHeight",g);var e=m.clone();var l=document.createElement("div");$(l).append(e);$(l).attr("id","PrintCalendar");$(l).addClass("tempCalendar");m.css("width",q);$(".fc-content").css("width",h);if(p.Get("ViewMode")!=="2"){$(".fc-content").css("height",j)}n.fullCalendar("option","contentHeight",j);if(c==="0"){$(".fc-view-agendaDay .calSlots").scrollTop(i)}else{if(c==="1"){$(".fc-view-agendaWeek .calSlots").scrollTop(i)}}if(navigator.appName!=="Microsoft Internet Explorer"){$("#_swecontent").append($(l).css({top:"0px",left:"0px"}));var f=$("#_sweview").css("display");$("#_sweview").css("display","none");window.print();$("#_sweview").css("display",f);$(".tempCalendar").remove()}else{var d=$("#sp_theme").get(0).outerHTML;var u=$("#fc_theme").get(0).outerHTML;var k=$("#jq_theme").get(0).outerHTML;var o=$("#sca_them").get(0).outerHTML;var t=window.open("","","'width=1002, height="+g+", scrollbars=no, resizable=no'");t.document.open();t.document.write("<!DOCTYPE html>\n<html>\n<head>\n"+k+"\n"+u+"\n"+o+"\n"+d+"\n\n</head>\n<body onload='window.print();window.close();' >\n"+l.innerHTML+"\n</body>\n</html>");t.document.close()}n.fullCalendar("refetchEvents")}};return a}());SiebelAppFacade.CalCtrlBuilder=(function(){function g(j,i,l){var n=i;var h=j;var m=l;var k=new SiebelAppFacade.CalCtrlEventHandlers(j,i,this,l);this.GetCal=function(){return n};this.GetPM=function(){return h};this.GetCalCtrlEventHandlers=function(){return k};this.GetUtilityMap=function(){return m}}g.prototype.AddColorCodedLegends=function(s){var l=this.GetPM();var m=l.Get("CSSLegendsLDC")||[];var t=l.Get("CSSLegendsLIC")||[];if($("#siebui-cal-legend-row")){$("#siebui-cal-legend-row").remove()}var n=$("<tr id='siebui-cal-legend-row'><td COLSPAN=3 id='color_legend' "+(l.Get("RTL Mode")==="Y"?"style=text-align&#58;right;":"")+"/></tr>");n.appendTo(s);m.sort();for(var p=0;p<m.length;p++){var o=(l.Get("RTL Mode")==="Y"?m.length-p-1:p);var h=t[m[o]];if(m[o]!==""){var r;if(l.Get("RTL Mode")!=="Y"){r=$("<span id='color_square_"+h+"' title=''>&#9632</span><span id='legend_"+h+"'>"+m[o]+"</span>")}else{r=$("<span id='legend_"+h+"'>"+m[o]+"</span><span id='color_square_"+h+"' title=''>&#9632</span>")}$("#color_legend").append(r)}else{var q;if(l.Get("RTL Mode")!=="Y"){q=$("<span id='color_square_"+h+"' title=''>&#9632</span><span id='legend_"+h+"'>Undefined</span>")}else{q=$("<span id='legend_"+h+"'>Undefined</span><span id='color_square_"+h+"' title=''>&#9632</span>")}}var k=$(".calendar-EventStyle-"+h).css("background-color");if(!k){$("#color_square_"+h).remove();$("#legend_"+h).remove()}}};g.prototype.AddControls=function(){var x=this.GetPM();var M=this;var y=this.GetCalCtrlEventHandlers();var ag=x.Get("Home Page Mode");var E=$(".fc-header-center").width();var H=[];var B=[];var T=[];if(x.Get("CanInsert")){if(x.Get("Enable New Contact Call Button")==="Y"){var G=x.Get("UISTR Contact Call")||"Contact Call";
H.push(d.call(this,x.Get("UISTR Contact Call Button"),G,"newContactCall",function(){x.OnControlEvent("newLSCall","Contact")}))}if(x.Get("Enable New Account Call Button")==="Y"){var Y=x.Get("UISTR Account Call")||"Account Call";H.push(d.call(this,x.Get("UISTR Account Call Button"),Y,"newAccountCall",function(){x.OnControlEvent("newLSCall","Account")}))}if(x.Get("Enable New Meeting Button")==="Y"){var L=x.Get("UISTR Meeting")||"Meeting";H.push(d.call(this,x.Get("UISTR New Meeting Button"),L,"newMeetingCall",function(){x.OnControlEvent("newLSCall","Meeting")}))}if(x.Get("Enable New Button")==="Y"){var aa=x.Get("UISTR New Record Icon")||"images/calAddNew_icon.gif";var ah=x.Get("UISTR New Record")||"New Record";B.push(b.call(this,aa,ah,"newEvent",function(){var k=M.GetCal().fullCalendar("getDate");var n;var m=new Date();var j=m.getMinutes();var l=parseInt(x.Get("Preferred Timeslot Interval"),10);var i=parseInt(x.Get("Preferred Duration"),10);k.setHours(m.getHours()+Math.floor((j+l)/60));k.setMinutes(((Math.floor(j/l)+1)*l)%60);k.setSeconds(0);n=new Date(k);n.setMinutes(n.getMinutes()+i);x.OnControlEvent("newEvent","",k,n,null)}))}}if(x.Get("Enable Print Button")==="Y"){var u=x.Get("UISTR Print Icon")||"images/icon_quick_print.gif";var I=x.Get("UISTR Print")||"Print";B.push(b.call(this,u,I,"printCalendar",function(){y.OnPrintCalendar()}))}if(x.Get("Enable Daily")==="Y"){var p=x.Get("UISTR Daily View Icon")||"images/calDay_icon.gif";var C=x.Get("UISTR Switch to daily view")||"Switch to daily view";if(ag){T.push(b.call(this,p,C,"agendaDay",function(){y.OnHomePageViewBtnClick("agendaDay")}))}else{T.push(b.call(this,p,C,"agendaDay",function(){y.OnViewBtnClick("agendaDay")}))}}if(x.Get("Enable Weekly")==="Y"){var O=x.Get("UISTR Weekly View Icon")||"images/calWeek_icon.gif";var F=x.Get("UISTR Switch to week view")||"Switch to week view";if(ag){T.push(b.call(this,O,F,"agendaWeek",function(){y.OnHomePageViewBtnClick("agendaWeek")}))}else{T.push(b.call(this,O,F,"agendaWeek",function(){y.OnViewBtnClick("agendaWeek")}))}}if(x.Get("Enable Monthly")==="Y"){var R=x.Get("UISTR Monthly View Icon")||"images/calMonth_icon.gif";var Q=x.Get("UISTR Switch to month view")||"Switch to month view";if(ag){T.push(b.call(this,R,Q,"month",function(){y.OnHomePageViewBtnClick("month")}))}else{T.push(b.call(this,R,Q,"month",function(){y.OnViewBtnClick("month")}))}}if((x.Get("Enable Timezone Picker")==="Y"||x.Get("Enable Owner Picker")==="Y")&&(!ag||ag!=="Y")){var s=x.Get("UISTR Advanced Settings Icon")||"images/calMore_icon.gif";var z=x.Get("UISTR Advanced Calendar Settings")||"Advanced Calendar Settings";T.push(b.call(this,s,z,"settings",function(){M.BuildSettingsDialog()}))}var r=$(".fc-header");r.find("tr:first").attr("id","siebui-cal-button-row-1").addClass("siebui-cal-stdbutton-row");var v=$("<tr id='siebui-cal-button-row-2'><td colspan=3 id='cal-custom-buttons'/></tr>");if(H.length===0){v.addClass("siebui-cal-custombutton-row-empty")}else{v.addClass("siebui-cal-custombutton-row")}r.append(v);var ae=v.find("td");var af=$(".fc-header-left");var ad=$(".fc-header-right");var ai=$(".fc-header-center");var ac="<span class='fc-header-space'/>";var h="caldate_picker";var S="<input type='text' id='"+h+"'/>";var t=$(".fc-header-center");var A=$(".fc-button-today");var w=$(".fc-button-prev");var D=$(".fc-button-next");var K={};var N={};if(A.length>0){K=A.parent();N=A.prev();A=d.call(this,x.Get("UISTR Today Button"),A.attr("title"),"today",function(){y.OnNavBtnClick("today")});$(".fc-button-today").remove();if(N[0]){N.after(A)}else{K.prepend(A)}}var q=x.Get("UISTR Previous Icon")||"images/rcnv_prv_1.gif";if(w.length>0){K=w.parent();N=w.prev();w=b.call(this,q,w.attr("title"),"prev",function(){y.OnNavBtnClick(x.Get("RTL Mode")!=="Y"?"prev":"next")});$(".fc-button-prev").remove();if(N[0]){N.after(w)}else{K.prepend(w)}}var J=x.Get("UISTR Next Icon")||"images/rcnv_nxt_1.gif";if(D.length>0){K=D.parent();N=D.prev();D=b.call(this,J,D.attr("title"),"next",function(){y.OnNavBtnClick(x.Get("RTL Mode")!=="Y"?"next":"prev")});$(".fc-button-next").remove();if(N[0]){N.after(D)}else{K.prepend(D)}}var o="<span class='fc-button fc-button-datepicker' fc-state-default id='cal-datepicker-button'>"+S+"</span>";if(x.Get("RTL Mode")!=="Y"){for(var ab=0;ab<B.length;ab++){if(E>300){af.append(ac);af.append(B[ab])}else{ae.append(ac);ae.append(B[ab])}}T.push(ac);for(var Z=0;Z<T.length;Z++){if(E>300){ad.append(ac);ad.append(T[Z])}else{ae.append(ac);ae.append(T[Z])}}for(var X=0;X<H.length;X++){ae.append(ac);ae.append(H[X])}if(E>300){ae.attr("align","left")}else{ae.attr("align","center")}ai.append(ac+o+ac)}else{af=$(".fc-header-right");ad=$(".fc-header-left");B.unshift(ac);for(var W=B.length-1;W>=0;W--){if(E>300){af.append(ac);af.append(B[W])}else{ae.append(ac);ae.append(B[W])}}for(var V=T.length-1;V>=0;V--){if(E>300){ad.append(ac);ad.append(T[V])}else{ae.append(ac);ae.append(T[V])}}for(var U=H.length-1;U>=0;U--){ae.append(ac);ae.append(H[U])}if(E>300){ae.attr("align","right")}else{ae.attr("align","center")}ai.prepend(ac+o+ac)}var P=x.Get("UISTR Date Picker Icon")||"images/calPicker_icon.gif";a.call(this,h,P,function(){y.OnDatepickerSelect.call(y,h)});this.AddColorCodedLegends($(".fc-header"));$(".fc-button-next").click(function(){M.AddColorCodedLegends($(".fc-header"))});$(".fc-button-prev").click(function(){M.AddColorCodedLegends($(".fc-header"))});$(".fc-button-today").click(function(){M.AddColorCodedLegends($(".fc-header"))})};g.prototype.BuildQuickAddDialog=function(h,k){var j=this.GetPM();var u=this.GetCalCtrlEventHandlers();var n=this.GetCal();var p=this.GetUtilityMap();var t=CCFMiscUtil_CreatePropSet();var o=j.Get("UISTR Tooltip Field Label:Description")||"Description";var i=j.Get("UISTR Repeating Dialog OK Button")||"OK";var m=j.Get("UISTR Repeating Dialog Cancel Button")||"Cancel";var s=j.Get("UISTR New Event")||"New Event";var r=e.call(this,"QuickAddDialog");var q={};q[i]=function(){u.OnQuickAddDialogOkClick("quickAddDialog",h,k)};q[m]=function(){u.OnCancelClick("quickAddDialog")};var l=f.call(this,"quickAddDialog",r,s,q);p.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===i}),"Button","QuickAddOK");p.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===m}),"Button","QuickAddCancel");l.dialog("open")};g.prototype.BuildRepeatDialog=function(h,i,n,u){var k=this.GetPM();var t=this.GetCalCtrlEventHandlers();var s=CCFMiscUtil_CreatePropSet();var o=this.GetUtilityMap();var r=e.call(this,"RepeatDialog");var j=k.Get("UISTR Repeating Dialog OK Button")||"OK";var m=k.Get("UISTR Repeating Dialog Cancel Button")||"Cancel";var q=k.Get("UISTR Repeating Event Dialog")||"Repeating Event Dialog";var p={};p[j]=function(){t.OnRepeatDialogOkClick("repeatDialog",h,i,n,u)};p[m]=function(){n();t.OnCancelClick("repeatDialog")};var l=f.call(this,"repeatDialog",r,q,p);l.dialog("option","close",function(v,w){if(v.originalEvent&&$(v.originalEvent.target).closest(".ui-dialog-titlebar-close").length!==0){n()
}$("#repeatDialog").remove()});o.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===j}),"Button","RepeatOK");o.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===m}),"Button","RepeatCancel");l.dialog("open")};g.prototype.BuildSettingsDialog=function(){var k=this.GetPM();var s=this.GetCalCtrlEventHandlers();var o=this.GetUtilityMap();var j=k.Get("UISTR Repeating Dialog OK Button")||"OK";var m=k.Get("UISTR Repeating Dialog Cancel Button")||"Cancel";var r=k.Get("UISTR Settings")||"Settings";var p=e.call(this,"SettingsDialog");var q={};q[j]=function(){s.OnSettingsDialogOkClick("calSettingsDialog")};q[m]=function(){s.OnCancelClick("calSettingsDialog")};var i=f.call(this,"calSettingsDialog",p,r,q);o.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===j}),"Button","SettingsOK");o.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===m}),"Button","SettingsCancel");i.dialog("open");var n=k.Get("Timezone");if(k.Get("Enable Timezone Picker")==="Y"){if(typeof n==="undefined"){var l=k.Get("Default Timezone")||"(GMT-08:00) Pacific Time (US & Canada)";k.AddProperty("Timezone",l);n=l}$("#tzCombo").val(n)}var h=k.Get("Owner");if(k.Get("Enable Owner Picker")==="Y"){$("#ownerCombo").val(h)}};function b(k,h,i,l){var j="<img class='fc-button-content cal-ui-"+i+"' src='"+k+"' alt='"+h+"' title='"+h+"'></img>";return c.call(this,j,h,i,l)}function d(k,i,j,l){var h="<span class='fc-button-content cal-ui-"+j+"'>"+k+"</span>";return c.call(this,h,i,j,l)}function c(i,h,j,l){var k=$("<span class='fc-button fc-button-"+j+" fc-state-default' id='cal-"+j+"-button'><button ot='Button' un="+h.replace(/\s/g,"")+" rn='Calendar' class='fc-button-inner' type='button' alt='"+h+"' title='"+h+"'>"+i+"</button></span>");k.click(function(){if(!k.hasClass("fc-state-disabled")){l()}}).mousedown(function(){k.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-down")}).mouseup(function(){k.removeClass("fc-state-down")}).hover(function(){k.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-hover")},function(){k.removeClass("fc-state-hover").removeClass("fc-state-down")});return k}function a(h,o,l){var j=this.GetPM();var p=this.GetUtilityMap();var m=$("#"+h);m.css("z-index","9999");m.css("position","absolute");m.css("top","-999px");var k=j.Get("ShortMonthNames");var i=j.Get("ShortDayNames");var n=j.Get("UISTR Choose a date")||"Choose a date";m.datepicker({buttonImage:o,buttonText:n,buttonImageOnly:false,changeMonth:true,changeYear:true,dayNamesMin:i,isRTL:j.Get("RTL Mode")==="Y",monthNames:j.Get("MonthStringArray"),monthNamesShort:k,onSelect:l,showOn:"button"});m.keydown(function(){m.focus()});$(".ui-datepicker-trigger").addClass("fc-button-inner");$(".ui-datepicker-trigger").attr("alt",n);$(".ui-datepicker-trigger").attr("title",n);$(".ui-datepicker-trigger").attr("tabindex",0);$(".ui-datepicker-trigger").children().addClass("fc-button-content");$(".ui-datepicker-trigger").children().addClass("cal-ui-datepicker");$(".hasDatepicker").attr("tabindex",-1);p.AttachAutoAttributes($("#"+h+" ~ button.ui-datepicker-trigger"),"datePicker","datePicker");return m}function f(l,k,h,i){var j=$("#"+l);if($("#"+l).length===0){j=$('<div id="'+l+'"></div>').html(k).dialog({autoOpen:false,buttons:i,close:function(){$("#"+l).remove()},height:"auto",modal:true,resizable:false,title:h,width:"auto"})}return j}function e(p){var l=this.GetPM();var r="";switch(p){case"QuickAddDialog":var q=l.Get("UISTR Tooltip Field Label:Description")||"Description";var w=l.Get("DescriptionFieldLength");r="<p>"+q+"<br />";r+='<input rn="Calendar" ot="input" un="QANewDescription" type="text" name="eventDescription" maxlength="';r+=w+'" id="DescriptionId" />';r+="<br /></p>";break;case"RepeatDialog":var v=l.Get("UISTR Repeating Dialog Label 1");var t=l.Get("UISTR Repeating Dialog Label 2");var k=l.Get("UISTR Repeating Dialog This Instance")||"This instance";var s=l.Get("UISTR Repeating Dialog All Future Instances")||"This and all future instances";r="<p>"+v+"<br /><br />";r+=t+"<br />";r+='<input rn="Calendar" ot="radioButton" un="saveThisOne" type="radio" name="userchoice" id="SaveThisOneId" value="SaveThisOne" checked="checked" />'+k+"<br />";r+='<input rn="Calendar" ot="radioButton" un="saveAll" type="radio" name="userchoice" id="SaveAllId" value="SaveAll" />'+s;r+="<br /></p>";break;case"SettingsDialog":var u=CCFMiscUtil_CreatePropSet();r="<table><td></td>";if(l.Get("Enable Timezone Picker")==="Y"){u.DecodeFromString(l.Get("Timezone List"));var i="<select id='tzCombo' rn='Calendar' ot='JComboBox' un='settingTimeZone'>";for(var n=0;n<u.GetChildCount();n++){i+="<option value='"+u.GetChild(n).GetProperty("Name")+"'>"+u.GetChild(n).GetProperty("Value")+"</option>"}i+="</select>";r+="<tr><td>"+l.Get("UISTR Timezone Label")+"</td>";r+="<td>"+i+"</td></tr>"}if(l.Get("Enable Owner Picker")==="Y"){u.DecodeFromString(l.Get("Access List"));var j="<select id='ownerCombo' rn='Calendar' ot='JComboBox' un='settingOwner' >";var h=u.EnumProperties(true);var m=[];while(h){m.push([h,u.GetProperty(h)]);h=u.EnumProperties(false)}m.sort(this.GetUtilityMap().SortOrder);for(var o=0;o<m.length;o++){j+="<option value='"+m[o][0]+"'>"+m[o][1]+"</option>"}j+="</select>";r+="<tr><td>"+l.Get("UISTR Owner Label")+"</td>";r+="<td>"+j+"</td></tr>"}r+="</table>";break}return r}return g}());SiebelAppFacade.CalEventHandlers=(function(){function b(e,d,g,i){var j=d;var c=e;var h=g;var f=i;this.GetCal=function(){return j};this.GetPM=function(){return c};this.GetCalCtrlBuilder=function(){return h};this.GetUtilityMap=function(){return f}}b.prototype={OnCalSelect:function(e,c,d){if(this.GetPM().Get("CanInsert")&&this.GetCal().fullCalendar("getView").name!=="month"){this.GetCalCtrlBuilder().BuildQuickAddDialog(e,c)}},OnDayClick:function(e,f,d,c){this.GetCal().fullCalendar("gotoDate",e);this.GetPM().AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate"))},OnEventAfterRender:function(c,f,i){var e=this.GetPM();var k=parseInt(e.Get("Preferred Timeslot Interval"),10);var h="h:mm{ - h:mm}";var j=$(f.find(".fc-event-title")[0]);if(e.Get("EnableProportionalRender")&&(i.name==="agendaWeek"||i.name==="agendaDay")&&!e.Get("DelayRenderUpdate")){a.call(this,c,f,i);if(!e.Get("NeedCounterReset")){e.AddProperty("NeedCounterReset",true)}}if(j.length===0){f.css("height","19px");f.find(".fc-event-time").text("");f.find(".fc-event-inner").append('<div class="fc-event-title"></div>');e.AddProperty("NeedCounterReset",false);this.OnEventRender(c,f);if(e.Get("EnableProportionalRender")&&(i.name==="agendaWeek"||i.name==="agendaDay")){e.AddProperty("NeedCounterReset",true)}f.find(".fc-event-inner").css("height",f.css("height"))}var d=new Date(c.start);var g=new Date(c.end);if(typeof d==="undefined"||typeof g==="undefined"){return}if((i.name==="month"&&e.Get("Enable Monthly Time Display")==="Off-interval")||(i.name==="agendaWeek"&&e.Get("Enable 5Day Time Display")==="Off-interval")||(i.name==="agendaDay"&&e.Get("Enable Daily Time Display")==="Off-interval")){this.GetUtilityMap().SuppressTimeStamp(c,f,k)
}else{if((i.name==="month"&&e.Get("Enable Monthly Time Display")==="Always")||(i.name==="agendaWeek"&&e.Get("Enable 5Day Time Display")==="Always")||(i.name==="agendaDay"&&e.Get("Enable Daily Time Display")==="Always")){j.prepend($.fullCalendar.formatDates(d,g,h)+" ")}}f.find(".ui-resizable-handle").empty()},OnEventClick:function(j,e,d){var g=this.GetPM();var f=this.GetCal();f.fullCalendar("gotoDate",j.start);g.AddProperty("SelectedDate",f.fullCalendar("getDate"));var c=SiebelApp.Constants;var i=j.url;var h=e.target||e.srcElement;if(h.tagName==="FONT"){i=h.parentElement.href}else{if(h.tagName==="IMG"){i=h.parentElement.parentElement.href}}g.OnControlEvent(c.get("PHYEVENT_DRILLDOWN_LIST"),i)},OnEventDrop:function(g,d,c,h,f){var e=this.GetCal();if(g.readOnly!=="N"){f()}else{if(g.repeating==="N"){this.GetPM().OnControlEvent("eventDrop",$.fullCalendar.formatDate(g.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(g.end,"MM/dd/yyyy HH:mm:ss"),g.calendarId,null);e.fullCalendar("refetchEvents");return}else{this.GetCalCtrlBuilder().BuildRepeatDialog(g,"eventDrop",f,function(){e.fullCalendar("refetchEvents")})}}},OnEventRender:function(q,d){var t=this.GetPM();var f=t.Get("CSSFontColors")||[];var h="";var s="";var r,p;if(q.icons){for(r=0;r<q.icons.length;r++){if(q.icons[r]!==""){h+="<img src='images/"+q.icons[r]+"' title='"+q.iconText[r]+"' alt='"+q.iconText[r]+"'/>"}}}var w=q.multiDisplay;for(var o=0;o<w.length;o++){var n=w[o];var u=f[n.CSSName];if(!u){$(d.find(".fc-event-title")[0]).addClass(n.CSSName);u=$("."+n.CSSName).css("color");if(u){u=this.GetUtilityMap().Rgb2hex(u)}else{u="NOCSSFONTCOLOR"}$(d.find(".fc-event-title")[0]).removeClass(n.CSSName);f[n.CSSName]=u}if(u!=="NOCSSFONTCOLOR"&&u!=="#111111"){n.FieldColor=u}n.FieldColor=n.FieldColor||"#FFFFFF";var x=this.GetUtilityMap().MakeDisplayField(n);if(x!==""){s+=x}}if(t.Get("NeedCounterReset")){var y=t.Get("TimeslotBucket");var g=t.Get("DayToColumnMap");var e=t.Get("MultiDayCounter");var c=parseInt(t.Get("Preferred Timeslot Interval"),10);var v=Math.floor(60/c);for(r=0;r<y.length;r++){var m=y[r];for(p=0;p<v*24;p++){m[p].horzPos=62}}for(var k in e){if(e.hasOwnProperty(k)){e[k].daysCounted=0}}t.AddProperty("TimeslotBucket",y);t.AddProperty("MultiDayCounter",e);t.AddProperty("NeedCounterReset",false)}t.AddProperty("CSSFontColors",f);$(d.find(".fc-event-title")[0]).prepend(h+"&nbsp;"+s);$(d.find(".fc-event-title")[0]).find("a").tooltip({content:function(){return $(this).attr("title")}})},OnEventResize:function(g,d,c,f){var e=this.GetCal();if(g.readOnly!=="N"){f()}else{if(g.repeating==="N"){this.GetPM().OnControlEvent("eventResize",$.fullCalendar.formatDate(g.start,"MM/dd/yyyy HH:mm:ss"),$.fullCalendar.formatDate(g.end,"MM/dd/yyyy HH:mm:ss"),g.calendarId,null);e.fullCalendar("refetchEvents");return}else{this.GetCalCtrlBuilder().BuildRepeatDialog(g,"eventResize",f,function(){e.fullCalendar("refetchEvents")})}}},OnEventRefresh:function(f,c,e){var d=this.GetPM();d.AddProperty("CurViewShowDate",f);d.AddProperty("CurViewStartDate",f);d.AddProperty("CurViewEndDate",c);d.AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate"));d.ExecuteMethod("InvokeMethod","GetCalendarDataOUI",d.ExecuteMethod("PopulatePropSet"));e([])},OnExtJQueryDropHandler:function(e,h,d,g,c,f){d.preventDefault();this.GetPM().OnControlEvent("externalDrop",$.fullCalendar.formatDate(e,"MM/dd/yyyy HH:mm:ss"),$.data(f).appletRowId.appletName,$.data(f).appletRowId.rowId,null);this.GetCal().fullCalendar("refetchEvents")},OnExtHTMLDropHandler:function(n){n.preventDefault();var f;if(n.originalEvent.dataTransfer){f=n.originalEvent.dataTransfer.getData("Text")}if(f){var m;if(f.indexOf("\r")!==-1){m=f.replace(/\n/g,"").split("\r")}else{m=f.split("\n")}var k=[];var l=[];var g,e;if(m.length-1<=1){SiebelJS.Log("ERROR: Expected data but only received header row");return}for(g=0;g<m.length-1;g++){var c=m[g].split("\t");var h=[];for(e=0;e<c.length;e++){if(g===0){var o=c[e].replace("\n","");if(o!==""){k.push(o)}else{SiebelJS.Log("ERROR: Empty field name received in header row.");return}}else{h.push(c[e].replace("\n",""))}}if(g!==0){l.push(h)}}for(g=0;g<l.length;g++){var d=CCFMiscUtil_CreatePropSet();for(e=0;e<k.length;e++){d.SetProperty(k[e],l[g][e])}n.data.ctx.GetPM().OnControlEvent("externalDrop",null,null,null,d)}n.data.ctx.GetCal().fullCalendar("refetchEvents")}},OnViewDisplayChange:function(o){var h="",e="",k="";var d=this.GetPM();if(o.name==="agendaDay"||o.name==="agendaWeek"){var p=this.GetUtilityMap();var r=parseInt(d.Get("Preferred Timeslot Interval"),10);var n=p.HourDecimal(d.Get("Preferred Business Day Start Time"));var c=p.HourDecimal(d.Get("Preferred Business Day End Time"));if(r===0){return}var m=Math.floor(60/r);var l=m*24;var q=parseInt(n*m,10)<0?0:parseInt(n*m,10);var j=parseInt(c*m,10)>l?l:parseInt(c*m,10);var g;for(var f=0;f<l;f++){g=$((".fc-slot"+f).replace(/"/g,"'")).find("div");if(f>=q&&f<j){if(o.name==="agendaDay"){g.removeClass("calendar-WorkingHr-agendaWeek");g.addClass("calendar-WorkingHr-agendaDay")}else{if(o.name==="agendaWeek"){g.removeClass("calendar-WorkingHr-agendaDay");g.addClass("calendar-WorkingHr-agendaWeek")}}}else{if(f<q||f>=j){if(o.name==="agendaDay"){g.removeClass("calendar-NonWorkingHr-agendaWeek");g.addClass("calendar-NonWorkingHr-agendaDay")}else{if(o.name==="agendaWeek"){g.removeClass("calendar-NonWorkingHr-agendaDay");g.addClass("calendar-NonWorkingHr-agendaWeek")}}}}}if(o.name==="agendaDay"){h=$(".fc-view-agendaDay").children("div");e=$(h).children("div");k=$(e).eq(2);if(d.Get("RTL Mode")==="Y"){p.RelocateTimeLabel.call(this)}}else{if(o.name==="agendaWeek"){h=$(".fc-view-agendaWeek").children("div");e=$(h).children("div");k=$(e).eq(2);if(d.Get("RTL Mode")==="Y"){p.RelocateTimeLabel.call(this)}}}k.removeClass("calSlots");k.addClass("calSlots")}}};function a(z,f,r){var C=this.GetPM();var D=this.GetUtilityMap();var c=parseInt(C.Get("Preferred Timeslot Interval"),10);if(c===0){return}var E=Math.floor(60/c);var t=D.HourDecimal(z.start.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+z.start.getMinutes());var g=D.HourDecimal(z.end.getHours()+SiebelApp.S_App.LocaleObject.GetDispTimeSeparator()+z.end.getMinutes());var e=parseInt(t*E,10)<0?0:parseInt(t*E,10);var d=parseInt(g*E,10)>E*24?E*24:parseInt(g*E,10);if(e===d){d+=1}var G=C.Get("TimeslotBucket");var m=C.Get("DayToColumnMap");var h=C.Get("MultiDayCounter");var B;var s,u;var A,y;var v=!D.SameDay(z.start,z.end);var n=(v&&r.name==="agendaDay"&&D.SameDay(z.start,r.start))||(v&&r.name==="agendaWeek"&&m[z.start.getDay()]===(m[z.start.getDay()]+h[z.id].daysCounted));var p=(v&&r.name==="agendaDay"&&D.SameDay(z.end,r.start))||(v&&r.name==="agendaWeek"&&m[z.end.getDay()]===(m[z.start.getDay()]+h[z.id].daysCounted));if(v){if(r.name==="agendaDay"){s=G[0]}else{if(r.name==="agendaWeek"){s=G[m[z.start.getDay()]+h[z.id].daysCounted]}}if(n){B=s[e].events[z.id].maxSlot}else{if(p){B=s[0].events[z.id].maxSlot}else{B=s[0].events[z.id].maxSlot}}}else{s=G[m[z.start.getDay()]];B=s[e].events[z.id].maxSlot
}var q=Infinity;var w;for(u in s[B].events){if(s[B].events.hasOwnProperty(u)){if(s[B].events[u].maxSlotSize<q){q=s[B].events[u].maxSlotSize;w=u}}}var o;var k=$(".fc-view-"+r.name+" .fc-agenda-days tbody .fc-first.fc-last .fc-col0").width();var x=Math.max(k-50,k*0.95);if(z.id===w){var F=0;for(u in s[B].events){if(s[B].events.hasOwnProperty(u)&&u!==w){F+=x/s[B].events[u].maxSlotSize}}o=Math.max(15,x-F)}else{o=Math.max(15,x/s[B].events[z.id].maxSlotSize)}f.width(o);if(C.Get("RTL Mode")==="Y"){var l=D.GetObjectSize(m);if(v){if(r.name==="agendaDay"){f.css("left",-(o-62+s[B].horzPos)+(l-m[r.start.getDay()])*(k-1))}else{if(r.name==="agendaWeek"){f.css("left",-(o-62+s[B].horzPos)+(l-(m[z.start.getDay()]+h[z.id].daysCounted))*(k-1))}}}else{f.css("left",-(o-62+s[B].horzPos)+(l-m[z.start.getDay()])*(k-1))}}else{if(v){if(r.name==="agendaDay"){f.css("left",s[B].horzPos+m[r.start.getDay()]*(k-1))}else{if(r.name==="agendaWeek"){f.css("left",s[B].horzPos+(m[z.start.getDay()]+h[z.id].daysCounted)*(k-1))}}}else{f.css("left",s[B].horzPos+m[z.start.getDay()]*(k-1))}}if(v){for(y=0;y<E*24;y++){if(n&&y<e){continue}if(p&&y>=d&&y!==0){break}s[y].horzPos+=o}if(r.name==="agendaWeek"){h[z.id].daysCounted+=1}}else{for(A=e;A<d;A++){s[A].horzPos+=o}}C.AddProperty("TimeslotBucket",G);C.AddProperty("MultiDayCounter",h)}return b}());SiebelAppFacade.CalUtility=(function(){function a(){}a.prototype={EventSortOrder:function(d,c){return d.start-c.start},GetObjectSize:function(d){var c=0;for(var b in d){if(d.hasOwnProperty(b)){c+=1}}return c},Hex:function(b){return("0"+parseInt(b,10).toString(16)).slice(-2)},HourDecimal:function(e){var c=e.split(SiebelApp.S_App.LocaleObject.GetDispTimeSeparator());if(c.length<2){return parseFloat(e)}var b=parseInt(c[0],10);var d=parseInt(c[1],10)/60;return b+d},IsAllDayEvent:function(c){if(c.Planned===c.PlannedCompletion){var b=$.fullCalendar.parseDate(c.Planned);if(b.getHours()===0&&b.getMinutes()===0&&b.getSeconds()===0){return true}}return false},MakeDisplayField:function(c){var g=c.FieldValue;var e=$("<div />").text(c.ToolTip).html();var f=c.DrillDown;var d=c.FieldColor;var b="";if(g===""){return b}if(f===""){f="javaScript:void(0)"}b+="<A TITLE='"+e+"' ";b+="HREF="+f+">";b+="<span class='fc-event-title'>"+g+"</span></A>";return b},Rgb2hex:function(b){if(b.search("rgb")===-1){return b}else{b=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#"+this.Hex(b[1])+this.Hex(b[2])+this.Hex(b[3])}},SameDay:function(c,b){return c.getFullYear()===b.getFullYear()&&c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()},SortOrder:function(d,c){return(d[1]>c[1]?1:-1)},SuppressTimeStamp:function(e,d,c){var g="h:mm{ - h:mm}";var b=new Date(e.start);var f=new Date(e.end);if(typeof b==="undefined"||typeof f==="undefined"){return}var h=$(d.find(".fc-event-title")[0]);if((b.getMinutes()%c)===0&&(f.getMinutes()%c)===0){h.prepend(" ")}else{h.prepend($.fullCalendar.formatDates(b,f,g)+" ")}},ViewModeToName:function(b){var c="agendaDay";if(b==="0"){c="agendaDay"}else{if(b==="1"){c="agendaWeek"}else{if(b==="2"){c="month"}}}return c},ViewNameToMode:function(c){var b="0";if(c==="agendaDay"){b="0"}else{if(c==="agendaWeek"){b="1"}else{if(c==="month"){b="2"}}}return b},AttachAutoAttributes:function(c,d,b){if(typeof(c)!=="undefined"){c.attr("rn","Calendar");c.attr("ot",d);c.attr("un",b)}},RelocateTimeLabel:function(){var k;var b=this.GetPM();var h=this.GetCal();if(b.Get("ViewMode")==="0"){k=h.find(".fc-view-agendaDay")}else{k=h.find(".fc-view-agendaWeek")}var m=k.find(".fc-agenda-days");var j=m.find("thead");var e=j.find(".fc-agenda-axis");var c=e.css("width");var l=j.find(".fc-agenda-gutter");if(e){l.before(e)}var f=m.find("tbody");e=f.find(".fc-agenda-axis");l=f.find(".fc-agenda-gutter");if(e){l.before(e)}var n=k.find(".fc-agenda-allday");e=n.find(".fc-agenda-axis");l=n.find(".fc-agenda-gutter");if(e){l.before(e)}var g=k.find(".fc-agenda-slots");g=g.find("tbody");g=g.children();for(var d=0;d<g.length;d++){e=$(g[d]).find(".fc-agenda-axis");l=$(g[d]).find(".fc-widget-content");if(e){e.css("text-align","left");e.before(l)}}}};return a}());SiebelAppFacade.CalLocaleConverter=(function(){function a(){var j={"hh:mm:ss":function(k){return b(k)},"mm:hh:ss":function(k){return b(k)},"ss:mm:hh":function(k){return b(k)},"mm:ss:hh":function(k){return b(k)},"hh:ss:mm":function(k){return b(k)},"ss:hh:mm":function(k){return b(k)},"h:mm:ss":function(k){return b(k)},"mm:h:ss":function(k){return b(k)},"ss:mm:h":function(k){return b(k)},"mm:ss:h":function(k){return b(k)},"ss:h:mm":function(k){return b(k)},"h:ss:mm":function(k){return b(k)},"m:hh:ss":function(k){return b(k)},"ss:m:hh":function(k){return b(k)},"hh:m:ss":function(k){return b(k)},"m:ss:hh":function(k){return b(k)},"hh:ss:m":function(k){return b(k)},"ss:hh:m":function(k){return b(k)},"hh:mm:s":function(k){return b(k)},"mm:hh:s":function(k){return b(k)},"s:mm:hh":function(k){return b(k)},"s:hh:mm":function(k){return b(k)},"mm:s:hh":function(k){return b(k)},"hh:s:mm":function(k){return b(k)},"h:m:ss":function(k){return b(k)},"m:h:ss":function(k){return b(k)},"ss:m:h":function(k){return b(k)},"ss:h:m":function(k){return b(k)},"m:ss:h":function(k){return b(k)},"h:ss:m":function(k){return b(k)},"hh:m:s":function(k){return b(k)},"hh:s:m":function(k){return b(k)},"m:hh:s":function(k){return b(k)},"s:hh:m":function(k){return b(k)},"s:m:hh":function(k){return b(k)},"m:s:hh":function(k){return b(k)},"h:mm:s":function(k){return b(k)},"mm:h:s":function(k){return b(k)},"mm:s:h":function(k){return b(k)},"s:mm:h":function(k){return b(k)},"h:s:mm":function(k){return b(k)},"s:h:mm":function(k){return b(k)},"h:m:s":function(k){return b(k)},"m:h:s":function(k){return b(k)},"s:m:h":function(k){return b(k)},"hh:mm":function(k){return b(k,"hm")},"mm:hh":function(k){return b(k,"hm")},"h:mm":function(k){return b(k,"hm")},"mm:h":function(k){return b(k,"hm")},"hh:m":function(k){return b(k,"hm")},"m:hh":function(k){return b(k,"hm")},"h:m":function(k){return b(k,"hm")},"m:h":function(k){return b(k,"hm")},"ss:mm":function(k){return b(k,"ms")},"ss:m":function(k){return b(k,"ms")},"m:ss":function(k){return b(k,"ms")},"mm:s":function(k){return b(k,"ms")},"s:mm":function(k){return b(k,"ms")},"s:m":function(k){return b(k,"ms")},"m:s":function(k){return b(k,"ms")},"dd/mm/yyyy":function(k){return c(k)},"mm/dd/yyyy":function(k){return c(k)},"dd/yyyy/mm":function(k){return c(k)},"yyyy/dd/mm":function(k){return c(k)},"mm/yyyy/dd":function(k){return c(k)},"yyyy/mm/dd":function(k){return c(k)},"d/mm/yyyy":function(k){return c(k)},"mm/d/yyyy":function(k){return c(k)},"d/yyyy/mm":function(k){return c(k)},"yyyy/d/mm":function(k){return c(k)},"mm/yyyy/d":function(k){return c(k)},"yyyy/mm/d":function(k){return c(k)},"dd/m/yyyy":function(k){return c(k)},"m/dd/yyyy":function(k){return c(k)},"dd/yyyy/m":function(k){return c(k)},"yyyy/dd/m":function(k){return c(k)},"m/yyyy/dd":function(k){return c(k)},"yyyy/m/dd":function(k){return c(k)},"dd/mm/yy":function(k){return c(k)},"mm/dd/yy":function(k){return c(k)
},"dd/yy/mm":function(k){return c(k)},"yy/dd/mm":function(k){return c(k)},"mm/yy/dd":function(k){return c(k)},"yy/mm/dd":function(k){return c(k)},"d/m/yyyy":function(k){return c(k)},"m/d/yyyy":function(k){return c(k)},"d/yyyy/m":function(k){return c(k)},"yyyy/d/m":function(k){return c(k)},"m/yyyy/d":function(k){return c(k)},"yyyy/m/d":function(k){return c(k)},"d/mm/yy":function(k){return c(k)},"mm/d/yy":function(k){return c(k)},"d/yy/mm":function(k){return c(k)},"yy/d/mm":function(k){return c(k)},"mm/yy/d":function(k){return c(k)},"yy/mm/d":function(k){return c(k)},"dd/m/yy":function(k){return c(k)},"m/dd/yy":function(k){return c(k)},"dd/yy/m":function(k){return c(k)},"yy/dd/m":function(k){return c(k)},"m/yy/dd":function(k){return c(k)},"yy/m/dd":function(k){return c(k)},"d/m/yy":function(k){return c(k)},"m/d/yy":function(k){return c(k)},"d/yy/m":function(k){return c(k)},"yy/d/m":function(k){return c(k)},"m/yy/d":function(k){return c(k)},"yy/m/d":function(k){return c(k)},"mm/yyyy":function(k){return c(k,"my")},"yyyy/mm":function(k){return c(k,"my")},"yyyy/m":function(k){return c(k,"my")},"m/yyyy":function(k){return c(k,"my")},"mm/yy":function(k){return c(k,"my")},"yy/mm":function(k){return c(k,"my")},"yy/m":function(k){return c(k,"my")},"m/yy":function(k){return c(k,"my")},"dd/mm":function(k){return c(k,"md")},"mm/dd":function(k){return c(k,"md")},"dd/m":function(k){return c(k,"md")},"m/dd":function(k){return c(k,"md")},"d/mm":function(k){return c(k,"md")},"mm/d":function(k){return c(k,"md")},"d/m":function(k){return c(k,"md")},"m/d":function(k){return c(k,"md")},s:function(k){return k.s},ss:function(k){return k.s},m:function(k){return k.n},mm:function(k){return k.n},h:function(k){return k.h},hh:function(k){return k.h},H:function(k){return k.h},HH:function(k){return k.h},d:function(k){return k.ld},dd:function(k){return k.ld},M:function(k){return k.lm},MM:function(k){return k.lm},yy:function(k){return k.ly},yyyy:function(k){return k.ly},ddd:function(k){return"ddd"},dddd:function(k){return"dddd"},MMM:function(k){return"MMM"},MMMM:function(k){return"MMMM"},t:function(k){return(k.h24?"":k.p)},tt:function(k){return(k.h24?"":k.p)},T:function(k){return(k.h24?"":k.p.toUpperCase())},TT:function(k){return(k.h24?"":k.p.toUpperCase())},"//":function(k){return"/"},"/":function(k){return k.ds},"::":function(k){return":"},":":function(k){return k.ts}};this.getFormatConverter=function(){return j}}a.prototype.ConvertLocale=function(o){var p=this;var j=[];var n=[];for(var k=1;k<13;k++){j.push(SiebelApp.S_App.LocaleObject.GetMonth(k));n.push(SiebelApp.S_App.LocaleObject.GetMonth(k,true))}var s=[];var l=[];for(var q=0;q<7;q++){s.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(q,0));l.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(q,1))}var r={ds:SiebelApp.S_App.LocaleObject.GetDispDateSeparator(),ts:SiebelApp.S_App.LocaleObject.GetDispTimeSeparator(),h24:true,df:"",tf:"",ldf:"",p:"",monthNames:j,monthNamesShort:n,dayNames:s,dayNamesShort:l,periodName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase(),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase()],periodShortName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase().charAt(0),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase().charAt(0)]};r=i(r);r=h(r);r=d(r,o.longDateFormat);$.fullCalendar.dateFormatters=$.extend(true,{},$.fullCalendar.dateFormatters,{t:function(t,m){return t.getHours()<12?m.periodShortName[0]:m.periodShortName[1]},tt:function(t,m){return t.getHours()<12?m.periodName[0]:m.periodName[1]},T:function(t,m){return t.getHours()<12?m.periodShortName[0].toUpperCase():m.periodShortName[1].toUpperCase()},TT:function(t,m){return t.getHours()<12?m.periodName[0].toUpperCase():m.periodName[1].toUpperCase()}});return $.extend(true,{},r,{titleFormat:{month:g.call(p,o.titleFormat.month,r),week:g.call(p,o.titleFormat.week,r),day:g.call(p,o.titleFormat.day,r)},columnFormat:{month:g.call(p,o.columnFormat.month,r),week:g.call(p,o.columnFormat.week,r),day:g.call(p,o.columnFormat.day,r)},axisFormat:g.call(p,o.axisFormat,r),timeFormat:{"":g.call(p,o.timeFormat,r)}})};function i(l){var o,m,q,p,n="";var r=SiebelApp.S_App.LocaleObject.GetDateFormat();var k=r.length;for(o=0;o<k;o++){for(m=k;m>o;m--){q=e(r.substring(o,m),l,false);if(q){if(q!==l.ds){o=m-1;l=q}}}}return l}function d(s,o){var m,k,l,p,r="",q="";var n=o.length;var t=o.toUpperCase();for(m=0;m<n;m++){r=t.charAt(m);if(r==="'"){for(k=m+1;k<n;k++){if(t.charAt(k)==="'"){m=k;break}}}for(l=n;l>m;l--){p=e(t.substring(m,l),s,true);if(p){if(p!==s.ds){m=l-1;s=p}}}}return s}function h(l){var o,m,r,p,n="";var q=SiebelApp.S_App.LocaleObject.GetTimeFormat();var k=q.length;for(o=0;o<k;o++){for(m=k;m>o;m--){r=e(q.substring(o,m),l,false);if(r){if(r!==l.ts){o=m-1;l=r}}}}return l}function e(m,l,j){var k;switch(m){case l.ds:k=l.ds;break;case l.ts:k=l.ts;break;case"DDDD":if(j){k=l}break;case"DDD":if(j){k=l}break;case"DD":if(j){k=$.extend(true,{},l,{ld:"dd",ldf:l.ldf.concat("d")})}else{k=$.extend(true,{},l,{d:"dd",df:l.df.concat("d")})}break;case"D":if(j){k=$.extend(true,{},l,{ld:"d",ldf:l.ldf.concat("d")})}else{k=$.extend(true,{},l,{d:"d",df:l.df.concat("d")})}break;case"MMMM":k=$.extend(true,{},l,{lm:"MMMM",ldf:l.ldf.concat("m")});break;case"MMM":k=$.extend(true,{},l,{lm:"MMM",ldf:l.ldf.concat("m")});break;case"MM":if(j){k=$.extend(true,{},l,{lm:"MM",ldf:l.ldf.concat("m")})}else{k=$.extend(true,{},l,{m:"MM",df:l.df.concat("m")})}break;case"M":if(j){k=$.extend(true,{},l,{lm:"M",ldf:l.ldf.concat("m")})}else{k=$.extend(true,{},l,{m:"M",df:l.df.concat("m")})}break;case"YYYY":if(j){k=$.extend(true,{},l,{ly:"yyyy",ldf:l.ldf.concat("y")})}else{k=$.extend(true,{},l,{y:"yyyy",df:l.df.concat("y")})}break;case"YY":if(j){k=$.extend(true,{},l,{ly:"yy",ldf:l.ldf.concat("y")})}else{k=$.extend(true,{},l,{y:"yy",df:l.df.concat("y")})}break;case"HH":k=$.extend(true,{},l,{h:"HH",h24:true,tf:l.tf.concat("h")});break;case"H":k=$.extend(true,{},l,{h:"H",h24:true,tf:l.tf.concat("h")});break;case"hh":k=$.extend(true,{},l,{h:"hh",tf:l.tf.concat("h")});break;case"h":k=$.extend(true,{},l,{h:"h",tf:l.tf.concat("h")});break;case"mm":k=$.extend(true,{},l,{n:"mm",tf:l.tf.concat("m")});break;case"m":k=$.extend(true,{},l,{n:"m",tf:l.tf.concat("m")});break;case"ss":k=$.extend(true,{},l,{s:"ss",tf:l.tf.concat("s")});break;case"s":k=$.extend(true,{},l,{s:"s",tf:l.tf.concat("s")});break;case"p":k=$.extend(true,{},l,{h24:false,p:"tt"});break;default:return}return k}function g(q,s){var l,m=q.length,o,k,r,n="",j="";for(l=0;l<m;l++){o=q.charAt(l);if(o==="'"){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)==="'"){n+=q.substring(l+1,k);n+="'";l=k;break}}}else{if(o==="("){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)===")"){j=g.call(this,q.substring(l+1,k),s);n+=j;n+=")";l=k;break}}}else{if(o==="["){n+=o;for(k=l+1;k<m;k++){if(q.charAt(k)==="]"){var p=q.substring(l+1,k);j=g.call(this,p,s);n+=j;n+="]";l=k;break}}}else{if(o==="<"){k=q.indexOf(">",l);n+=f(s,q.substring(l+1,k));l=k}else{if(o==="{"){n+=o}else{if(o==="}"){n+=o}else{for(k=m;k>l;
k--){r=this.getFormatConverter()[q.substring(l,k)]||this.getFormatConverter()[q.substring(l,k).toLowerCase()];if(r){n+=r(s);l=k-1;break}}if(k===l){n+=o}}}}}}}}return n}function b(k,l){var j;switch(k.tf){case"hms":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.n+k.ts+k.s:k.h+k.ts+k.n+k.ts+k.s));break;case"hsm":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.s+k.ts+k.n:k.h+k.ts+k.s+k.ts+k.n));break;case"smh":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.s+k.ts+k.n:k.s+k.ts+k.n+k.ts+k.h));break;case"shm":j=(l==="hm"?k.h+k.ts+k.n:(l==="ms"?k.s+k.ts+k.n:k.s+k.ts+k.h+k.ts+k.n));break;case"msh":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.n+k.ts+k.s:k.n+k.ts+k.s+k.ts+k.h));break;case"mhs":j=(l==="hm"?k.n+k.ts+k.h:(l==="ms"?k.n+k.ts+k.s:k.n+k.ts+k.h+k.ts+k.s));break}j+=(k.h24?k.p:"");return j}function c(j,k){switch(j.df){case"dmy":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.d+j.ds+j.m:j.d+j.ds+j.m+j.ds+j.y));case"mdy":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.m+j.ds+j.d:j.m+j.ds+j.d+j.ds+j.y));case"dym":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.d+j.ds+j.m:j.d+j.ds+j.y+j.ds+j.m));case"myd":return(k==="my"?j.m+j.ds+j.y:(k==="md"?j.m+j.ds+j.d:j.m+j.ds+j.y+j.ds+j.d));case"ymd":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.m+j.ds+j.d:j.y+j.ds+j.m+j.ds+j.d));case"ydm":return(k==="my"?j.y+j.ds+j.m:(k==="md"?j.d+j.ds+j.m:j.y+j.ds+j.d+j.ds+j.m))}}function f(k,j){switch(k.ldf){case"dmy":return(k.ld+"[ "+k.lm+"][ "+k.ly+"]{ "+j+" "+k.ld+" "+k.lm+" "+k.ly+"}");case"mdy":return(k.lm+" "+k.ld+"[ "+k.ly+"]{ "+j+"[ "+k.lm+"] "+k.ld+" "+k.ly+"}");case"dym":return(k.ld+"[ "+k.ly+"][ "+k.lm+"]{ "+j+" "+k.ld+" "+k.ly+" "+k.lm+"}");case"myd":return(k.lm+" "+k.ly+" "+k.ld+"{ "+j+"[ "+k.lm+"][ "+k.ly+"] "+k.ld+"}");case"ymd":return(k.ly+" "+k.lm+" "+k.ld+"{ "+j+"[ "+k.ly+"][ "+k.lm+"] "+k.ld+"}");case"ydm":return(k.ly+" "+k.ld+"[ "+k.lm+"]{ "+j+"[ "+k.ly+"] "+k.ld+" "+k.lm+"}");case"dm":return(k.ld+"[ "+k.lm+"]{ "+j+" "+k.ld+" "+k.lm+"}");case"md":return(k.lm+" "+k.ld+"{ "+j+"[ "+k.lm+"] "+k.ld+"]}");case"my":return(k.lm+"[ "+k.ly+"]{ "+j+" "+k.lm+" "+k.ly+"}");case"ym":return(k.ly+" "+k.lm+"{ "+j+"[ "+k.ly+"] "+k.lm+"}")}}return a}());return"SiebelAppFacade.JQFullCalRenderer"})};