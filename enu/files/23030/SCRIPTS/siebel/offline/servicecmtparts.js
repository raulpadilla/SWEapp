/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.commitpartconsumed)==="undefined"){SiebelJS.Namespace("SiebelApp.commitpartconsumed");define("siebel/offline/servicecmtparts",["siebel/offline/model"],function(){var b={};var a=SiebelApp.Offlineconstants;b[a.get("DOUIREG_OBJ_NAME")]="SHCE Service FS Activity Part Movements List Applet - Mobile";b[a.get("DOUIREG_OBJ_TYPE")]=a.get("DOUIREG_OBJ_TYPEAPPLET");b[a.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";b[a.get("DOUIREG_SRVC_NAME")]="commitpartconsumed";b[a.get("DOUIREG_SRVC_MTDH")]="DoCanInvokeMethod";b[a.get("DOUIREG_EXT_TYPE")]=a.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(b);b={};b[a.get("DOUIREG_OBJ_NAME")]="SHCE Service FS Activity Part Movements List Applet - Mobile";b[a.get("DOUIREG_OBJ_TYPE")]=a.get("DOUIREG_OBJ_TYPEAPPLET");b[a.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";b[a.get("DOUIREG_SRVC_NAME")]="commitpartconsumed";b[a.get("DOUIREG_SRVC_MTDH")]="DoInvokeMethod";b[a.get("DOUIREG_EXT_TYPE")]=a.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(b);SiebelApp.commitpartconsumed=(function(){function c(d){}SiebelJS.Extend(c,SiebelApp.ServiceModel);c.prototype.DoCanInvokeMethod=function(f){var e=CCFMiscUtil_CreatePropSet();var g="";g=f.GetProperty("MethodName").toString();if(g==="CommitPartMvmtClient"){var d;currentApplet=this.GetContext();currentBC=currentApplet.GetBusComp();d=currentBC.FieldValue("Commit Txn Flag");$.callback(this,function(h){d=h.retVal;if(d==="Y"){e.SetProperty("Invoked",false);e.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:e})}else{e.SetProperty("Invoked",true);e.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:e})}})}else{if(g==="EditRecord"){var d;currentApplet=this.GetContext();currentBC=currentApplet.GetBusComp();d=currentBC.FieldValue("Commit Txn Flag");$.callback(this,function(h){d=h.retVal;if(d==="Y"){e.SetProperty("Invoked",true);e.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:e})}else{e.SetProperty("Invoked",true);e.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:e})}})}else{if(g==="OrderPartsRMA"){e.SetProperty("Invoked",true);e.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:e})}else{if(g==="OrderPartsRMARepairs"){e.SetProperty("Invoked",true);e.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:e})}else{e.SetProperty("Invoked",false);e.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:e})}}}}};c.prototype.DoInvokeMethod=function(e){var f="";var d=CCFMiscUtil_CreatePropSet();f=e.GetProperty("MethodName").toString();if(f==="CommitPartMvmtClient"){this.CommitPartMvmtClient();$.callback(this,function(g){d.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:d})})}else{if(f==="OrderPartsRMA"){this.createRMAOrder("RMA Return");$.callback(this,function(g){if(g.err){$.setReturnValue(g);return}d.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:d})})}else{if(f==="OrderPartsRMARepairs"){this.createRMAOrder("RMA Repair Return");$.callback(this,function(g){if(g.err){$.setReturnValue(g);return}d.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:d})})}else{d.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:d})}}}};c.prototype.CommitPartMvmtClient=function(){SiebelJS.Log("Invoked CommitPartMvmtClient Method..");var e;var d;var f;f=SiebelApp.S_App.Model;e=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp();e.FieldValue("Commit Txn Flag");$.callback(this,function(g){d=g.retVal;if(d==="Y"){SiebelJS.Log("Consumed Part Is Already In Committed State")}else{e.SetFieldValue("Commit Txn Flag","Y",true);$.callback(this,function(h){e.SetCommitPending(true);e.WriteRecord();$.callback(this,function(i){SiebelApp.OfflineAppMgr.PostActions(a.get("ACTION_RPC_COMPLETED"))})})}})};c.prototype.createRMAOrder=function(k){var i;var o;var p;var r;var v;var s;var h;var d;var q;var n;var e;var g;var j;var u;var l;var f;var m;var t=[];e=SiebelApp.S_App.Model;g=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp();g.FieldValue("Order Item Id");$.callback(this,function(w){i=w.retVal;if(utils.IsEmpty(i)){g.FieldValue("Product Id");$.callback(this,function(x){h=x.retVal;g.FieldValue("Product Name");$.callback(this,function(y){d=y.retVal;g.FieldValue("Used Quantity");$.callback(this,function(z){q=z.retVal;g.FieldValue("Id");$.callback(this,function(A){n=A.retVal;g.FieldValue("Status");$.callback(this,function(B){s=B.retVal;g.FieldValue("Asset Number");$.callback(this,function(C){r=C.retVal;g.FieldValue("Part Number");$.callback(this,function(D){v=D.retVal;j=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp().GetParentBuscomp();j.FieldValue("Activity SR Id");$.callback(this,function(E){u=E.retVal});if(u==""){SiebelApp.OfflineAppMgr.PostActions("ActionRPCCompleted","createRMAOrder");SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_ERR_FS_MISSING_SR",t);$.setReturnValue({err:"IDS_ERR_FS_MISSING_SR",retVal:""});return}else{e=SiebelApp.S_App.Model;l=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Service Request");f=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Order Entry - Orders");m=SiebelApp.S_App.Model.GetBusObj("Service Request").GetBusComp("Order Entry - Line Items");f.Execute();$.callback(this,function(E){f.NewRecord(true);$.callback(this,function(F){sLocaleVal=SiebelApp.S_App.Model.GetLovNameVal(k,"FS_ORDER_TYPE");f.SetFieldValue("Order Type",sLocaleVal,true);$.callback(this,function(G){f.SetCommitPending(true);f.WriteRecord();$.callback(this,function(H){SiebelApp.OfflineAppMgr.PostActions(a.get("ACTION_RPC_COMPLETED"));f.FieldValue("Order Number");$.callback(this,function(I){o=I.retVal;f.FieldValue("Id");$.callback(this,function(J){m_sOrderHeaderId=J.retVal;m.Execute();$.callback(this,function(K){m.NewRecord(true);$.callback(this,function(L){m.SetFieldValue("Product Id",h,true);$.callback(this,function(M){m.SetFieldValue("Product",d,true);$.callback(this,function(N){m.SetFieldValue("Quantity Requested",q,true);$.callback(this,function(O){if(!utils.IsEmpty(r)){m.SetFieldValue("Asset Number",r,true);$.callback(this,function(P){})}if(!utils.IsEmpty(v)){m.SetFieldValue("Part Number",v,true);$.callback(this,function(P){})}if(!utils.IsEmpty(s)){m.SetFieldValue("Product Status Code",s,true);$.callback(this,function(P){})}m.FieldValue("Id");$.callback(this,function(P){sOrderItemId=P.retVal;m.SetFieldValue("Order Header Id",m_sOrderHeaderId,true);$.callback(this,function(Q){m.SetCommitPending(true);m.WriteRecord();$.callback(this,function(R){g.SetFieldValue("Order Item Id",sOrderItemId,true);$.callback(this,function(S){g.SetFieldValue("Order Number Calc",o,true);$.callback(this,function(T){g.SetCommitPending(true);g.WriteRecord();$.callback(this,function(U){SiebelApp.OfflineAppMgr.PostActions(a.get("ACTION_RPC_COMPLETED"))})})})})})})})})})})})})})})})})})}})})})})})})})}else{SiebelApp.OfflineAppMgr.PostActions("ActionRPCCompleted","createRMAOrder")}})};return c}());return"SiebelAppFacade.SiebelApp.commitpartconsumed"
})};