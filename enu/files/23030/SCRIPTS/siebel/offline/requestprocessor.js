/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.RequestProcessor)==="undefined"){Namespace("SiebelApp.RequestProcessor");SiebelApp.RequestProcessor=(function(){var c=SiebelJS.Dependency("SiebelApp.Utils");var a=SiebelApp.Offlineconstants;var g=SiebelApp.Constants;var f=SiebelApp.S_App;var h=false;var e;function d(){var i;var k={};j=function j(){return i};j.prototype=this;i=new j();i.constructor=j;this.SetPrevReqObj=function(l){k=l};this.GetPrevReqObj=function(){return k};this.SetLayoutState=function(m,l){h=m;e=l};return i}var b=new d();d.prototype.ProcessReq=function(o,i,l){var v=function(){return(i.successfncallback.apply(i.context||this,arguments))};var y=c.DecodeFromQueryString(o);var u=unescape(y.GetPropertyAsStr(a.get("SWECMD")));var n=unescape(y.GetPropertyAsStr(a.get("SWEMETHOD")));var q="";var t="";var k="";var s="";var j=null;switch(u){case (a.get("GOTOVIEW")):s=a.get("VIEW_INFO");q=unescape(y.GetProperty("SWEView"));SiebelApp.OfflineAppMgr.ShowView(o,u,v,q,s);break;case (a.get("GETVIEWLAYOUT")):if(h){s=a.get("NEW_VIEW_INFO");t=f.GetActiveView().GetName();q=t.concat("/",e);u=a.get("GETVIEWLAYOUT")}else{s=a.get("VIEW_INFO");q=unescape(y.GetProperty("SWEView"))}var x=function(z,A){h=false;var z=SiebelApp.OfflineAppMgr.ModifyLayout(z);v.apply(this,[z,A])};SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,x,u,q,s);break;case (a.get("NEWLAYOUT")):s=a.get("NEW_VIEW_INFO");t=f.GetActiveView().GetName();q=t.concat("/",e);u=a.get("GETVIEWLAYOUT");SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);h=false;break;case (a.get("GETCACHEDFRAME")):var r=[];var w=[];if(f.GetActiveView()){var p=this.GetPrevReqObj();if(p.reqType===a.get("EDIT_FIELD")){s=a.get("PICK_APLT_INFO");q=p.searchVal;this.SetPrevReqObj({});r=[o,v,u,q,s];w=SiebelApp.BrowserCacheMgr.DiscoverMetadata;SiebelApp.OfflineAppMgr.SetPendingOp(true,w,r,SiebelApp.BrowserCacheMgr);break}else{var m=f.GetActiveView().GetActiveApplet();if(m){h=false;if(y.PropertyExists("ObjName")&&y.PropertyExists("Type")){q=y.GetProperty("ObjName").toString();s=y.GetProperty("Type").toString()}else{s=a.get("NEW_VIEW_INFO");t=f.GetActiveView().GetName();k=m.GetName();q=t.concat("/",k)}r=[o,v,u,q,s];w=SiebelApp.BrowserCacheMgr.DiscoverMetadata;SiebelApp.OfflineAppMgr.SetPendingOp(true,w,r,SiebelApp.BrowserCacheMgr);break}}}s=a.get("DEFAULT_VIEW_INFO");q=unescape(y.GetProperty("SWEFrame"));SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case (a.get("GOTOPOSTEDACTION")):s=a.get("DEFAULT_VIEW_INFO");q=unescape(y.GetProperty("SWEFrame"));SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case (a.get("TEXT")):s=a.get("DEFAULT_VIEW_INFO");q="scriptfiles";SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case a.get("INVOKEMETHOD"):case a.get("CANINVOKEMETHOD"):u=n;SiebelApp.OfflineAppMgr.InvokeMethod(y,u,v,o);$.callback(this,function(A){if(A.err){var z=f.OfflineErrorObject;SiebelApp.OfflineAppMgr.ShowRPCError(z,v,o);z.ClearErrorMsg();return}else{return(A)}});break;default:if(o.search("scriptfiles.txt")!==-1){u=a.get("TEXT");s=a.get("DEFAULT_VIEW_INFO");q="scriptfiles";SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s)}else{v.apply(this,[a.get("CUD_RESPONSE")])}}};d.prototype.GetRequestType=function(i,n){var j="";if(!n){i=c.DecodeFromQueryString(i)}var l=i.GetProperty(a.get("SWECMD"));var m=i.GetProperty(a.get("SWEMETHOD"));if(l){l=l.toString()}if(m){m=m.toString()}var k=[a.get("DRILLDOWN"),"DrillDown",a.get("NEWRECORD"),a.get("EDITRECORD"),a.get("WRITERECORD"),a.get("EDIT_FIELD"),a.get("POSITION_ON_ROW"),a.get("SWE_POST_CHANGES"),a.get("DELETERECORD"),a.get("ADDRECORD"),a.get("SWE_CLOSE_APPLET"),a.get("UNDORECORD"),a.get("UPDATEPREFMSG"),g.get("SWE_GET_PICK_INFO"),a.get("SCROLL_NEXT_DATA"),a.get("SCROLL_PREV_DATA"),a.get("GO_TO_NEXT_SET"),a.get("GO_TO_PREV_SET"),a.get("SCROLL_PREV_DATA"),a.get("PICKRECORD"),a.get("CREATERECORD"),a.get("EXECUTE_FRAME_QUERY"),a.get("FIND"),"Submit"];switch(l){case a.get("GOTOVIEW"):j=l;break;case a.get("GETVIEWLAYOUT"):if(h){l=a.get("NEWLAYOUT")}j=l;break;case a.get("GETCACHEDFRAME"):case a.get("GOTOPOSTEDACTION"):j=l;break;case a.get("GETAPPLETLAYOUT"):l=a.get("NEWLAYOUT");j=l;break;case a.get("INVOKEMETHOD"):case a.get("CANINVOKEMETHOD"):if(k.indexOf(m)!==-1){j=m}break;default:if(!m&&!l){j=a.get("TEXT")}}return j};d.prototype.IsSupported=function(i,l,o){var n=null;if(!l){i=c.DecodeFromQueryString(i)}var j=i.GetProperty(g.get("SWE_SERVICE"));if(!j){j=this.GetRequestType(i,true)}if(o){n=function(){return(o.successfncallback.apply(o.context||this,arguments))}}if(!j){j=i.GetProperty(a.get("SWECMD"));if(j){if(j.toString()===a.get("INVOKEMETHOD")){j=i.GetProperty(a.get("SWEMETHOD"))}}}var m=true;if(j){j=j.toString()}switch(j){case a.get("MESSAGEBAR"):case a.get("GOTOBOOKMARKVIEW"):case a.get("GETCURRENTDATE"):case a.get("CREATERECORD"):m=false;break;case a.get("NEWRECORD"):var k=f.GetActiveView().GetActiveApplet();if(k&&k.GetParentApplet()&&k.GetPopupAppletName()){m=false}break;default:m=true}if(n&&!m){n.apply(this,[a.get("CUD_RESPONSE")])}return m};d.prototype.GetCmdTag=function(l){var m=SiebelApp.OfflineAppMgr.GetCmdMap();var n=m.length;var j=l;for(var k=0;k<n;k++){if(m[k].cmd===l){j=m[k].cmdTag;break}}return j};d.prototype.IsCUDRequest=function(i){switch(i){case a.get("DELETERECORD"):case a.get("NEWRECORD"):case a.get("CREATERECORD"):return true;default:return false}};d.prototype.IsAssoc=function(j){var k=CCFMiscUtil_CreatePropSet();k.DecodeFromString(j);var i=k.GetProperty(g.get("SWE_RPC_PROP_RETURN_STATUS"));if(i&&i.toString()===g.get("SWE_RPC_PROP_NEW_POPUP")){return true}return false};return b}())};