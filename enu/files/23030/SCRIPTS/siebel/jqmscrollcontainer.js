/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.JQMScrollContainer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.JQMScrollContainer");define("siebel/jqmscrollcontainer",["order!3rdParty/jqmobile/mobiscroll.custom-2.5.0.min","order!3rdParty/jqmobile/jquery.swipeButton.min","order!3rdParty/jqmobile/jquery.easing.1.3","order!3rdParty/jqmobile/jquery.mobile.scrollview","order!3rdParty/jquery.mobile.scrollview-ext","order!siebel/jqmsearchctrl","order!siebel/jqmformrenderer"],function(){SiebelAppFacade.JQMScrollContainer=(function(){var a=SiebelJS.Dependency("SiebelApp.Constants");function c(e){SiebelAppFacade.JQMScrollContainer.superclass.constructor.call(this,e);var g;var d;var i;var j;var h;var f;this.GetParContforheight=function(){return f};this.SetParContforheight=function(k){f=k};this.SetList=function(k){d=k};this.GetList=function(){return d};this.SetScrollcontainer=function(k){g=k};this.GetScrollcontainer=function(){return g};this.SetIsXdirection=function(k){i=k};this.GetIsXdirection=function(k){return i};this.SetIsYdirection=function(k){j=k};this.GetIsYdirection=function(){return j}}SiebelJS.Extend(c,SiebelAppFacade.JQMFormRenderer);c.prototype.Init=function(){SiebelAppFacade.JQMScrollContainer.superclass.Init.call(this);this.AttachPMBinding("ResetScrollpos",this.ResetScrollposition)};c.prototype.EndLife=function(){$(window).unbind("resize.JQMScrollContainer");SiebelApp.EventManager.removeListner("postload",this.OnPostload,this);SiebelAppFacade.JQMScrollContainer.superclass.EndLife.call(this)};c.prototype.ShowUI=function(){SiebelAppFacade.JQMScrollContainer.superclass.ShowUI.call(this);if(this.IsPopup()){var d=this.GetPM().Get("GetPlaceholder");$("#"+d).addClass("ui-popup-dimension")}};function b(j,h){var d=h.data.ctx.GetWidget();var g;var i=-d._maxY;var f=-d._sy;if(h.data.ctx.GetIsYdirection()){if(f>i){g=h.data.ctx.OnPaginationYdir("Scroll Dn")}else{if(f<-2){g=h.data.ctx.OnPaginationYdir("Scroll Up")}}}}c.prototype.EnableListScrolling=function(h,g,e,f){if(this.GetScrollcontainer()){return false}var d="scrollviewcontainer_"+h;$("#"+h).html("<div id='"+d+"'></div>");this.MakecontainerScrollable(d,g,e,f);return true};c.prototype.MakecontainerScrollable=function(e,g,d,f){if(!e){if(this.GetScrollcontainer()){e=this.GetScrollcontainer()}else{return false}}this.SetList(g);if(d&f){this.SetIsYdirection(true);this.SetIsXdirection(true);$("#"+e).attr({"data-scroll":"xy"})}else{if(d){this.SetIsXdirection(true);$("#"+e).attr({"data-scroll":"x"})}else{if(f){this.SetIsYdirection(true);$("#"+e).attr({"data-scroll":"y"})}}}$("#"+e).addClass("scrollviewcontainer");this.SetScrollcontainer(e);this.CreateScrollWidget(d,f);this.BindScrollEvents();return true};c.prototype.ResetScrollposition=function(){$.mobile.scrollview.prototype.scrollTo.call(this.GetWidget(),0,0,0)};c.prototype.CreateScrollWidget=function(e,f){var d=this.GetScrollcontainer();var g=$("#"+d).closest(".ListAppletContainer");var h=g.attr("id");if(h){this.SetParContforheight(h)}if(!this.GetList()&&d){if(e&f){$("#"+d).scrollview()}else{if(e){$("#"+d).scrollview({direction:"x"})}else{if(f){$("#"+d).scrollview({direction:"y"})}else{return false}}}}else{if(d){$("#"+d).scrolllistview()}}};c.prototype.BindScrollEvents=function(){var e=this.GetPM();var f=e.Get("GetName");var d=this.GetScrollcontainer();if(d){$("#"+d).bind("touchend",{ctx:this},function(g){$(".menuitem").remove();b(this,g)});$("#"+d).bind("mouseup",{ctx:this},function(g){$(".menuitem").remove();b(this,g)});if(!this.IsPopup()){SiebelApp.EventManager.addListner("postload",this.OnPostload,this);$("#"+d).bind("orientationchange",{ctx:this},function(g){g.data.ctx.fixHeight(g.data.ctx)});$(window).bind("resize.JQMScrollContainer",{ctx:this},function(g){g.data.ctx.fixHeight(g.data.ctx)})}}f=null;d=null};c.prototype.OnPostload=function(){this.fixHeight()};c.prototype.GetWidget=function(){var d=this.GetScrollcontainer();if(this.GetList()){return($("#"+d).data("mobileScrolllistview"))}else{return($("#"+d).data("mobileScrollview"))}};c.prototype.fixHeight=function(){var d=300;if(this.IsPopup()){d=this.calcPopHeight();this.setHeight(d)}else{if(this.IsContVisible()){d=this.calcHeight();this.setHeight(d)}}};c.prototype.fixWidth=function(e){SiebelAppFacade.JQMScrollContainer.superclass.fixWidth.call(this,e);if(this.IsPopup()){var d=$(".AppletStylePopup").width();$(".AppletStylePopup").attr("style","max-width:"+e+" !important; width: "+d+"px !important")}};c.prototype.IsContVisible=function(){var f=this.GetPM();var d=this.GetScrollcontainer();var i=$("#s_"+f.Get("GetFullId")+"_div");var h=(!($("#"+d).is(":visible")))||($("#"+d).is(":hidden"));var e=(!(i.is(":visible")))||(i.is(":hidden"));var g=i.offset();var j=$("#"+d).offset();if(!h&&!e&&g&&j){return true}else{return false}};c.prototype.calcHeight=function(){var g=this.GetPM();var h=$("#_sweview").offset();var m=$(window).height();var j=$("#s_"+g.Get("GetFullId")+"_div");var n=this.GetScrollcontainer();var i=this.GetParContforheight();var l=null;var f=null;var k=$("#"+i).offset();if(i&&k){l=$("#"+i).height();f=$("#"+n).offset().top-k.top}var e=$("#"+n).offset().top-j.offset().top;var d;if(l!==null){l=l-f;d=l}else{if(m*(0.3)>h.top){d=m-h.top-e}else{d=m-e}}return d};c.prototype.calcPopHeight=function(){var i=parseInt($("#popup-popup").css("height"),10);var j=parseInt($(".popupContainer").css("height"),10);var h=parseInt($(".jqmpopup_title").css("height"),10);var f=this.GetScrollcontainer();var e=parseInt($("#"+f).css("height"),10);if(j<=i){return e}var d=j-e;var g=i-d-2*h;return g};c.prototype.setHeight=function(e){var d=this.GetScrollcontainer();var h;$("#"+d).css("height",e+"px");var i=this.GetWidget();if(!i){return}var f=-i._sy;var k=-i._maxY;h=this.GetListHeight();if(k){var g=h-e;var j=(f*g)/k;if(j>g){j=g}i._maxY=-g;$.mobile.scrollview.prototype.scrollTo.call(i,0,-j,0)}};c.prototype.SetNewscrollpos=function(e,l){if(e===null||l===0){return}if(l<0){l=-l}var f=this.GetPM();var h=-1;var k;var j=this.GetWidget();if(j._maxY===undefined){return}var m=-j._maxY;var n=$("#"+this.GetScrollcontainer()).height();var g=n+m;var d=f.Get("GetRecordSet").length;var i=-j._sy;if(!e){h=this.GetOffset(0,l);k=i+h}else{h=this.GetOffset(d-l-1,d-1);k=i-h}if(k<0){k=0}else{if(k>m){k=m}}$.mobile.scrollview.prototype.scrollTo.call(j,0,-k,0)};c.prototype.GetOffset=function(k,g){var f=this.GetPM();var e=f.Get("GetRecordSet").length;var j=g-k;var i=-this.GetWidget()._maxY;var l=$("#"+this.GetScrollcontainer()).height();var h=l+i;var d=(h/e)*j;return d};c.prototype.CheckScrollboundries=function(i){var d=this.GetListHeight();var f=$("#"+this.GetScrollcontainer()).height();var g=this.GetWidget();if(!g){return}var e=-g._sy;var h;if(d<f){h=0}else{h=d-f}if(e>h){e=h;$.mobile.scrollview.prototype.scrollTo.call(g,0,-e,0)}else{if(e<0){e=0;$.mobile.scrollview.prototype.scrollTo.call(g,0,-e,0)}}};c.prototype.OnPaginationYdir=function(f){var e="";switch(f){case"Next Record":e=a.get("PAG_NEXT_RECORD");break;case"Next Set Of Record":e=a.get("PAG_NEXT_SET");break;case"Previous Record":e=a.get("PAG_PREV_RECORD");
break;case"Previous Set Of Record":e=a.get("PAG_PREV_SET");break;case"Scroll Up":e=a.get("PAG_SCROLL_UP");break;case"Scroll Dn":e=a.get("PAG_SCROLL_DN");break}var d=this.GetPM();if(!this.GetPM().OnControlEvent(a.get("PHYEVENT_VSCROLL_LIST"),e)){return false}return true};return c}());return"SiebelAppFacade.JQMScrollContainer"})};