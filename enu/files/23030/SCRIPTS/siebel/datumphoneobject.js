/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.DatumPhoneObject)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.DatumPhoneObject");var utils=SiebelApp.Utils;var consts=SiebelApp.Constants;SiebelApp.S_App.DatumPhoneObject=(function(){function a(){SiebelApp.S_App.DatumPhoneObject.superclass.constructor.call(this);this.m_sValue="";this.m_sCountry="";this.m_sFormat="";this.m_bCustomFormat=false;this.m_bLeadingZeroRemoved=false}SiebelJS.Extend(a,SiebelApp.S_App.DatumObject);a.prototype.GetAsFormattedString=function(e){var l=0;var h=0;var f,m;var d;var c=false;var k="";if((this.m_sCountry&&this.m_sCountry.length===0)&&(this.m_sValue&&this.m_sValue.length>0)&&this.m_sValue[0]==="0"){k+="?";k+=this.m_sValue.toString().replace(/,/g,"");return k}if(this.m_sCountry.length>0&&this.m_sCountry!==SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_COUNTRY"))){k=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_CTRY_FORMAT"));f=k.indexOf("+");k=(f===-1)?this.m_sCountry:k.substring(0,f)+this.m_sCountry+k.substring(f+1)}if(!this.m_sValue||this.m_sValue.length===0){return k}if(e.length===0){e=this.m_sFormat}c=SiebelApp.S_App.IsPhoneLeadingZeroAllowed(this.m_sCountry);if(!e){if((k.length===0)&&c){k+="0"}k+=this.m_sValue.toString().replace(/,/g,"");return k}d=this.m_sValue.toString().replace(/,/g,"");if(k.length===0&&c){if(this.m_bCustomFormat&&!this.m_bLeadingZeroRemoved){this.m_sFormat.replace("0","#")}d="0"+d}if(this.m_sFormat){for(var g=0;this.m_sFormat[g];g++){switch(this.m_sFormat[g]){case"0":l++;case"#":h++;break}}}if(d.length<l){k+=d;return k}var j=0;var b=0;if(this.m_sFormat){for(m=0;m<this.m_sFormat.length;m++){switch(this.m_sFormat[m]){case"0":b++;break;case"#":if(d.length>=h){b++}else{h--}break;default:if(j<b){k+=d.substring(j,j+(b-j));j=b}k+=this.m_sFormat[m];break}}}if(j<b){k+=d.substring(j,j+(b-j))}if(b<d.length){k+=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_EXT_FORMAT"));k+=d.substring(b)}return k};a.prototype.GetAsString=function(){var b="";if(this.m_sCountry!=="+1"){b=this.m_sCountry}b+=this.m_sValue;if(this.m_bCustomFormat){b+="\n";b+=this.m_sFormat}return b};a.prototype.GetDataType=function(){return consts.get("DTYPE_PHONE")};a.prototype.SetAsFormattedString=function(k,d){var e="";var b=false;this.m_sValue=k;this.m_sCountry="";this.m_sFormat="";this.m_bCustomFormat=false;this.m_bLeadingZeroRemoved=false;if(this.m_sValue.length===0){return}if(this.m_sValue instanceof Array){this.m_sValue=this.m_sValue.join("")}if((this.m_sValue.length>1)&&(this.m_sValue[0]==="?")&&(this.m_sValue[1]==="0")){this.m_sValue=this.m_sValue.substring(1);return}var f;var c="";var g=this.Extract(this.m_sValue,this.m_sFormat);this.m_sValue=g.sValue;this.m_sFormat=g.sFormat;if(this.m_sValue.length===0||this.m_sValue[0]!=="+"){c=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_COUNTRY"))}if(this.m_sValue.length>=k.length){this.SetAsString(c+this.m_sValue)}else{b=SiebelApp.S_App.IsPhoneLeadingZeroAllowed(c);var l=new SiebelApp.S_App.DatumPhoneObject();l.SetAsString(c+this.m_sValue);e=l.GetAsFormattedString(this.m_sFormat);if(k===e||(b&&e&&e.length!==0&&(e[0]==="0"&&e.substring(1)===k))){this.Copy(l)}else{this.m_bCustomFormat=true;this.m_sValue=l.GetValue();this.m_sCountry=l.GetCountry();this.m_bLeadingZeroRemoved=l.m_bLeadingZeroRemoved;if(c.length===0){this.m_sFormat=this.CleanFormat(this.m_sFormat,this.m_sCountry.length)}else{this.m_sFormat=this.CleanFormat(this.m_sFormat,0);if(this.m_sCountry.length===0){var h=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_CTRY_FORMAT"));if((f=h.indexOf("+"))!==-1){this.m_sFormat=h.substring(0,f)+this.MakeString("0",c.length)+h.substring(f+1)+this.m_sFormat}else{this.m_sFormat=this.MakeString("0",c.length)+this.m_sFormat}}}if(this.m_bLeadingZeroRemoved){this.m_sFormat.replace("0","#")}}}if(this.IsError()){this.SetDefaults();return}if(this.m_sCountry==="+1"){if(this.m_sValue.length<10||this.m_sValue[0]==="0"){this.SetDefaults();return}this.m_bCustomFormat=false;var j=SiebelApp.S_App.LocaleObject.GetPhoneFormat("+1",this.m_sCountry,this.m_sFormat);this.m_sCountry=j.sPhoneCountry;this.m_sFormat=j.sFormat}e=this.GetAsString();if(e.length>40){this.SetDefaults();return}return};a.prototype.SetDefaults=function(){this.m_sValue="";this.m_sFormat="";this.m_sCountry="";this.m_bCustomFormat=false;this.m_bLeadingZeroRemoved=false;this.SetError(true)};a.prototype.SetAsString=function(l){var c=false;this.m_sValue=l;this.m_bCustomFormat=false;this.m_bLeadingZeroRemoved=false;this.m_sCountry="";this.m_sFormat="";if(!this.m_sValue||this.m_sValue.length===0){return}if(this.m_sValue[0]==="0"){return}var e=0,d=0;var g="";if((e=this.m_sValue.indexOf("\n"))!==-1){this.m_sFormat=this.m_sValue.substring(e+1);this.m_sValue=this.m_sValue.substring(0,e);this.m_bCustomFormat=true;if(this.m_sValue[0]==="+"){var f=SiebelApp.S_App.LocaleObject.GetPhoneFormat(this.m_sValue,this.m_sCountry,g);this.m_sValue=f.sPhoneNumber;this.m_sCountry=f.sPhoneCountry;g=f.sFormat}else{this.m_sCountry="+1"}return}var k=this.Extract(this.m_sValue,this.m_sFormat);this.m_sValue=k.sValue;this.m_sFormat=k.sFormat;if(this.m_sValue.length<l.length){this.m_bCustomFormat=true;var b;if(this.m_sValue[0]==="+"){b=SiebelApp.S_App.LocaleObject.GetPhoneFormat(this.m_sValue,this.m_sCountry,g);this.m_sValue=b.sPhoneNumber;this.m_sCountry=b.sPhoneCountry;g=b.sFormat;this.m_sFormat=this.CleanFormat(this.m_sFormat,this.m_sCountry.length)}else{b=SiebelApp.S_App.LocaleObject.GetPhoneFormat("+1",this.m_sCountry,g);this.m_sCountry=b.sPhoneCountry;g=b.sFormat;this.m_sFormat=this.CleanFormat(this.m_sFormat,0)}if(this.m_sCountry==="+1"&&this.m_sValue.length>=10){this.m_bCustomFormat=false;this.m_sFormat=g}c=SiebelApp.S_App.IsPhoneLeadingZeroAllowed(this.m_sCountry);if((!this.m_sValue||(this.m_sValue.length===0))&&this.m_sValue[0]==="0"&&c){this.m_sValue=this.m_sValue.substring(1);this.m_sFormat.replace("0","#");this.m_bLeadingZeroRemoved=true}return}var h;if(this.m_sValue[0]==="+"){h=SiebelApp.S_App.LocaleObject.GetPhoneFormat(this.m_sValue,this.m_sCountry,this.m_sFormat);this.m_sValue=h.sPhoneNumber;this.m_sCountry=h.sPhoneCountry;this.m_sFormat=h.sFormat}else{h=SiebelApp.S_App.LocaleObject.GetPhoneFormat("+1",this.m_sCountry,this.m_sFormat);this.m_sCountry=h.sPhoneCountry;this.m_sFormat=h.sFormat}c=SiebelApp.S_App.IsPhoneLeadingZeroAllowed(this.m_sCountry);if((!this.m_sValue&&this.m_sValue.length!==0)&&this.m_sValue[0]==="0"&&c){this.m_sValue=this.m_sValue.substring(1);this.m_bLeadingZeroRemoved=true}if(this.m_sFormat){for(e=0,d=0;e<this.m_sFormat.length;e++){if(this.m_sFormat[e]==="0"){d++}}if(c){if((this.m_sValue.length+1)<d){this.m_sFormat=""}}else{if(this.m_sValue.length<d){this.m_sFormat=""}}}return};a.prototype.SetFormat=function(b){return};a.prototype.SetValue=function(b){this.SetAsString(b)};a.prototype.GetValue=function(){return this.m_sValue};a.prototype.GetCountry=function(){return this.m_sCountry};a.prototype.IsCustomFormat=function(){return this.m_bCustomFormat};a.prototype.Copy=function(b){if(!b){return
}this.m_sValue=b.GetValue();this.m_sCountry=b.GetCountry();this.m_sFormat=b.GetFormat();this.m_bCustomFormat=b.IsCustomFormat()};a.prototype.Extract=function(o,f){var d;var l,h,e;var q=[];var c=[];var m=o;var g=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_EXT_FORMAT"));if(o.length===0){return{sValue:o,sFormat:f}}if(o.length>=128){return{sValue:o,sFormat:f}}while((l=m.indexOf(g))!==-1){m=m.substring(l+g.length)}d=o.length-m.length-g.length;for(l=0,h=0,e=0;l<o.length;l++){if(l===d){for(var p=0;p<g.length;p++){c[e+p]=g[p]}l+=g.length-1;e+=g.length;continue}var b=o[l];var n=b.charCodeAt();if(n>255){this.SetError(true);q[h]="\0";c[e]="\0";o=q;f=c;return{sValue:o,sFormat:f}}if((b>="0"&&b<="9")||(b>="a"&&b<="z")||(b>="A"&&b<="Z")||b==="#"||b==="*"||(h===0&&b==="+")){q[h++]=b;c[e++]="0"}else{c[e++]=b}}o=q.join("");f=c.join("");return{sValue:o,sFormat:f}};a.prototype.CleanFormat=function(b,h){var e,d;var c=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_CTRY_FORMAT"));var f=SiebelApp.S_App.LocaleObject.GetProfile(consts.get("LOCAL_PHONE_EXT_FORMAT"));for(e=0,d=0;e<b.length&&d<h;e++){if(b[e]==="0"){d++}}if(d===h&&d>0&&((d=c.indexOf("+"))!==-1)){for(d++;e<b.length&&d<c.length;e++,d++){if(b[e]!==c[d]){break}}}b=b.substring(e);if((e=b.indexOf(f))!==-1){var g=b.substring(e+f.length);while((e=g.indexOf(f))!==-1){g=g.substring(e+f.length)}b=b.substring(0,b.length-g.length-f.length)}return(b)};a.prototype.MakeString=function(c,d){var b="";while(d-->0){b=b+c}return(b)};return a}())};