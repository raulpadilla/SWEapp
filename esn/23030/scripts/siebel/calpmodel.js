/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.CalPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.CalPresentationModel");define("siebel/calpmodel",[],function(){SiebelAppFacade.CalPresentationModel=(function(){var g=SiebelJS.Dependency("SiebelApp.Constants");function n(o){SiebelAppFacade.CalPresentationModel.superclass.constructor.call(this,o)}SiebelJS.Extend(n,SiebelAppFacade.PresentationModel);n.prototype.Init=function(){SiebelAppFacade.CalPresentationModel.superclass.Init.call(this);this.AddMethod("PopulatePropSet",b);this.AddMethod("UpdateUserPermission",h);this.AddMethod("ParseEventInfoOUI",a);this.AttachEventHandler(g.get("PHYEVENT_DRILLDOWN_LIST"),function(o){this.ExecuteMethod("InvokeMethod","DrillDown",f.call(this,o))});this.AttachEventHandler("eventResize",function(r,o,q,p){m.call(this,r,o,q,p,"eventResize")});this.AttachEventHandler("eventDrop",function(r,o,q,p){m.call(this,r,o,q,p,"eventDrop")});this.AttachEventHandler("externalDrop",function(o,p,r,q){k.call(this,o,p,r,q)});this.AttachEventHandler("newEvent",function(r,o,q,p){d.call(this,r,o,q,p)});this.AttachEventHandler("newLSCall",function(o){i.call(this,o)});this.AttachNotificationHandler(g.get("SWE_PROP_BC_NOTI_GENERIC"),function(o){c.call(this,o)})};n.prototype.Setup=function(o){SiebelAppFacade.CalPresentationModel.superclass.Setup.call(this,o);var u=o.EnumChildren(true);do{if(u.GetType()===g.get("SWE_PST_CNTRL_LIST")){var p=u.EnumChildren(true);do{if(p.GetType()===g.get("SWE_PST_CUSTOM_CTRL")){l.call(this,p.GetChild(0));break}}while(p=u.EnumChildren(false));break}}while(u=o.EnumChildren(false));var s=[this.Get("UISTR January"),this.Get("UISTR February"),this.Get("UISTR March"),this.Get("UISTR April"),this.Get("UISTR May"),this.Get("UISTR June"),this.Get("UISTR July"),this.Get("UISTR August"),this.Get("UISTR September"),this.Get("UISTR October"),this.Get("UISTR November"),this.Get("UISTR December")];var t=[this.Get("UISTR Jan"),this.Get("UISTR Feb"),this.Get("UISTR Mar"),this.Get("UISTR Apr"),this.Get("UISTR May"),this.Get("UISTR Jun"),this.Get("UISTR Jul"),this.Get("UISTR Aug"),this.Get("UISTR Sep"),this.Get("UISTR Oct"),this.Get("UISTR Nov"),this.Get("UISTR Dec")];var q=[this.Get("UISTR Sunday"),this.Get("UISTR Monday"),this.Get("UISTR Tuesday"),this.Get("UISTR Wednesday"),this.Get("UISTR Thursday"),this.Get("UISTR Friday"),this.Get("UISTR Saturday")];var r=[this.Get("UISTR Su"),this.Get("UISTR Mo"),this.Get("UISTR Tu"),this.Get("UISTR We"),this.Get("UISTR Th"),this.Get("UISTR Fr"),this.Get("UISTR Sa")];this.AddProperty("CurViewStartDate",new Date());this.AddProperty("CurViewEndDate",new Date());this.AddProperty("CurViewShowDate",new Date());this.AddProperty("EventInfo",[]);this.AddProperty("Timezone",this.Get("Default Timezone"));this.AddProperty("MonthStringArray",s);this.AddProperty("MonthShortStringArray",t);this.AddProperty("WeekDayStringArray",q);this.AddProperty("WeekDayShortStringArray",r);this.AddProperty("Owner",this.Get("Default User"));h.call(this)};function l(o){var p=o.EnumProperties(true);do{this.AddProperty(p,o.GetProperty(p))}while(p=o.EnumProperties(false));j.call(this)}function j(){if(!this.Get("Enable Monthly Time Display")){this.AddProperty("Enable Monthly Time Display","Always")}if(!this.Get("Enable 5Day Time Display")){this.AddProperty("Enable 5Day Time Display","Off-interval")}if(!this.Get("Enable Daily Time Display")){this.AddProperty("Enable Daily Time Display","Off-interval")}if(!this.Get("SelectedDate")){this.AddProperty("SelectedDate",new Date())}}function h(){var o=this.Get("Owner");if(this.Get("Enable Owner Picker")==="Y"){if(!o){this.AddProperty("Owner",this.Get("User Login Name"))}}else{this.AddProperty("Owner","")}var q=this.Get("Update List");if(q!==""){var p=CCFMiscUtil_CreatePropSet();p.DecodeFromString(q);if(p.GetProperty(this.Get("Owner"))){this.AddProperty("CanInsert",this.Get("No Insert")!=="Y");this.AddProperty("CanUpdate",this.Get("No Update")!=="Y")}else{this.AddProperty("CanInsert",false);this.AddProperty("CanUpdate",false)}}}function c(o){var t=o.GetProperty(g.get("SWE_PROP_NOTI_TYPE"));if(o.GetProperty(g.get("SWE_PROP_NOTI_TYPE"))==="HICalendarData"){var r=o.GetProperty(g.get("SWE_PROP_ARGS_ARRAY"));var s=[];if(r){CCFMiscUtil_StringToArray(r,s)}var p=CCFMiscUtil_CreatePropSet();for(var q=0;q<s.length;q++){p.SetProperty(q.toString(),s[q])}this.ExecuteMethod("ParseEventInfoOUI",p)}}function f(t){var o=CCFMiscUtil_CreatePropSet();var s=t.split("('");s=s[1].split("')");var r=s[0];o.SetProperty("Data",r);var p=this.Get("CurViewShowDate");var q=(p.getMonth()+1)+"/"+p.getDate()+"/"+p.getFullYear();o.SetProperty("CurrentDate",q);o.SetProperty("SelectedDate",this.Get("SelectedDate").getTime());return o}function k(p,q,t,r){var o=CCFMiscUtil_CreatePropSet();if(r&&!r.IsEmpty()){o.SetProperty("Optional",r.EncodeAsString());this.ExecuteMethod("InvokeMethod","NewRecord",o)}else{var s=q+"|"+t;o.SetProperty("StartDate",p);o.SetProperty("Data",s);this.ExecuteMethod("InvokeMethod","DragAndDrop",o)}}function m(t,p,s,r,q){var o=CCFMiscUtil_CreatePropSet();o.SetProperty("NewStartDate",t);o.SetProperty("RowId",s);if(q==="eventResize"){o.SetProperty("NewEndDate",p)}if(r){o.SetProperty("Optional",r.EncodeAsString())}this.ExecuteMethod("InvokeMethod","UpdateRecord",o)}function d(v,q,t,s){var p=CCFMiscUtil_CreatePropSet();var r=new Date(q);var u=new Date(t);p.SetProperty("StartDate",$.fullCalendar.formatDate(r,"MM/dd/yyyy HH:mm:ss"));p.SetProperty("EndDate",$.fullCalendar.formatDate(u,"MM/dd/yyyy HH:mm:ss"));p.SetProperty("CurrentDate",$.fullCalendar.formatDate(r,"MM/dd/yyyy"));if(v.length>0){var o=this.Get("DescriptionFieldLength");v=v.substring(0,o);p.SetProperty("Description",v)}this.ExecuteMethod("InvokeMethod","NewRecord",p)}function i(q){var p;if(q==="Contact"){p="NewProfCall"}else{if(q==="Account"){p="NewAcctCall"}else{if(q==="Meeting"){p="NewMeeting"}else{return}}}var o=CCFMiscUtil_CreatePropSet();o.SetProperty("StartDate",$.fullCalendar.formatDate(this.Get("SelectedDate"),"MM/dd/yyyy HH:mm:ss"));o.SetProperty("CurrentDateTime",$.fullCalendar.formatDate(new Date(),"MM/dd/yyyy HH:mm:ss"));this.ExecuteMethod("InvokeMethod",p,o)}function b(){var q=this.Get("CurViewStartDate");var p=(q.getMonth()+1)+"/"+q.getDate()+"/"+q.getFullYear();var v=this.Get("CurViewEndDate");var t=(v.getMonth()+1)+"/"+v.getDate()+"/"+v.getFullYear();var u=this.Get("CurViewShowDate");var r=(u.getMonth()+1)+"/"+u.getDate()+"/"+u.getFullYear();var s=u.getTime();var o=CCFMiscUtil_CreatePropSet();o.SetProperty("ViewMode",this.Get("ViewMode"));o.SetProperty("ClippingCount","4");o.SetProperty("SelectedDate",this.Get("SelectedDate").getTime());o.SetProperty("StartDate",p);o.SetProperty("EndDate",t);o.SetProperty("CurrentDate",r);o.SetProperty("StretchCell",this.Get("StretchCell"));o.SetProperty("SelectedTimeZone",this.Get("Timezone"));o.SetProperty("SelectedUser",this.Get("Owner"));return o}function a(q){var p=CCFMiscUtil_CreatePropSet();var t=CCFMiscUtil_CreatePropSet();var o=p.DecodeFromString(q.GetProperty("0"));
if(o===false||p.type!=="OUICalendarData"){return}if(p.PropertyExists("ReturnStartDate")){this.AddProperty("ReturnStartDate",p.GetProperty("ReturnStartDate"))}if(p.PropertyExists("ViewMode")){this.AddProperty("ViewMode",p.GetProperty("ViewMode"))}if(p.PropertyExists("DescriptionFieldLength")){this.AddProperty("DescriptionFieldLength",p.GetProperty("DescriptionFieldLength"))}this.AddProperty("Timezone",p.GetProperty("SelectedTimeZone"));this.AddProperty("Owner",p.GetProperty("SelectedUser"));this.AddProperty("SelectedDate",new Date(parseInt(p.GetProperty("SelectedDate"),10)));var u=[];for(var r=0;r<p.GetChildCount("CalendarEvent");r++){t=p.GetChild(r);if(t.type!=="CalendarEvent"){continue}var s=[];var v=t.EnumProperties(true);do{s[v]=t.GetProperty(v)}while(v=t.EnumProperties(false));s.DisplayField=e.call(this,t);u.push(s)}this.AddProperty("EventInfo",u)}function e(o){var p=CCFMiscUtil_CreatePropSet();var u=[];var t=o.GetChildCount("DisplayField");for(var r=0;r<t;r++){p=o.GetChild(r);if(p.type!=="DisplayField"){continue}var s=[];s.Name=p.value;s.Sequence=p.GetProperty("Sequence");s.FieldValue=p.GetProperty("FieldValue");s.FieldColor=p.GetProperty("FieldColor");s.ToolTip=p.GetProperty("ToolTip");s.IconFile=p.GetProperty("IconFile");var q=p.GetProperty("DrillDown");if(q!==""){q=q.replace(/%2f/g,"/");q=q.replace(/%23/g,"#");q="javaScript:void(0)('"+q+"')"}s.DrillDown=q;u.push(s)}return u}return n}());return"SiebelAppFacade.CalPresentationModel"})};