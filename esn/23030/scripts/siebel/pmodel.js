/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.BasePM)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.BasePM");SiebelAppFacade.BasePM=(function(){var w=SiebelJS.Dependency("SiebelApp.Utils"),o=SiebelJS.Dependency("SiebelApp.Constants");var b=o.get("SWE_PROP_BC_OPERATION"),h=o.get("SWE_EXTN_CANCEL_ORIG_OP"),s=o.get("SWE_EXTN_CANCEL_POST_OP"),t=o.get("SWE_EXTN_RETVAL");var k={},d={},r={},l={},y={},n={},e={},f={};function x(B){var A=B.GetName()+"_PM";this.GetPMName=function(){return A};k[A]=B;d[A]={};r[A]={};l[A]={};y[A]={};n[A]={};e[A]={};f[A]={};var C;this.GetRenderer=function(){return C};this.SetRenderer=function(D){C=D};this.Init()}function a(B,A,C){this[h]=B||false;this[s]=A||false;this[t]=C||null}x.prototype.Init=function(){var C=k[this.GetPMName()],D=null,B=0,A=0;if(C){D=C.GetPropArray();for(B=0,A=D.length;B<A;B++){this.AddProperty(D[B],null,{core:true})}D=C.GetMethodArray();for(B=0,A=D.length;B<A;B++){this.AddMethod(D[B],null,{core:true})}D=null}this.AddMethod("PostExecute",this.HandlePreExecute,{sequence:true,scope:this});this.AddMethod("PostExecute",this.HandlePostExecute,{sequence:false,scope:this})};x.prototype.Setup=function(M){if(!(k[this.GetPMName()] instanceof SiebelApp.S_App.Applet)||k[this.GetPMName()].GetName()==="Persistent Customer Dashboard Applet"){var L="";var E=M.GetProperty(o.get("SWE_UIDEF_PR_CTR"));if(E){E=E.split(".");if(E[0]){L=window[E[0]];for(var F=1,K=E.length;F<K&&L;F++){L=L[E[F]]}}}else{var J=M.GetProperty(o.get("SWE_PROP_OUI_PRENDERER"));E=SiebelApp.S_App.GetConstructorFromKey(J)+".";var B=M.GetProperty("SWE_OUI_RENDERER");var D="";var P=0;var H=E.indexOf(".");while(H!=-1){var O=E.substring(P,H);D=(D=="")?window[O]:D[O];P=H+1;H=E.indexOf(".",P)}L=D||SiebelAppFacade[B]||SiebelAppFacade.PhysicalRenderer}this.SetRenderer(new L(this))}else{var A=M.GetChildByType("apm");if(!w.IsEmpty(A)){var N=A.GetProperty("Max List Columns Tablet");if(N!==undefined&&N!==null){this.SetProperty("maxListColTablet",N)}var G=A.GetProperty("Max List Columns Phone");if(G!==undefined&&G!==null){this.SetProperty("maxListColPhone",G)}var C=A.GetProperty("Default Applet Display Mode");if(C!==undefined&&C!==null){this.SetProperty("defaultAppletDisplayMode",C.toString().toLowerCase())}var I=A.GetProperty("EnableDragAndDropInList");if(I!==undefined&&I!==null){this.SetProperty("enableDragAndDropInList",I)}}}};x.prototype.Show=function(){if(!(k[this.GetPMName()] instanceof SiebelApp.S_App.Applet)||k[this.GetPMName()].GetName()==="Persistent Customer Dashboard Applet"){var A=this.GetRenderer();A.ShowUI();A.BindEvents();A.BindData()}};x.prototype.HandlePreExecute=function(B,D,C){if(!e[this.GetPMName()]){return}var A=e[this.GetPMName()].ALL||[];v.call(this,A,B,D,C);A=e[this.GetPMName()].NOT||[];v.call(this,A,B,D,C);A=e[this.GetPMName()][B]||[];v.call(this,A,B,D,C)};x.prototype.HandlePostExecute=function(B,D,C){if(!f[this.GetPMName()]){return}var A=f[this.GetPMName()].ALL||[];v.call(this,A,B,D,C);A=f[this.GetPMName()].NOT||[];v.call(this,A,B,D,C);A=f[this.GetPMName()][B]||[];v.call(this,A,B,D,C)};function v(B,D,F,E){for(var C=0,A=B.length;C<A;C++){B[C][0].call(B[C][1],D,F.Clone(),E.Clone())}}x.prototype.HandleNotify=function(B){var C=B.GetProperty(b);var E=y[this.GetPMName()][C]||[];for(var D=0,A=E.length;D<A;D++){E[D][0].call(E[D][1],B.Clone())}};x.prototype.HandleResponsePS=function(G){var C=G.GetChildCount();var E=n[this.GetPMName()]||{};for(var D=0;D<C;D++){var I=G.GetChild(D);var H=I.GetType();if(E[H]){var A=E[H];for(var B=0,F=A.length;B<F;B++){A[B][0].call(A[B][1],I.Clone())}}}};x.prototype.OnControlEvent=function(G){var D=false;var H=null;var J=[];var L=arguments.length;for(var F=1;F<L;F++){if(arguments[F]&&(arguments[F].async===true||arguments[F].async===false)){H=arguments[F]}else{J.push(arguments[F])}}var B;var I=k[this.GetPMName()];var K={};var A=false;if(H&&(H.async===true||H.async===false)){A=true;K.scope=this;K.target=H.target;if(typeof(H.async)!=="boolean"){K.async=true}else{K.async=H.async}K.selfbusy=H.selfbusy||false;K.mask=H.mask||false;K.cb=function(){var N=Array.prototype.slice.call(arguments);if(typeof(H.cb)==="function"){H.cb.apply(H.scope||null,N)}}}var E=l[this.GetPMName()][G];if(typeof(E)==="function"){J.push(K);var M=E.apply(this,J);if(M===false){return M}D=M}else{if(typeof(E)==="string"){D=this.ExecuteMethod.apply(this,[E].concat(J))}}switch(G){case o.get("PHYEVENT_INVOKE_CONTROL"):if(!A){K.async=true}if(J[0]==="NewQuery"||J[0]==="UndoQuery"||J[0]==="GotoNextSet"||J[0]==="GotoPreviousSet"){K.async=false}J.push(K);D=I.InvokeMethod.apply(I,J);break;case o.get("PHYEVENT_CONTROL_BLUR"):D=I.OnBlur.apply(I,J);break;case o.get("PHYEVENT_CONTROL_FOCUS"):D=I.OnFocus.apply(I,J);break;case o.get("PHYEVENT_APPLET_FOCUS"):B=CCFMiscUtil_CreatePropSet();I.InvokeMethod("OnFocus",B);break;case o.get("PHYEVENT_INVOKE_PICK"):if(!this.ExecuteMethod("hasRecords")){return false}case o.get("PHYEVENT_INVOKE_COMBO"):case o.get("PHYEVENT_INVOKE_MVG"):if(G===o.get("PHYEVENT_INVOKE_COMBO")&&!this.ExecuteMethod("CanUpdate",J[0].GetName())){return false}I.SetActiveControl.apply(I,J);B=CCFMiscUtil_CreatePropSet();if(!A){K.async=true;K.selfbusy=true}if(G!==o.get("PHYEVENT_INVOKE_COMBO")){I.InvokeMethod("EditPopup",B,K)}else{I.InvokeMethod("EditPopup",B)}break;case o.get("PHYEVENT_INVOKE_DETAIL_POPUP"):if(!this.ExecuteMethod("hasRecords")){return false}case o.get("PHYEVENT_INVOKE_CURRENCY"):I.SetActiveControl.apply(I,J);B=CCFMiscUtil_CreatePropSet();if(!A){K.async=true;K.selfbusy=true}I.InvokeMethod("EditPopup",B,K);break;case o.get("PHYEVENT_CANCEL_QRY_POPUP"):z.call(this);break;case o.get("PHYEVENT_INVOKE_EFFDAT"):if(!this.ExecuteMethod("hasRecords")){return false}I.SetActiveControl.apply(I,J);B=CCFMiscUtil_CreatePropSet();if(!A){K.async=true;K.selfbusy=true}I.InvokeMethod("EditPopup",B,K);break;case o.get("PHYEVENT_DRILLDOWN_FORM"):I.SetActiveControl.apply(I,J);B=CCFMiscUtil_CreatePropSet();B.SetProperty(o.get("SWE_FIELD_STR"),J[0].GetInputName());if(!A){I.InvokeMethod("DrillDown",B)}else{I.InvokeMethod("DrillDown",B,K)}break;case o.get("PHYEVENT_INVOKE_TOGGLE"):B=CCFMiscUtil_CreatePropSet();B.SetProperty(o.get("SWE_SEQ_STR"),J[0]);I.InvokeMethod("ToggleTo",B);break;case o.get("PHYEVENT_ENTER_KEY_PRESS"):D=false;if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false);D=true}else{var C=J[0].GetDefaultMethod();if(C&&I.CanInvokeMethod(C)){B=CCFMiscUtil_CreatePropSet();I.InvokeMethod(C,B);D=true}}break;case o.get("PHYEVENT_ESCAPE_KEY_PRESS"):case o.get("PHYEVENT_TAB_KEY_PRESS"):if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false)}break}return D};x.prototype.EndLife=function(){var A=this.GetRenderer();if(A&&A.EndLife){A.EndLife()}A=null;this.SetRenderer(A);delete d[this.GetPMName()];delete r[this.GetPMName()];delete l[this.GetPMName()];delete y[this.GetPMName()];delete n[this.GetPMName()];delete e[this.GetPMName()];delete f[this.GetPMName()];delete k[this.GetPMName()]};x.prototype.AddProperty=function(B,D,A){var C=d[this.GetPMName()];A=A||{};if(typeof(B)==="string"&&w.Trim(B)!==""){var E=C[B]||{};
if(E&&!E.core){C[B]={value:D,core:A.core};return true}}return false};x.prototype.SetProperty=function(B,D,A){var C=d[this.GetPMName()];if(typeof(B)==="string"&&w.Trim(B)!==""){var E=C[B];if(E){C[B].value=D;c.call(this,B,D);return true}else{return this.AddProperty(B,D,A)}}return false};x.prototype.Get=function(C){var A=k[this.GetPMName()]||{},D=d[this.GetPMName()][C]||{};var B=null;if(D.core===true){if(typeof(A[C])!=="undefined"){B=A[C].call(A)}}else{B=(typeof(D.value)==="function")?D.value.call(this):D.value}return B};function c(D,F){var E=d[this.GetPMName()];var G=E[D]||{};if(G&&G.onChange){var C=G.onChange;for(var B=0,A=C.length;B<A;B++){C[B].method.call(C[B].scope||this,D,F)}}}function u(I,G,J,B){var E=r[this.GetPMName()][I],D,H,A=false;var C=function(){var K=arguments[arguments.length-1],L=!(K&&(K instanceof a));if(L){K=new a()}K[t]=p.call(this,D,H,arguments,K,L,(A?0:1));if(B){p.call(this,G,J,arguments,K[t],L,0)}else{if(K[s]!==true){p.call(this,G,J,arguments,K,L,1)}}return K[t]};if(E.core){var F=k[this.GetPMName()];D=F[I];H=F;if(!E.first){A=E.first=true}F[I]=C}else{D=E.ref;H=E.scope;E.ref=C}}function p(F,H,G,D,C,E){var B=Array.prototype.slice.call(G);if(C){if(F.length>(B.length+E)){B.length=F.length-E}B.push(D)}else{var A=B[B.length-1];if(A&&A instanceof a){if(F.length>(G.length-1+E)){B.length=B.length-1;B.length=F.length-E;B.push(D)}}}return F.apply(H,B)}function m(A,D){var C=[];for(var B=0;B<A.length;B++){C.push(A[B])}C.push(D);return C}function i(A,G,B){var F=r[this.GetPMName()][A];B.scope=B.scope||this;var D;var E;if(F.core){var C=k[this.GetPMName()];D=C[A];E=C;C[A]=function(){if(B.when.call(B.scope)){G.apply(B.scope,arguments)}var H=D.apply(E,arguments);return H}}else{D=F.ref;E=F.scope;F.ref=function(){if(B.when.call(B.scope)){G.apply(B.scope,arguments)}var H=D.apply(E,arguments);return H}}}function q(J,H,B,C){var F=r[this.GetPMName()][J],E,I,A=false;B.scope=B.scope||this;var D=function(){var K=arguments[arguments.length-1],L=!(K&&(K instanceof a));if(L){K=new a()}K[t]=p.call(this,E,I,arguments,K,L,(A?0:1));if(C&&B.when.call(B.scope)){p.call(this,H,B.scope,arguments,K[t],L,0)}else{if(K[s]!==true&&B.when.call(B.scope)){p.call(this,H,B.scope,arguments,K,L,1)}}return K[t]};if(F.core){var G=k[this.GetPMName()];E=G[J];I=G;if(!F.first){A=F.first=true}G[J]=D}else{E=F.ref;I=F.scope;F.ref=D}}function g(H,B,I){var E=r[this.GetPMName()][H],A=false,D,G;var C=function(){var J=arguments[arguments.length-1],K=!(J&&(J instanceof a));if(K){J=new a()}p.call(this,B,I,arguments,J,K,1);if(J[h]===true){J[s]=true}else{J[t]=p.call(this,D,G,arguments,J,K,(A?0:1))}return J[t]};if(E.core){var F=k[this.GetPMName()];D=F[H];G=F;F[H]=C;if(!E.first){A=E.first=true}}else{D=E.ref;G=E.scope;E.ref=C}}function j(A,D,C){var E;var G;var F=r[this.GetPMName()][A];if(F.core){var B=k[this.GetPMName()];E=B[A];G=B;B[A]=function(){return D.apply(G,arguments)}}else{E=F.ref;G=F.scope;F.ref=function(){return D.apply(G,arguments)}}}x.prototype.AddMethod=function(B,F,D){var A=r[this.GetPMName()];D=D||{};var C=k[this.GetPMName()];var E=true;if((typeof(B)==="string")&&w.Trim(B)!==""){if(D.core===true){if(!A[B]){if(typeof(C[B])==="function"){A[B]={core:true}}}}if(typeof(F)==="function"){if(!A[B]){A[B]={ref:F,scope:D.scope||this}}else{if(D.override){j.call(this,B,F,D.scope)}else{if(D.sequence===true){g.call(this,B,F,D.scope)}else{if(D.sequence===false){u.call(this,B,F,D.scope,false)}}}}}else{E=false}}else{E=false}return E};x.prototype.ExecuteMethod=function(A){var B=Array.prototype.slice.call(arguments);B.shift();var D=r[this.GetPMName()][A];if(D.core===true){var C=k[this.GetPMName()];return C[A].apply(C,B)}else{if(D.ref){return D.ref.apply(D.scope,B)}else{SiebelJS.Log("Can't find method - [ "+A+" ]");return null}}};x.prototype.AttachEventHandler=function(A,B){var C=l[this.GetPMName()];var D=false;if(typeof(A)==="string"&&A!==""){if(typeof(B)==="function"||typeof(B)==="string"){C[A]=B;D=true}}return D};x.prototype.AttachNotificationHandler=function(F,D,A){var B=y[this.GetPMName()];var G=false;if(typeof(F)==="string"&&w.Trim(F)!==""&&typeof(D)==="function"){A=A||{};var E=B[F]||[];var C=(A.core===true)?0:-1;E.splice(C,0,[D,A.scope||this]);B[F]=E;G=true}return G};x.prototype.AttachPSHandler=function(D,C,G){var A=n[this.GetPMName()];var F=false;if(typeof(D)==="string"&&w.Trim(D)!==""&&typeof(C)==="function"){G=G||{};var E=A[D]||[];var B=(G.core===true)?0:-1;E.splice(B,0,[C,G.scope||this]);A[D]=E;F=true}return F};x.prototype.AttachPreProxyExecuteBinding=function(G,D,B){var A=e[this.GetPMName()];var F=false;if(typeof(G)==="string"&&w.Trim(G)!==""&&typeof(D)==="function"){B=B||{};var E=A[G]||[];var C=(B.core===true)?0:-1;E.splice(C,0,[D,B.scope||this]);A[G]=E;F=true}return F};x.prototype.AttachPostProxyExecuteBinding=function(G,D,B){var A=f[this.GetPMName()];var F=false;if(typeof(G)==="string"&&w.Trim(G)!==""&&typeof(D)==="function"){B=B||{};var E=A[G]||[];var C=(B.core===true)?0:-1;E.splice(C,0,[D,B.scope||this]);A[G]=E;F=true}return F};x.prototype.AttachPMBinding=function(G,D,B){var A=r[this.GetPMName()];var F=d[this.GetPMName()];var E=false;B=B||{scope:this};if(typeof(G)==="string"&&w.Trim(G)!==""&&typeof(D)==="function"){if(A[G]){if(typeof(B.when)==="function"){q.call(this,G,D,B,true)}else{u.call(this,G,D,B.scope||this,true)}}else{if(F[G]){var C=F[G];C.onChange=C.onChange||[];C.onChange.push({method:D,scope:B.scope||this})}else{E=false}}}return E};function z(){var B=new Date();var E=Math.floor((B.getTime()/1000)).toString();var A=CCFMiscUtil_CreatePropSet();var D=CCFMiscUtil_CreatePropSet();A.SetProperty(o.get("SWSE_CMD_STR"),o.get("SWSE_CANCEL_QUERY"));A.SetProperty(o.get("SWSE_CANCEL_ID"),E);var C={};C.async=true;C.scope=this;C.args=[];C.args.push("");C.args.push(A);SiebelApp.S_App.CallServer(A,D,true,C)}return x}())}if(typeof(SiebelAppFacade.PresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PresentationModel");SiebelAppFacade.PresentationModel=(function(){var m=SiebelJS.Dependency("SiebelApp.Utils"),k=SiebelJS.Dependency("SiebelApp.Constants");var d=k.get("SWE_RPC_PROP_STATUS"),i=k.get("SWE_RPC_PROP_RETURN_STATUS"),l=k.get("SWE_RPC_PROP_STATUS_ERROR"),e=k.get("SWE_RPC_PROP_STATUS_COMPLETED"),b=k.get("SWE_RPC_PROP_STATUS_CONTINUE"),h=k.get("SWE_RPC_PROP_NEW_PAGE"),f=k.get("SWE_RPC_PROP_REFRESH_LAYOUT"),a=k.get("SWE_RPC_PROP_NEW_LAYOUT"),j=k.get("EVENT_ROW_SELECTION");function g(){SiebelAppFacade.PresentationModel.superclass.constructor.apply(this,arguments);this.retryWaitForObjInfoProcessing=0}SiebelJS.Extend(g,SiebelAppFacade.BasePM);g.prototype.Init=function(){SiebelAppFacade.PresentationModel.superclass.Init.apply(this,arguments);this.AddProperty("GetPlaceholder","s_"+this.Get("GetId")+"_l");this.AddProperty("GetCaption",SiebelApp.S_App.LookupStringCache(this.Get("GetTitle")));this.AddProperty("IsPopup",this.Get("GetParentApplet")?true:false);this.AddProperty("isControlPopupOpen",false);this.AddProperty("SetFocusToGridCell",false);this.AddProperty("UpdateUI",false);this.AddProperty("LandMarkTitle",this.Get("GetAppletLabel")+" "+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_FORM_APPLET"));
this.AddMethod("ExecuteUIUpdate",function(){c.call(this,j)},{sequence:false,scope:this});this.AddMethod("hasRecords",function(){return(this.Get("GetNumRows")||0)>0},{scope:this});this.AttachNotificationHandler("g",function(o){if(this.Get("IsActive")){var p=this.Get("GetActiveControl");if(p&&o.GetProperty("type")==="ClosePopup"){this.ExecuteMethod("FieldChange",p,this.ExecuteMethod("GetFieldValue",p))}}});this.AttachPostProxyExecuteBinding("ExecuteQuery",function(p,o,r){var q=SiebelApp.S_App.GetPopupPM();if(!m.IsEmpty(q)&&q.Get("IsCancelQryPopupOpen")){q.ExecuteMethod("ClearPopup");q.SetProperty("IsCancelQryPopupOpen",false)}return});this.AttachPostProxyExecuteBinding("Drilldown",function(q,p,r){var o=r.GetProperty(d);if(m.IndexOf([a,f,h],o)===-1){SiebelApp.S_App.uiStatus.Free()}});this.AttachPreProxyExecuteBinding("ALL",function(p,o,q){c.call(this,k.get("NOT_PRV_FIELDS"));n.call(this,p,o,q);return});this.AddMethod("Query",function(){var o=SiebelApp.S_App.GetActiveView();if(o){var p=o.GetActiveApplet();o.ExecuteFrame(p.GetName(),[{field:this.Get("SearchField"),value:this.Get("SearchValue")}])}});this.AddMethod("SetSelectionOnDragNDrop",function(o){this.ExecuteMethod("ChangeSelectionInPopup",o)});this.AddMethod("HandleDragNDropInPopup",function(o){if(this.ExecuteMethod("CanInvokeMethod",o)){return(this.ExecuteMethod("InvokeMethod",o))}return false});this.AddMethod("CanInvokeScrollMethod",function(p){var o=this.ExecuteMethod("CanInvokeMethod",p);return o});this.AttachNotificationHandler("g",function(o){if(o.GetProperty("type")==="ClosePopup"){this.ExecuteMethod("ClearPopup")}},{scope:SiebelApp.S_App.GetPopupPM()})};g.prototype.Setup=function(q){SiebelAppFacade.PresentationModel.superclass.Setup.apply(this,arguments);var p,o,r,s;if(q){p=q.GetChildByType(k.get("SWE_APPLET_PM_PS"))}if(p){o=p.GetChildByType(k.get("SWE_PM_USER_PREF"));if(o){r=o.EnumProperties(true);do{this.AddProperty(r,o.GetProperty(r))}while((r=o.EnumProperties(false)))}s=p.GetProperty(k.get("SWE_MTHD_UPDATE_USER_PREF"));if(s){this.AddProperty(k.get("SWE_MTHD_UPDATE_USER_PREF"),s)}}};function c(s){var v=this.Get("GetUIEventMap");var x=v.length;var w=k.get("EVENT_NO_FOCUS");var u=k.get("NOT_PRV_FIELDS");var o=false;for(var t=0;t<x;t++){if(v[t].ev===j&&s===j){this.SetProperty("UpdateUI",true);var y=this.Get("GetBusComp");if(y){y.ClearUpdates()}v.splice(t,1);o=true}else{if(v[t].ev===w&&s===w){v.splice(t,1);o=true}else{if(v[t].ev===u&&s===u){if(v[t].ar){var q=v[t].ar;var p=v[t].ar.length;for(var r=0;r<p;r++){this.ExecuteMethod("RepopulateField",q[r])}}v.splice(t,1);o=true}}}x=v.length}return o}function n(p,u,t){var q=t.GetProperty(i),o=null,r=false;if(q===e){switch(p){case"NewRecord":case"CreateRecord":o=this.Get("GetDefaultFocusOnNew");break;case"UndoQuery":case"UndoRecord":case"ExecuteQuery":o=this.Get("GetDefaultFocusOnEdit")||((this.Get("GetActiveControl")||this.Get("GetPrsrvControl"))?(this.Get("GetActiveControl")||this.Get("GetPrsrvControl")).GetName():null);break;case"NewQuery":case"RefineQuery":o=this.Get("GetDefaultFocusOnQuery");break;case"GotoNext":case"GotoPrevious":case"GotoPreviousSet":case"GotoNextSet":case"GotoFirstSet":case"GotoLastSet":this.SetProperty("SetFocusToGridCell",true);o=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(o){o=o.GetName()}else{r=true}break;case"WriteRecord":var s=SiebelApp.S_App.GetPopupPM();if(c.call(this,k.get("EVENT_NO_FOCUS"))||(s&&s.Get("isCurrencyOpen"))){r=true}o=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(o){o=o.GetName()}else{r=true}break;case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}r=true;break;case"DeleteRecord":case"CopyRecord":break;default:r=true}}else{if(q===l||!q){this.ExecuteMethod("SetFocusDefaultControl",false);this.ExecuteMethod("ProcessError");switch(p){case"ExecuteQuery":r=true;break;case"PostChanges":o=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(o){o=o.GetName()}else{r=true}break;case"WriteRecord":c.call(this,k.get("EVENT_NO_FOCUS"));o=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(o){o=o.GetName()}else{r=true}break}}else{if(q===b){switch(p){case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}break}}}}if(!r&&!this.Get("HasPickError")){if(q===e||q===l||!q){if(o){this.ExecuteMethod("SetFocusToCtrl",o,true)}else{this.ExecuteMethod("FocusFirstControl")}}}this.ExecuteMethod("SetHasPickError",false)}return g}())}if(typeof(SiebelApp.PopupPModel)==="undefined"){SiebelJS.Namespace("SiebelApp.PopupPModel");SiebelApp.PopupPModel=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");function d(l){this.constructor.superclass.constructor.call(this,l)}SiebelJS.Extend(d,SiebelAppFacade.PresentationModel);d.prototype.Init=function(){this.AddProperty("state",i.get("POPUP_STATE_UNLOADED"));this.AddProperty("noHide",false);this.AddProperty("height",0);this.AddProperty("width",0);this.AddProperty("source",i.get("POPUP_SOURCE_HI"));this.AddProperty("closeByXDisabled",false);this.AddProperty("isPrevPopupVisible",false);this.AddProperty("isPopupClosedByX",false);this.AddProperty("currPopups",[]);this.AddProperty("url","");this.AddProperty("isSIPopup",false);this.AddProperty("content","");this.AddProperty("isCurrencyOpen",false);this.AddProperty("IsCancelQryPopupOpen",false);this.AddProperty("CanProcessLayout",true);this.AddProperty("isPopupSI",false);this.AddMethod("SetPopupVisible",k);this.AddMethod("ProcessNewPopup",b);this.AddMethod("ProcessClearPopup",e);this.AddMethod("ClearPopup",g);this.AddMethod("OpenPopup",c);this.AddMethod("OnLoadPopupContent",a);this.AddMethod("StandAlonePopup",function(m,l){});this.AttachEventHandler("ClosePopupByX",h);this.AttachPreProxyExecuteBinding("ALL",function(m,l,n){if(i.get("CLOSE_BY_X")===String(l.GetProperty(i.get("SWE_CMD_ARG")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true)}else{if(i.get("SWSE_CANCEL_QUERY")===String(l.GetProperty(i.get("SWSE_CMD_STR")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true);this.SetProperty("IsCancelQryPopupOpen",false)}}})};d.prototype.PostExecute=function(l,n,m){this.HandlePreExecute(l,n,m);this.HandlePostExecute(l,n,m)};function k(l){if(!l){this.SetProperty("state",i.get("POPUP_STATE_HIDDEN"));this.SetProperty("isPopupSI",false)}else{this.SetProperty("state",i.get("POPUP_STATE_VISIBLE"))}}function b(q){var w;var m;var l;var v;var n;var x;var p,t,r,u;if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Start PopupApplet")}SiebelApp.S_App.uiStatus.Busy({});this.SetProperty("currPopups",[]);w=q.GetProperty(i.get("SWE_POP_HEIGHT_STR"));m=q.GetProperty(i.get("SWE_POP_WIDTH_STR"));n=q.GetProperty(i.get("SWE_IS_SI_POPUP"));this.SetProperty("isSIPopup",j.IsTrue(n));var o=q.GetProperty(i.get("SWE_FULL_POPUP_WINDOW_STR"));l=q.GetProperty("URL");x=q.GetProperty(i.get("SWE_FREE_POPUP_STR"));
p=parseInt((screen.availWidth/2)-((m|800)/2),10);t=parseInt((screen.availHeight/2)-((w|600)/2),10);r="width="+(m|800)+",height="+(w|600)+",left="+p+",top="+t+",screenX="+p+",screenY="+t;if(o){r=r+"scrollbars=yes,resizable=yes,location=yes,toolbar=yes,menubar=yes,status=yes"}else{r=r+"scrollbars=yes,resizable=yes"}if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")&&!(this.GetRenderer())){this.Setup()}if(x||o||(l&&!l.match(/.swe\?/))){this.ExecuteMethod("StandAlonePopup",l,r);SiebelApp.S_App.uiStatus.Free();return true}else{if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")){this.Show()}}if(l.indexOf("start.swe")===-1){v=SiebelApp.S_App.GetPageURL().split("start.swe")[0]+l+i.get("SWE_ARG_START")+f("")}else{l=f(l);v=SiebelApp.S_App.GetPageURL()+l.split("start.swe")[1]}var s=SiebelApp.S_App.GetActiveView();if(s){var y=s.GetActiveApplet();if(y){s.SetActiveAppletBeforePopup(y)}}this.ExecuteMethod("OpenPopup",v,w,m,false,false,false);return true}function e(l){this.ExecuteMethod("ClearPopup");return(true)}function g(){var q=SiebelApp.S_App.GetPopupPM();if(q&&(q.Get("isCurrencyOpen")||this.Get("state")===i.get("POPUP_STATE_HIDDEN"))){return}this.ExecuteMethod("SetPopupVisible",false);var m=SiebelApp.S_App.GetActiveView();if(m){m.DeletePopup()}var p=this.Get("currPopups");var o=null;var l=p.length;var n=0;for(n=0;n<l;n++){o=p[n];if(SiebelApp.S_App.IsExternalApplet(o)){o.Close()}}this.SetProperty("isPopupPick",false);this.SetProperty("isPopupMVGAssoc",false);this.SetProperty("isPopupMVGSelected",false);this.SetProperty("isPopupAssoc",false);this.SetProperty("currPopups",[])}d.prototype.Setup=function(l){var m=new SiebelAppFacade.PopupRenderer(this);this.GetRenderer=function(){return m};this.Show()};function c(l,t,n,q,r,o){try{var m;var p=this;if(this.Get("state")===i.get("POPUP_STATE_VISIBLE")){this.SetProperty("isPrevPopupVisible",true);this.ExecuteMethod("SetPopupVisible",false,true)}else{this.SetProperty("isPrevPopupVisible",false)}t=(t===undefined?0:parseFloat(t));n=(n===undefined?0:parseFloat(n));if(t<=0){t=parseFloat(i.get("DEFAULT_POPUP_HEIGHT"))}if(n<=0){n=parseFloat(i.get("DEFAULT_POPUP_WIDTH"))}this.SetProperty("noHide",false);this.SetProperty("height",t);this.SetProperty("width",n);this.ExecuteMethod("SetPopupVisible",true);if(o===undefined||!o){this.SetProperty("url",l)}else{this.SetProperty("content",l)}return true}catch(s){return false}}function a(){var p=this;if(p.Get("isSIPopup")){return}if(this.Get("CanProcessLayout")===false&&p.retryWaitForObjInfoProcessing<25){p.retryWaitForObjInfoProcessing++;setTimeout(function(){a.call(p)},100);return}p.retryWaitForObjInfoProcessing=0;var o=p.Get("currPopups");var n=null;var l=o.length;var m=0;for(m=0;m<l;m++){n=o[m];n.Initialize();SiebelApp.S_App.NotifyTimer("TimePopupApplet",[n.GetName(),"Objects Initialized"]);SiebelAppFacade.ComponentMgr.FindComponent({id:n.GetName()}).Show();n.Show();SiebelApp.S_App.NotifyTimer("TimePopupApplet"[n.GetName(),"Finished Populate"]);if(SiebelApp.S_App.GetActiveView()){if(n.GetView()===SiebelApp.S_App.GetActiveView()){SiebelApp.S_App.GetActiveView().SetActiveApplet(n);SiebelApp.S_App.GetActiveView().SetActiveAppletOnLoad(null)}else{}}n.SetFocusDefaultControl(true);n.FocusDefaultControl(o.length!=2)}if(o.length==2){SiebelApp.MvgBeautifier.Initialize()}if(0==o.length){this.SetProperty("isPopupSI",true)}SiebelApp.S_App.uiStatus.Free();SiebelApp.S_App.uiStatus.LocalFree()}function f(l){if(l.indexOf(".swe?")!==-1&&l.indexOf(i.get("SWE_SHOW_POPUP_STR"))===-1){l=j.AppendArgsToURL(l,i.get("SWE_SHOW_POPUP_STR"),i.get("SWE_NUMERIC_TRUE"))}if(!j.IsTrue(SiebelApp.S_App.UseCookie())){if(l.indexOf(i.get("SWE_RPC_PROP_SESSION_NUMBER"))===-1){l+=(i.get("SWE_ARG_DELIM")+SiebelApp.S_App.GetSessionCookie())}}l=j.AppendArgsToURL(l,i.get("SWE_PROP_SESSION_RANDOM_NUMBER"),SiebelApp.S_App.GetSRN());return l}function h(n){n.preventDefault();n.stopPropagation();if(this.Get("state")===SiebelApp.Constants.get("POPUP_STATE_HIDDEN")){return false}this.SetProperty("isPopupClosedByX",true);var o=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();o.SetProperty(i.get("SWE_CMD_ARG"),i.get("CLOSE_BY_X"));o.SetProperty(i.get("SWEDIC"),i.get("CMDMGR_TRUE"));var m={};m.async=true;m.scope=this;m.args=[];m.args.push("");m.args.push(o);SiebelApp.S_App.CallServer(o,l,true,m);return false}d.prototype.IsPopupStarted=function(){return j.IndexOf([i.get("POPUP_STATE_STARTED"),i.get("POPUP_STATE_LOADED"),i.get("POPUP_STATE_VISIBLE")],this.Get("state"))!==-1};return d}());define("siebel/pmodel",[],function(){return"SiebelAppFacade.PresentationModel"})};