/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.TileLayoutPR)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.TileLayoutPR");define("siebel/TileLayoutPR",["siebel/phyrenderer"],function(){SiebelAppFacade.TileLayoutPR=(function(){var S=SiebelJS.Dependency("SiebelApp.Utils");var D=SiebelJS.Dependency("SiebelApp.Constants");var H=D.get("SWE_PST_BUTTON_CTRL");var R=D.get("SWE_CTRL_DETAIL");var I=D.get("SWE_CTRL_MVG");var r=D.get("SWE_CTRL_PICK");var N=D.get("SWE_CTRL_RADIO");var B=D.get("SWE_CTRL_CHECKBOX");var m=D.get("SWE_CTRL_COMBOBOX");var Q=D.get("SWE_CTRL_CHART");var O=D.get("SWE_CTRL_PLAINTEXT");var g=D.get("SWE_CTRL_DATE_TIME_PICK");var w=D.get("SWE_CTRL_DATE_PICK");var q=D.get("SWE_CTRL_CALC");var J=D.get("SWE_CTRL_DATE_TZ_PICK");var i=D.get("SWE_CTRL_CURRENCY_CALC");var y=D.get("SWE_CTRL_TEXT");var c=D.get("SWE_CTRL_TEXTAREA");var s=D.get("SWE_CTRL_RTCEMBEDDED");var p=D.get("SWE_CTRL_RTCEMBEDDEDTEXTONLY");var h=D.get("SWE_CTRL_RTCEMBEDDEDLINKFIELD");var A=D.get("SWE_CTRL_RTCPOPUP");var o=D.get("SWE_CTRL_RTCIO");var M=D.get("SWE_CTRL_INKDATA");var j=D.get("SWE_CTRL_LINK");var L=D.get("SWE_CTRL_LABEL");var E=D.get("SWE_CTRL_URL");var K=D.get("SWE_CTRL_MAILTO");var G=/(About Record Applet\w*)|(About SRF Applet\w*)|(About Siebel Applet\w*)|(About View Applet\w*)|(Record Count Applet\w*)|(Technical Support Applet\w*)/;var z=D.get("SWE_CTRL_EFFDAT");var u=D.get("SWE_CTRL_IMAGECONTROL");var C=D.get("SWE_CTRL_FILE");var n=D.get("SWE_PST_COL");var d=D.get("SWE_PST_APPLET_MODE_QUERY");var F=D.get("SWE_PST_APPLET_MODE_EDIT");var v=D.get("SWE_PST_APPLET_MODE_NEW");function t(W){var T=null;this.SetFirstControl=function(ac){T=ac};this.GetFirstControl=function(){return T};var Y;this.SetBasicLayout=function(ac){Y=ac};this.GetBasicLayout=function(){return Y};var ab;this.SetSelectedTile=function(ac){ab=ac};this.GetSelectedTile=function(){return ab};var Z=null;this.SetNumberOfTiles=function(ac){Z=ac};this.GetNumberOfTiles=function(){return Z};var X;this.SetTileScrollDirection=function(ac){X=ac};this.GetTileScrollDirection=function(){return X};var aa;this.SetContainer=function(ac){aa=ac};this.GetContainer=function(){return aa};var V;this.SetVisibleTileScrollType=function(ac){V=ac};this.GetVisibleTileScrollType=function(){return V};var U;this.SetScrollAmount=function(ac){U=ac};this.GetScrollAmount=function(){return U};this.m_Offset=0;this.IsScroll=false;SiebelAppFacade.TileLayoutPR.superclass.constructor.call(this,W)}SiebelJS.Extend(t,SiebelAppFacade.PhysicalRenderer);t.prototype.Init=function(){SiebelAppFacade.TileLayoutPR.superclass.Init.call(this);this.AttachPMBinding("CellChange",this.ChangeControlValue);this.AttachPMBinding("UpdateUI",function(){this.ShowSelection()});this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue)};t.prototype.ShowUI=function(U){var T=this.GetPM();var V=T.Get("GetFullId")+"_"+D.get("SWE_TILE_CONTAINER");SiebelAppFacade.TileLayoutPR.superclass.ShowUI.call(this);this.SetContainer($("#"+V));this.SetBasicLayout(this.GetContainer().html());this.GetContainer().html('<div class="siebui-tile-list"></div>');this.SetTileScrollDirection(this.GetContainer().attr("data-scroll-direction"));this.SetVisibleTileScrollType(this.GetContainer().attr("data-scroll-type"))};t.prototype.ShowUIControl=function(X){if(X&&X.GetUIType()===u){var U=arguments[1]?arguments[1]:X.GetInputName();var V=$('[name="'+U+'"]')[0]||$("#"+U)[0];if(!V||(V.tagName||"").toLowerCase()!=="span"){return}V=$(V);var T=$(V).attr("name");var Y=$(V).attr("id");var W="<div ";if(T){W+='name="'+T+'" '}if(Y){W+='id="'+Y+'" '}W+=" >"+$(V).html()+"</div>";V.replaceWith(W)}SiebelAppFacade.TileLayoutPR.superclass.ShowUIControl.apply(this,arguments)};function l(U,T){if(typeof(U.GetSpanPrefix)==="function"){return U.GetSpanPrefix()+T}else{if(U.GetUIType()===H){}else{if(U.GetUIType()===H){}else{return U.GetInputName().replace("_0","_"+T)}}}}t.prototype.RefreshControl=function(W){var U=this.GetPM(),V=U.Get("GetSelection")+this.m_Offset;var T=$($("[name="+l(W,V)+"]"||"#"+l(W,V))[0]);if(T.length>0){T.nextAll().remove();this.ShowUIControl(W,l(W,V));this.BindControlEvents(W,V);this.EnableControl(W,this.GetPM().ExecuteMethod("CanUpdate",W.GetName()),V);e.call(this,W,V)}else{SiebelAppFacade.TileLayoutPR.superclass.RefreshControl.call(this,W)}};t.prototype.ClearData=function(){var T=this.GetContainer().children("div.siebui-tile-list");if((this.GetTileScrollDirection()||"horizontal").toLowerCase()==="horizontal"){if((this.GetVisibleTileScrollType()||"").toLowerCase()==="scrollvisibletiles"){T.css("width","")}}T.empty();T=null};t.prototype.BindData=function(Z){var ak=this.GetPM();var ad=ak.Get("GetRecordSet");var aj=ak.Get("ListOfColumns");var T=ak.Get("GetBeginRow")||0;var Y=ad?ad.length:0;this.m_recordSetLength=Y;var ah=ak.Get("GetSelection");var ac="";var W=ak.Get("GetScrollDir"),ae=parseInt(ak.Get("GetScrollAmount")),am=0,af=Y;var ab=this,ai=null,U=null,aa=null,V=null;this.GetContainer().addClass("clearfix");this.SetScrollAmount(ae);if(Y===0){this.GetContainer().children("div.siebui-tile-list").empty();this.UpdateScrollArrows();return}this.IsScroll=false;if(W!==null&&ae!==0&&Math.abs(ae)<Y){this.IsScroll=true;if(ae<0){ae=-ae}if(W){am=Y-ae;this.m_Offset=this.m_Offset+ae}else{am=0;af=ae;this.m_Offset=this.m_Offset-ae}f.call(this,ad,aj,Z,this.IsScroll,W,ae,am,af);this.BindEvents(Z,this.IsScroll,am,ae,af)}else{if(this.GetContainer().data("Scroll_Pending")){this.IsScroll=true}else{if(Z){if(this.GetNumberOfTiles()!==Y){this.ClearData();b.call(this,ad,aj,Z);this.BindEvents(Z);setTimeout(function(){if(ak.Get("IsActive")){ai=ak.Get("GetActiveControl")||ak.Get("GetPrsrvControl");U=ah+ab.m_Offset;if(ai){aa=l.call(ab,ai,U);V=$("[name="+aa+"]")[0]||$("#"+aa)[0];if(V&&V.length>0){V.click().focus()}else{ab.FocusFirstControl()}}}},1)}else{this.ClearData();b.call(this,ad,aj,Z);setTimeout(function(){if(ak.Get("IsActive")){ai=ak.Get("GetActiveControl")||ak.Get("GetPrsrvControl");U=ah+ab.m_Offset;if(ai){aa=l.call(ab,ai,U);V=$("[name="+aa+"]")[0]||$("#"+aa)[0];if(V&&V.length>0){V.click().focus()}else{ab.FocusFirstControl()}}}},1)}}else{if(!Z){b.call(this,ad,aj,Z);this.SetNumberOfTiles(Y)}}}}if(!this.IsScroll){this.IsScroll=false;if((this.GetTileScrollDirection()||"horizontal").toLowerCase()==="horizontal"){var al=this.GetContainer().children("div.siebui-tile-list");al.css("marginLeft",0);var ag=this.GetVisibleTileScrollType();var X=this;setTimeout(function(){var ap;if(ag&&ag.toLowerCase()==="scrollvisibletiles"){ap=al.find("[id^='"+X.GetPM().Get("GetFullId")+"_tile_']").eq(0);var ao=parseInt((X.GetContainer().width()||$("#s_"+X.GetPM().Get("GetFullId")+"_div").width())/X.GetTileWidth(),10);ao=ao||1;var an=ap.width();al.width(ap.outerWidth(true)*Y);ap.end().width(an);X.GetContainer().width(X.GetTileWidth()*ao);ap=null}X=ap=al=null},3)}else{this.GetContainer().children("div.siebui-tile-list").scrollTop(0)}this.GetContainer().data("Scroll_Index",0)}this.GetContainer().removeData("Scroll_Pending");var ah=ak.Get("GetSelection")+this.m_Offset;$("#"+ak.Get("GetFullId")+"_tile_"+(ah)).addClass("siebui-tile-selected");
aj=null;ad=null};function f(ah,aq,Z,aj,V,ai,at,am){var ad="";var aa="";var Y=ah.length;var av;var an;var ar=this.GetPM();var ag=ar.Get("GetFullId");var ao=ar.Get("GetControls");for(var W=at;W<am;W++){var al=W+this.m_Offset;ad=this.GetBasicLayout();ad=ad.replace("tile_1",ag+"_tile_"+(al));for(var af=0;af<aq.length;af++){var T=aq[af].control.GetSpanPrefix()+"0";ad=ad.replace(new RegExp(T,"g"),aq[af].control.GetSpanPrefix()+al)}T="0_Ctrl";ad=ad.replace(new RegExp(T,"g"),al+"_Ctrl");al++;aa+=ad}if(aj){for(var U=1;U<=ai;U++){if(V){av=this.m_Offset-U}else{av=this.m_Offset+U+Y-1}$("#"+ag+"_tile_"+av).addClass("removediv");this.GetContainer().undelegate("#"+ag+"_tile_"+av,"click")}}if(V!==null&&!V){an=this.m_Offset+ai;$("#"+ag+"_tile_"+(an)).before(aa)}else{an=Y+this.m_Offset-ai-1;$("#"+ag+"_tile_"+(an)).after(aa)}for(var ap=at;ap<am;ap++){var ae=ap+this.m_Offset;$("#"+ag+"_tile_"+(ae)).addClass("siebui-tile");if((Z&&ap===0)||ap>0){for(var ab=0;ab<aq.length;ab++){this.ShowUIControl(aq[ab].control,l.call(this,aq[ab].control,ae))}}this.BindRowData(ap,ae);for(var au in ao){if(ao.hasOwnProperty(au)){var ac=ao[au];if(ac.GetUIType()===H){var ak=(ac.GetInputName()+"_Ctrl").replace("0_Ctrl",ae+"_Ctrl");var X=$("#"+ak)[0];if(this.GetContainer().find(X).length>0){this.EnableControl(ac,ar.ExecuteMethod("CanInvokeMethod",ac.GetMethodName()),ae)}}}}ae++}if(aj){this.GetContainer().find(".removediv").remove();this.SetNewscrollpos(V,ai)}}function b(aj,al,Y){var ae="";var Z="";var X=aj.length;var aa=this.m_Offset;var ah="";var af=0;var am=this.GetPM();var ai=am.Get("GetFullId");var ak=am.Get("GetControls");if(this.GetPM().Get("IsInQueryMode")){aa=0;this.GetContainer().children("div.siebui-tile-list").animate({marginLeft:"0px"},2)}for(var U=aa;U<(aa+X);U++){ae=this.GetBasicLayout();ah=ai+"_tile_"+(U);ae=ae.replace("tile_1",ai+"_tile_"+(U));for(var ag=0;ag<al.length;ag++){var T=al[ag].control.GetSpanPrefix()+"0";if(ae.search(T)===-1){T=al[ag].control.GetSpanPrefix()+String(am.Get("GetSelection"))}ae=ae.replace(new RegExp(T,"g"),al[ag].control.GetSpanPrefix()+U)}T="0_Ctrl";ae=ae.replace(new RegExp(T,"g"),U+"_Ctrl");Z+=ae}this.GetContainer().children("div.siebui-tile-list").append(Z);for(var V=aa;V<(aa+X);V++){$("#"+ai+"_tile_"+(V)).addClass("siebui-tile");for(var ab=0;ab<al.length;ab++){this.ShowUIControl(al[ab].control,l.call(this,al[ab].control,V))}this.BindRowData(af,V);for(var an in ak){if(ak.hasOwnProperty(an)){var ad=ak[an];if(ad.GetUIType()===H){var ac=ad.GetInputName()+"_Ctrl";ac=ac.replace("0_Ctrl",V+"_Ctrl");var W=$("#"+ac)[0]||$("#"+ad.GetInputName())[0];if(this.GetContainer().find(W).length>0){this.EnableControl(ad,am.ExecuteMethod("CanInvokeMethod",ad.GetMethodName()),V)}}}}af++}this.SetFirstTileId(ah,X)}t.prototype.BindRowData=function(V,U){var X=this.GetPM(),Y=X.Get("ListOfColumns"),T=Y.length;for(var W=0;W<T;W++){e.call(this,Y[W].control,V,U)}};t.prototype.ShowSelection=function(){var W=this.GetPM(),ab=W.Get("ListOfColumns"),ad=ab.length,T=W.Get("GetSelection"),ae=T+this.m_Offset,ac=W.Get("GetRecordSet"),aa=$("#s_"+this.GetPM().Get("GetFullId")+"_div");var af=W.Get("GetControls");if(ac.length===0){return}if(W.Get("IsInQueryMode")||T<0){T=0}for(var X=0;X<ad;X++){e.call(this,ab[X].control,T,ae)}for(var Z in af){if(af.hasOwnProperty(Z)){var Y=af[Z];if(Y.GetUIType()===H){var V=(Y.GetInputName()+"_Ctrl").replace("0_Ctrl",ae+"_Ctrl");var U=$("#"+V)[0];if(this.GetContainer().find(U).length>0){this.EnableControl(Y,W.ExecuteMethod("CanInvokeMethod",Y.GetMethodName()),ae)}}}}aa.find(".siebui-tile-selected").find(".applet-form-img-show").removeClass("applet-form-img-show").addClass("applet-form-img-hide");aa.find(".siebui-tile-selected").removeClass("siebui-tile-selected");$("#"+W.Get("GetFullId")+"_tile_"+ae).addClass("siebui-tile-selected");aa.find(".siebui-tile-selected").find(".applet-form-img-hide").removeClass("applet-form-img-hide").addClass("applet-form-img-show");this.SetSelectedTile(ae)};t.prototype.ChangeControlValue=function(X,W,Y){var V=this.GetPM(),Z=V.Get("ListOfColumns"),T=Z.length;for(var U=0;U<T;U++){if(Z[U].control.GetName()===W){this.SetControlValue(Z[U].control,Y,(V.Get("GetSelection")+this.m_Offset));break}}};t.prototype.SetControlValue=function(ab,ah,ad){if(!k(ab)){return}var X=this.GetPM();var af=X.Get("ListOfColumns");var U="";var ac=X.Get("GetSelection");var ag=this.GetPM().ExecuteMethod("CanUpdate",ab.GetName());var aa=$("[id="+l.call(this,ab,ad)+"]");if(aa.length===0){aa=$("[name="+l.call(this,ab,ad)+"]")}aa=$(aa);if(ab.GetShowBase()&&ab.GetUIType()!=="checkBoxCtrl"){U=this.IconMapFormatter(ab,ah,aa)}var ae=this.GetPM().ExecuteMethod("CanNavigate",ab.GetName());if(ae&&ah&&ab.GetUIType()!==u){setTimeout(function(){var aj='<a  id ="'+l.call(this,ab,ad)+'_mb"  class = "siebui-ctrl-drilldown-tile"  name = "'+ab.GetName()+'"  rowId = "'+(ad)+'"  href="javascript:void(0)" >'+HtmlEncode(ah)+"</a>";if(aa.next(":not(br,img)").length===1){if(aa.next(":not(br,img)").attr("id")!==l.call(this,ab,ad)+"_mb"||aa.next(":not(br,img)").html()!==ah){aa.next(":not(br,img)").html(aj)}}else{aa.after(aj)}aa.next().show();if($(document.activeElement)[0]===aa[0]){aa.focus();aa.next().focus()}aa.hide();aa.nextAll("img#"+aa.attr("name")+"_icon").hide();aa=null},5);aa.val(ah);return}else{if(ae&&ag){aa.val(ah);aa.nextAll("a#"+aa.attr("name")+"_mb").hide();aa.nextAll("img#"+aa.attr("name")+"_icon").removeClass();aa.nextAll("img#"+aa.attr("name")+"_icon").addClass("applet-form-img-show");aa.nextAll("img#"+aa.attr("name")+"_icon").show()}}switch(ab.GetUIType()){case O:if(S.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){if($("#"+l.call(this,ab,ad)+"_Label").length===1){aa=$("#"+l.call(this,ab,ad)+"_Label")}}if(!S.IsEmpty(U)){aa.html(U)}else{if(S.IsTrue(ab.IsEncode())){S.IsEmpty(ah)?aa.html(""):aa.html(HtmlEncode(ah))}else{S.IsEmpty(ah)?aa.html(""):aa.html(ah)}}break;case B:aa.val(ah);if(aa.prop("checked")!==S.IsTrue(ah)){aa.prop("checked",S.IsTrue(ah))}break;case N:$("[name="+l.call(this,ab,ad)+"]").filter('[value="'+ah+'"]').attr("checked",true);break;case s:if($(aa).length>0){$(aa).ckeditor(function(){var ak=ah;var aj=this;setTimeout(function(){aj.setData(ak)},2);aa=null})}break;case E:var Z="";var T=HtmlEncode(ah);if(typeof(ah)==="string"){if((T.indexOf("http://")!=0)&&(T.indexOf("https://")!=0)){T="http://"+T}}if(!ag&&!S.IsEmpty(ah)){Z="<a href='"+T+"' target='_blank' >"+T+"</a>"}else{if(U){Z="<a href='"+T+"' target='_blank' >"+U+"</a>"}}if(ab.GetName()==="BookmarkURL"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){var W=aa.replaceWith('<textarea name="'+l.call(this,ab,ad)+'" readonly="readonly" rows="3" cols="150" value=\''+ah+"'>"+ah+"</textarea>")}else{this.ControlHtmlFormatter(aa,"siebui-ctrl-url",Z,ag,ah)}break;case K:var V="";ah=HtmlEncode(ah);if(!ag&&!S.IsEmpty(ah)){V='<a href="mailto:'+ah+'">'+ah+"</a>"}else{if(U){V='<a href="mailto:'+ah+'">'+U+"</a>"}}this.ControlHtmlFormatter(aa,"siebui-ctrl-mail",V,ag,ah);break;case u:var Y="";var ai="";if(ah){ai=ah.toLowerCase()
}if(ai.indexOf("<img")>=0){Y=ah}else{Y='<img src="'+ah+'" alt="'+ab.GetDisplayName()+'" title="'+ab.GetDisplayName()+'"></img>'}S.IsEmpty(ah)?aa.html(""):aa.html('<a role="img" tabindex="0" >'+Y+"<a>");break;case Q:S.IsEmpty(ah)?aa.html(""):aa.replaceWith(ah);break;default:if(G.test(X.GetPMName())){aa.replaceWith('<div role="document" tabindex="0" title="'+ah+'" name="'+aa.attr("name")+'" aria-label="'+ab.GetDisplayName()+'">'+ah+"</div>")}else{S.IsEmpty(ah)?aa.val(""):aa.val(ah)}break}};function e(V,X,ad){var ae=!X?0:X,U=this.GetPM(),T=V.GetName(),W=V.GetFieldName(),ac=U.Get("IsInQueryMode"),Z=U.Get("IsPure"),Y=U.ExecuteMethod("IsPrivateField",T);if(!S.IsEmpty(W)||Y||!Z){var ab="";if(ac||Y||!Z){if(!ac||!Z){if(X===undefined||X===null){ab=U.ExecuteMethod("GetFormattedFieldValue",V,false)}else{ab=U.ExecuteMethod("GetFormattedFieldValue",V,true,ae)}}else{var aa=U.Get("GetRecordSet");ab=S.IsEmpty(aa[ae][W])?"":aa[ae][W]}}else{if(X===undefined||X===null){ab=U.ExecuteMethod("GetFormattedFieldValue",V,true)}else{ab=U.ExecuteMethod("GetFormattedFieldValue",V,true,ae)}}if(Z||(!Z&&V.GetUIType()!==H)){if(ad){this.EnableControl(V,U.ExecuteMethod("CanUpdate",T),ad);this.SetControlValue(V,ab,ad)}else{this.EnableControl(V,U.ExecuteMethod("CanUpdate",T),ae);this.SetControlValue(V,ab,ae)}}}}t.prototype.EnableControl=function(V,aa,X){var W;var U=this.GetPM().Get("GetSelection");if(!k(V)){return}X=!X?0:X;var Y=l(V,X);if(V.GetUIType()===H){var T=V.GetEnabledBmp();var ab=V.GetDisabledBmp();Y=V.GetInputName();if(T||ab){var Z=aa?T:ab;W=$("#"+Y);if(Z){W.removeClass("siebui-btn-icon-e siebui-btn-icon-d").addClass(aa?"siebui-btn-icon-e":"siebui-btn-icon-d").find("a").attr("tabindex",aa?"0":"-1").html(Z)}}else{Y=(Y+"_Ctrl").replace("0_Ctrl",X+"_Ctrl");W=$("#"+Y);if(X-this.m_Offset===U){W.removeAttr("disabled").attr("disabled",!aa);W.removeClass("appletButton appletButtonDis siebui-tileButtoninactive").addClass((aa?"appletButton":"appletButtonDis"))}else{if(this.GetContainer().find(W).length>0){W.removeAttr("disabled").attr("disabled",false);W.removeClass("appletButton appletButtonDis").addClass("siebui-tileButtoninactive")}}}}else{if(V.GetUIType()===s){W=$("#"+Y)||$("[name="+Y+"]");if($(W).length>0&&CKEDITOR.instances[Y]){CKEDITOR.instances[Y].setReadOnly(!aa)}}else{W=$("[name="+Y+"]")||$("#"+Y);$(W).removeAttr("readOnly").attr("aria-readonly",!aa);P.call(this,$(W),aa,X)}}};function P(V,X,T){var U=this.GetPM();var W=this.m_Offset+U.Get("GetSelection");if(W===T){if(!X){V.removeClass("siebui-unselected-tile-control-value").addClass("siebui-selected-tile-control-value").attr("data-readonly",!X)}else{V.removeClass("siebui-unselected-tile-control-value").addClass("siebui-selected-tile-control-value").attr("data-readonly",!X)}}else{if(!X){V.removeClass("siebui-selected-tile-control-value").addClass("siebui-unselected-tile-control-value").attr("data-readonly",!X)}else{V.removeClass("siebui-selected-tile-control-value").addClass("siebui-unselected-tile-control-value").attr("data-readonly",!X)}}if(T-this.m_Offset!==U.Get("GetSelection")){setTimeout(function(){if(V.next("img").length>0){V.next("img").removeClass().addClass("applet-form-img-hide")}},15)}else{setTimeout(function(){if(V.next("img").length>0){V.next("img").removeClass().addClass("applet-form-img-show")}},15)}}t.prototype.OnRowSelect=function(V){var T=this.GetPM();var U=this;if(Number(V)===Number(T.Get("GetSelection"))){return true}SiebelApp.S_App.uiStatus.Busy({});if(!T.OnControlEvent(D.get("PHYEVENT_SELECT_ROW"),V,"","")){SiebelApp.S_App.uiStatus.Free();return false}SiebelApp.S_App.uiStatus.Free();return true};t.prototype.BindEvents=function(W,ah,an,ag,aj){var am=this.GetPM();var al=am.Get("ListOfColumns");var ae=null;var ak=am.Get("GetControls");var af=am.Get("GetRecordSet");var V=af?af.length:0;var ac=0;aj=aj?aj:V;if(V===0){SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this);return}if(!W){var ad=false;for(var aa in ak){if(ak.hasOwnProperty(aa)){ad=false;for(var ac=0;ac<al.length;ac++){if(al[ac].control.GetName()===aa){ad=true;break}else{if(!ae){ae={}}ae[aa]=ak[aa]}}}}if(ae){SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this,ae,true)}else{SiebelAppFacade.TileLayoutPR.superclass.BindEvents.call(this,null,true)}$("#s_"+this.GetPM().Get("GetFullId")+"_div").delegate("a.siebui-ctrl-drilldown-tile","click",{ctx:this},function(at){SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:true});var aq=at.data.ctx;var ar=$(this).attr("name");var au=$(this).attr("rowid");if(au>=0){if(aq.OnRowSelect(au)===false||aq.GetPM().OnControlEvent(D.get("PHYEVENT_DRILLDOWN_LIST"),ar,au+1)===false){SiebelApp.S_App.uiStatus.Free();return false}}})}var ab=am.Get("GetFullId");var ap=$("#s_"+ab+"_div");if(ah){for(var ao=an;ao<aj;ao++){var ai=ao+this.m_Offset;for(var ac=0;ac<al.length;ac++){this.BindControlEvents(al[ac].control,ai)}for(var X in ak){if(ak.hasOwnProperty(X)){var Z=ak[X];if(Z.GetUIType()===H){var Y=Z.GetInputName();if(this.GetBasicLayout().search(Y+"_Ctrl")!==-1){Y=(Y+"_Ctrl").replace("0_Ctrl",ai+"_Ctrl");this.BindControlEvents(Z,ai,Y)}}}}this.GetContainer().delegate("#"+ab+"_tile_"+(ai),"mousedown",{ctx:this,ind:ai},function(aq){var at=aq.data.ctx;var ar=$(this).attr("id");if((aq.data.ind-at.m_Offset)===at.GetPM().Get("GetSelection")){return}a.call(at,at.GetPM());$("#"+ab+"_tile_"+aq.data.ind).addClass("siebui-tile-selected");if(!at.OnRowSelect(aq.data.ind-at.m_Offset)){a.call(at,at.GetPM());$("#"+ab+"_tile_"+at.GetPM().Get("GetSelection")).addClass("siebui-tile-selected")}ap.find(".siebui-tile-selected").find(".applet-form-img-hide").removeClass("applet-form-img-hide").addClass("applet-form-img-show")})}}else{if(!W||(W&&!ah)){for(var T=0;T<V;T++){for(var ac=0;ac<al.length;ac++){this.BindControlEvents(al[ac].control,T)}for(var X in ak){if(ak.hasOwnProperty(X)){var Z=ak[X];if(Z.GetUIType()===H){var Y=Z.GetInputName();if(this.GetBasicLayout().search(Y+"_Ctrl")!==-1){Y=(Y+"_Ctrl").replace("0_Ctrl",T+"_Ctrl");this.BindControlEvents(Z,T,Y);if(ae){if(ae[X]){delete ae[X]}}}}}}this.GetContainer().delegate("#"+ab+"_tile_"+(T),"mousedown",{ctx:this,ind:T},function(aq){var ar=aq.data.ctx;var at=$(this).attr("id");if((aq.data.ind-ar.m_Offset)===ar.GetPM().Get("GetSelection")){return}a.call(ar,ar.GetPM());$("#"+ab+"_tile_"+aq.data.ind).addClass("siebui-tile-selected");if(!ar.OnRowSelect(aq.data.ind-ar.m_Offset)){a.call(ar,ar.GetPM());$("#"+ab+"_tile_"+ar.GetPM().Get("GetSelection")).addClass("siebui-tile-selected")}ap.find(".siebui-tile-selected").find(".applet-form-img-hide").removeClass("applet-form-img-hide").addClass("applet-form-img-show")})}for(var U in ae){if(ae.hasOwnProperty(U)){SiebelAppFacade.TileLayoutPR.superclass.BindControlEvents.call(this,ae[U])}}}}al=null;af=null;ak=null;ae=null};function a(U){var T=$("#s_"+U.Get("GetFullId")+"_div");if(T.find(".siebui-tile-selected").find(".appletButton").length>0){T.find(".siebui-tile-selected").find(".appletButton").removeClass().addClass("siebui-tileButtoninactive")
}if(T.find(".siebui-tile-selected").find(".appletButtonDis").length>0){T.find(".siebui-tile-selected").find(".appletButtonDis").removeClass().addClass("siebui-tileButtoninactive")}T.find(".siebui-tile-selected").find(".applet-form-img-show").removeClass("applet-form-img-show").addClass("applet-form-img-hide");T.find(".siebui-tile-selected").find(".siebui-selected-tile-control-value").removeClass("siebui-selected-tile-control-value").addClass("siebui-unselected-tile-control-value");T.find(".siebui-tile-selected").removeClass("siebui-tile-selected")}function k(T){return(typeof(T.GetInputName)==="function")}t.prototype.BindControlEvents=function(W,U,Y){if(!k(W)){return}var aa=this.GetPM().Get("GetRecordSet");var Z=aa?aa.length:0;if(Z===0){SiebelAppFacade.TileLayoutPR.superclass.BindControlEvents.call(this,W,U,Y);return}var X=U?U:0;var Y=Y?Y:l(W,X);var ab=$("[name="+Y+"]");var V=this.GetPM();if(ab.length===0&&W.GetControlType()===n&&S.IndexOf([d,F,v],V.Get("GetMode"))!==-1){var T=W.GetSpanPrefix()+"0";ab=$("[name="+T+"]")}switch(W.GetUIType()){case R:case H:if(W.GetMethodName()==="NewFileAttachment"){return false}else{if(W.GetMethodName()==="ClearSignature"){$("#"+this.GetPM().Get("GetFullId")).delegate("#"+Y+"_Ctrl","click",{ctx:this,ctrl:W},function(ac){var ae=ac.data.ctx.GetPM().Get("GetControls");for(var ad in ae){if(ae[ad].GetUIType()==="JInkData"){$(".siebui-ctrl"+l(ae[ad],X)+"-clearButton").trigger("click");$("."+l(ae[ad],X)).attr({value:""});$("#"+l(ae[ad],X)).trigger("vmouseup")}}})}else{$("#"+this.GetPM().Get("GetFullId")).undelegate("#"+Y+"","click").delegate("#"+Y+"","click",{ctx:this,ctrl:W},function(ac){var ad=new SiebelApp.UIStatus();setTimeout(function(){SiebelAppFacade.TileLayoutPR.superclass.InvokeControlMethod.call(ac.data.ctx,ac.data.ctrl)},0);ac.preventDefault()})}}break;case m:$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","focus",{ctx:this,ctrl:W,ind:X},function(ac){x.call(ac.data.ctx,ac.data.ind);$(this).next("img").show();$(this).next("img").addClass("applet-form-img-show");$(this).removeClass("siebui-selected-tile-control-value");if($(this).attr("data-readonly")==="true"){$(this).attr("readonly",true)}ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_FOCUS"),ac.data.ind,ac.data.ctrl,$(this).val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","blur",{ctx:this,ctrl:W,ind:X},function(ac){$(this).next("img").hide();$(this).next("img").removeClass("applet-form-img-show").addClass("applet-form-img-hide");$(this).removeAttr("readonly");$(this).addClass("siebui-selected-tile-control-value");if($(document.activeElement).parents(".ui-autocomplete").length>0||($(this).data("ui-autocomplete")&&$(this).data("ui-autocomplete").menu.active)){return}var ad=ac.data.ctx.FormatDDInQueryMode(ac.data.ctrl,$(this).val());ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_BLUR"),ac.data.ind,ac.data.ctrl,ad)});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","autocompleteselect",{ctx:this,ctrl:W},function(ac,ad){if(ac.data.ctx.GetPM().Get("IsInQueryMode")){ac.data.ctx.GetPM().SetProperty("DDUserSelected",{ctrl:ac.data.ctrl,value:ad.item.value})}});break;case N:case B:$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","focus",{ctx:this,ctrl:W},function(ac){x.call(ac.data.ctx,ac.data.ind);return ac.data.ctx.HandleKeyEvents($(this),ac,$(this).val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","focus",{ctx:this,ctrl:W,ind:X},function(ac){ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_FOCUS"),ac.data.ind,ac.data.ctrl,$(this).val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","mousedown",{ctx:this},function(ac){$(this).data("webkit-mousedown",true)});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","blur",{ctx:this,ctrl:W,ind:X},function(ad){var ac=$(this);if(ac.data("webkit-mousedown")){ac.removeData("webkit-mousedown");return}ad.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_BLUR"),ad.data.ind,ad.data.ctrl,ac.val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","click",{ctx:this,ctrl:W},function(ae){var ad=$(this);var ac=ad.attr("readonly");if(typeof ac!=="undefined"&&ac!==false){ad.prop("checked",!ad.prop("checked"))}if(ad.attr("type")==="checkbox"){ad.val(ad.prop("checked")?"Y":"N")}if(ad.data("webkit-mousedown")){ad.removeData("webkit-mousedown")}var af=$(document.activeElement);if((ad.attr("id")||"")!==(af.attr("id")||"")||(ad.attr("name")||"")!==(af.attr("name")||"")){ad.focus()}});break;case j:case L:if(W.GetMethodName()){ab=$("#"+Y);$("#"+this.GetPM().Get("GetFullId")).delegate("#"+Y+"","click",{ctx:this,ctrl:W},function(ac){SiebelAppFacade.TileLayoutPR.superclass.InvokeControlMethod.call(ac.data.ctx,ac.data.ctrl)})}break;case M:$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","mouseup",{ctx:this,ctrl:W,ind:X},function(ac){ac.data.ctrl.GetApplet().SetActiveControl(ac.data.ctrl);ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_BLUR"),ac.data.ind,ac.data.ctrl,$("."+l.call(ac.data.ctx,ac.data.ctrl,ac.data.ind)).attr("value"))});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","mouseover",{ctx:this,ctrl:W,ind:X},function(ac){ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_FOCUS"),ac.data.ind,ac.data.ctrl,$("."+l.call(ac.data.ctx,ac.data.ctrl,ac.data.ind)).attr("value"))});break;case w:case g:case J:$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","keydown",{ctx:this,ctrl:W},function(ac){var ad=$(this).val();if(ac.data.ctx.GetPM().Get("IsInQueryMode")===false){ad=S.toISOFormat(ad,(ac.data.ctrl.GetUIType()!==w))||ad}return ac.data.ctx.HandleKeyEvents($(this),ac,ad)});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","blur",{ctx:this,ctrl:W,ind:X},function(ac){var ad=$(this).val();if(ac.data.ctx.GetPM().Get("IsInQueryMode")===false){ad=S.toISOFormat(ad,(ac.data.ctrl.GetUIType()!==w))||ad}ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_BLUR"),ac.data.ind,ac.data.ctrl,ad)});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","focus",{ctx:this,ctrl:W,ind:X},function(ac){x.call(ac.data.ctx,ac.data.ind);var ad=$(this).val();if(ac.data.ctx.GetPM().Get("IsInQueryMode")===false){ad=S.toISOFormat(ad,(ac.data.ctrl.GetUIType()!==w))||ad}ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_FOCUS"),ac.data.ind,ac.data.ctrl,ad)});break;default:$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","keydown",{ctx:this,ctrl:W,ind:X},function(ac){return ac.data.ctx.HandleKeyEvents($(this),ac,$(this).val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","blur",{ctx:this,ctrl:W,ind:X},function(ac){$(this).removeAttr("readonly");$(this).removeClass("siebui-unselected-tile-control-value").addClass("siebui-selected-tile-control-value");ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_BLUR"),ac.data.ind,ac.data.ctrl,$(this).val())});$("#"+this.GetPM().Get("GetFullId")).delegate("[name="+Y+"]","focus",{ctx:this,ctrl:W,ind:X},function(ac){x.call(ac.data.ctx,ac.data.ind);
$(this).removeClass("siebui-selected-tile-control-value");if($(this).attr("data-readonly")==="true"){$(this).attr("readonly",true)}ac.data.ctx.GetPM().OnControlEvent(D.get("PHYEVENT_COLUMN_FOCUS"),ac.data.ind,ac.data.ctrl,$(this).val())});break}ab=null};function x(T){var U=this.GetPM().Get("GetSelection");if(T!=="undefined"&&T!==U+this.m_Offset){this.OnRowSelect(T-this.m_Offset)}}t.prototype.FocusFirstControl=function(){var V=this.GetPM(),aa=V.Get("ListOfColumns"),ab=aa.length,T=9999;var Y=null;var U=0;this.SetFirstControl(null);for(var W=0;W<ab;W++){var X=aa[W].control;var ac=X.GetFieldName();if(!S.IsEmpty(ac)){if(X.GetIndex()&&X.GetIndex()<T){var Z=false;if(V.Get("IsInQueryMode")===false){Z=V.ExecuteMethod("CanUpdate",X.GetName())}else{Z=true}if(Z&&!S.IsEmpty(X.GetUIType())&&(X.isBasicControl()||X.GetUIType()[0]==="J"||X.GetUIType()===I||X.GetUIType()===r)){T=X.GetIndex();if(this.m_Offset>0){U=V.Get("GetSelection")+this.m_Offset}else{U=V.Get("GetSelection")}this.SetFirstControl($("[name="+l(X,U)+"]")[0]||$("#"+l(X,U))[0]);break}}}}if(this.GetFirstControl()!=null){this.GetFirstControl().focus();return}this.FocusFirstNonEditableControl();return false};t.prototype.FocusFirstNonEditableControl=function(){var W=this.GetPM(),Y=W.Get("ListOfColumns"),T=Y.length,U=9999;for(var V=0;V<T;V++){var X=Y[V].control;if(X.GetIndex()<U&&(!S.IsEmpty(X.GetUIType())&&X.GetUIType()!=="Button"&&X.GetUIType()!=="Label")){this.SetFirstControl($("[name="+l(X,W.Get("GetSelection"))+"]")[0]||$("#"+l(X,W.Get("GetSelection")))[0]);break}}firstCtrl=this.GetFirstControl();if(firstCtrl&&$(firstCtrl).length>0){$(firstCtrl).focus()}};t.prototype.SetFocusToControl=function(V,U){var Y=this.GetPM(),aa=Y.Get("ListOfColumns"),T=aa.length;var X=null;for(var W=0;W<T;W++){var Z=aa[W].control;if(V==Z.GetName()){X=$("[name="+l(Z,(Y.Get("GetSelection")+this.m_Offset))+"]")[0]||$("#"+l(Z,(Y.Get("GetSelection")+this.m_Offset)))[0];if(U){$(X).focus()}else{$(X).blur()}return true}}SiebelAppFacade.TileLayoutPR.superclass.SetFocusToControl.call(this,V,U);return false};t.prototype.GetPhysicalControlValue=function(W){var V,U;var T=this.GetPM();if(W){index=T.Get("GetSelection")+this.m_Offset;T.AddProperty("PhysicalCtrlVal",U);V=$("[name='"+l(W,index)+"']");U=V.val()||"";switch(W.GetUIType()){case w:case g:case J:if(this.GetPM().Get("IsInQueryMode")===false){U=S.toISOFormat(S.Trim(U),(W.GetUIType()!==w))||U}break;case N:U=V.filter(":checked").val()||"";break;case m:U=this.FormatDDInQueryMode(W,U);break}this.GetPM().AddProperty("PhysicalCtrlVal",U)}};t.prototype.EndLife=function(){this.SetSelectedTile(null);this.SetBasicLayout(null);this.GetContainer().empty();$("#scrollarea").empty();SiebelAppFacade.TileLayoutPR.superclass.EndLife.call(this)};return t}());return"SiebelAppFacade.TileLayoutPR"})};