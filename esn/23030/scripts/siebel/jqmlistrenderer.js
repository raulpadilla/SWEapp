/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.JQMListRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.JQMListRenderer");define("siebel/jqmlistrenderer",["order!3rdParty/jqmobile/mobiscroll.custom-2.5.0.min","order!3rdParty/jqmobile/jquery.swipeButton.min","order!3rdParty/jqmobile/jquery.easing.1.3","order!3rdParty/jqmobile/jquery.mobile.scrollview","order!3rdParty/jquery.mobile.scrollview-ext","order!siebel/jqmsearchctrl","order!siebel/jqmformrenderer","order!siebel/jqmscrollcontainer"],function(){SiebelAppFacade.JQMListRenderer=(function(){var z=SiebelJS.Dependency("SiebelApp.Utils");var t=SiebelJS.Dependency("SiebelApp.Constants");var x=t.get("SWE_PST_BUTTON_CTRL");var o=t.get("SWE_CTRL_LINK");var E=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_MOBILE_NO_RECORDS_TO_DISPLAY");var m=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_MOBILE_TAP_TO_CREATE");var n=t.get("SWE_CTRL_TEXT");var d=t.get("SWE_CTRL_PICK");var p=t.get("SWE_CTRL_CHECKBOX");var A=t.get("SWE_CTRL_COMBOBOX");var f=t.get("SWE_CTRL_DATE_TIME_PICK");var e=t.get("SWE_CTRL_DATE_PICK");var u=t.get("SWE_CTRL_DATE_TZ_PICK");var b=t.get("SWE_CTRL_CALC");var y=t.get("SWE_CTRL_MAILTO");var w=t.get("SWE_CTRL_TEXTAREA");var g=t.get("SWE_CTRL_URL");var i=t.get("SWE_CTRL_PHONE");var h=t.get("SWE_CTRL_INKDATA");var D=t.get("SWE_CTRL_LABEL");var q=t.get("SWE_CTRL_CURRENCY_CALC");var k=t.get("SWE_CTRL_PWD");var j=t.get("SWE_CTRL_MVG");var c=t.get("SWE_CTRL_IMAGECONTROL");var v=SiebelApp.S_App.LocaleObject;var l=v.GetLocalString("IDS_SWE_MOBILE_ON")||"On";var B=v.GetLocalString("IDS_SWE_MOBILE_OFF")||"Off";function a(M){SiebelAppFacade.JQMListRenderer.superclass.constructor.call(this,M);var Q;var S;var U;var G;var P;var O;var V=false;var K=false;var J=false;var R=new SiebelAppFacade.ListColumnHelper();this.GetColumnHelper=function(){return R};this.GetJQMList=function(){return Q};this.SetJQMList=function(W){Q=W};this.GetJQMListId=function(){return S};this.SetJQMListId=function(W){S=W};this.GetRowCount=function(){return(S.children().size())};this.GetCurRowSel=function(){return P};this.SetCurRowSel=function(W){P=W};this.GetDelControl=function(){return U};this.SetDelControl=function(W){U=W};this.GetDelBtnStatus=function(){return G};this.SetDelBtnStatus=function(W){G=W};this.GetToggleFlag=function(){return V};this.SetToggleFlag=function(W){V=W};this.GetDisableToggle=function(){return K};this.SetDisableToggle=function(W){K=W};var I=new SiebelAppFacade.JQMMapCtrl(this);this.GetMapCtrl=function(){return I};var T=null;this.SetMapFieldArray=function(){T=this.GetPM().Get("GetMapFields")};this.GetMapFieldArray=function(){return T};var N=null;this.GetMapLocationArray=function(){return N};this.SetMapLocationArray=function(W){N=W};var L;this.GetMapControl=function(){return L};this.SetMapControl=function(W){L=W};var F=null;var H=null}SiebelJS.Extend(a,SiebelAppFacade.JQMScrollContainer);a.prototype.Init=function(){SiebelAppFacade.JQMListRenderer.superclass.Init.call(this);this.AttachPMBinding("MultiSelectMode",this.SetCellEdit);this.AttachPMBinding("InQueryMode",this.SetCellEdit);this.AttachPMBinding("CellChange",this.SetCellValue);this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue);this.AttachPMBinding("HandleRowSelect",function(){if(!this.GetDisableToggle()){SiebelAppFacade.JQMLayout.ToggleMobileLayout(true)}},{scope:this,when:function(){return $("#"+this.GetPM().Get("GetFullId")).parent().children("div[enabletoggle='true']").length===1||$("#s_"+this.GetPM().Get("GetFullId")+"_div").children("div[enabletoggle='true']").length===1}})};function r(J){var I=J.data.ctx.GetPM();var L=I.Get("GetPlaceholder");var G="jqml_"+L+"_";$(".menuitem").remove();var F=J.data.ctx;if(F.m_IsSwipeRight){F.m_IsSwipeRight=false;J.preventDefault();J.stopPropagation();return}var H=$(this).attr("id");H=parseInt(H.replace(G,""),10);H=H-J.data.ctx.m_Offset;var K=J.target.className;if(K.indexOf("listdrilldown")!==-1){F.SetDisableToggle(true)}var M=F.GetPM().Get("GetActiveControl");if(M===null||M===undefined){F.OnRowSelect(H)}if(K.indexOf("listdrilldown")!==-1){F.SetDisableToggle(false)}}function s(I,F,G,J,H){if(H===""){return'<a id = "listcol_'+J+"_"+G+'" href="javascript:void(0);" class="listdrilldown '+I+'" name="'+F+'"></a>'}else{return'<a id = "listcol_'+J+"_"+G+'" href="javascript:void(0);" class="listdrilldown '+I+'" name="'+F+'">'+H+"</a>"}}a.prototype.ShowUI=function(F){SiebelAppFacade.JQMListRenderer.superclass.ShowUI.call(this);this.m_Offset=0;var I=this.GetPM();I.ExecuteMethod("SetActiveControl",null);var L=I.Get("GetPlaceholder");var G="scrollviewcontainer_"+L;$("#"+L).html("<div id='"+G+"'></div>");this.SetJQMList($("#"+G));var H="jqml_"+L;this.GetJQMList().html("<ul id='"+H+"'></ul>");var K=$("#s_"+I.Get("GetFullId")+"_div");this.SetJQMListId($("#"+H));var J=this.GetJQMListId();J.attr({"data-role":"listview","data-inset":"true"});J.listview();this.MakecontainerScrollable(G,true,false,true);this.SetMapFieldArray();if($("#"+I.Get("GetFullId")).parent().children("div[enabletoggle='true']").length===1||$("#s_"+I.Get("GetFullId")+"_div").children("div[enabletoggle='true']").length===1){this.SetToggleFlag(true)}this.SetMaxListColumns();this.ShowSearch();L=null;K=null};a.prototype.SetMaxListColumns=function(){var F=this.GetPM().Get("maxListColPhone");if(!z.IsEmpty(F)){this.m_maxListColumns=F}else{this.SetDefaultMaxListColumns();this.m_maxListColumns=this.GetDefaultMaxListColumns()}};a.prototype.SetDefaultMaxListColumns=function(){this.m_defaultMaxListColumns=4};a.prototype.GetDefaultMaxListColumns=function(){return this.m_defaultMaxListColumns};a.prototype.GetMaxListColumns=function(){return this.m_maxListColumns};a.prototype.ShowSearch=function(){if(false===this.IsPopup()){var J=this.GetPM().Get("GetPlaceholder");var H=[];var I=this.GetPM().Get("ListOfColumns");for(var G=0,F=I.length;G<F;G++){H.push(I[G].control.GetDisplayName())}this.GetSearchCtrl().ShowUI(H,J)}};function C(F,I){var J=SiebelApp.S_App.GetIconMap();var K=SiebelApp.S_App.LookupStringCache(I.GetIconMap());if(K){var H=J[K];if(H){for(var G=0;G<H.length;G++){if(H[G].iconName===F){if(H[G].iconName==="DrilldownIcon"){return H[G].iconImage}else{return H[G].iconImage+"<span style='display:none;'>"+(F)+"</span>"}}}}}return F}a.prototype.BindData=function(al){if(this.inProgress){return false}var af=this.GetJQMListId();var S=this.GetPM();var at=null;var ai=0;var P=0;at=S.Get("GetScrollDir");ai=S.Get("GetScrollAmount");ai=parseInt(ai,10);var O=this.GetMaxListColumns();var Y=S.Get("GetRecordSet").length;var F=Y;var an=0;if(ai<0){ai=-ai}if(at!==null&&ai!==0&&ai<Y){P=true;if(at){an=Y-ai;this.m_Offset=this.m_Offset+ai}else{an=0;F=ai;this.m_Offset=this.m_Offset-ai}}else{if(al){this.ClearData();this.m_Offset=0}}var G=S.Get("GetRecordSet");var aD=S.Get("GetRawRecordSet");var ak=S.Get("ListOfColumns");var aF=this.GetPM().Get("GetBusComp");var ag;var az=false;var V=S.Get("GetPlaceholder");var aC="jqml_"+V+"_";var ad;var N=ak.slice();var ao=0;var aw=[];var aj=this.GetMapFieldArray();var av=null;
var aq=aC+"NR";if($("#"+aq).length===1){$("#"+aq).remove()}if(Y<1){var ar=false;var ah=jQuery.event.special.orientationchange.orientation();if(this.GetToggleFlag()){if($("div["+ah+"='Hide']").length>0){ar=true}}var Q='<div id="'+aq+'" class="jqmNoRecord">';if(ar){Q=Q.concat('<a href="#" data-role="link">'+m+"</a></div>")}else{Q=Q.concat("<span>"+E+"</span></div>")}$("#scrollviewcontainer_"+V).prepend(Q);if(ar){$("#"+aq+" a").bind("click.SiebelAppFacade.JQMListRenderer",{ctx:this},function(aG){SiebelAppFacade.JQMLayout.ToggleMobileLayout(true)})}$("#"+aq).bind("orientationchange.SiebelAppFacade.JQMListRenderer",{ctx:this},function(aI){var aH=$(this);var aG;if($("div["+aI.orientation+"='Hide']").length===0){if(aH.children("a").length===1){aH.children("a").remove();aG="<span>"+E+"</span>";aH.append(aG)}}else{if(aH.children("span").length===1&&aI.data.ctx.GetToggleFlag()){aH.children("span").remove();aG='<a href="#" data-role="link">'+m+"</a>";aH.append(aG);$("#"+aH.attr("id")+" a").bind("click.SiebelAppFacade.JQMListRenderer",{ctx:this},function(aJ){SiebelAppFacade.JQMLayout.ToggleMobileLayout(true)})}}})}for(ao=0;ao<ak.length;ao++){if(ao===0){ag=ak[ao].name;av=ak[ao].control.GetFieldName();ad=ao}if(ak[ao].isLink){ag=ak[ao].name;av=ak[ao].control.GetFieldName();az=true;ad=ao;break}}N.splice(ad,1);for(ao=0;ao<N.length;ao++){if(ao>=(O-1)){N.splice(ao,N.length-ao);break}}var ac="";var X;for(var aA=an;aA<F;aA++){var ae;var W=aA+this.m_Offset;var L;var aB="ui-icon-siebui-drilldown";var U="";ae='<li id="'+aC+W+'" data-role="list-content" data-jqml="true">';var J=ak[ad].control.GetUIType();var Z=ak[ad].control.GetName();Z=this.GetColumnHelper().GetModifiedColumnName(Z);var ax="jqml_"+V+"_"+W+"_"+Z;var R=this.GetColumnHelper();R.AddColumn(ak[ad].control.GetName(),ak[ad].control);var aE=ak[ad].control.GetDisplayName();var ab;var I;var ay;var au="class=siebui-ui-li-headinglabel";if(az){if(!z.IsEmpty(ak[ad].control.GetHTMLAttr().toLocaleLowerCase().match("class"))){ab=ak[ad].control.GetHTMLAttr()}else{ab="class=siebui-ui-li-heading"}if(ak[ad].control.GetIconMap()){U=C.call(this,"DrilldownIcon",ak[ad].control);if(U==="DrilldownIcon"){U=""}else{aB="siebui-attachment"}}if(U!==""){L="<div>"+s(aB,ag,aA,V,U)+"</div><div>";ae=ae.concat(L+"<p "+ab+"><span "+au+">"+aE+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][av])+"' class='jqmlist_"+J+"'>"+HtmlEncode(G[aA][av])+"</span></p>")}else{L=s(aB,ag,aA,V,U);ae=ae.concat("<p "+ab+"><span "+au+">"+aE+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][av])+"' class='jqmlist_"+J+"'>"+HtmlEncode(G[aA][av])+"</span>"+L+"</p>")}}else{if(!z.IsEmpty(ak[ad].control.GetHTMLAttr().toLocaleLowerCase().match("class"))){ab=ak[ad].control.GetHTMLAttr()}else{ab="class=siebui-ui-li-heading"}if(ak[ad].control.GetIconMap()){var K=C.call(this,HtmlEncode(G[aA][av]),ak[ad].control);ae=ae.concat("<p "+ab+"><span "+au+">"+aE+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][av])+"' class='jqmlist_"+J+"'>"+K+"</p>")}else{ae=ae.concat("<p "+ab+"><span "+au+">"+aE+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][av])+"' class='jqmlist_"+J+"'>"+HtmlEncode(G[aA][av])+"</label>")}}if(aj!==null){for(var M=0;M<aj.length;M++){var H=HtmlEncode(aD[aA][aj[M]]);if(!z.IsEmpty(H)){H=H.replace(/(^,)|(,$)/g,"");H=H.replace(/^\s+|\s+$/g,"")}if(!z.IsEmpty(H)){aw.push(H)}}}for(ao=0;ao<N.length;ao++){var aa=N[ao].control.GetDisplayName();X=HtmlEncode(G[aA][N[ao].control.GetFieldName()]);R.AddColumn(N[ao].control.GetName(),N[ao].control);J=N[ao].control.GetUIType();Z=N[ao].control.GetName();Z=this.GetColumnHelper().GetModifiedColumnName(Z);ax="jqml_"+V+"_"+W+"_"+Z;if(ao===0){if(!z.IsEmpty(N[ao].control.GetHTMLAttr().toLocaleLowerCase().match("class"))){I=N[ao].control.GetHTMLAttr()}else{I="class=siebui-ui-li-aside"}if(N[ao].control.GetIconMap()){X=C.call(this,X,N[ao].control)}ae=ae.concat("<p "+I+"><span>"+aa+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][N[ao].control.GetFieldName()])+"' class='jqmlist_"+J+"'>"+X+"</span></p>")}else{if(!z.IsEmpty(N[ao].control.GetHTMLAttr().toLocaleLowerCase().match("class"))){ay=N[ao].control.GetHTMLAttr()}else{ay="class=siebui-ui-li-desc"}if(N[ao].control.GetIconMap()){X=C.call(this,X,N[ao].control)}ae=ae.concat("<p "+ay+"><span>"+aa+": </span><span id='"+ax+"' value='"+HtmlEncode(G[aA][N[ao].control.GetFieldName()])+"' class='jqmlist_"+J+"'>"+X+"</span></p>")}}ae=ae.concat("<p class='ui-li-desc-dummy'></p>");if(az&&U!==""){ae=ae.concat("</div>")}ae=ae.concat("</li>");ac=ac.concat(ae)}if(P){for(aA=1;aA<=ai;aA++){if(at){ao=this.m_Offset-aA}else{ao=this.m_Offset+aA+Y-1}$("#"+aC+ao).addClass("removeli")}}var am;if(P&&at!==null&&!at){am=this.m_Offset+ai;am=aC+am;$(ac).insertBefore("#"+am)}else{af.append(ac)}af.listview("refresh");if(P){af.children().remove(".removeli");this.SetNewscrollpos(at,ai);P=false}for(aA=an;aA<F;aA++){X=HtmlEncode(G[aA][ak[ad].control.GetFieldName()]);this.PostUIListPrep(aA+this.m_Offset,ak[ad].control,X);for(ao=0;ao<N.length;ao++){X=HtmlEncode(G[aA][N[ao].control.GetFieldName()]);this.PostUIListPrep(aA+this.m_Offset,N[ao].control,X)}}var ap=this.GetDelControl();if(ap!==undefined){var T=$("#jqml_"+V+" li");if(T.length>0){$("#jqml_"+V+" li").swipeDelete({btnLabel:ap.GetDisplayName(),click:function(aI){$(".menuitem").remove();aI.preventDefault();var aJ="jqml_"+S.Get("GetPlaceholder");var aG="#"+aJ;var aH=$(aG+" .aSwipeBtn").attr("Disabled");if(aH==="disabled"){return false}setTimeout(function(){var aO=ap;var aN=aO.GetMethodPropSet();var aL=aN.Clone();var aM={};aM.async=false;aM.mask=true;aM.target=SiebelApp.S_App.GetTargetViewContainer();aM.cb=function(){var aQ=Array.prototype.slice.call(arguments);if(aQ[aQ.length-1]===false){SiebelApp.S_App.uiStatus.Free()}};S.OnControlEvent(t.get("PHYEVENT_INVOKE_CONTROL"),ap.GetMethodName(),aL,aM);var aP="jqml_"+S.Get("GetPlaceholder");var aK="#"+aP;$(aK+" .aSwipeBtn").remove()},0);return false}})}}this.CheckScrollboundries();this.SetMapLocationArray(aw);V=null};a.prototype.GetOffset=function(J,I){J=J+this.m_Offset;I=I+this.m_Offset;var H=this.GetPM();var L=H.Get("GetPlaceholder");var G="jqml_"+L+"_";var F=G+J;var M=G+I;var K=$("#"+M).offset().top-$("#"+F).offset().top;return K};a.prototype.GetListHeight=function(){return $("#"+this.GetScrollcontainer()).children("ul").height()};a.prototype.EndLife=function(){this.SetJQMList(null);this.SetJQMListId(null);this.SetMapLocationArray(null);$("#"+this.GetPM().Get("GetPlaceholder")).undelegate("a.listdrilldown","click");$("#jqml_"+this.GetPM().Get("GetPlaceholder")).undelegate("li","click");$("#jqml_"+this.GetPM().Get("GetPlaceholder")).undelegate("li","swiperight");this.GetSearchCtrl().SetContainer(null);SiebelAppFacade.JQMListRenderer.superclass.EndLife.call(this)};a.prototype.PostUIListPrep=function(F,J,H){var L=J.GetName();var M=this.GetPM().Get("GetPlaceholder");L=this.GetColumnHelper().GetModifiedColumnName(L);var R="jqml_"+M+"_"+F+"_"+L;var G=J.GetUIType();switch(G){case p:var K="<select class='jqmlist_CheckBox_slide' name="+R+" id='"+R+"' data-role='slider'><option value='N'>"+B+"</option><option value='Y'>"+l+"</option></select>";
$("#"+R).html(K).trigger("create");var N=C.call(this,"Y",J);var Q=C.call(this,"N",J);if(N!==""&&Q!==""){var O=$("#"+R).parent();var I=$(O).find("span.ui-slider-label:first");var P=I.html()===l?N:Q;I.empty().append(P);I=$(O).find("span.ui-slider-label:last");P=I.html()===B?Q:N;I.empty().append(P)}$("#"+R+".jqmlist_CheckBox_slide").val(H);$("#"+R+".jqmlist_CheckBox_slide").slider("disable");$("#"+R+".jqmlist_CheckBox_slide").slider("refresh");break}};a.prototype.GetSelectedRow=function(G){var I=this.GetPM().Get("GetPlaceholder");var F="jqml_"+I+"_";G=G.replace(F,"");var J=G;var H=G.indexOf("_");if(H>=0){J=G.slice(0,H)}J=parseInt(J,10);J=J-this.m_Offset;I=null;return J};a.prototype.GetSelectedControl=function(G){var I=this.GetPM().Get("GetPlaceholder");var F="jqml_"+I+"_";G=G.replace(F,"");var H=G.indexOf("_");G=G.slice(H+1);I=null;return G};a.prototype.GetColumnControl=function(F){return this.GetColumnHelper().GetColumnControl(F)};a.prototype.BindEvents=function(F){SiebelAppFacade.JQMListRenderer.superclass.BindEvents.call(this,F);$("#"+this.GetPM().Get("GetPlaceholder")).delegate("a.listdrilldown","click",{ctx:this},function(Q){SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:true});var O=Q.data.ctx;var P=$(this).attr("name");var R=$(this).parents("li").eq(0).attr("id");var N=Q.data.ctx.GetJQMListId().attr("id")+"_";R=parseInt(R.replace(N,""),10);R=R-Q.data.ctx.m_Offset;var M=parseInt(R,10);setTimeout(function(){if(M>=0){O.SetDisableToggle(true);var S=O.OnRowSelect(M);O.SetDisableToggle(false);if(S===false||O.GetPM().OnControlEvent(t.get("PHYEVENT_DRILLDOWN_LIST"),P,M)===false){SiebelApp.S_App.uiStatus.Free();return false}}},0)});var H=this.GetPM();var L=H.Get("GetPlaceholder");var G="jqml_"+L+"_";$("#jqml_"+L).delegate(".jqmlist_JText","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JText","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_Pick","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_Pick","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JDateTimeZonePick","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JDateTimeZonePick","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JDateTimePick","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JDateTimePick","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JDatePick","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JDatePick","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_CheckBox_slide","slidestart",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_CheckBox_slide","slidestop",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_Mailto","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_Mailto","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_URL","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_URL","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JComboBox","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JCalculator","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JCalculator","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JCurrencyCalc","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JCurrencyCalc","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JPassword","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JPassword","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate(".jqmlist_JTextArea","click",{ctx:this},this.OnFocusInput);$("#jqml_"+L).delegate(".jqmlist_JTextArea","blur",{ctx:this},this.OnBlurInput);$("#jqml_"+L).delegate("li","click",{ctx:this},r);$("#jqml_"+L).delegate("li","swiperight",{ctx:this},function(O){$(".menuitem").remove();O.preventDefault();var M=O.data.ctx;var N=$(this).attr("id");N=parseInt(N.replace(G,""),10);N=N-O.data.ctx.m_Offset;M.SetDisableToggle(true);M.OnRowSelect(N);M.SetDisableToggle(false);if(M.GetDelBtnStatus()===false){$(this).find(".aSwipeBtn").addClass("ui-disabled");$(this).find(".aSwipeBtn").attr("disabled",true)}M.m_IsSwipeRight=true});$("body").bind("tap",{ctx:this},function(N){$(".aSwipeBtn").remove();var M=N.data.ctx;M.m_IsSwipeRight=false});var J=this.GetMapControl();if(J!==undefined&&J!==null){if(J.GetMethodName()==="ShowMapLocations"&&typeof(google)!=="undefined"){var K=this.GetMapCtrl();var I=[];$("#"+(J.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:J},function(M){var N=new SiebelApp.UIStatus();N.Busy({});setTimeout(function(){I=M.data.ctx.GetMapLocationArray();K.ShowMapLocations(I);N.Free()},0);return false})}}L=null};a.prototype.GetPhysicalControlValue=function(J){SiebelAppFacade.JQMListRenderer.superclass.GetPhysicalControlValue.call(this,J);var I,G;if(J){var H=J.GetName();H=this.GetColumnHelper().GetModifiedColumnName(H);var L=this.GetPM().Get("GetPlaceholder");var K=this.GetCurRowSel();K=K+this.m_Offset;var F="jqml_"+L+"_"+K+"_"+H;I=$("#"+F);if(I.length>0){G=I.attr("value")||"";switch(J.GetUIType()){case e:case f:case u:G=z.toISOFormat(this.ConvertToDispTimeAMPM(z.Trim(G)),(J.GetUIType()!==e))||G;break}this.GetPM().AddProperty("PhysicalCtrlVal",G)}}};a.prototype.ShowSelection=function(){if(this.inProgress){return false}this.ClearSelection();var F=this.GetRowCount();var H=this.GetPM().Get("GetRowsSelectedArray");for(var G=0;G<F&&G<H.length;G++){if(H[G]){this.setSelection(G,false)}}SiebelAppFacade.JQMListRenderer.superclass.ShowSelection.call(this)};a.prototype.ClearData=function(){var G="jqml_"+this.GetPM().Get("GetPlaceholder");var F="#"+G;$(F).empty()};a.prototype.setSelection=function(H){var J="jqml_"+this.GetPM().Get("GetPlaceholder")+"_";var I=this.m_Offset+H;I=parseInt(I,10);var G=J+I;var F="#"+G;$(F).addClass("hilight");this.SetCurRowSel(H)};a.prototype.OnRowSelect=function(H){var K=false;var J=this.GetPopupType();if(J==="Assoc"){var I=this.GetPM().Get("GetRowsSelectedArray");var G=0;for(var F=0;F<I.length;F++){if(I[F]){K=true;break}}}if(this.GetToggleFlag()||J==="Assoc"||parseInt(H,10)!==this.GetCurRowSel()){SiebelApp.S_App.uiStatus.Busy({});if(this.GetPM().OnControlEvent(t.get("PHYEVENT_SELECT_ROW"),H,K)===false){SiebelApp.S_App.uiStatus.Free();return false}SiebelApp.S_App.uiStatus.Free()}return true};a.prototype.ClearSelection=function(){var G="jqml_"+this.GetPM().Get("GetPlaceholder");var F="#"+G;$(F).children(".hilight").find(".siebui-ipe-enabled").removeClass("siebui-ipe-enabled");$(F).children(".hilight").removeClass("hilight");$(F).find(".jqmlist_CheckBox_slide").slider("disable");$(F+" .aSwipeBtn").remove()};a.prototype.ShowUIControl=function(I,H,K){SiebelAppFacade.JQMListRenderer.superclass.ShowUIControl.call(this,I,H,K);var L=I.GetUIType();var G;var J;var F=I.GetInputName();if(L===x){G=I.GetMethodName();if(G==="DeleteRecord"){J=this.GetPM().ExecuteMethod("CanInvokeMethod",G);
this.SetDelControl(I);this.SetDelBtnStatus(J);$("#"+F).hide()}if(G==="ShowMapLocations"){this.SetMapControl(I)}}};a.prototype.EnableControl=function(K,I){SiebelAppFacade.JQMListRenderer.superclass.EnableControl.call(this,K,I);if(typeof(K.GetInputName)==="function"){if(K.GetUIType()===x){if(K.GetMethodName()==="DeleteRecord"){this.SetDelBtnStatus(I)}if(K.GetMethodName()==="ShowMapLocations"&&typeof(google)!=="undefined"){$("#"+K.GetInputName()+"_Ctrl").button("enable");$("#"+K.GetInputName()+"_Ctrl").addClass("showMapLocations")}}else{var J=K.GetName();var F=this.GetCurRowSel();var G=F+this.m_Offset;var L=this.GetPM().Get("GetPlaceholder");J=this.GetColumnHelper().GetModifiedColumnName(J);var H="jqml_"+L+"_"+G+"_"+J;if(K.GetUIType()===p){if(I){$("#"+H+".jqmlist_CheckBox_slide").slider("enable")}else{$("#"+H+".jqmlist_CheckBox_slide").slider("disable")}$("#"+H+".jqmlist_CheckBox_slide").slider("refresh")}if(I){$("#"+H).addClass("siebui-ipe-enabled")}else{$("#"+H).removeClass("siebui-ipe-enabled")}}}};a.prototype.SetCellEdit=function(F){};a.prototype.SetCellValue=function(J,Q,P){var K=this.GetPM();var O=K.Get("GetPlaceholder");var N=this.GetCurRowSel();var G=N+this.m_Offset;var M=this.GetColumnHelper().GetModifiedColumnName(Q);var L=this.GetColumnControl(M);var R="jqml_"+O+"_"+G+"_"+M;var H=$("#"+R);if(H.length!==0){var F=L.GetUIType();H.attr("value",P);switch(F){case n:H.html(P);break;case d:var I=H.find("input").length;if(I!==0&&!z.IsEmpty(P)){H.find("input").val(P);H.find("input").focus()}else{H.html(P)}break;case p:$("#"+R+".jqmlist_CheckBox_slide").val(P);$("#"+R+".jqmlist_CheckBox_slide").slider("refresh");break;default:H.html(P);break}}};a.prototype.fixWidth=function(G){SiebelAppFacade.JQMListRenderer.superclass.fixWidth.call(this,G);if(this.IsPopup()){var F=this.GetJQMListId();if(F!==undefined){F.attr("style","max-width:"+G+" !important")}}};return a}());return"SiebelAppFacade.JQMListRenderer"});SiebelAppFacade.ListColumnHelper=function(){var b={};var a={};var c={};this.GetColMap=function(){return b};this.GetColControl=function(){return a};this.GetColField=function(){return c}};SiebelAppFacade.ListColumnHelper.prototype={AddColumn:function(c,b){var a=null;if(typeof(c)==="string"){a=c.replace(/ /g,"_");a=a.replace(/\//g,"_");a=a.replace(/#/g,"_");this.GetColMap()[a]=c;this.GetColControl()[a]=b;this.GetColField()[b.GetFieldName()]=c}return a},GetActualControlName:function(a){return this.GetColMap()[a]},GetActualColumnName:function(a){return this.GetColControl()[a].GetDisplayName()},GetModifiedColumnName:function(b){var a=null;if(typeof(b)==="string"){a=b.replace(/ /g,"_");a=a.replace(/\//g,"_");a=a.replace(/#/g,"_")}return a},GetColumnControl:function(a){return this.GetColControl()[a]},GetColumnOfField:function(a){return this.GetColField()[a]},TranslateObject:function(c,f){var d={};var b=null;for(var a=0;a<c.length;a++){var e=c[a].control.GetFieldName();b=c[a].name;if(!SiebelApp.Utils.IsEmpty(b)){d[b.replace(/ /g,"_").replace(/\//g,"_").replace(/#/g,"_")]=f[e]}}if(f.Id){d.Id=f.Id}return d}}};