/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.MsgBrdCstPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.MsgBrdCstPresentationModel");SiebelAppFacade.MsgBrdCstPresentationModel=(function(){var B="";var t="";var w=false;var q="";var a="";var c="";var p="";var g="";var E="";var f="";var k="";var j=30;var r="";var b="";var o="";var v=[];var s=SiebelJS.Dependency("SiebelApp.Constants");var C=SiebelJS.Dependency("SiebelApp.Utils");function y(F){SiebelAppFacade.MsgBrdCstPresentationModel.superclass.constructor.call(this,F)}SiebelJS.Extend(y,SiebelAppFacade.PresentationModel);function e(){var H=0;var G=SiebelApp.S_App.GetService("Message Bar");var J=SiebelApp.S_App.NewPropertySet();J.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));var F=SiebelApp.S_App.NewPropertySet();if(G){F=null;var I={};I.async=false;I.selfbusy=true;I.scope=this;I.cb=function(){F=arguments[2];if(F!==null){var K=F.GetChildCount();for(var M=0;M<K;M++){var L=F.GetChild(M);if(L!==null&&L.GetType()==="ResultSet"){H=L.GetProperty("IsMsgBarEnabled")}}}};G.InvokeMethod("IsMsgBarEnabled",J,I)}return H}function i(){var H=0;var G=SiebelApp.S_App.GetService("Message Bar");var J=SiebelApp.S_App.NewPropertySet();J.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));var F=SiebelApp.S_App.NewPropertySet();if(G){F=null;var I={};I.async=false;I.selfbusy=true;I.scope=this;I.cb=function(){F=arguments[2];if(F!==null){var K=F.GetChildCount();for(var M=0;M<K;M++){var L=F.GetChild(M);if(L!==null&&L.GetType()==="ResultSet"){H=L.GetProperty("MsgBarInterval")}}}};G.InvokeMethod("GetMsgBarInterval",J,I)}return H}y.prototype.Init=function(){var F=e.call(this);if(F==="1"){this.AttachEventHandler("ShowMessageBar",function(I){h.call(this);var H=this;var G=i.call(this);j=parseInt(G,10)>j?parseInt(G,10):j;if(j!==0){setInterval(function(){H.ExecuteMethod("UpdateMessageBar")},j*1000)}});this.AddMethod("UpdateMessageBar",z);this.AddMethod("AddNotification",D);this.AddMethod("DeleteNotification",x);this.AddMethod("UpdateNotification",A);this.AddMethod("ReadNotification",n);this.AttachEventHandler("UpdateServer",function(L,K){var H=SiebelApp.S_App.GetService("Message Bar");var J=SiebelApp.S_App.NewPropertySet();var G=SiebelApp.S_App.NewPropertySet();J.SetProperty("User MsgId",L);J.SetProperty("User MsgStatus",K);J.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));if(H){G=null;var I={};I.async=true;I.npr=false;I.selfbusy=true;I.scope=this;H.InvokeMethod("UpdateUserMsg",J,I);G=arguments[2]}});this.AttachEventHandler("DownLoadFileFromServer",function(N){var J=false;var M=SiebelApp.S_App.GetService("Message Bar");var G=SiebelApp.S_App.NewPropertySet();var Q=SiebelApp.S_App.NewPropertySet();var I=N.split(";");for(var K=0;K<I.length;K++){var P=I[K].indexOf(":");if(P<0){continue}var L=$.trim(I[K].substr(0,P)).toLowerCase();var H=$.trim(I[K].substr(P+1));switch(L){case"bo":G.SetProperty("BO",H);break;case"bc":G.SetProperty("BC",H);break;case"view":G.SetProperty("View",H);J=true;break;case"field":G.SetProperty("Field",H);break;case"file ext":G.SetProperty("File Ext",H);break;case"id":G.SetProperty("Id",H);break;default:break}}if(M){Q=null;var O={};O.async=true;O.npr=false;O.selfbusy=true;O.scope=this;O.cb=function(){if(J===true){this.GetRenderer().CloseMainDialog()}};M.InvokeMethod("DownLoadReport",G,O)}})}};y.prototype.Show=function(){var F=this.GetRenderer();F.ShowUI();F.BindEvents()};y.prototype.Setup=function(F){SiebelAppFacade.MsgBrdCstPresentationModel.superclass.Setup.call(this,F)};function D(I){var G,J,O;var M=SiebelApp.S_App.GetService("Message Bar");var F=SiebelApp.S_App.NewPropertySet();var L=true;if(I!==null){var H=I.GetChildCount();for(var K=0;K<H;K++){F=I.GetChild(K);F.GetProperty("Type",G);F.GetProperty("Body",O);if(O===null||G===null){SiebelJS.Log("Type Body and Id are the required fields");L=false}}}if(L){if(M){var N={};N.async=false;N.selfbusy=true;N.npr=false;N.scope=this;return M.InvokeMethod("AddNotification",I,N)}}}function x(N){var H;var F=0;var K=true;var L=SiebelApp.S_App.GetService("Message Bar");var G=SiebelApp.S_App.NewPropertySet();if(N!==null){var I=N.GetChildCount();for(var J=0;J<I;J++){G=N.GetChild(J);G.GetProperty("Msg Id",H);if(H===null){SiebelJS.Log("Row id is required");K=false}}}if(K){if(L){var M={};M.async=false;M.selfbusy=true;M.npr=false;M.scope=this;return L.InvokeMethod("DeleteNotification",N,M)}}}function n(H){var I;var F=0;var K=true;var L=SiebelApp.S_App.GetService("Message Bar");var G=SiebelApp.S_App.NewPropertySet();if(H!==null){var M=H.GetChildCount();for(var J=0;J<M;J++){G=H.GetChild(J);G.GetProperty("Msg Id",I);if(I===null){SiebelJS.Log("Row Id is required");K=false}}}if(K){if(L){var N={};N.async=false;N.npr=false;N.selfbusy=true;N.scope=this;return L.InvokeMethod("ReadNotification",H,N)}}}function A(G){var M;var H=true;var F=SiebelApp.S_App.GetService("Message Bar");var L=SiebelApp.S_App.NewPropertySet();if(G!==null){var J=G.GetChildCount();for(var I=0;I<J;I++){L=G.GetChild(I);L.GetProperty("Msg Id",M);if(M===null){SiebelJS.Log("Row Id is required");H=false}}}if(H){if(F){var K={};K.async=false;K.selfbusy=true;K.npr=false;K.scope=this;return F.InvokeMethod("UpdateNotification",G,K)}}}function z(){var J,H;var G=SiebelApp.S_App.GetService("Message Bar");var M=SiebelApp.S_App.NewPropertySet();M.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));var F=SiebelApp.S_App.NewPropertySet();if(G){F=null;var K=this;var I="UpdatePrefMsg";var L={};L.async=true;L.scope=this;L.npr=false;L.selfbusy=true;L.cb=function(){F=arguments[2];if(F!==null){var N=F.GetChildCount();for(var P=0;P<N;P++){var O=F.GetChild(P);if(O!==null&&O.GetType()==="ResultSet"){var Q=O.GetProperty("returnVal");m.call(K,Q);K.GetRenderer().UpdateMsgBar()}}}};G.InvokeMethod(I,M,L)}}function h(){var J,H;var G=SiebelApp.S_App.GetService("Message Bar");var M=SiebelApp.S_App.NewPropertySet();M.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));var F=SiebelApp.S_App.NewPropertySet();if(G){F=null;var K=this;var I="Init";var L={};L.async=true;L.selfbusy=true;L.scope=this;L.cb=function(){F=arguments[2];if(F!==null){var N=F.GetChildCount();for(var P=0;P<N;P++){var O=F.GetChild(P);if(O!==null&&O.GetType()==="ResultSet"){var Q=O.GetProperty("returnVal");K.MsgInit(Q)}}}K.MsgBrdCstInit(G)};G.InvokeMethod(I,M,L)}}y.prototype.MsgBrdCstInit=function(G){var K=SiebelApp.S_App.NewPropertySet();K.SetProperty(s.get("SWE_BUSINESS_SERVICE"),s.get("SWE_NUMERIC_TRUE"));var F=SiebelApp.S_App.NewPropertySet();if(G){var H="UpdatePrefMsg";var I=this;var J={};J.async=true;J.scope=this;J.selfbusy=true;J.cb=function(){F=arguments[2];if(F!==null){var M=F.GetChildCount();for(var O=0;O<M;O++){var N=F.GetChild(O);if(N!==null&&N.GetType()==="ResultSet"){var P=N.GetProperty("returnVal");m.call(I,P);I.AddProperty("MsgCount",t);I.AddProperty("MsgObjArray",v);var L=CCFMiscUtil_CreatePropSet();L.SetProperty("Normal",q);L.SetProperty("Automation",a);L.SetProperty("High",c);L.SetProperty("Urgent",p);L.SetProperty("UrgentWA",g);
L.SetProperty("NormalColor",E);L.SetProperty("HighColor",f);L.SetProperty("UrgentColor",k);L.SetProperty("UpdateInterval",j);L.SetProperty("PrefixNormal",r);L.SetProperty("PrefixHigh",b);L.SetProperty("PrefixUrgent",o);I.AddProperty("MsgUserPrefPS",L);I.GetRenderer().CreateMsgBar()}}}};G.InvokeMethod(H,K,J)}};y.prototype.MsgInit=function(H){var G=new Array(1);G[0]=0;var F=l(H,G);F=l(H,G);q=l(H,G);a=l(H,G);c=l(H,G);p=l(H,G);g=l(H,G)};function m(F){w=false;var L=new Array(1);L[0]=0;L[0]=F.indexOf("-$$$-");if(L[0]>=0){if(L[0]>0){var P=F.substring(0,L[0])}L[0]+=5}else{L[0]=0}var O,N,M,H=0,I=0;O=F.indexOf("-|||-",L[0]);N=F.indexOf("--saMe--",L[0]);M=F.indexOf("--saMe--",O);if((N===-1)||(N>O)){var J=parseInt(l(F,L),10);var Q=parseInt(l(F,L),10);var K=parseInt(l(F,L),10);var G=d(l(F,L));E=d(l(F,L));f=d(l(F,L));k=d(l(F,L));j=parseInt(l(F,L),10);r=l(F,L);b=l(F,L);o=l(F,L)}if(M===-1){v=null;v=[];L[0]=F.indexOf("Msg",O);while(O<L[0]&&L[0]<F.length){L[0]+=3;v[I]=this.MsgBarMessage(F,L);I++}w=true}if(w){this.AddProperty("MsgChanged",w);t=v.length;this.AddProperty("MsgCount",t);this.AddProperty("MsgObjArray",v)}else{this.AddProperty("MsgChanged",w)}}y.prototype.MsgBarMessage=function(O,M){if(O===null){return}var H=l(O,M);var J=l(O,M);var L=l(O,M);var K=l(O,M);var F=l(O,M);var N=l(O,M);var P=l(O,M);var I=l(O,M);var G={};G.id=H;G.body=J;G.type=L;G.summary=N;G.status=P;G.dismiss=I;return G};function d(J){var I=0;if(J.charAt(0)==="#"){return J}var F=J.split(",");var H="#",G;for(I=0;I<3;I++){G=u(F[I],16);if(G.length===1){G="0"+G}H+=G}return H}function u(J,H){var F="",I=Math.floor(Math.abs(J)),G;if(!I||typeof(I)==="undefined"){return"0"}while(true){G=I%H;F="0123456789abcdefghijklmnopqrstuvwxyz".charAt(G)+F;I=(I-G)/H;if(I===0){break}}return((J<0)?"-"+F:F)}function l(J,K){var G="*4*TRUE*";var H,I,F=null;if(J.charAt(K[0])==="*"){K[0]++;H=J.indexOf("*",K[0]);if(H>0){F=parseInt(J.substring(K[0],H),10);if(F===null){return""}}if(H<J.length&&J.charAt(H)==="*"){I=J.substring(H+1,F+H+1);K[0]=H+F+1;return I}}return""}return y}())};