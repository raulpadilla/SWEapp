/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.BusComp)){define("siebel/offline/buscomp",["siebel/offline/model"],function(){(function(){var ae=SiebelApp.S_App.BusComp;var af=SiebelApp.S_App.BusComp.prototype;var q=SiebelApp.S_App.BusComp;var ah=SiebelApp.Utils;var b=SiebelApp.S_App;var k=SiebelApp.OfflineUtils;var I=true;var G=SiebelApp.BrowserCacheMgr;var R=SiebelApp.S_App.Model;var W=SiebelApp.AjaxRequestMgr;SiebelApp.S_App.BusComp=function(){q.call(this);var aJ={};var aA=true;var aF=true;var aR=true;var a8=[];var aC=[];var bg=[];var a5=0;var an=-1;var a3=-1;var a2=true;var a9={};var aY={};var be=[];var a1=null;var bh=true;var aB=true;var a4=0;var ax=0;var aH=[0,1];var aQ=C.get("INSMODE_NORMAL");var aM="";var bi=false;var aP=[];var aU={};var aG=false;var aO=false;var aE=[];var al=[];var aS=false;var aT;var a0=false;var aX;var a7;var aZ=false;var aW="";var aw="";var az="";var aq=[];var aL=[];var au=10;var ba="";var av=false;var ay=false;var ao=false;var aI=[];var aD=[];var aj=[];var am=[];var at=null;var bd="";var a6="";var bb="";var ar="";var bc;var bf=[];var aN=false;var aV=null;var ai=null;var ak=null;this.GetAssocList=function(){if(!bc){if(this.GetLinkDef()&&this.GetLinkDef().interTableName){var bj=this.GetBusObj();var bl=this.GetName();var bk=bj.GetBCPS(bl,true);bc=new SiebelApp.S_App.BusComp();bc.ProcessObjectInfo(bk)}}return bc};this.SetAssocList=function(bj){bc=bj};this.SetPickSrcIdFName=function(bj){aV=bj};this.GetPickSrcIdFName=function(){return aV};this.GetPickAppletSrcInfo=function(){return ar};this.SetPickAppletSrcInfo=function(bj){ar=bj};this.GetIsPopup=function(){return bb};this.SetIsPopup=function(bj){bb=bj};this.GetViewMode=function(){return a6};this.SetViewMode=function(bj){a6=bj};this.GetInterface=function(){if(!at){at=new SiebelApp.S_App.OfflineBCInterface(this)}return at};this.ResetInterface=function(){if(at){at.EndLife()}at=null};this.GetOnUpdSrcFldArray=function(){return aI};this.GetOnUpdDstFldArray=function(){return aD};this.GetOnUpdExprArray=function(){return aj};this.GetOnUpdConditionArray=function(){return am};this.IsLoadOnFldUpdSet=function(){return ay};this.SetLoadOnFldUpd=function(bj){ay=bj};this.IsOnFieldUpdDisabled=function(){return ao};this.DisableOnFieldUpd=function(){ao=true};this.GetWSSize=function(){return au};this.SetWSSize=function(bj){au=bj};this.GetOldFNm=function(){return aq};this.SetOldFNm=function(bj){if(aq.indexOf(bj)<0){aq.push(bj)}};this.SetEmptyFNm=function(){aq=[];aL=[]};this.GetOldfVal=function(){return aL};this.SetOldFVal=function(bq,bk){var bp=this.GetOldFNm();var bj=bp.indexOf(bq);if(bj<0){aL.push(bk)}else{if(!aL[bj]){aL[bj]=bk}else{var bn=aL[bj].split("|");var bo=bk.split("|");var bl=bn[0];var bm=bo[1];aL[bj]=bl+"|"+bm}}};this.GetNewTxn=function(){return aW};this.SetNewTxn=function(bj){aW=bj};this.GetOpType=function(){return az};this.SetOpType=function(bj){az=bj};this.GetPrvPickMap=function(){return ba};this.SetPrvPickMap=function(bj){ba=bj};this.GetTxnId=function(){return aw};this.SetTxnId=function(bj){aw=bj};this.IsNotifyEnabled=function(){return aF};this.SetNotifyEnabled=function(bj){aF=bj};this.IsNotifySysEnabled=function(){return aR};this.SetNotifySysEnabled=function(bj){aR=bj};this.SetWorkSet=function(bj){a8=bj};this.GetWorkSet=function(){return a8};this.GetNotifyInfoArray=function(){return aC};this.AddNotifyInfoArray=function(bj){aC.push(bj)};this.ResetNotifyArr=function(){aC=[]};this.GetRef=function(){return a5};this.AddRef=function(){return ++a5};this.RemoveRef=function(){return a5--};this.GetExtObj=function(){return aJ};this.SetExtObjProp=function(bk,bj){this.GetExtObj()[bk]=bj};this.GetExtObjProp=function(bj){if(!((this.GetExtObj()).hasOwnProperty(bj))){this.GetExtObj()[bj]=null}return(this.GetExtObj()[bj])};this.IsInExecution=function(){return aA};this.SetExecutionState=function(bj){aA=bj};var aK=this.IsInsertPending;this.IsInsertPending=function(){if(SiebelApp.OfflineAppSettings.GetMode()===true){return this.insertPending}else{return aK}};var ap=this.SetSearchSpec;this.SetSearchSpec=function(bm){if(SiebelApp.OfflineAppSettings.GetMode()===true){if(window.localStorage.getItem("contextArray")){var bk=JSON.parse(window.localStorage.getItem("contextArray"));var bj=bk.length;var bn;for(var bl=0;bl<bj;bl++){bn=bk[bl].bc;if(this.GetName&&(this.GetName()===bn)){bk[bl].ss=bm;window.localStorage.setItem("contextArray",JSON.stringify(bk));break}}}}return ap.call(this,bm)};this.GetMultiSelectMode=function(){return bi};this.SetMultiSelectMode=function(bj){if(this.GetMultiSelectMode()===bj){return}bi=bj;this.NotifyStateChanged("bInMultiSelMode",bi)};this.GetExplicitCommit=function(){return aO};this.SetExplicitCommit=function(bj){aO=bj};this.GetSelRowIdArray=function(){return aP};this.SetSelRowIdArray=function(bj){aP=bj};this.SetBCTableUpdateState=function(bj){a2=bj};this.GetBCTableUpdateState=function(){return a2};this.SetCursor=function(bj){aH=bj};this.GetCursor=function(){return aH};this.SetQuerySearchSpec=function(bj){a9=bj};this.GetQuerySearchSpec=function(){return a9};this.SetAppletSearchSpec=function(bj){bf=bj};this.GetAppletSearchSpec=function(){return bf};this.SetQuerySortSpec=function(bj){aY=bj};this.GetQuerySortSpec=function(){return aY};this.SetQueryFieldList=function(bj){be=bj};this.GetQueryFieldList=function(){return be};this.SetPrevActiveRow=function(bj){a3=bj};this.GetPrevActiveRow=function(){return a3};this.SetQueryOrder=function(bj){a1=bj};this.GetQueryOrder=function(){return a1};this.SetPriorSet=function(bj){bh=bj};this.GetPriorSet=function(){return bh};this.SetNextSet=function(bj){aB=bj};this.GetNextSet=function(){return aB};this.SetRecordCount=function(bj){a4=bj};this.GetRecordCount=function(){return a4};this.SetScrollCount=function(bl){ax=bl;if(window.localStorage.getItem("contextArray")){var bk=JSON.parse(window.localStorage.getItem("contextArray"));var bj=bk.length;for(var bm=0;bm<bj;bm++){var bn=bk[bm].bc;if(this.GetName()===bn){bk[bm].sc=bl;break}}window.localStorage.setItem("contextArray",JSON.stringify(bk))}};this.GetScrollCount=function(){return ax};this.SetBCTableInsertState=function(bj){aQ=bj};this.GetBCTableInsertState=function(){return aQ};this.SetInsertStatement=function(bj){aM=bj};this.GetInsertStatement=function(){return aM};this.SetIsRelatedBC=function(bj){aN=bj};this.GetIsRelatedBC=function(){return aN};this.GetWS=function(){return bg};this.AddWS=function(bj){this.GetWS().push(bj)};this.EmptyWS=function(){bg=[]};this.SetFieldValueWS=function(bl,bk,bj){bg[bj][bl]=bk};this.GetBCState=function(){return aU};this.SetBCState=function(bj){aU=bj};this.GetInverseSelection=function(){return aG};this.SetInverseSelection=function(bj){aG=bj};this.GetActivatedFieldList=function(){var bm=this.GetFieldMap();var bn;for(var bl in bm){if(bm[bl]){bn=SiebelApp.S_App.LookupStringCache(bm[bl].GetName());if(aE.indexOf(bn)===-1){aE.push(bn)}}}var bj=this.GetActFieldList();for(var bk in bj){if(bj[bk]){bn=SiebelApp.S_App.LookupStringCache(bj[bk]);if(aE.indexOf(bn)===-1){aE.push(bn)}}}return aE};this.ResetActivatedFieldList=function(){aE=[]
};this.GetSavedFieldArray=function(){return al};this.SetSavedFieldArray=function(bj){al=bj};this.IsDeleteRecordPending=function(){return(aS)};this.SetDeleteRecordPending=function(bj){aS=bj};this.SetAdminNoDelete=function(bj){a0=bj};this.GetAdminNoDelete=function(bj){a0=false;return a0};this.SetAspectBCReadFld=function(bj){aX=bj};this.GetAspectBCReadFld=function(bj){return aX};this.SetAdminMode=function(bj){aZ=bj};this.GetAdminMode=function(bj){aZ=false;return aZ};this.SetFldNoDelete=function(bj){a7=bj};this.GetFldNoDelete=function(bj){return a7};this.IsBCFldsActivated=function(){return av};this.SetBCFldsActivated=function(bj){av=bj};this.SetOrigRecVal=function(bj){bd=bj};this.GetOrigRecVal=function(){return(bd)};this.SetMasterBC=function(bj){ai=bj};this.GetMasterBC=function(){return(ai)};this.SetPickSrcField=function(bj){ak=bj};this.GetPickSrcField=function(){return(ak)}};SiebelApp.S_App.BusComp.prototype=af;SiebelApp.S_App.BusComp.prototype.constructor=SiebelApp.S_App.BusComp;var j={};j.EndLife=ae.prototype.EndLife;j.ProcessObjectInfo=ae.prototype.ProcessObjectInfo;j.PositionById=ae.prototype.PositionById;j.SetSortSpec=ae.prototype.SetSortSpec;j.CanInsert=ae.prototype.CanInsert;j.WriteRecord=ae.prototype.WriteRecord;j.UndoRecord=ae.prototype.UndoRecord;j.NewRecord=ae.prototype.NewRecord;j.SetInQueryState=ae.prototype.SetInQueryState;var C=SiebelApp.Offlineconstants;var Y=SiebelApp.OfflineCacheConfig;var p=C.get("IS_DYNAMIC");var i;var Q=false;var ab=null;var A=SiebelApp.Constants;var U=A.get("SWE_ARG_EQUAL");var n=A.get("SWE_PROP_NAME");var J=C.get("DOUIREG_OBJ_NAME");var u=C.get("DOUIREG_OBJ_TYPE");var z=C.get("DOUIREG_OBJ_TYPEBUSCOMP");var N=C.get("DOUIREG_OBJ_MTHD");var ag=C.get("DOUIREG_EXT_TYPE");var o=C.get("DOUIREG_EXT_TYPEOVERRIDE");var a=C.get("DOUIREG_EXT_TYPEPRE");var r=C.get("DOUIREG_EXT_TYPEPOST");var f=C.get("DOUIREG_EXT_CONTEXT");var c=C.get("SWE_ARG_NOT_EQUAL");var x=C.get("SSA_PRIMARY_FIELD");var V=C.get("SAVE_BC_STATE_ALL");var X=C.get("SAVE_BC_STATE_NONE");var Z=C.get("DTYPE_UTCDATETIME");var g="[~]";var D=SiebelApp.OfflineAppSettings;ae.prototype.GetActiveRow=function(){return(e.call(this))};ae.prototype.ProcessObjectInfo=function(aw,av){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ProcessObjectInfo")}if(D.GetMode()){if(!(aw.GetProperty(p))){var aj=A.get("SWE_PST_BUSOBJ_INFO");var al;var at=aw.GetValue();var ak=A.get("SWE_PROP_NAME");var ai=CCFMiscUtil_CreatePropSet();var aq=aw.GetProperty(C.get("STAND_ALONE_INST"));var au=(!ah.IsTrue(aq));this.GetUIState=function(){return au};if(ah.IsTrue(aq)){al=CCFMiscUtil_CreatePropSet();al.SetType(aj);al.SetValue("");al.SetProperty(p,true)}else{al=SiebelApp.S_App.Model.GetDyncPS(aj,false);ai.SetType(aw.GetType());ai.SetValue(at);ai.SetProperty(p,true);ai.SetProperty(p,true);SiebelApp.OfflineUtils.ProcessDPS(ai,aw,[ak],1,true);var ap=A.get("SWE_PST_REC_LIST");var ar=[n];SiebelApp.OfflineUtils.ProcessDPS(ai,aw,ar,1,true);var ao=aw.FindChildPosition(ap);aw.RemoveChild(ao);al.AddChild(ai);SiebelApp.S_App.Model.SetDyncPS([aj],[al],1);if(av){if(at!==this.GetVarName()){this.GetVarName=function(){return at}}var an=aw.GetProperty("pi");if(an){an=an.toString()}if(this.GetParentId()){if(this.GetParentId()!==an){this.GetParentId=function(){return an}}}else{if(an){this.GetParentId=function(){return an}}}var am=aw.GetChildByType(A.get("SWE_PST_FIELD_LIST"));if(am){this.ProcessNFLObjectInfo(am)}return}}this.SetSearchSpec("");this.SetSortSpec("")}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.ProcessObjectInfo")}return(j.ProcessObjectInfo.call(this,aw))};ae.prototype.ProcessNFLObjectInfo=function(am){var aj=SiebelApp.S_App.BCField;var ai=am.EnumChildren(true);do{var al=ai.GetProperty(A.get("SWE_PROP_NAME"));al=SiebelApp.S_App.LookupStringCache(al);if(SiebelApp.OfflineAppSettings.GetMode()===true&&!this.GetDefn().Fields[al]){continue}if(!this.GetFieldMap()[SiebelApp.S_App.LookupStringCache(al)]){var ak=new aj();ak.SetBusComp(this);ak.ProcessObjectInfo(ai);this.AddField(ak)}}while(ai=am.EnumChildren(false))};ae.prototype.GetActFieldList=function(){if(!this.GetExtObjProp("m_mapActFields")){this.SetExtObjProp("m_mapActFields",{})}return(this.GetExtObjProp("m_mapActFields"))};ae.prototype.GetDeActableFieldList=function(){if(!this.GetExtObjProp("m_arDeActableFields")){this.SetExtObjProp("m_arDeActableFields",[])}return(this.GetExtObjProp("m_arDeActableFields"))};function m(){return false}ae.prototype.AddActField=function(ai){var al;var ak=ai;ai=this.GetFieldDefn(ai);if(ai){if(ak){var ao=this.GetFieldMap()[ak];if(ao){ao.SetActivated(true)}else{var aj=SiebelApp.S_App.LookupSCMap(ak);if(aj){al=aj}else{var an=[];an=[ak];var am=CCFMiscUtil_ArrayToString(an);SiebelApp.S_App.AppendToStrCache(am);al=SiebelApp.S_App.LookupSCMap(ak)}this.GetActFieldList()[ak]=al}}}};ae.prototype.InvokeMethodX=function(ai,am){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.InvokeMethodX ")}var al;var aj={};var ak=[];if(!ai){ak.push(ai);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",ak);$.setReturnValue({err:"SSAOMErrUnknownBCMethod",retVal:""});return}aj[J]=this.GetName();aj[u]=z;aj[N]="DoInvokeMethod";aj[f]=this;if(!am){am=CCFMiscUtil_CreatePropSet()}am.SetProperty("MethodName",ai);aj[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(an){if(!an.err){al=an.retVal;if((al.Outputargs)&&(al.Outputargs).GetProperty("Invoked")&&(al.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:an.err,retVal:al.Outputargs});return}if(al.Outputargs&&am){(al.Outputargs).SetType(a);am.AddChild(al.Outputargs)}ac.call(this,ai,am);$.callback(this,function(ap){if(!ap.err){var ao=ap.retVal;if(ao){ak.push(ai);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",ak);$.setReturnValue({err:"SSAOMErrUnknownBCMethod",retVal:""});return}am.SetProperty("RetVal",ao);aj[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){if(!aq.err){if(aq.retVal.Outputargs){$.setReturnValue({err:false,retVal:aq.retVal.Outputargs})}else{$.setReturnValue({err:false,retVal:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.InvokeMethodX ")}}else{$.setReturnValue(aq)}})}else{$.setReturnValue(ap)}})}else{$.setReturnValue(an)}})};ae.prototype.CanInvokeMethodX=function(ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanInvokeMethodX")}var aj={};var al;if(!ai){$.setReturnValue({err:true,retVal:false})}aj[J]=this.GetName();aj[u]=z;aj[N]="DoCanInvokeMethod";aj[ag]=a;aj[f]=this;var am=CCFMiscUtil_CreatePropSet();var ak;am.SetProperty("MethodName",ai);SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(an){err=an.err;if(err){$.setReturnValue({err:err,retVal:al.Outputargs});return}if(!an.err){al=an.retVal;if(al.Outputargs){if((al.Outputargs).GetPropertyAsStr("Invoked")==="true"){$.setReturnValue({err:err,retVal:(al.Outputargs).GetProperty("RetVal").toString()});
return}}aj[ag]=r;if(this.IsNamedMethod(ai)){this.CanInvokeNamedMethod(ai);$.callback(this,function(aq){SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(ar){ak=h.call(this,ar);$.setReturnValue({err:false,retVal:ak})})})}else{if(ai==="RefreshBusComp"){SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){ak=h.call(this,aq);$.setReturnValue({err:false,retVal:ak})})}else{if(ai==="Merge"){var ap;var ao=false;ap=this.GetNumSelected();if(ao||(ap<2)){$.setReturnValue({err:false,retVal:true});return}$.setReturnValue({err:false,retVal:this.CanMergeRecords()})}else{if((ai==="GetFieldLength")||(ai==="GetFieldDataType")||(ai==="MergeRecords")||(ai==="IsFieldReadOnly")||(ai==="CanDeleteRecords")||(ai==="CanInsertRecords")||(ai==="CanMergeRecords")||(ai==="CanUpdateRecords")||(ai==="EnableNotify")||(ai==="EnableHierarchy")||(ai==="IsExecuted")||(ai==="IsFieldActive")||(ai==="UpdateLinks")){SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){ak=h.call(this,aq);$.setReturnValue({err:false,retVal:ak})})}else{SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){al=aq.retVal;ak=h.call(this,aq);$.setReturnValue({err:false,retVal:ak})})}}}}}else{$.setReturnValue(an)}});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanInvokeMethodX")}};function h(ak){var aj=ak.retVal;var ai=false;if(aj.Outputargs){ai=(aj.Outputargs).GetProperty("RetVal").toString();if(ai==="true"){ai=true;return ai}else{return ai}}else{return ai}}ae.prototype.IsNamedMethod=function(ai){return(false)};ae.prototype.CanInvokeNamedMethod=function(ai){return(false)};function ac(ai,ak){if(!ai){$.setReturnValue({err:true,retVal:false});return}var aj={};if(ak.GetProperty("Request")){aj.request=ak.GetProperty("Request").toString()}if(ai==="NewRecord"){this.NewRecord(aj);$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="EditRecord"){this.EditRecord(aj);$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="WriteRecord"){this.WriteRecord();$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="GetQuickPickInfo"){$.setReturnValue({err:false,retVal:false})}if(ai==="AddRecord"){this.OnActionAddRecord();$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="UndoRecord"){this.UndoRecord(aj);$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="RefreshRecord"){this.RefreshRecord();$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ai==="RefreshBusComp"){this.RefreshBusComp();$.callback(this,function(al){if(al.err){$.setReturnValue(al)}else{$.setReturnValue({err:false,retVal:false})}});return}$.setReturnValue({err:false,retVal:true})}ae.prototype.CoreMethod=function(ai){switch(ai){case C.get("DELETERECORD"):case A.get("SWE_GET_PICK_INFO"):case C.get("SWE_POST_CHANGES"):case C.get("DELETERECORD"):case C.get("SWE_CLOSE_APPLET"):case C.get("POSITION_ON_ROW"):case C.get("PICKRECORD"):case C.get("WRITERECORD"):case C.get("NEWRECORD"):case C.get("ADDRECORD"):case C.get("EDIT_FIELD"):case C.get("UNDORECORD"):case C.get("REFRESH_BUSCOMP"):case C.get("REFRESH_RECORD"):return true;default:return false}};function H(ai){switch(ai){case"1":case"2":case"4":case"5":case"14":return"text";case"3":return"phone";case"6":return"number";case"7":return"currency";case"8":return"bool";case"9":return"integer";case"10":return"date";case"11":return"time";case"12":return"datetime";case"13":return"utcdatetime";default:return""}}function d(al){if(al){var ap=this.GetFieldMap()[al];if(!ap){var ak=this.GetFieldDefn(al);if(ak){var am=SiebelApp.S_App.LookupSCMap(al);var an=Object.keys(this.GetFieldMap()).length;var ao=new SiebelApp.S_App.BCField();var aj=CCFMiscUtil_CreatePropSet();aj.SetType(A.get("SWE_PST_FIELD"));aj.SetPropertyStr(A.get("SWE_PROP_NAME"),am);aj.SetPropertyStr(A.get("SWE_PROP_TYPE"),H.call(this,ak.DataType));aj.SetPropertyStr(A.get("SWE_PROP_IS_CALC"),ak.IsCalculated);aj.SetPropertyStr(A.get("SWE_PROP_IS_HIDDEN"),ak.Hidden);if(ak.ReadOnly){aj.SetPropertyStr(A.get("SWE_PROP_IS_READONLY"),ak.ReadOnly)}if(ak.Required){aj.SetPropertyStr(A.get("SWE_PROP_IS_REQ"),ak.Required)}aj.SetPropertyStr(A.get("SWE_PROP_SCALE"),ak.Scale);aj.SetPropertyStr(A.get("SWE_PROP_LENGTH"),ak.OldTextLen);if(ah.IsTrue(ak.ImPostChg)){aj.SetPropertyStr(A.get("SWE_PROP_IS_POST_CHANGES"),ak.ImPostChg)}aj.SetPropertyStr(A.get("CALCEXPR"),ak.CalExpr);aj.SetPropertyStr(A.get("COLUMN_NAME"),ak.ColName);aj.SetPropertyStr(A.get("DISABLE_SEARCH"),ak.DisableSearch);aj.SetPropertyStr(A.get("DISABLE_SORT"),ak.DisableSort);aj.SetPropertyStr(A.get("FORCE_ACTIVE"),ak.ForceActive);aj.SetPropertyStr(A.get("FORCE_CASE"),ak.ForceCase);aj.SetPropertyStr(A.get("LINKNAME"),ak.LinkName);aj.SetPropertyStr(A.get("NOCOPY"),ak.NoCopy);aj.SetPropertyStr(A.get("PICKLISTNAME"),ak.PickListName);aj.SetPropertyStr(A.get("POSTDEFAULT"),ak.PostDefault);aj.SetPropertyStr(A.get("PREDEFAULT"),ak.PreDefault);aj.SetPropertyStr(A.get("PRECISION"),ak.Precision);aj.SetPropertyStr(A.get("VALIDATIONSPEC"),ak.ValidationSpec);aj.SetPropertyStr(A.get("PRECISION"),ak.Precision);aj.SetPropertyStr("fDeps",ak.fDepArray);ao.SetBusComp(this);ao.SetName(am);ao.index=an;ao.ProcessObjectInfo(aj,true);ao.SetActivated(true);this.GetFieldMap()[al]=ao}}else{var ai=ap.IsActivated();if(!(ai)){if(ap){ap.SetActivated(true)}}}}}function aa(ai){if(!this.GetExtObjProp("m_wsActiveRow")){this.SetExtObjProp("m_wsActiveRow",-1)}this.SetExtObjProp("m_wsActiveRow",ai)}function e(){if(ah.IsEmpty(this.GetExtObjProp("m_wsActiveRow"))){this.SetExtObjProp("m_wsActiveRow",-1)}return this.GetExtObjProp("m_wsActiveRow")}this.RemoveAllFields=function(){this.SetExtObjProp("m_mapActFields",{})};ae.prototype.SetActiveRow=function(aj,am){if(am===undefined){am=false}var al;var ak=false;if(e.call(this)>=0&&e.call(this)!==aj){this.FinishRecord();ak=true}if(aj<0||aj>=this.GetWS().length){this.NotifyNewActiveRow();if(!this.GetMultiSelectMode()){this.NotifyNewSelection(true)}this.SetCurrCursor(aj);$.setReturnValue({err:false});return}var ai=function(){var aq=false;var ar=0;var at=this.GetNotifyInfoArray();if(ar<at.length){var ao=at[ar];if(ao&&aj!==-1){var an=ao.GetBegRow();if(aj<an){ao.SetBegRow(aj)}else{if(aj>(an+ao.GetSize()-1)){ao.SetBegRow(aj)}}}}if(aj===this.GetWS().length){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow");this.NotifyNewActiveRow();if(!this.GetMultiSelectMode()){this.NotifyNewSelection(true)}$.setReturnValue({err:"BCErrNoActiveRow"});return}this.SetCurrCursor(aj);aa.call(this,aj);if(!am){this.OnActiveRowChanged()}else{al=this.FindWorkSet(this.GetSelection());if(al){this.FieldValue(A.get("SWE_ROW_ID_FIELD"),al);
aq=true;$.callback(this,function(au){if(retobj.err){$.setreturnValue(au);return}else{var av=au.retVal;this.PositionById(av);$.callback(this,function(aw){if(aw.err){$.setreturnValue(aw);return}else{ap.call(this)}})}})}}var ap=function(){this.NotifyNewActiveRow();if(!am){this.UpdateLinks(false);$.callback(this,function(au){if(!au.err){if(!this.GetMultiSelectMode()){this.NotifyNewSelection(true)}$.setReturnValue({err:false})}else{$.setReturnValue(au)}})}else{$.setReturnValue({err:false})}};if(!aq){ap.call(this)}};if(ak){$.callback(this,function(an){if(an.err){$.setReturnValue(an)}else{ai.call(this)}})}else{ai.call(this)}};ae.prototype.GetBusCompType=function(){return I};ae.prototype.SetBusCompType=function(ai){I=ai};ae.prototype.SetCurrCursor=function(ai){var ak=W.GetActiveRequestObj();if(ak&&ak.SweCommands&&ak.SweCommands.SWEMethod&&this.IsPagination(ak.SweCommands.SWEMethod)){var al=this.GetCursor();var aj=this.GetScrollCount();if(ai<0){ai=this.GetActiveRow()}if(aj){al[0]=aj+ai}else{al[0]=ai}this.SetCursor(al)}};ae.prototype.PositionById=function(ai){if(D.GetMode()===true){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PositionById")}var al=false;var ak=false;var ap=ai;var aj=-1;var an;var am;var ao=this.GetWS().length;if(this.IsExecuted()){this.FinishRecord();$.callback(this,function(au){if(au.err){$.setReturnValue(au)}else{var aq=0;var at=false;an=this.FindWorkSet(aq);this.FieldValue(A.get("SWE_ROW_ID_FIELD"),an);var ar=function(av){am=av.retVal;if(am===ap){aj=aq;al=true;at=true}aq++;if(!at&&aq<ao){an=this.FindWorkSet(aq);this.FieldValue(A.get("SWE_ROW_ID_FIELD"),an);$.callback(this,ar)}};$.callback(this,ar);$.callback(this,function(){if(aj===-1){aa.call(this,-1);O.call(this,ai);$.callback(this,function(av){if(!av.err){an=av.retVal;this.InsertWorkSet(0,an);$.callback(this,function(){y.call(this,al,ak);$.callback(this,function(aw){$.setReturnValue(aw)})})}else{$.setReturnValue(av);return}})}else{ak=true;an=null;this.SetActiveRow(aj);$.callback(this,function(av){if(!av.err){y.call(this,al,ak);$.callback(this,function(aw){$.setReturnValue(aw)})}else{$.setReturnValue(av)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ")}})}})}})}}else{return(j.PositionById.call(ai))}};function y(aj,ai){if(!aj){w.call(this);$.callback(this,function(ak){if(ak.err){$.setReturnValue({err:true});return}})}$.callback(this,function(ak){if(!ak.err){if(!ai){this.UpdateLinks(false);$.callback(this,function(al){$.setReturnValue(al)})}else{$.setReturnValue({err:false})}}})}function w(){var aj=this.GetWS().length;var ai=this.GetWorkSetSize();var al=0;aa.call(this,-1);var am;var ak=false;$.callback(this,function(){var an=function(){this.GetNextRecord();$.callback(this,function(ao){am=ao.retVal;ak=ao.err;this.InsertWorkSet(aj,am);aj++;if(aj<this.GetWorkSetSize()&&!ak){an.call(this)}})};if(aj<this.GetWorkSetSize()){an.call(this)}$.callback(this,function(aq){if(ak){aj--;this.DeleteWorkSet(aj);ak=false}var ao=this.GetWS().length;if(ao>0&&ao<this.GetWorkSetSize()){var ar=this.FindWorkSet(0,ar);if(ar){var ap=function(){al++;this.GetPriorRecord(ar);$.callback(this,function(au){ar=au.retVal;var at=au.err;this.InsertWorkSet(0,ar);if(this.GetWS().length<this.GetWorkSetSize()&&!at){ap.call(this)}})};if(ao<this.GetWorkSetSize()){ap.call(this)}}$.callback(this,function(){if(ak){al--;this.DeleteWorkSet(0)}})}$.callback(this,function(){this.SetActiveRow((this.GetWS().length>0)?al:-1);$.callback(this,function(){var aw=this.GetNotifyInfoArray();var at=aw.length;for(var au=0;au<at;au++){pni=aw[au];if(pni){var av=this.GetActiveRow();if(av===-1||av===0||(this.GetWS().length<pni.GetSize())){pni.SetBegRow(0)}else{if((av+pni.GetSize())<=this.GetWS().length){pni.SetBegRow(av)}else{pni.SetBegRow(this.GetWS().length-pni.GetSize())}}pni.SetCurrRow(pni.GetBegRow())}}this.NotifyNewData()})})})})}function O(ai){var ak=this.GetActivatedFieldList();var an=ak.length;var ar=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var ap=[];var am=0;for(var aq=0;aq<an;aq++){var aj=ak[aq];aj=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aj);if(G.DoesFieldExist(ar,aj)){ap[am]=aj;am++}}var al={};al.FieldName=A.get("SWE_ROW_ID_FIELD");al.Oper=A.get("SWE_ARG_EQUAL");al.Val=ai;var ao=SiebelApp.SqlBuilder.SelectRecord(ar,[al],ap);G.SelectRecord(ao,true);$.callback(this,function(at){if(at.err){$.setReturnValue(at)}else{$.setReturnValue({err:false,retVal:(at.retVal)[0]})}})}ae.prototype.SetFullSearchSpec=function(aj){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetSearchSpec ")}var ai=null;if(!ah.IsEmpty(this.GetSearchSpec())||!ah.IsEmpty(this.GetDefn().searchSpec)){ai=ah.IsEmpty(this.GetDefn().searchSpec)?"":this.GetDefn().searchSpec;if(ah.IsEmpty(this.GetDefn().searchSpec)){ai+=this.GetSearchSpec();ai=SiebelApp.Query.GetSearchSpec(ai,this)}else{var ak=this.GetSearchSpec();ai=SiebelApp.Query.GetSearchSpec(ai,this);if(!ah.IsEmpty(ak)){ak=SiebelApp.Query.GetSearchSpec(this.GetSearchSpec(),this);if(!ah.IsEmpty(ai)){ai=[ai];ai.push(ak)}else{if(!ah.IsEmpty(ak)){ai=ak}}}}}return((ah.IsEmpty(ai))?[]:ai)};ae.prototype.SetFldSearchSpec=function(ak,ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFldSearchSpec ")}var am;var al="";var aj;if((ak===C.get("SSA_PRIMARY_FIELD"))&&this.GetLinkDef()&&(!ah.IsEmpty(this.GetLinkDef().primeIdFieldName))&&this.GetParentBusComp()){if(!ah.IsEmpty(ai)){if(ai==="Y"){am=U}else{am=c}if(!ah.IsEmpty(am)){ak=A.get("SWE_ROW_ID_FIELD");this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName);$.callback(this,function(){am+=al;ai=am;aj=this.GetFieldMap()[ak];if(aj){if(!ah.IsEmpty(ai)){aj.SetSearchSpec(ai)}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFldSearchSpec ")}})}}}else{aj=this.GetFieldMap()[ak];if(aj){aj.SetSearchSpec(ai)}}this.NotifyNewQuerySpec(ak)};ae.prototype.GetFldSearchSpec=function(ai){var aj=(this.GetFieldMap())[ai];if(aj){return(aj.GetSearchSpec())}};ae.prototype.GetSearchExpr=function(){return(this.GetSearchSpec())};ae.prototype.SetSearchExpr=function(ai){this.SetSearchSpec(ai)};ae.prototype.NotifyNewQuerySpec=function(ak){var al;if(this.IsNotifyEnabled()){var an=this.GetNotifyInfoArray();var ai=an.length;for(var aj=0;aj<ai;aj++){al=an[aj];if(al){var am=al.GetBusCompNotify();if(am){am.NotifyNewQuerySpec(ak)}}}}};ae.prototype.EmptyWorkSet=function(){var ai=this.GetWS();for(var aj=(ai.length-1);aj>=0;aj--){this.DeleteWorkSet(aj)}};ae.prototype.SetSortSpecification=function(){var am=this.GetDefn().SortSpec;if(ah.IsEmpty(am)){return[]}am=am.split(",");var al;var ai;var ak;for(var aj=0;aj<am.length;aj++){al="";if(am[aj].indexOf("(")!==-1){al=am[aj].substr(0,am[aj].indexOf("(")).trim()}else{al=am[aj].trim()}if(this.GetDefn().Fields[al].DataType==="10"||this.GetDefn().Fields[al].DataType==="12"||this.GetDefn().Fields[al].DataType==="13"){ai=al.replace(/\s+/g,"");ak="";ak=this.DateFormatConverter(ak,ai);
am[aj]=am[aj].replace(al,ak);am[aj]=am[aj].trim()}else{am[aj]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(am[aj])}am[aj]=am[aj].replace("(DESCENDING)"," DESC");am[aj]=am[aj].replace("DESCENDING"," DESC");am[aj]=am[aj].replace("DESC"," DESC");am[aj]=am[aj].replace("(ASCENDING)"," ASC");am[aj]=am[aj].replace("ASCENDING"," ASC");am[aj]=am[aj].replace("ASC"," ASC")}return am};ae.prototype.DateFormatConverter=function(al,aj){var ak="substr("+aj+",7,4)||substr("+aj+",1,2)||substr("+aj+",4,2)||substr("+aj+",12,2)||substr("+aj+",15,2)||substr("+aj+",18,2)";var ai="substr("+aj+",7,4)||substr("+aj+",4,2)||substr("+aj+",1,2)||substr("+aj+",12,2)||substr("+aj+",15,2)||substr("+aj+",18,2)";var am="substr("+aj+",1,4)||substr("+aj+",6,2)||substr("+aj+",9,2)||substr("+aj+",12,2)||substr("+aj+",15,2)||substr("+aj+",18,2)";switch(SiebelApp.S_App.LocaleObject.GetDateFormat().toUpperCase()){case"M/D/YYYY":return ak;case"DD/MM/YYYY":return ai;case"YYYY/M/D":return am;case"D.M.YYYY":return ai;case"DD-MM-YYYY":return ai;case"DD.MM.YYYY":return ai;case"D/M/YYYY":return ai;case"DD/MM/YYYY":return ai;case"D.M.YYYY":return ai;case"D/MM/YYYY":return ai;case"YYYY/MM/DD":return am;case"yyyy-MM-dd":return am;case"D-M-YYYY":return ai;case"DD.MM.YY":return ai}return al};ae.prototype.WSHomeX=function(ak,ai){var al=this.GetNotifyInfoArray();var aj=al[ak];if(ak>=al.length||ah.IsEmpty(aj)){return}aj.SetCurrRow(aj.GetBegRow(ai),ai);this.CheckActiveRow()};ae.prototype.SetWorkSetSizeX=function(aF,ai,aj,aA){var aB=this.IsNotifyEnabled();var aq=false;var av=e.call(this);var aD=this.GetNotifyInfoArray();var ao=aD[aF];var ax=null;var aw=aD.length;var ap=0;var aC=-1;var ay=false;var aE;var au;var ar=this.GetCursor();var at=this.GetWorkSetSize();aj=(aj===undefined)?true:aj;if(aF>=aw||aD[aF]===null){alert("SSAOMErrNotifyInfo");if(!aj&&aB){this.EnableNotify()}return}if(!aj&&aB){this.DisableNotify()}aq=this.CheckActivation();if(ai>at){if(av!==-1){aE=this.FindWorkSet(this.GetWS().length-1)}var an=ar[0];var az=this.GetPrevActiveRow();if(az<=0){if(ar[0]>=(C.get("PAGE_SIZE")-1)){az=C.get("PAGE_SIZE")-1}else{az=ar[0]-1}}if(az>0){var am=this.GetRecordCount();if(an<0){an=0}var al=this.GetScrollCount();if(am>0&&(am-al)<=C.get("PAGE_SIZE")){ar[0]=am-C.get("PAGE_SIZE");if(ar[0]<0){ar[0]=0}ar[0]--;this.SetCursor(ar);this.DeleteWorkSet(this.GetWS().length-1);this.SetScrollCount(ar[0]+1)}else{if(am>0){al=al+az;if((am-al)<=C.get("PAGE_SIZE")){al=am-C.get("PAGE_SIZE");ar[0]=al-1;this.SetCursor(ar);this.DeleteWorkSet(this.GetWS().length-1)}this.SetScrollCount(al)}}}var ak=function(){this.GetNextRecord();$.callback(this,function(aH){aE=aH.retVal;var aG=aH.err;this.InsertWorkSet(this.GetWS().length,aE);if(aH.err||!aE){this.DeleteWorkSet(this.GetWS().length-1)}if(e.call(this)!==-1&&!aG&&this.GetWS().length<ai){ak.call(this)}})};if(av!==-1&&this.GetWS().length<ai){ak.call(this)}$.callback(this,function(){if(an!==undefined){ar[0]=an;this.SetCursor(ar)}av=e.call(this);if(av!==-1&&this.GetWS().length>0&&this.GetWS().length<ai){aE=this.FindWorkSet(0);if(au){this.SetActiveRow(av+au);$.callback(this,function(){av=e.call(this);ay=true})}}$.callback(this,function(){ao.SetSize(ai);this.SetWSSize(ai);at=ai})})}else{if(ai<at&&ao.GetSize()===at){ao.SetSize(ai);ap=0;for(aC=0;aC<aw;aC++){ax=aD[aC];if(ax){if(ax.GetSize()>ap){ap=ax.GetSize()}}}}else{ap=at}if(ap<at){while(this.GetWS().length>av+1&&this.GetWS().length>ap){this.DeleteWorkSet(this.GetWS().length-1)}while(this.GetWS().length>ap){this.DeleteWorkSet(0)}if(ap<=av){aa.call(this,this.GetWS().length-1);av=e.call(this);ay=true}this.SetWSSize(ap);at=ap;ao.SetBegRow(0,aA);ao.SetCurrRow(0,aA);ao.SetSize(ai);if(this.IsNotifyEnabled()&&ao.GetBusCompNotify()){ao.GetBusCompNotify().NotifyNewData()}}else{ao.SetSize(ai)}}$.callback(this,function(){for(aC=0;aC<aw;aC++){var aG=false;ax=aD[aC];if(!ax){continue}if(av!==-1&&(av<ax.GetBegRow()||av>=(ax.GetBegRow()+ax.GetSize()))){if(this.GetWS().length<ax.GetSize()){ax.SetBegRow(0)}else{if(av+ax.GetSize()<=this.GetWS().length){ax.SetBegRow(av)}else{ax.SetBegRow(this.GetWS().length-ax.GetSize())}}ax.SetCurrRow(ax.GetBegRow());aG=true}if((ax.GetBegRow()+ax.GetSize()>at)&&(at>=ax.GetSize())){ax.SetBegRow(at-ax.GetSize());ax.SetCurrRow(ax.GetBegRow());aG=true}if(ax.GetBusCompNotify()&&!aq&&(aj?true:ao!==ax)){if(aG){ax.GetBusCompNotify().NotifyNewData()}else{if(ay){ax.GetBusCompNotify().NotifyNewActiveRow()}}}}if(av!==-1){aE=this.FindWorkSet(av)}if(ay){this.OnActiveRowChanged()}if(!aj&&aB){this.EnableNotify()}})};ae.prototype.AddReference=function(){this.AddRef();this.GetRef()};ae.prototype.EndLife=function(){if(!SiebelApp.OfflineAppSettings.GetMode()){return j.EndLife.call(this)}var al=this.GetNotifyInfoArray();var ai=this.GetNotifyInfoArray().length;for(var ak=0;ak<ai;ak++){var aj=al[ak];if(aj){this.UnRegNotifyObj(ak)}}this.ResetNotifyArr();this.ResetInterface();j.EndLife.call(this)};ae.prototype.UnRegNotifyObj=function(al){var ai;var ak=this.GetNotifyInfoArray();if(al<ak.length){ai=ak[al];if(ai){var aj=ai.GetBusCompNotify();if(aj){aj.Remove(this,al)}ai=null}ak.splice(al,1)}};ae.prototype.RegNotifyObj=function(ai){var ak;var al;ak=new SiebelApp.S_App.NotifyInfo();ak.SetBusCompNotify(ai);var aj=this.GetActiveRow();if(aj>=0){ak.SetBegRow(0);ak.SetCurrRow(aj)}ak.SetSize(this.GetWorkSetSize());al=this.GetNotifyInfoArray().length;this.AddNotifyInfoArray(ak);if(ai){ai.Add(this,al)}return al};ae.prototype.DeactivateFields=function(){var am=this.GetDeActableFieldList();var ai=am.length;var al=this.GetActFieldList();var ak=this.GetActivatedFieldList();var ao=this.GetFieldMap();var aj=this.GetFieldList();for(var an=0;an<ai;an++){if(al[am[an]]){aj.splice(aj.indexOf(al[am[an]]),1);delete al[am[an]]}if(ak.indexOf(am[an])!==-1){ak.splice(ak.indexOf(am[an]),1)}if(ao[am[an]]){delete ao[am[an]]}}};ae.prototype.UpdateDeactivateableFldList=function(ak){var aj=this.GetDeActableFieldList();if(ak){var ai=ak.length;var am=this.GetFieldMap();for(var al=0;al<ai;al++){if(aj.indexOf(ak[al])===-1&&!am[ak[al]]){aj.push(ak[al])}}}};ae.prototype.ActivateFields=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ActivateFields ")}var ak=this.GetSearchSpec();var av=[];var am=[];var aq=this.GetSortSpec();var aD=[];var ai=[];var al=[];var an=[];var at=[];var ao=[];var aj=[];var ay=0;var az={};var aw=[];if(!this.IsBCFldsActivated()){this.SetBCFldsActivated(true);if(ah.IsTrue(this.GetDefn().ForceActive)){var ar=this.GetDefn().Fields;for(var aC in ar){if(ar[aC]){aD[ay++]=aC}}this.ActivateFieldList(aD)}else{al=this.GetFieldList();aD=al;var aA=aD.length;if(aA>0){for(var ax=0;ax<aA;ax++){ai[ax]=SiebelApp.S_App.LookupStringCache(aD[ax])}this.ActivateFieldList(ai)}at=SiebelApp.S_App.Model.GetSystemFields();if(at){this.ActivateFieldList(at)}var ap=this.GetReqFieldsHasDefault();if(ap){this.ActivateFieldList(ap)}if(ao){this.ActivateFieldList(ao)}aj=this.GetAdminFields();if(aj.length>0){this.ActivateFieldList(aj)}var au=this.GetLinkDef();if(au){if(au.primeIdFieldName){this.ActivateField(au.primeIdFieldName)
}}ay=0;az=this.GetDefn();for(var aB in az.Fields){if(ah.IsTrue(az.Fields[aB].ForceActive)){aw[ay++]=aB}}if(aw.length>0){this.ActivateFieldList(aw)}}}};ae.prototype.ActivateField=function(ai){var aj=[];if(ai instanceof Array){this.ActivateFieldList(ai)}else{aj=[ai];this.ActivateFieldList(aj)}};ae.prototype.ActivateFieldList=function(am,au){if(am){var az=am.length;if(az>0){for(var ay=0;ay<az;ay++){var ak=am[ay];var aw=this.GetFieldDefn(ak);if(aw){if(!(this.GetFieldMap()[ak])){this.AddActField(ak)}else{var aB=this.GetFieldMap()[ak].IsActivated();if(!(aB)){this.AddActField(ak)}}if(!au){var at=aw.pickMap;if(at){var ax=aw.pickMap.length;var aD=[];for(var ar=0;ar<ax;ar++){if([at[ar].FldName][0]!==ak){aD=aD.concat([at[ar].FldName])}}this.ActivateFieldList(aD,true)}}if(aw.IsCalculated){var an=aw.CalExpr;if(!ah.IsEmpty(an)){var al=SiebelApp.Query.GetFieldsFromExp("Calc",an);if(al){if(al.indexOf(ak)!==-1){al.splice(al.indexOf(ak),1)}this.ActivateFieldList(al)}}}var ao=aw.PreDefault;if(!ah.IsEmpty(ao)){var aG=SiebelApp.Query.GetFieldsFromExp("Pre",ao);if(aG[0]!==undefined){if(aG[0]!==ak&&(this.GetActivatedFieldList().indexOf(aG[0])===-1)){this.ActivateFieldList(aG)}}}var aj=aw.PostDefault;if(!ah.IsEmpty(aj)){var aA=SiebelApp.Query.GetFieldsFromExp("Post",aj);if(aA[0]!==undefined){if(aA[0]!==ak&&(this.GetActivatedFieldList().indexOf(aA[0])===-1)){this.ActivateFieldList(aA)}}}if(aw.bDepArray.length>0){var aF=[];for(var aE=0;aE<aw.bDepArray.length;aE++){if((this.GetActivatedFieldList().indexOf(aw.bDepArray[aE])===-1)&&aw.bDepArray[aE]!==ak){aF.push(aw.bDepArray[aE])}}if(aF.length>0){this.ActivateFieldList(aF)}}if(aw.fDepArray.length>0){var aq=[];for(var aC=0;aC<aw.fDepArray.length;aC++){if((this.GetActivatedFieldList().indexOf(aw.fDepArray[aC])===-1)&&(aw.fDepArray[aC]!==ak)){aq.push(aw.fDepArray[aC])}}if(aq.length>0){this.ActivateFieldList(aq)}}}}}var ai=this.GetActFieldList();var av=this.GetFieldList();for(var ap in ai){if(ai[ap]){if(av.indexOf(ai[ap])===-1){av.push(ai[ap])}d.call(this,ap)}}}};ae.prototype.ExprParser=function(ai){};ae.prototype.GetAdminFields=function(ai){var aj=[];return aj};ae.prototype.InterpolateBCState=function(ai){E.call(this);$.callback(this,function(ak){var aj=ak.retVal;ai.AddChild(aj)})};ae.prototype.CanWriteRecord=function(){};ae.prototype.CanUpdateRecord=function(){};ae.prototype.CanAssociate=function(){return true};ae.prototype.CanQuery=function(){return true};ae.prototype.CanMergeRecords=function(){return true};ae.prototype.CanDelete=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanDelete ")}var ai=false;var al;var aj=false,ak=false;if(this.GetAspectBCReadFld()){this.FieldValue(this.GetAspectBCReadFld());$.callback(this,function(an){al=an.retVal;if(al){if(al==="Y"){$.setReturnValue({err:false,retVal:false});var am=true;return}}})}$.callback(this,function(){if(!aj){if(!this.CheckActiveRow()){$.setReturnValue({err:false,retVal:false});return}if(this.IsNewRecordPending()){$.setReturnValue({err:false,retVal:true});return}var at=this.GetLinkDef();var ar=e.call(this);if(!this.IsNewRecordPending()){if(!this.IsLocked()){$.setReturnValue({err:false,retVal:false});return}if((this.GetAdminMode()&&this.m_bAdminNoDelete)){if(!at||at.interTableName||at.InterChildDelete){$.setReturnValue({err:false,retVal:false});return}}if(this.GetFldNoDelete()){var ap;var aq=null;aq=this.FindWorkSet(ar);this.FieldValue(aq,this.GetFldNoDelete());ak=true;$.callback(this,function(aw){if(aw.err){$.setReturnValue(aw)}else{var av=aw.retVal;if(av==="Y"&&(!at||at.interTableName)){$.setReturnValue({err:false,retVal:false});return}}})}}if(!ak){if(!this.IsExecuted()||ar<0){$.setReturnValue({err:false,retVal:ai});return}if(!this.GetAdminMode()&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){$.setReturnValue({err:false,retVal:ai});return}var an=this.GetParentBusComp();if(this.m_busCompType===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var ao=SiebelApp.S_App.Applet.ActiveControl().GetPickApplet();var am=SiebelApp.Metadata.GetPickListDef(ao);ai=(!(am.NoDelete())&&!an.IsInQueryState());$.setReturnValue({err:false,retVal:ai});return}var au=this.GetLinkSrcFieldName();if(an&&au&&au==="Id"){if(m.call(an,this.GetName())){$.setReturnValue({err:false,retVal:ai});return}}if((at&&at.NoDelete)){ai=this.GetAdminMode()&&!at.interTableName&&!at.NoInterDelete}else{ai=true}if(ai){ai=this.GetAdminMode()||!(this.GetDefn().NoUpdate)||(at&&!at.interTableName)}if(!ai||this.GetAdminMode()){$.setReturnValue({err:false,retVal:ai});return}if(at&&at.interTableName&&!at.NoInterDelete){$.setReturnValue({err:false,retVal:ai});return}if(this.GetDefn().OwnerDel){$.setReturnValue({err:"",retVal:false});return}else{$.setReturnValue({err:false,retVal:ai});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanDelete ")}}}}})};ae.prototype.IsLocked=function(){return true};ae.prototype.CanDeleteX=function(){return true};ae.prototype.CanDeferDelete=function(){return false};ae.prototype.HasAssocList=function(){return false};ae.prototype.CanUpdateField=function(ap){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateField ")}var aj;var ao;var an;var am;var al;var ak=false;if(this.CanInsert()&&this.IsInsertPending()){am=true}else{this.CanUpdateX(true);$.callback(this,function(aq){am=aq.retVal})}var ai=function(){if(!am){$.setReturnValue({err:false,retVal:false});return}aj=this.GetFieldMap()[ap];if(!aj){$.setReturnValue({err:false,retVal:am});return}this.IsFieldReadOnly(aj);$.callback(this,function(aq){if(aq.retVal){am=false;$.setReturnValue({err:false,retVal:am});return}else{$.setReturnValue({err:false,retVal:am});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateField ")}}})};$.callback(this,function(){ai.call(this)})};ae.prototype.FinishRecord=function(){};ae.prototype.CheckActiveRow=function(){var ai=e.call(this);if(ai>=0){return(true)}else{return(false)}};ae.prototype.UndoRecord=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UndoRecord ")}if(D.GetMode()===true){var ai;this.GetIdValueX();this.SetNewTxn("");this.SetTxnId("");this.SetEmptyFNm();this.SetOpType("");$.callback(this,function(ak){if(!ak.err){var am=ak.retVal;if(!this.IsCommitPending()&&!this.IsDeletePending()){return}if(this.IsDeletePending()){this.WriteRecord();$.callback(this,function(an){this.ClearUpdate();$.setReturnValue(an)});return}if(this.IsInsertPending()){this.DeleteRecordX(am);$.callback(this,function(an){$.setReturnValue(an);return})}var aj=function(){var an=this.GetOrigRecVal();if(an){var ap=this.GetWS();var ao=this.GetActiveRow();if(ap&&ap[ao].Id===an.Id){ap[ao]=an}this.SetOrigRecVal("")}this.SetCommitPending(false);this.SetNewRecPending(false);this.OnActiveRowChanged();this.EventChangeRecord();this.NotifyNewRecordData()};var al;al=this.GetParentBusComp();if(al&&al.IsInsertPending()){al.UndoRecord();$.callback(this,aj)
}else{aj.call(this)}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UndoRecord ")}})}else{return(j.UndoRecord.call(this))}};ae.prototype.FindWorkSet=function(ak){var aj={};var ai=this.GetWS();if(ak<ai.length){aj=ai[ak]}else{aj=null}return aj};ae.prototype.SQLUpdateRecord=function(){};ae.prototype.SQLCommitPending=function(){};ae.prototype.FieldValue=function(an,am){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.FieldValue")}var al=CCFMiscUtil_CreatePropSet();al.SetProperty("inputParam1",an);var ai={};ai[J]=this.GetName();ai[u]=z;ai[N]="FieldValue";ai[f]=this;al.SetProperty("FieldName",an);al.SetProperty("inputParam2",am);var ak={};var aj=[];ai[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,al);$.callback(this,function(av){if(!av.err){ak=av.retVal;if(ak.Outputargs&&(ak.Outputargs).GetProperty("Invoked")&&(ak.Outputargs).GetProperty("Invoked").toString()==="true"){var aC=(ak.Outputargs).GetProperty("RetVal");if(aC){$.setReturnValue({err:err,retVal:aC})}else{$.setReturnValue({err:err,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")}return}if(ak.Outputargs&&al){(ak.Outputargs).SetType(a);al.AddChild(ak.Outputargs)}var ar=null;if(!am&&this.CheckActiveRow()){var at=e.call(this);am=this.FindWorkSet(at)}if(am){var aB=false;var aq=an;var aA={};aA=this.GetFieldMap()[aq];if(aA){if(this.IsActiveFieldListDirty()&&!this.IsInsertPending()&&!aA.IsCalc()&&!(aA.IsSystemField())&&this.GetDefn().Dstnct){aB=true}}else{if(this.IsActiveFieldListDirty()&&!this.IsInsertPending()){aB=true}}if(!aB){if(an==="SSA Primary Field"){if(!this.GetLinkDef()||this.GetLinkDef().primeIdFieldName===null){ar=null}else{var au;var ap=function(){this.FieldValue(A.get("SWE_ROW_ID_FIELD"),am);$.callback(this,function(aE){var aD=aE.retVal;ar=(aD===au)?"Y":"N"})};if(this.GetParentBusComp()){this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName);$.callback(this,function(aD){au=aD.retVal;ap.call(this)})}else{ap.call(this)}}}else{var ao;var az=null;var ay;if(!am){if(ab){var ax;az=this.GetFieldDefn(A.get("SWE_ROW_ID_FIELD"));this.FieldValue(az.GetName());$.callback(this,function(aE){var aD=aE.retVal;this.FieldValue(A.get("SWE_ROW_ID_FIELD"),ab);$.callback(this,function(aF){var aG=aF.retVal;if(aD===aG){am=ab}})})}}$.callback(this,function(){if(!aA||aA.IsInactive(1)){aj.push(an);aj.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",aj);$.setReturnValue({err:"SSAOMErrFieldInActive",retVal:""});return}if(am){ar=am[SiebelApp.OfflineUtils.RemoveNonAlphaChars(an)]}if(!ar){if(aA.IsCalc()&&this.GetFieldDefn(an).CalExpr){if(!this.GetFieldDefn(an).CalcQuery){var aD=SiebelApp.Query.Parse(this.GetFieldDefn(an).CalExpr);this.GetFieldDefn(an).CalcQuery=aD}ar=SiebelApp.Query.Evaluate(this.GetFieldDefn(an).CalcQuery,this,null,am);if(am&&an==="SSA Primary Field"){am[SiebelApp.OfflineUtils.RemoveNonAlphaChars(an)]=ar}else{if(!am){this.GetFieldValue(an)}}}}})}}else{aj.push(an);aj.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",aj);$.setReturnValue({err:"SSAOMErrFieldInActive",retVal:""});return}}else{SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow");if(!ah.IsEmpty(an)&&!ah.IsEmpty(this.GetFieldDefn(an))){ar=SiebelApp.Query.Parse(this.GetFieldDefn(an).CalExpr,am)}$.setReturnValue({err:true,retVal:""});return}var aw=function(){ai[ag]=r;al.SetProperty("RetVal",ar);SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,al);$.callback(this,function(aD){if(aD.retVal.HasExt){if(!aD.retVal){ar=aD.retVal.OutputArgs}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")}}else{if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")}}$.setReturnValue({err:false,retVal:ar})})};$.callback(this,aw)}else{$.setReturnValue(av)}})};ae.prototype.IsInInsertMode=function(){return true};ae.prototype.Evaluate=function(al,ak,aj,ai){return true};ae.prototype.IsActiveFieldListDirty=function(){var ai=this.GetExtObjProp("m_bActiveFieldListDirty");if(!ai){this.SetExtObjProp("m_bActiveFieldListDirty",true)}return(this.GetExtObjProp("m_bActiveFieldListDirty"))};ae.prototype.SetActiveFieldListDirty=function(ai){this.SetExtObjProp("m_bActiveFieldListDirty",ai)};ae.prototype.SetFieldValueX=function(au,ak,ar,ai,al){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFieldValueX")}if(!this.GetFieldDefn(au)){SiebelJS.Log("SetFieldValue: Could not find definition of field "+au+" in "+this.GetName());return}if(ar===undefined||ar===null){ar=false}if(ai===undefined||ai===null){ai=false}if(al===undefined||al===null){al=false}var aq;var an=CCFMiscUtil_CreatePropSet();var am={};var ap=[];an.SetProperty("inputParam1",au);an.SetProperty("inputParam2",ak);an.SetProperty("inputParam3",ar);an.SetProperty("inputParam4",ai);an.SetProperty("inputParam5",al);am[J]=this.GetName();am[u]=z;am[N]="SetFieldValue";am[f]=this;var at=null;var ao=false;var aj=null;am[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(am,an);$.callback(this,function(aw){if(!aw.err){aq=aw.retVal;if(aq.Outputargs){if((aq.Outputargs).GetPropertyAsStr("Invoked")==="true"){$.setReturnValue({err:err,retVal:aq.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX")}return}(aq.Outputargs).SetType(a);an.AddChild(aq.Outputargs)}if(!this.CheckActiveRow()){L.call(this,au);$.setReturnValue({err:true,retVal:false});return}at=this.ValidateFieldDef(au);if(!at){L.call(this,au);$.setReturnValue({err:true,retVal:false});return}var av=this.GetFieldMap()[au];if(av.IsInactive(1)){$.setReturnValue({err:false,retVal:false});T.call(this,ao,au);return}if(!ah.IsEmpty(ak)){aj=$.trim(ak);ak=aj}else{aj=""}if(!av.IsCalc()&&!ar&&!ah.IsEmpty(aj)){if(aj.length>av.GetLength()){ap.push(au);ap.push(av.GetLength());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrDataTooLong",ap);L.call(this,au);$.setReturnValue({err:"SSAOMErrDataTooLong",retVal:false});return}}this.FieldValue(au);$.callback(this,function(ay){if(!ay.err){var ax=ay.retVal;if(!av.AreValuesEqual(ak,ax)){T.call(this,ao,au);$.setReturnValue({err:false,retVal:false});return}if(!ar){if(this.IsFieldReadOnly(av)){ap.push(au);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",ap);L.call(this,au);$.setReturnValue({err:"SSASqlErrFieldReadOnly",retVal:false});return}this.ValidatePickValue(au,aj);$.callback(this,function(az){if(az.err){L.call(this,au);$.setReturnValue(az);return}ao=az.retVal;if(ao){t.call(this,au,ak);$.callback(this,function(aA){T.call(this,ao,au)});return}ao=this.ValidateAssocValue(au,aj);if(ao){T.call(this,ao,au);$.setReturnValue({err:false,retVal:false});return}if(this.IsDeletePending()){this.WriteRecord()}$.callback(this,function(){var aD;var aC;var aF=null;var aB=[];if(au==="SSA Primary Field"){aF=this.GetLinkDef();aC=aF.primeIdFieldName;
if(aF===null||ah.IsEmpty(aC)){ap.push(au);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",ap);L.call(this,ao,au);$.setReturnValue({err:"BCErrNoSuchField",retVal:false});return}this.GetIdValueX();$.callback(this,function(aH){if(!aH.err){aD=aH.retVal;var aG=this.GetParentBusComp();if(!aG.IsCommitPending()){aG.UpdateRecordX();$.callback(this,function(){commitParentPrimary=true})}$.callback(this,function(){aG.SetFieldValueX(aC,aD,false,true)})}})}else{var aA=this.GetFieldMap()[au];if(aA){if(!aA.IsSystemField()&&!aA.IsCalc()&&(aA.GetTableName()==="m_pSqlBCDef_m_tableName")){var aE;this.FieldValue(au);$.callback(this,function(aG){if(!aG.err){aE=aG.retVal;if(!aE||(ak!==aE)){this.SetUpdated(ab)}}})}}$.callback(this,function(){bDeferFieldValidations=!aA.IsConstrainingField()&&!aA.IsPostChanges();aB.push(aA);if(aA.IsCalc()&&!ah.IsEmpty(aA.GetCalcExpr())&&!ah.IsEmpty(aA.GetPickList())){ap.push(au);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",ap);$.setReturnValue({err:"SSASqlErrFieldReadOnly",retVal:false});return}t.call(this,au,ak);$.callback(this,function(aH){var aG=aH.retVal;M.call(this,au,aG)})})}})})}else{t.call(this,au,ak);$.callback(this,function(az){})}$.callback(this,function(){this.OnSetFieldValue(au);T.call(this,ao,au);am[ag]=r;an.SetProperty("RetVal",true);SiebelApp.S_App.Model.InvokeRegisteredSvc(am,an);$.callback(this,function(az){if(!az.err){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX ")}$.setReturnValue({err:false,retVal:true});return}})})}else{$.setReturnValue(ay)}})}else{$.setReturnValue(aw)}})};function t(al,ak){var aj=this.GetFieldMap()[al].GetName();var at;var az=this.GetFieldList();var ax=this.GetWS();var ar=e.call(this);var an={};for(var av=0;av<az.length;av++){at=az[av];var ay=SiebelApp.S_App.LookupStringCache(at);an[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ay)]=ax[ar][SiebelApp.OfflineUtils.RemoveNonAlphaChars(ay)]}for(var am=0;am<az.length;am++){at=az[am];var ao=SiebelApp.S_App.LookupStringCache(at);var aw;an[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ao)]=ax[ar][SiebelApp.OfflineUtils.RemoveNonAlphaChars(ao)];aj=aj.toString();if(aj===at.toString()){aw=an[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ao)];if(ah.IsEmpty(aw)){aw=""}if(ah.IsEmpty(ak)){ak=""}an[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ao)]=ak;ax[ar]=an;var ai=SiebelApp.AjaxRequestMgr.GetActiveRequestObj();var aA=this.GetFieldDefn(al);if(ai&&aw!==ak&&aA.IsCalculated!=="T"&&!aA.ReadOnly){if(this.GetNewTxn()!==""){aw=""}var ap;var aq;ak=ak.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");aw=aw.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");if(ai.SweCommands.SWEMethod==="PickRecord"){var au=this.GetPrvPickMap();if((al===au||!ah.IsEmpty(aA.PickListName))){ap=URLEncode(F.call(this,al,ak));aq=URLEncode(F.call(this,al,aw));aw=aq+"|"+ap;aw=this.ReplaceAmp(aw);this.SetOldFNm(al);this.SetOldFVal(al,aw)}}else{ap=URLEncode(F.call(this,al,ak));aq=URLEncode(F.call(this,al,aw));aw=aq+"|"+ap;aw=this.ReplaceAmp(aw);this.SetOldFNm(al);this.SetOldFVal(al,aw)}}break}else{continue}}v.call(this,al,this.GetWS()[this.GetActiveRow()]);$.callback(this,function(aB){aB.retVal=an;$.setReturnValue(aB)})}function M(an,am){if(!am){return}var al=this.GetDefn().Fields[an].fDepArray;if(al){var aj=0;var ai=al.length;var ak=function(){if(this.GetDefn().Fields[al[aj]].IsCalculated==="T"){t.call(this,al[aj],"");$.callback(this,function(ao){aj++;if(aj<ai){ak.call(this)}})}else{aj++;if(aj<ai){ak.call(this)}}};if(aj<ai){ak.call(this)}}}ae.prototype.ValidateFieldDef=function(ak){var aj;var ai=[];aj=this.GetFieldMap()[ak];if(aj===undefined){ai.push(ak);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",ai);return(false)}else{return(true)}};function T(aj,ai){if(!aj){this.NotifyNewData(ai)}else{this.NotifyNewData(ai)}}function L(ai){if(this.GetActiveRow()>=0){this.NotifyNewData(ai)}}ae.prototype.ValidateAssocValue=function(aj,ai){};ae.prototype.IsUndoRedoInProgress=function(){return(false)};ae.prototype.AddUndo=function(ai){};ae.prototype.SetUpdated=function(ak){var ai=false;var aj=false;if(ab){if(ab!==ak){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrUpdMode");$.setReturnValue({err:false,retVal:false});return}}else{this.UpdateRecordX(ak);$.callback(this,function(){ai=true})}$.callback(this,function(){var al=true;if(ai){if((aj=this.WriteRecord())==="SSASqlErrWriteConflict"){aj=this.WriteRecord()}if(!aj){$.setReturnValue({err:false,retVal:false});return}}$.setReturnValue({err:true,retVal:false})})};ae.prototype.UpdateParentRecord=function(ai){if(ai===null||ai===undefined){ai=false}if(!this.IsExecuted()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted");$.setReturnValue({err:"SSASqlErrNotExecuted",retVal:false})}if(!ai&&!(this.CanUpdateParent())){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate");$.setReturnValue({err:"SSAOMErrNoUpdate",retVal:false})}this.UpdateRecordX();$.callback(this,function(){this.SetCommitPending(true);this.m_redoRecordAction="REDO_RECORD_NONE";$.setReturnValue({err:false,retVal:true})})};ae.prototype.CanUpdateParent=function(an){var ak=false;var al=null;var aj;aj=this.GetParentBusComp();if(an===null||an===undefined){an=true}if(an&&(this.GetSelection())<0){return ak}if(this.IsNewRecordPending()){ak=true;return ak}if(an&&!Q&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){return ak}if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var am=SiebelApp.S_App.Applet.ActiveControl().GetPickApplet();var ai=SiebelApp.Metadata.GetPickListDef(am);ak=(!(ai.NoUpdate())&&!aj.IsInQueryState());return ak}var ao=this.GetLinkSrcFieldName();if(an&&aj&&ao==="Id"&&ao){if(m.call(aj,this.GetName())){return ak}}al=this.GetLinkDef();ak=!(al&&al.NoUpdate);if(ak){ak=(Q||!(this.GetDefn().NoUpdate))}return ak};ae.prototype.UpdateRecordX=function(aj){if(aj===null||aj===undefined){aj=true}if(!this.IsExecuted()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted");$.setReturnValue({err:"SSASqlErrNotExecuted",retVal:false});return}var ai=function(){this.SetCommitPending(true);this.FinishRecord();if(this.CheckActiveRow()){var ak=this.GetSelection();var al=this.FindWorkSet(ak,al)}this.SetExtObjProp("IsEditRecord",false);$.setReturnValue({err:false,retVal:true})};if(!aj){this.CanUpdateX();$.callback(this,function(ak){if(!ak.retVal){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate");$.setReturnValue({err:"SSAOMErrNoUpdate",retVal:false})}else{ai.call(this)}})}else{ai.call(this)}};ae.prototype.GetBatchMode=function(){var ai;return(ai)};ae.prototype.IsVBC=function(){if(this.GetDefn().TableName===""){return true}return false};ae.prototype.CanUpdateX=function(aj,am){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateX ")}var ak;var al=CCFMiscUtil_CreatePropSet();var ai={};
al.SetProperty("inputParam1",aj);al.SetProperty("inputParam2",am);ai[J]=this.GetName();ai[u]=z;ai[N]="CanUpdateX";ai[f]=this;ai[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,al);$.callback(this,function(at){ak=at.retVal;if(ak.Outputargs&&(ak.Outputargs).GetProperty("Invoked")&&(ak.Outputargs).GetProperty("Invoked").toString()==="true"){var aw=ak.Outputargs.GetProperty("RetVal");var ao=false;if(ah.IsTrue(aw)){ao=true}else{ao=false}$.setReturnValue({err:at.err,retVal:ao});return}if(!at.err){ak=at.retVal;if(ak.Outputargs){(ak.Outputargs).SetType(a);al.AddChild(ak.Outputargs)}var ax=this.GetPickAppletSrcInfo();if(this.GetIsPopup()){if(!ax&&!this.IsVBC()){$.setReturnValue({err:false,retVal:false});return}}if(am!==undefined){this.CanUpdateField(am);$.callback(this,function(az){$.setReturnValue(az)})}else{var av=false;var ay=this.GetParentBusComp();if(aj===null||aj===undefined){aj=true}if(aj&&(e.call(this))<0){$.setReturnValue({err:false,retVal:av});return}if(this.IsNewRecordPending()){av=true;$.setReturnValue({err:false,retVal:av});return}if(aj&&!Q&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){$.setReturnValue({err:false,retVal:av});return}if(this.GetIsPopup()){if(ax&&!this.IsVBC()){var aq=ax.SrcApplet;var an=ax.SrcAppletFld;aq=SiebelApp.S_App.GetActiveView().GetApplet(aq);var ar=aq.GetBusComp();var ap=ar.GetDefn().Fields[an].PickListName;if(ap){ap=SiebelApp.Metadata.GetPickListDef(ap);$.setReturnValue({err:false,retVal:(!ap.NoUpdate&&!ar.IsInQueryState())});return}}}var au=this.GetLinkSrcFieldName();if(aj&&ay&&au){if(m.call(this,this.GetName())){$.setReturnValue({err:false,retVal:av});return}}av=!(this.GetLinkDef()&&this.GetLinkDef().NoUpdate);if(!this.GetLinkDef()){av=true}if(av){av=Q||!(this.GetDefn().NoUpdate)}$.setReturnValue({err:false,retVal:av});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateX ")}}}else{$.setReturnValue(at)}})};ae.prototype.IsBCReadOnlyFieldSet=function(){var ai=false;return ai};ae.prototype.IsParentReadOnlyFieldSet=function(){var ai=false;return ai};ae.prototype.GetLinkSrcFieldName=function(){if(this.GetLinkDef()){return(this.GetLinkDef().srcFieldName)}else{return null}};ae.prototype.IsFieldReadOnly=function(aj){var ai=false;if(aj){ai=ah.IsTrue(aj.IsReadOnly());if(!ai){var ak=this.GetParentBusComp();var am=SiebelApp.S_App.LookupStringCache(aj.GetName()),al;if(am==="SSA Primary Field"&&ak){al=ak.CanInsert(am);if(!al){ak.CanUpdateField(am);$.callback(this,function(an){$.setReturnValue({err:false,retVal:!(an.retVal)})})}else{$.setReturnValue({err:false,retVal:false})}}else{al=this.CanInsert(am);if(!al){this.CanUpdateField(am);$.callback(this,function(an){$.setReturnValue({err:false,retVal:!(an.retVal)})})}else{$.setReturnValue({err:false,retVal:false})}}}else{$.setReturnValue({err:false,retVal:ai})}}else{$.setReturnValue({err:false,retVal:true})}$.setReturnValue({err:false,retVal:ai})};ae.prototype.CanInsert=function(am){if(D.GetMode()===true){var aj=false;var al=this.GetParentBusComp();if(am===null||am===undefined){am=true}if(am&&(this.IsParentReadOnlyFieldSet())){return aj}if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var ak=SiebelApp.S_App.Applet.ActiveControl().GetPickApplet();var ai=SiebelApp.Metadata.GetPickListDef(ak);aj=(!(ai.NoUpdate())&&!al.IsInQueryState());return aj}if(am){if(!this.IsExecuted()){return aj}var an=this.GetLinkSrcFieldName();if(am&&al&&an){if(m.call(this,this.GetName())){return aj}}}if(this.GetDefn().NoUpdate){return false}return true}else{return(j.CanInsert.call(this,am))}};ae.prototype.ValidateFieldValue=function(){};ae.prototype.OnSetFieldValue=function(ai){if(ai===x){this.NotifyBeginLongOp();this.NotifyNewPrimary(ai);this.NotifyNewData(ai);this.NotifyEndLongOp()}};ae.prototype.NotifyBeginLongOp=function(ai){};ae.prototype.NotifyEndLongOp=function(ai){};ae.prototype.NotifyNewPrimary=function(ai){};ae.prototype.NotifyNewData=function(ak){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewData ")}var ai="";var aj={};aj[J]=this.GetName();aj[u]=z;aj[N]="NotifyNewData";aj[f]=this;var am=CCFMiscUtil_CreatePropSet();am.SetProperty("inputParam1",ak);var al;aj[ag]=a;al=SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){if(!aq.err){al=aq.retVal;if((al.Outputargs)&&(al.Outputargs).GetProperty("Invoked")&&(al.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aq.err,retVal:al.Outputargs});return}if(al.Outputargs&&am){(al.Outputargs).SetType(a);am.AddChild(al.Outputargs)}if(!ak){ak=null}else{if(!(this.IsNotifySysEnabled())){return}this.NotifyNewDataWS(ak)}var aw;var ax;var an=this.GetNotifyInfoArray();var ay=an.length;if(this.IsNotifyEnabled()){for(var ar=0;ar<ay;ar++){aw=an[ar];if(aw){var az=aw.GetBusCompNotify();if(az){az.NotifyNewData(ak);if(!ak&&this.GetMultiSelectMode()){az.NotifyChangeSelection()}}}}}if(ak&&this.GetFieldDefn(ak)&&this.GetFieldDefn(ak).fDepArray){var av=this.GetFieldDefn(ak).fDepArray;var ap=av.length;var au=0;var aA;var at;var ao=function(){if(this.GetDefn().Fields[av[au]].IsCalculated==="T"){aA=e.call(this);t.call(this,av[au],"");$.callback(this,function(aB){at=this.FindWorkSet(aA);this.FieldValue(av[au],at);$.callback(this,function(aC){if(!aC.err){t.call(this,av[au],aC.retVal);$.callback(this,function(aD){if(!aD.err){this.NotifyNewData(av[au]);au++;if(ap>au){ao.call(this)}}})}})})}};if(ap){ao.call(this)}}aj[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aB){$.setReturnValue(aB);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewData ")}})}else{$.setReturnValue(aq)}})};ae.prototype.NotifyNewDataWS=function(ak){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewDataWS ")}var ai="";var aj={};aj[J]=this.GetName();aj[u]=z;aj[N]="NotifyNewData";aj[f]=this;var am=CCFMiscUtil_CreatePropSet();am.SetProperty("inputParam1",ak);var al;aj[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(aq){if(!aq.err){al=aq.retVal;if((al.Outputargs)&&(al.Outputargs).GetProperty("Invoked")&&(al.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aq.err,retVal:al.Outputargs});return}if(al.Outputargs&&am){(al.Outputargs).SetType(a);am.AddChild(al.Outputargs)}var ap;if(!ak){return}var at=this.GetNotifyInfoArray();var an=at.length;for(var ao=0;ao<an;ao++){ap=at[ao];if(ap){var ar=ap.GetBusCompNotify();if(ar){ar.NotifyNewDataWS(ak)}}}aj[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(aj,am);$.callback(this,function(au){$.setReturnValue(au);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewDataWS ")}})}else{$.setReturnValue(aq)}})};ae.prototype.NotifySelModeChange=function(al){var ak;if(this.IsNotifyEnabled()){var an=this.GetNotifyInfoArray();var ai=an.length;for(var aj=0;aj<ai;aj++){ak=an[aj];if(ak){var am=ak.GetBusCompNotify();if(am){am.NotifySelModeChange(al)
}}}}};ae.prototype.NotifyNewSelIds=function(){var al;var ak=this.GetSelRowIdArray();if(this.IsNotifyEnabled()){var an=this.GetNotifyInfoArray();var ai=an.length;for(var aj=0;aj<ai;aj++){al=an[aj];if(al){var am=al.GetBusCompNotify();if(am){am.NotifyNewSelIds(ak)}}}}};ae.prototype.NotifyChangeSelection=function(){var ak;if(this.IsNotifyEnabled()){var am=this.GetNotifyInfoArray();var ai=am.length;for(var aj=0;aj<ai;aj++){ak=am[aj];if(ak){var al=ak.GetBusCompNotify();if(al){al.NotifyChangeSelection()}}}}};ae.prototype.NotifyScrollData=function(al,aj){var am;if(this.IsNotifyEnabled()){var ao=this.GetNotifyInfoArray();var ai=ao.length;for(var ak=0;ak<ai;ak++){am=ao[ak];if(am){var an=am.GetBusCompNotify();if(an){an.NotifyScrollData(al,aj)}}}}};ae.prototype.NotifyNewSelection=function(al){var ak;if(this.IsNotifyEnabled()){var an=this.GetNotifyInfoArray();var ai=an.length;for(var aj=0;aj<ai;aj++){ak=an[aj];if(ak){var am=ak.GetBusCompNotify();if(am){am.NotifyNewSelection(al)}}}}else{this.NotifyStateChanged("activeRow",e.call(this))}};ae.prototype.NotifyStateChanged=function(ak,am){var ap=false;var al;if(!this.IsNotifySysEnabled()){if(ak==="activeRow"||ak==="bExecuted"||ak==="bNewRecPending"||ak==="bCommitPending"){return ap}}var ao=this.GetNotifyInfoArray();var ai=ao.length;for(var aj=0;aj<ai;aj++){al=ao[aj];if(al){var an=al.GetBusCompNotify();if(an){an.NotifyStateChanged(ak,am)}}ap=true}return ap};ae.prototype.NotifyNewActiveRow=function(){var ak;if(this.IsNotifyEnabled()){var am=this.GetNotifyInfoArray();var ai=am.length;for(var aj=0;aj<ai;aj++){ak=am[aj];if(ak){var al=ak.GetBusCompNotify();if(al){al.NotifyNewActiveRow()}}}}};ae.prototype.WriteRecord=function(at){if(SiebelApp.OfflineAppSettings.GetMode()===true){var ak;var au=[];var ai=[];var ap=[];var an;var av;var aj;var ao;var am=CCFMiscUtil_CreatePropSet();var aq=this.GetBCTableInsertState();var al={};var ar;al[J]=this.GetName();al[u]=z;al[N]="WriteRecord";al[f]=this;if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.WriteRecord")}al[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(al,am);$.callback(this,function(aC){ao=aC.retVal;var az=aC.err;if(az){$.setReturnValue({err:az,retVal:ao});return}if(ao.Outputargs){if((ao.Outputargs).GetPropertyAsStr("Invoked")==="true"){this.SetCommitPending(false);this.SetNewRecPending(false);this.NotifyNewRecordData();$.setReturnValue({err:az,retVal:ao.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord")}return}(ao.Outputargs).SetType(a);am.AddChild(ao.Outputargs);var aw=ao.Outputargs.GetPropertyAsStr("bAddSyncQ");if(!ah.IsEmpty(aw)){at=aw}}if(this.IsVBC()){this.SetCommitPending(false);this.SetNewRecPending(false);this.NotifyNewRecordData();return}if(aq===C.get("INSMODE_ASSOCONLY")){var ax=this.GetInsertStatement();SiebelApp.BrowserCacheMgr.Execute(ax.insertquery,ax.values)}else{if(!this.IsCommitPending()){$.setReturnValue({err:true});return}if(!this.CheckActiveRow()){$.setReturnValue({err:true});return}if(this.IsDeletePending()){$.setReturnValue({err:true});return}av=e.call(this);an=this.FindWorkSet(av);ak=an.Id;au=this.GetFieldList();aj=this.GetName();var aB=(this.GetParentBusComp())?true:false;var ay=false;this.SetDefaultValues(false);$.callback(this,function(aK){var aS=0;var aG=au.length;var aF=[];var aL=function(){aF[aS]=SiebelApp.S_App.LookupStringCache(au[aS]);if(aB&&(!this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName)&&aF[aS]===this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName){ay=true;ai[aS]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue;ap[aS]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF[aS]);aS++;if(aS<aG){aL.call(this)}}else{this.FieldValue(aF[aS]);$.callback(this,function(aX){ai[aS]=aX.retVal;ap[aS]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF[aS]);aS++;if(aS<aG){aL.call(this)}})}};aL.call(this);var aQ=this.CheckRequiredFields(au,ai);if(aQ.err){$.setReturnValue({err:aQ.err,retVal:aQ.retVal});return}var aE=this.GetParentBusComp();var aJ;if(aE){aJ=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName}if(aB&&(!aJ)&&!ay){ap[aS]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName);aF[aS]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName;ai[aS]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue;aS++}var aU=false;var aV=this.GetDefn().Fields;var aI=[];var aO=[];var aN=[];var aR=[];if(aE&&aJ){for(var aT=0;aT<aS;aT++){var aP=aV[aF[aT]];if(aP.Join&&aP.JoinInfo.JoinType==="X"){var aM=aP.ColName;if(G.DoesFieldExist(aJ,aM)){aO.push(aM);aR.push(ai[aT]);aU=true}else{aI.push(ap[aT]);aN.push(ai[aT])}}else{aI.push(ap[aT]);aN.push(ai[aT])}}}var aD;var aQ=this.FieldValidation(au,ai);if(aQ.retVal===true){$.setReturnValue(aQ);return}B.call(this,au,ai);if(this.IsInsertPending()){if(!aU){ar=SiebelApp.SqlBuilder.InsertRecord(aj,ap,ai);aD=this.GetRecordCount();this.SetRecordCount(++aD);SiebelApp.BrowserCacheMgr.Execute(ar.insertquery,ar.values)}else{var aW=S.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,ak);ar=SiebelApp.SqlBuilder.InsertRecord(aj,aI,aN);aO.push(A.get("SWE_ROW_ID_FIELD"));aR.push(aW);var aH=SiebelApp.SqlBuilder.InsertRecord(aJ,aO,aR);aD=this.GetRecordCount();this.SetRecordCount(++aD);SiebelApp.BrowserCacheMgr.Execute(ar.insertquery,ar.values);$.callback(this,function(){SiebelApp.BrowserCacheMgr.Execute(aH.insertquery,aH.values)})}}else{if(!aU){ar=SiebelApp.SqlBuilder.UpdateRecord(aj,ap,ai,A.get("SWE_ROW_ID_FIELD"),ak);SiebelApp.BrowserCacheMgr.UpdateRecord(ar,ak)}else{ar=SiebelApp.SqlBuilder.UpdateRecord(aj,aI,aN,A.get("SWE_ROW_ID_FIELD"),ak);SiebelApp.BrowserCacheMgr.UpdateRecord(ar,ak);$.callback(this,function(){var aX=S.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,ak);ar=SiebelApp.SqlBuilder.UpdateRecord(aJ,aO,aR,A.get("SWE_ROW_ID_FIELD"),aX);SiebelApp.BrowserCacheMgr.UpdateRecord(ar,aX)})}}})}var aA=function(){this.SetCommitPending(false);this.SetNewRecPending(false);this.OnWriteRecord();if(this.GetParentBusComp()){this.GetParentBusComp().WriteRecord();this.SetParCommitPen(false)}$.callback(this,function(){if(aq!==C.get("INSMODE_ASSOCONLY")){this.NotifyNewRecordData();this.SetOpType(C.get("WRITERECORD"))}at=ah.IsEmpty(at)?true:at;if(ah.IsTrue(at)){this.UpdateSync(au,ai,ak)}else{this.SetNewTxn("");this.SetTxnId("");this.SetEmptyFNm();this.SetOpType("")}$.callback(this,function(){al[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(al,am);$.callback(this,function(aE){ao=aE.retVal;var aD=aE.err;if(aD){$.setReturnValue({err:aD,retVal:ao});return}this.SetOrigRecVal("");if(aq===C.get("INSMODE_ASSOCONLY")){this.SetBCTableInsertState(C.get("INSMODE_NORMAL"));this.SetInsertStatement("")}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord")}})})})};$.callback(this,function(aD){if(!aD.err){aA.call(this)}else{if(aD.retVal.code===6){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict");$.setReturnValue({err:"SSASqlErrDupConflict",retVal:""})
}else{if(aD.retVal.message){if(aD.retVal.code===1&&(aD.retVal.message==="constraint failed"||aD.retVal.message.indexOf("not unique")>-1)){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict");$.setReturnValue({err:"SSASqlErrDupConflict",retVal:""})}else{SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrEndTrx");$.setReturnValue({err:"SSASqlErrEndTrx",retVal:""});SiebelJS.Log(aD.retVal.message)}}else{$.setReturnValue({err:aD.err,retVal:""})}}return}})})}else{return(j.WriteRecord.call(this))}};ae.prototype.ReplaceAmp=function(ai){if(ai.indexOf("&")!==-1){ai=ai.replace("&",";amp;")}return ai};ae.prototype.SyncQRec=function(al){var ai=this.GetTxnId();if(ai===""){ai=k.GetTempId();this.SetTxnId(ai)}var am=A.get("SWE_PST_BUSOBJ_INFO")+"="+this.GetBusObj().GetName()+"&";var ak=this.GetName();ak=this.ReplaceAmp(ak);am=am+A.get("SWE_PST_BUSCOMP_INFO")+"="+ak+"&";am=am+A.get("SWE_METHOD_STR")+"="+this.GetOpType()+"&";if(this.GetBusObj().GetUIState()===false){am=am+A.get("SWE_VIEW_ARG")+"=&"}else{am=am+A.get("SWE_VIEW_ARG")+"="+SiebelApp.S_App.GetActiveView().GetName()+"&"}am=am+A.get("SWE_ROW_ID_STR")+"="+al+"&";am=am+"TxnId="+ai;if(this.GetParentBusComp()){var aj=this.GetParentBusComp().FindWorkSet(this.GetParentBusComp().GetSelection());this.GetParentBusComp().FieldValue(A.get("SWE_ROW_ID_FIELD"),aj);$.callback(this,function(an){if(an.err){$.setReturnValue(an)}else{am=am+"&"+A.get("SWE_ROW_IDS_STR")+"="+an.retVal;$.setReturnValue({err:false,retVal:am})}})}else{$.setReturnValue({err:false,retVal:am})}};function K(aj){var ai=function(){if(this.IsNotifyEnabled()&&!aj.bAfterNotify){this.EnableNotify()}if(aj.bAddUndo){this.EndUndo(false)}};if(aj.bRecordCreated){if(this.IsNotifyEnabled()&&!aj.bAfterNotify){this.DisableNotify()}this.UndoRecordX();$.callback(this,ai)}else{ai.call(this)}}ae.prototype.NewRecordX=function(ao,ap,at){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NewRecordX")}var au=null;var an;var ai=false;var ar=null;var am=null;var al={};al.bAddUndo=false;al.bAfterNotify=false;al.bNewRecordInsertedInWorkSet=false;al.bSetPrimary=false;al.bInsertBefore=ao;var aq,aj={};aj[J]=this.GetName();aj[u]=z;aj[N]="NewRecord";aj[f]=this;var ak=CCFMiscUtil_CreatePropSet();ak.SetPropertyStr("InsertBefore",ao);ak.SetPropertyStr("Internal",ap);ak.SetPropertyStr("IdValue",at);aj[ag]=a;R.InvokeRegisteredSvc(aj,ak);$.callback(this,function(aw){aq=aw.retVal;err=aw.err;if(aq.Outputargs&&(aq.Outputargs).GetProperty("Invoked")&&(aq.Outputargs).GetProperty("Invoked").toString()==="true"){var av=(aq.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:err,retVal:av});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.NewRecord")}K.call(this,al);return}if(aq.Outputargs&&ak){(aq.Outputargs).SetType(a);ak.AddChild(aq.Outputargs)}ai=this.IsExecuted();if(!ai){K.call(this,al);return}if(!ap&&!this.CanInsert()){alert("SSAOMErrNoInsert");K.call(this,al);return}au=e.call(this);am=this.FindWorkSet(au);if(am){}if(au===-1){an=0}else{an=(!al.bInsertBefore)?(au+1):au}this.InsertWorkSet(an,ar,true);au=an;aa.call(this,au);if(am&&this.GetWS().length>this.GetWorkSetSize()){if(!this.IsVBC()&&!this.GetIsRelatedBC()){if(ao||au!==this.GetWS().length-1){this.DeleteWorkSet(this.GetWS().length-1)}else{this.DeleteWorkSet(0);aa.call(this,--au)}}else{aa.call(this,au)}}this.SetCommitPending(true);this.SetNewRecPending(true);al.bRecordCreated=true;this.SetDefaultValues(true);$.callback(this,function(ax){this.SetOpType(C.get("NEWRECORD"));this.SyncQRec("rowId");$.callback(this,function(ay){var az=ay.retVal;this.SetNewTxn(az);if(!ap){this.NotifyNewRecord(ao);al.bAfterNotify=true;this.UpdateLinks(false)}$.callback(this,function(){this.SetExtObjProp("isNewRecord",false);aj[ag]=r;R.InvokeRegisteredSvc(aj,ak);$.callback(this,function(aA){$.setReturnValue(aA)});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NewRecordX")}})})})})};ae.prototype.InsertWorkSet=function(aj,ai,al){ai=P.call(this,ai);var ak=(!al)?ai:this.CreateRecord("");if(aj===this.GetWS().length){this.AddWS(ak)}else{this.InsertRecordWS(aj,ak)}this.NotifyInsertWorkSet(aj,ak)};function P(ai){if(!ai){return ai}var aj=this.CreateRecord("");var ak=this.GetFieldMap();for(var ao in ak){if(ak.hasOwnProperty(ao)){var am=this.GetFieldDefn(ao);var an=k.RemoveNonAlphaChars(ao);if(ai.hasOwnProperty(an)){if(am.DataType===Z){var al=k.UtcToLocal(ai[an]);aj[an]=k.ToTS(al)}else{aj[an]=ai[an]}}}}return aj}ae.prototype.InsertRecordWS=function(aj,ai){this.GetWS().splice(aj,0,ai)};ae.prototype.CreateRecord=function(ai){if(!ai){ai=k.GetTempRowId()}var ak=ai;var am=this.GetFieldList();var aq=[];var ao=am.length;var al={};for(var an=0;an<ao;an++){var ap=am[an];var aj=SiebelApp.S_App.LookupStringCache(ap);aj=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aj);if(aj==="Id"){al[aj]=ak}else{al[aj]=""}}return al};ae.prototype.SetDefaultValues=function(ai){var al=[];var ap;var ao;var aq;var an=this;al=this.GetFieldList();aq=this.GetName();var am=al.length;var ak=0;var aj=function(){ap=SiebelApp.S_App.LookupStringCache(al[ak]);var ar=ai?an.GetFieldDefn(ap).PreDefault:an.GetFieldDefn(ap).PostDefault;if(ar){an.GetDefaultValue(aq,ap,ai);$.callback(this,function(at){ao=at.retVal;if(ao){if(!ai){this.FieldValue(ap);$.callback(this,function(au){retVal=au.retVal;if(ah.IsEmpty(retVal)){an.SetFieldValueX(ap,ao)}})}else{an.SetFieldValueX(ap,ao)}}})}$.callback(this,function(){ak++;if(ak<am){$.callback(this,aj)}})};aj.call(this)};ae.prototype.FieldValidation=function(ap,aj){var av=[];var at=this.GetFieldMap();var al=this.GetDefn().Fields;var ao=[];var aq={};var ai=false;aq.err=false;for(var am=0;am<ap.length;am++){av[am]=SiebelApp.S_App.LookupStringCache(ap[am]);if(!ah.IsEmpty(al[av[am]].ValidationSpec)){if(!(al[av[am]].ValidationSpecast)){this.GetDefn().Fields[av[am]].ValidationSpecast=SiebelApp.Query.Parse(al[av[am]].ValidationSpec)}var au=SiebelApp.Query.Evaluate(this.GetDefn().Fields[av[am]].ValidationSpecast,this,SiebelApp.Query.Parse("["+av[am]+"]"));if(au===false){var an=SiebelApp.Query.GetFieldsFromExp("Calc",al[av[am]].ValidationSpec);if(ah.IsEmpty(aj[am])){ai=true}for(var ak=0;ak<an.length;ak++){var ar=this.GetWS()[this.GetActiveRow()][SiebelApp.OfflineUtils.RemoveNonAlphaChars(an[ak])];if(ah.IsEmpty(ar)||ah.IsEmpty(aj[am])){ai=true}}if(ai===false){ao.push(aj[am]);ao.push(av[am]);ao.push(al[av[am]].ValidationSpec);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrValidation",ao);return{err:"SSASqlErrValidation",retVal:true}}}}}return{err:"SSASqlErrValidation",retVal:false}};function B(ai,am){var ap=this.GetFieldMap();var an=ai.length;for(var ak=0;ak<an;ak++){var aj=SiebelApp.S_App.LookupStringCache(ai[ak]);var al=am[ak];var ao=this.GetFieldDefn(aj);if(ao.DataType===Z){if(al){am[ak]=k.ToTS(new Date(al),true)}}}}function F(ai,aj){var ak=this.GetFieldDefn(ai);if(ak.DataType===Z){if(aj){return k.ToTS(new Date(aj),true)}}return aj}ae.prototype.CheckRequiredFields=function(an,aj){var ar=[];
var am=[];var aq=SiebelApp.S_App.Model.GetSystemFields();var ap=this.GetFieldMap();var ak=this.GetDefn().Fields;var ao={};ao.err=false;for(var al=0;al<an.length;al++){ar[al]=SiebelApp.S_App.LookupStringCache(an[al]);if(aq.indexOf(ar[al])===-1&&ap[ar[al]].IsRequired()){if(!aj[al]){if(!this.IsInsertPending()){var ai=this.GetOldFNm();if(ai.indexOf(ar[al])===-1){continue}}am.push(ar[al]);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAFReqFieldNotExist",am);ao.err="SSAFReqFieldNotExist";ao.retVal="";return ao}}}return ao};ae.prototype.RemoveBindingToRow=function(){};ae.prototype.OnActiveRowChanged=function(){this.FindWorkSet(e.call(this));this.RemoveBindingToRow(true)};ae.prototype.EventChangeRecord=function(){if(this.CheckActiveRow()===false){return true}};ae.prototype.GetRowNum=function(am,ak){var aj=this.GetWS();var ai=aj.length;if(am){for(var al=0;al<ai;al++){if(JSON.stringify(aj[al])===JSON.stringify(am)){return al}}}if(!isNaN(ak)){if(aj[ak]&&ak<ai){return aj[ak]}}SiebelJS.Log("Record Not Present .... ");return false};ae.prototype.GetNumRows=function(){var ai=0;ai=this.GetWS().length;return ai};ae.prototype.NotifyNewRecord=function(an){var ap;var ar=false;var aj=this.GetNotifyInfoArray();var aq=aj.length;var au=e.call(this);for(var am=0;am<aq;am++){ap=aj[am];var al=ap.GetAppletArray();var ao=al.length;var ai;for(var ak=0;ak<ao;ak++){ai=al[ak];if(ap&&((ap.GetBegRow(ai)+ap.GetSize()-1)<au)&&!this.IsVBC()&&!this.GetIsRelatedBC()){ap.SetBegRow(ap.GetBegRow(ai)+1,ai);ap.SetCurrRow(ap.GetCurrRow(ai)+1,ai);ar=true}else{ar=false}}if(this.IsNotifyEnabled()&&ap){var at=ap.GetBusCompNotify();if(at){at.NotifyNewRecord(an&&!ar)}}}};ae.prototype.NotifyDeleteRecord=function(aj,at){var au;var ap;if(!(this.IsNotifyEnabled())){return}var ak=this.GetNotifyInfoArray();var aq=ak.length;for(var an=0;an<aq;an++){ap=ak[an];var am=ap.GetAppletArray();var ao=am.length;var ai;for(var al=0;al<ao;al++){ai=am[al];if(!aj&&ap&&ap.GetBegRow(ai)!==0&&((ap.GetBegRow(ai)+ap.GetSize()>this.GetWS().length))){ap.SetBegRow(ap.GetBegRow(ai)-1);ap.SetCurrRow(ap.GetCurrRow(ai)-1);au=true}else{au=false}}if(ap){var ar=ap.GetBusCompNotify();if(ar){ar.NotifyDeleteRecord(aj,at&&!au)}}}};ae.prototype.Home=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Home")}this.FinishRecord();this.ClearUpdates();if(!this.IsExecuted()){aa.call(this,-1);this.NotifyReset();return}if(e.call(this)!==-1){var aj=this.FindWorkSet(0);var ak=this.GetRowNum(aj);if(isNaN(ak)){$.setReturnValue({err:true});return}var ai=this.GetNumRows();if(ak<0&&ai){ak=ai+ak+1}if(ak===1){this.NotifyReset();$.callback(this,function(al){$.setReturnValue(al)});return}}aa.call(this,-1);this.NotifyReset();$.callback(this,function(al){$.setReturnValue(al);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Home")}})};ae.prototype.NotifyReset=function(){aa.call(this,(this.GetWS().length>0?0:-1));this.NotifyStateChanged("activeRow",e.call(this));this.OnActiveRowChanged();this.EventChangeRecord();this.NotifyNewData();$.callback(this,function(ai){if(ai.err){$.setReturnValue(ai)}else{this.UpdateLinks(false);$.callback(this,function(aj){$.setReturnValue(aj)})}})};ae.prototype.EnumUserProps=function(){var aj=this.GetDefn();var ai=null;if(aj.userPropMap){ai=[];for(var ak in aj.userPropMap){if(aj.userPropMap[ak]){ai.push(ak)}}return ai}else{return null}};ae.prototype.EnumFieldUserProps=function(ai){var ak=this.GetFieldDefn(ai);if(ak.userPropMap){var aj=[];for(var al in ak.userPropMap){if(ak.userPropMap[al]){aj.push(al)}}return aj}else{return null}};ae.prototype.GetFldPickMapDef=function(ai){var aj=this.GetFieldDefn(ai);return aj.pickMap};ae.prototype.GetUserProperty=function(ai){if(this.GetDefn().userPropMap){return this.GetDefn().userPropMap[ai]}else{return""}};ae.prototype.GetLinkDef=function(){var aj=SiebelApp.Metadata.GetBusObjDef(this.GetBusObj().GetName())[this.GetName()];if(aj){var ai=SiebelApp.Metadata.GetLinkDef(aj);if(!ai.interTableName&&!ai.srcFieldName){ai.srcFieldName=A.get("SWE_ROW_ID_FIELD")}return SiebelApp.Metadata.GetLinkDef(aj)}else{return null}};ae.prototype.GetDefn=function(){var ai=SiebelApp.Metadata.GetBusCompDef(this.GetName());return ai};ae.prototype.GetFieldDefn=function(ai){return this.GetDefn().Fields[ai]};ae.prototype.PopulateWS=function(aF,am,al,ao){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PopulateWS")}var aE=am.length;var ap=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var ai=this.GetDefn();var av=[];var aq=0;var ax={};var aG=ai.Fields;for(var aH=0;aH<aE;aH++){var ar=am[aH];var at=SiebelApp.S_App.LookupStringCache(ar);var az=SiebelApp.OfflineUtils.RemoveNonAlphaChars(at);if(G.DoesFieldExist(ap,az)){if((typeof(aF)!=="string")){var an=aF.length;for(var aw=1;aw<an;aw++){if(ai.InterFieldInfo.InterFieldArr.indexOf(at)!==-1){var ay=aG[at].ColName;if(G.DoesFieldExist(aF[aw],ay)){az=aF[aw]+"."+ay;ax[ay]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(at);continue}}if(G.DoesFieldExist(aF[aw],az)){az=ap+"."+az}}}av[aq]=az;aq++}}var aB;var aA=this.GetCursor();var ak;this.SetQuerySearchSpec(al);this.SetQuerySortSpec(ao);this.SetQueryFieldList(av);this.SetQueryOrder(aB);var aj="Count(*)";var aC=0;var aD=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aF,al,[aj],ao,aB);SiebelApp.BrowserCacheMgr.SelectRecord(aD);var au=this.GetWorkSetSize();$.callback(this,function(aK){if(!aK.err){var aI=aK.retVal;aI=aI[aj];this.SetRecordCount(aI);if(!(aA.length)){aA.push(aC)}if(aI>C.get("PAGE_SIZE")){if(aA.length>1){aA[1]=au}else{aA.push(au)}}else{if(aI<=au){if(aA.length>1){aA[1]=aI}else{aA.push(aI)}}else{if(aI>au){if(aA.length>1){aA[1]=au}else{aA.push(au)}}}}if(aI<(aA[0]+1)){aA[0]=0}if(this.CheckActivation()){ak=aA[0];aA[0]=this.GetScrollCount()}var aJ;aJ=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aF,al,av,ao,aB,aA);SiebelApp.BrowserCacheMgr.SelectRecord(aJ,true);$.callback(this,function(aR){if(!aR.err){var aP=aR.retVal;var aM=aP.length;var aS;this.EmptyWorkSet();if(aP){if((aP.length>0)){var aQ=aP.length;for(var aN=0;aN<aQ;aN++){var aL=aP[aN];if((typeof(aF)!=="string")){for(var aO in ax){if(ax[aO]){aL[ax[aO]]=aL[aO];delete aL[aO]}}}this.InsertWorkSet(aN,aL)}if(!aA[0]){aA[0]=0}aA[1]=1;this.SetCursor(aA);if(ak){aA[0]=ak}}}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PopulateWS")}})}else{$.setReturnValue({err:true})}})};ae.prototype.Execute=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Execute")}var al;var ak;var am=CCFMiscUtil_CreatePropSet();var aj={},ai=false;aj[J]=this.GetName();aj[u]=z;aj[N]="Execute";aj[f]=this;aj[ag]=a;R.InvokeRegisteredSvc(aj,am);$.callback(this,function(au){al=au.retVal;ak=au.err;if(al.Outputargs&&(al.Outputargs).GetProperty("Invoked")&&(al.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:ak,retVal:al.Outputargs});return}if(al.Outputargs&&am){(al.Outputargs).SetType(a);am.AddChild(al.Outputargs)
}if(this.IsVBC()){this.SetExecuted(true);return}this.SetInQueryState(false);this.SetExecuted(false);var aC=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var aq=[];var aB=[];var ap=this.SetSortSpecification();var aw=this.SetFullSearchSpec();var av=this.GetFieldList();var ax=this.GetLinkDef();var at;var az;var an;var aA;var ay;var ar=this.GetParentBusComp();if(ar){if(!(ar.IsExecuted())||(ar.GetActiveRow()===-1)){$.setReturnValue({err:false,retVal:""});return}else{an=ax.srcFieldName;ai=true;ar.FieldValue(an);$.callback(this,function(aE){var aD=aE.retVal;ay=ax.Name;if(this.IsVBC()){}else{this.SetLinkSpec(ay,an,aD,ax)}at=this.GetExtObjProp("m_pCurLinkQueryDef")})}}else{var ao=l.call(this,aC);if(ao){aw.push(ao)}}$.callback(this,function(){var aK=this.GetFieldMap();var aO;for(var aP in aK){if(aK[aP]){var aM=aK[aP].GetSearchSpec();if(ah.IsEmpty(aM)){continue}var aF=" ";aF+=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aP);var aS=aM.indexOf(U);var aN=aM.indexOf(c);var aJ=aM.indexOf(g);if(aS>=0){aO=aM.substring(aS+1);aF+=(" "+U+" ");aF+=('"'+aO+'" ')}else{if(aN>=0){aO=aM.substring(aN+1);aF+=(" "+c+" ");aF+=('"'+aO+'" ')}else{if(aJ>=0){if(at){if(!ah.IsEmpty(at.Defn.interTableName)){aF=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF);aF=aC+"."+aF}}aO=aM.substring(aJ+g.length);aF+=(" "+g+" ");aF+=('"'+aO+'" ')}else{aF+=(" "+U+" ");aF+=('"'+aM+'" ')}}}aw.push(aF)}}var aR={};if(at){var aL;if(!ah.IsEmpty(at.Defn.interTableName)){aR={};var aD=aC;aC=[];aC.push(aD);var aI=at.Defn.interTableName;aI=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aI);aC.push(aI);aL=aD+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(at.Defn.destFieldName);aL=aL+" = "+aI+"."+at.Defn.interChildColName;aL=aL+" AND "+aI+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(at.Defn.interParentColName);aL=aL+' = "'+at.Defn.SrcFieldValue+'"';aw.push(aL)}else{aL=SiebelApp.OfflineUtils.RemoveNonAlphaChars(at.Defn.destFieldName)+' = "'+at.Defn.SrcFieldValue+'"';aw.push(aL)}}if(ar&&ax){if(!(ah.IsEmpty(ax.interTableName))){ap.push(ax.interTableName+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax.interChildColName))}else{ap.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax.destFieldName))}}if(!this.IsVBC){ap.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax.srcFieldName))}var aE=this.GetAppletSearchSpec();if(aE.length>0){var aG=aE.length;var aQ;for(var aH=0;aH<aG;aH++){aQ=SiebelApp.Query.GetSearchSpec(aE[aH],this);if(aQ.length>0){aw.push(aQ[0])}}}this.SetExecutionState(true);this.PopulateWS(aC,av,aw,ap);$.callback(this,function(aT){if(!aT.err){this.SetExecutionState(false);this.SetExecuted(true);$.callback(this,function(){aj[ag]=r;am.SetProperty("RetVal",true);R.InvokeRegisteredSvc(aj,am);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Execute")}})}else{$.setReturnValue({err:true})}})})})};ae.prototype.ClearLinkDef=function(){this.SetExtObjProp("m_pCurLinkQueryDef","")};function l(at){var am=this.GetViewMode();var al={};var ar=this.GetUIState();if(ah.IsEmpty(am)){if(!ar){return null}else{var aq=SiebelApp.S_App.GetActiveView().GetName();am=SiebelApp.S_App.Model.GetViewMode(aq);if(am!=="4"){am=am.toString();this.SetViewMode(am)}else{var ak=this.GetDefn();var ap=ak.Visibility;var an=ap.length;if(an>0){for(var aj=0;aj<an;aj++){if(ap[aj].mode==="0"){am=0;break}else{if(ap[aj].mode==="2"){am=2;break}else{am=5}}}}am=am.toString();this.SetViewMode(am)}}}if(am==="5"){return null}var ai=Math.pow(2,am);if(am==="3"){ai=15}var ao="("+at+'._PDAVisibilityTypes & "'+ai+'") OR('+at+"._PDAVisibilityTypes IS NULL )";return ao}ae.prototype.SetLinkSpec=function(am,ak,ai,aj){this.ActivateField(aj.destFieldName);var al=this.GetExtObjProp("m_pCurLinkQueryDef");if(al&&al.Defn.SrcFieldValue===ai){return}al={};al.Defn=aj;al.Defn.SrcFieldValue=ai;al.Data={};al.Data.srcFieldValue=ai;this.SetExtObjProp("m_pCurLinkQueryDef",al)};ae.prototype.IsExecuted=function(){var ai=this.GetExtObjProp("m_bExecuted");if(!ai){this.SetExtObjProp("m_bExecuted",false)}return(this.GetExtObjProp("m_bExecuted"))};ae.prototype.IsPagination=function(ai){switch(ai){case C.get("POSITION_ON_ROW"):case C.get("SCROLL_NEXT_DATA"):case C.get("SCROLL_PREV_DATA"):case C.get("GO_TO_NEXT_SET"):case C.get("GO_TO_PREV_SET"):return true;default:return false}};ae.prototype.SetExecuted=function(aj){var ai=this.GetExtObjProp("m_bExecuted");if(ai===aj){return}if(!aj){this.UndoRecord();$.callback(this,function(ak){this.SetExtObjProp("m_bExecuted",aj);this.NotifyStateChanged("bExecuted",aj)})}else{this.SetExtObjProp("m_bExecuted",aj);this.NotifyStateChanged("bExecuted",aj)}};ae.prototype.SetDelRecPending=function(ai){if(this.deletePending&&(this.deletePending===ai)){return}this.deletePending=ai;this.NotifyStateChanged("dp",ai)};ae.prototype.IsParCommitPen=function(){if(!((this.GetExtObj).hasOwnProperty("m_isParentCommit"))){this.GetExtObj.m_isParentCommit=false}return this.GetExtObj.m_isParentCommit};ae.prototype.SetParCommitPen=function(ai){if(this.GetExtObj.m_isParentCommit&&(this.GetExtObj.m_isParentCommit===ai)){return}this.GetExtObj.m_isParentCommit=ai};ae.prototype.SetNewRecPending=function(ai){if(this.insertPending&&(this.insertPending===ai)){return}this.insertPending=ai;if(ai){ai=1}else{ai=0}this.NotifyStateChanged("np",ai)};ae.prototype.IsNewRecordPending=function(){return this.insertPending};ae.prototype.GetDefaultValue=function(aj,al,ak){var ai=this.GetDefaultExpr(al,ak);this.EvaluateFieldExpr(ai,al,ak);$.callback(this,function(am){$.setReturnValue(am)})};ae.prototype.GetDefaultExpr=function(ak,ai){var aj=ai?this.GetFieldDefn(ak).PreDefault:this.GetFieldDefn(ak).PostDefault;return aj};ae.prototype.EvaluateFieldExpr=function(aq,ay,al){var au="";var at=aq;var ak=aq.indexOf("Parent:");var ao=aq.indexOf("Field:");var ap=aq.indexOf("Expr:");var az=aq.indexOf("System:");if(ah.IsEmpty(aq)){$.setReturnValue({err:false,retVal:au});return}if(aq.toUpperCase()==="SYSTEM: CREATORID"){au=R.GetLoginId();$.setReturnValue({err:false,retVal:au});return}if(aq.toUpperCase()==="SYSTEM: TIMESTAMP"){au="";if(this.GetFieldMap()[ay].GetDataType()==="date"){au=SiebelApp.OfflineUtils.GetTS()}else{au=SiebelApp.OfflineUtils.GetTS()}$.setReturnValue({err:false,retVal:au});return}if(az===0){at=at.replace("System:","");at=at.replace("()","");at=at.trim();switch(at.toUpperCase()){case"CREATOR":au=R.GetLoginName();break;case"CREATORID":case"LOGINID":au=R.GetLoginId();break;case"CURRENCY":au=R.GetCurrencyCode();break;case"POSITIONID":au=R.GetPositionId();break;case"DIVISIONNAME":au=R.GetDivisionId();break;case"ORGANIZATIONID":au=R.GetOrganizationId();break;case"ORGANIZATIONNAME":au=R.GetOrganizationName();break;case"CONTACTLOGINID":au=R.GetLoginId();break;case"CONTACTLOGINNAME":au=R.GetLoginName();break;case"TODAY":au=SiebelApp.OfflineUtils.GetDate();break}$.setReturnValue({err:false,retVal:au});return}if(ak===0){var am=0;var aj=at.split(",");var an=aj.length;var ax=false;var aw=function(){if(this.GetParentBusComp()){var aC=this.GetParentBusComp().GetName();if(aC){aj[am]=aj[am].replace("Parent:","");
aj[am]=aj[am].replace(/["']{1}/gi,"");aj[am]=aj[am].replace(/['"]/g,"");var aA=(aj[am].slice(0,aj[am].indexOf("."))).trim();var aB=(aj[am].slice(aj[am].indexOf(".")+1));if(aC===aA){this.GetParentBusComp().FieldValue(aB);$.callback(this,function(aD){$.setReturnValue(aD)});return}}}else{$.setReturnValue({err:false,retVal:""})}};var av={};var ar=function(){aj[am]=aj[am].trim();if(aj[am].indexOf("Parent:")===0||aj[am].indexOf("Field:")===0||aj[am].indexOf("Expr:")===0||aj[am].indexOf("System:")===0){if(am===0){aw.call(this)}else{this.EvaluateFieldExpr(aj[am].trim(),ay,al)}}else{aw.call(this)}$.callback(this,function(aA){if(!ah.IsEmpty(aA.retVal)){ax=true;av=aA;$.setReturnValue(av)}if(!ax){am++;if(am<an){ar.call(this)}else{ax=true;av={err:false,retVal:""};$.setReturnValue(av)}}})};if(am<an){ar.call(this)}$.callback(this,function(){if(ax){$.setReturnValue(av);return}});if(ax){return}}if(ao===0){at=at.replace("Field:","");at=at.replace(/["']{1}/gi,"");at=at.replace(/['"]/g,"");at=at.trim(at);this.FieldValue(at);$.callback(this,function(aA){$.setReturnValue(aA)});return}if(ap===0){at=at.replace("Expr:","");at=at.trim();at=at.slice(1,at.length-1);if(!this.GetFieldDefn(ay).PreQuery){var ai=SiebelApp.Query.Parse(at);this.GetFieldDefn(ay).PreQuery=ai}au=SiebelApp.Query.Evaluate(this.GetFieldDefn(ay).PreQuery,this);$.setReturnValue({err:false,retVal:au});return}if(!isNaN(at)){$.setReturnValue({err:false,retVal:at});return}if((ak===-1)&&(ao===-1)){$.setReturnValue({err:false,retVal:at});return}};ae.prototype.IsRequired=function(){return false};ae.prototype.HasDefaultValue=function(){return false};ae.prototype.NotifyNewRecordDataWS=function(){var ak;if(!this.IsNotifySysEnabled()){return}if(!this.CheckActiveRow()){return}var am=this.GetNotifyInfoArray();var ai=am.length;for(var aj=0;aj<ai;aj++){ak=am[aj];if(ak){var al=ak.GetBusCompNotify();if(al){al.NotifyNewRecordDataWS()}}}};ae.prototype.NotifyNewRecordData=function(){var ak;if(!this.IsNotifySysEnabled()){return}this.NotifyNewRecordDataWS();if(!(this.IsNotifyEnabled())){return}var am=this.GetNotifyInfoArray();var ai=am.length;for(var aj=0;aj<ai;aj++){ak=am[aj];if(ak){var al=ak.GetBusCompNotify();if(al){al.NotifyNewRecordData()}}}};ae.prototype.FillRecord=function(){return};ae.prototype.OnWriteRecord=function(){return};ae.prototype.UpdateSync=function(al,ai,aj){var an="";var at=A.get("SWE_ROW_ID_FIELD");var ap;var ak=this.GetNewTxn();var au=this.GetOpType();var ao=this.GetTxnId();if(ao===""){ao=k.GetTempId();this.SetTxnId(ao)}if(au===C.get("ADDRECORD")){an=this.GetNewTxn()}else{if(au!==C.get("DELETERECORD")){var aq=this.GetOldFNm();var am=this.GetOldfVal();for(var ar=0;ar<aq.length;ar++){an=an+"OF_"+aq[ar]+"="+am[ar]+"&"}if(an!==""){this.SyncQRec(aj);$.callback(this,function(av){var aw=av.retVal;an=an+aw;if(ak!==""){an=ak+"~"+an}})}}else{if(au===C.get("DELETERECORD")){an=this.GetNewTxn()}}}$.callback(this,function(){if(an!==""){var av=Y.get("PRO_SYNCQUEUE_DB_TBL_COLS");var aw=SiebelApp.SqlBuilder.InsertRecord(Y.get("PRO_SYNCQUEUE_DB_TBL"),[av.TransactionId,av.Request],[ao,an]);SiebelApp.BrowserCacheMgr.Execute(aw.insertquery,aw.values);SiebelApp.OfflineAppSettings.SetSyncStatus(true);SiebelApp.S_App.CustomToolbar.Update("SyncPendng")}this.SetNewTxn("");this.SetTxnId("");this.SetEmptyFNm();this.SetOpType("")})};ae.prototype.FldType=function(ai){var aj=this.GetFieldDefn(ai);if(aj&&!aj.ReadOnly){return true}return false};ae.prototype.SetCommitPending=function(ai){if(this.IsCommitPending()===ai){return}this.commitPending=ai;if(ai){ai=1}else{ai=0}if(!this.commitPending){this.ClearUpdates();this.GetCommitPending=function(){return false}}this.NotifyStateChanged("cp",ai)};ae.prototype.GetChildBCArray=function(){var am=[];var ai=this.GetBusObj();var al=ai.GetBCMap();var aj;for(var ak in al){if(al[ak]){aj=al[ak].GetParentBusComp();if(!!aj&&this.GetVarName()===aj.GetVarName()){am.push(al[ak])}}}return(am)};ae.prototype.ResetChildBCArr=function(){this.SetExtObjProp("m_childBCarr",[])};ae.prototype.UpdateLinks=function(ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UpdateLinks")}if(ai){}var ak=[];var al=this.GetChildBCArray();if(al){var aj=al.length;var ap=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");if(ah.IsEmpty(ap)){this.SetExtObjProp("m_bDisNotChildOnUpdLnks",true);ap=true}var an=0;var am;var aq=[];for(var ao=0;ao<aj;ao++){if(ap){al[ao].DisableNotify()}am=function(){var ar=ao;return function(){al[ar].EnableNotify()}};if(this.GetActiveRow()!==-1){aq=al[ao].GetCursor();aq[0]=0;al[ao].SetCursor(aq);ak[an]={execute:al[ao].Execute,executeScope:al[ao]};an++;ak[an]={execute:al[ao].Home,executeScope:al[ao],postExecute:am()};an++}else{al[ao].SetExtObjProp("isExecuted",false)}}if(ak.length>0){$.eachAsyncOp(this,ak);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UpdateLinks")}}}};ae.prototype.DisableNotify=function(){if(!(this.IsNotifyEnabled())){return}this.SetNotifyEnabled(false);this.NotifyStateChanged(("bNotifyEnabled"),false)};ae.prototype.NotifyInsertWorkSet=function(al,aj){var am;if(!this.IsNotifySysEnabled()){return}var ao=this.GetNotifyInfoArray();var ai=ao.length;for(var ak=0;ak<ai;ak++){am=ao[ak];if(am){var an=am.GetBusCompNotify();if(an){an.NotifyInsertWorkSet(al,aj)}}}};ae.prototype.NotifyDeleteWorkSet=function(ak,ao,an){var al;if(!this.IsNotifySysEnabled()){return}var ap=this.GetNotifyInfoArray();var ai=ap.length;for(var aj=0;aj<ai;aj++){al=ap[aj];if(al){var am=al.GetBusCompNotify();if(am){am.NotifyDeleteWorkSet(ak,ao,an)}}}};ae.prototype.GetNotifyInfo=function(ak,ai){var aj=this.GetNotifyInfoArray();ai=(ak<aj.length)?aj[ak]:null;return ai};ae.prototype.EnableNotify=function(al){var ak;var ai;if(this.IsNotifyEnabled()){return}if(!(this.IsNotifySysEnabled())){this.SetNotifySysEnabled(true);this.NotifyDeleteWorkSet(0,-1,null);var aj=this.GetWorkSet().length;for(ak=0;ak<aj;ak++){ai=this.GetWorkSet()[ak];this.NotifyInsertWorkSet(ak,ai)}this.NotifyStateChanged(("bExecuted"),this.m_bExecuted);this.NotifyStateChanged(("activeRow"),this.m_activeRow);this.NotifyStateChanged(("cp"),this.IsCommitPending());this.NotifyStateChanged(("np"),this.IsNewRecordPending())}this.SetNotifyEnabled(true);this.NotifyStateChanged(("bNotifyEnabled"),true)};ae.prototype.ExprEvav=function(ak){var ai=[];var aj={};aj.FieldName="";aj.Oper="";aj.Val="";aj.PreLogic="";ai.push(aj);return ai};ae.prototype.GetQuickPickInfo=function(am,an){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.GetQuickPickInfo")}var aj=this.GetFieldDefn(an);var al;al=this.GetPickListInfo(am,an);if(aj.pickMap){var ai=aj.pickMap.length;for(var ak=0;ak<ai;ak++){if(aj.pickMap[ak].FldName===an){al.PFldName=aj.pickMap[ak].PFldName;break}}}SiebelApp.BrowserCacheMgr.GetPickListData(al,this);$.callback(this,function(ao){$.setReturnValue(ao);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.GetQuickPickInfo")}})};ae.prototype.GetPickListInfo=function(ak,al){var ai;
var aj;ai=this.ValidateFieldDef(al);if(ai){aj=SiebelApp.Metadata.GetPickListDef(ak);return aj}else{return aj}};ae.prototype.GetIdValueX=function(){if(this.CheckActiveRow()){var ai=this.GetActiveRow();var aj=this.FindWorkSet(ai);this.FieldValue(A.get("SWE_ROW_ID_FIELD"),aj);$.callback(this,function(ak){$.setReturnValue({err:ak.err,retVal:ak.retVal});return})}else{$.setReturnValue({err:false,retVal:""});return}};function E(){var ak=[];var al=CCFMiscUtil_CreatePropSet();al.SetType(A.get("SWE_PST_REC_LIST"));var ai=this.GetWS();var aj;if(ai==="undefined"||ai.length<=0){aj=CCFMiscUtil_CreatePropSet();aj.SetType(A.get("SWE_PROP_LAST_RECORD"));aj.SetProperty("v","");al.AddChild(aj);$.setReturnValue({err:false,retVal:al})}else{al.SetProperty(A.get("SWE_PROP_ACTIVE_ROW"),e.call(this));al.SetProperty(A.get("SWE_PROP_CURR_RNUM"),1);al.SetProperty(A.get("SWE_PROP_NUM_ROWS"),10);ak=this.GetActivatedFieldList();this.PrepareOfflineRawRecord(ai.length,ak);$.callback(this,function(ap){var an=ap.retVal;for(var am=0;am<an.length;am++){var ao=an[am].value;var aq=an[am].id;aj=CCFMiscUtil_CreatePropSet();aj.SetType(A.get("SWE_PROP_RECORD"));aj.SetProperty("i",aq);aj.SetProperty("v",ao);al.AddChild(aj)}$.setReturnValue({err:false,retVal:al})})}}ae.prototype.PickUpActiveFields=function(){var ak=[];var aj=this.GetFieldList();for(var ai=0;ai<aj.length;ai++){var al=aj[ai];al=SiebelApp.S_App.LookupStringCache(al);ak.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(al))}return ak};ae.prototype.WSNextRecordX=function(al,ai){var ak={};ak.err="";var am=this.GetNotifyInfoArray();var aj=am[al];if(al>am.length||ah.IsEmpty(aj)){ak.err="SSAOMErrNotifyInfo";$.setReturnValue(ak);return ak}if(((aj.GetCurrRow(ai)+1)-(aj.GetBegRow(ai))<aj.GetSize())&&((aj.GetCurrRow(ai)+1)<this.GetWS().length)){aj.SetCurrRow(aj.GetCurrRow(ai)+1,ai)}else{if((this.IsVBC()||this.GetIsRelatedBC())&&((aj.GetCurrRow(ai)+1)<this.GetWS().length)){aj.SetCurrRow(aj.GetCurrRow(ai)+1,ai)}else{ak.err="SSAOMErrNotifyInfo"}}$.setReturnValue(ak);return ak};ae.prototype.WSGetCurrRow=function(al,ai){var ak={};ak.err="";var am=this.GetNotifyInfoArray();var aj=am[al];if(al>am.length||ah.IsEmpty(aj)){ak.err="SSAOMErrNotifyInfo";return ak}ak.retVal=aj.GetCurrRow(ai);return ak};ae.prototype.WSSetCurrRow=function(am,al,ai){var ak={};ak.err="";var an=this.GetNotifyInfoArray();var aj=an[am];if(am>an.length||ah.IsEmpty(aj)){ak.err="SSAOMErrNotifyInfo";return ak}aj.SetCurrRow(al,ai);return ak};ae.prototype.NextRecord=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NextRecord")}this.FinishRecord();var aj;var ai;aj=e.call(this);if(aj<0){$.setReturnValue({err:true});return}else{if(aj<(this.GetWS().length-1)){this.SetActiveRow(aj+1);$.callback(this,function(ak){$.setReturnValue(ak)});return}else{if(this.GetWS().length===C.get("PAGE_SIZE")){this.SetActiveRow(0);$.callback(this,function(ak){if(ak.err){$.setReturnValue(ak)}else{ai=this.FindWorkSet(0);this.InsertWorkSet(0,ai);var al=this.GetCursor();if(al[0]<0){al[0]=0;this.SetCursor(al)}this.GetNextRecord();$.callback(this,function(am){if(am.err){this.DeleteWorkSet(0);$.setReturnValue(am)}else{$.setReturnValue(am)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NextRecord")}})}})}else{$.setReturnValue({err:true});return}}}};ae.prototype.WSFieldValue=function(an,am,aj){var al={};al.err="";var ao=this.GetNotifyInfoArray();var ak=ao[am];if(am>ao.length||ah.IsEmpty(ak)){al.err="SSAOMErrNotifyInfo";$.setReturnValue(al);return}var ai=this.FindWorkSet(ak.GetCurrRow(aj));this.FieldValue(an,ai);$.callback(this,function(ap){$.setReturnValue(ap)})};ae.prototype.PrepareOfflineRawRecord=function(at,ao,ai){var al=at;var ap=ao.length;var an="";var am={};var aq=[];var ar=e.call(this);var ak=0;var au=0;var aj=function(){if(ak===0){this.WSHomeX(au)}else{this.WSNextRecordX(au)}$.callback(this,function(ax){var aw=0;var av=function(){var az="";var ay=0;this.WSFieldValue(ao[aw],au);$.callback(this,function(aA){if(!aA.err){az=aA.retVal;if(!az){az=""}ay=az.length;if(an.length){an=an+ay+"*"+az}else{an=ay+"*"+az}if(ao[aw]==="Id"){am.id=az}}aw++;if(aw<ap){av.call(this)}else{am.value=an;aq.push(am);an="";am={}}})};if(ap>0){av.call(this)}});$.callback(this,function(){ak++;if(ak<al){aj.call(this)}})};if(al>0){aj.call(this)}$.callback(this,function(){aa.call(this,ar);$.setReturnValue({err:false,retVal:aq})})};ae.prototype.SelectRow=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SelectRow")}var ak;var aj;var ai;var al=[];ak=this.GetSelection();aj=this.FindWorkSet(ak);al=this.GetSelRowIdArray();this.FieldValue(A.get("SWE_ROW_ID_FIELD"),aj);$.callback(this,function(aq){var an=aq.retVal;var ap=function(){this.SetSelRowIdArray(al);this.SetMultiSelectMode(true);this.NotifySelModeChange(true);this.NotifyChangeSelection();this.NotifyNewSelection(false)};if(!this.GetMultiSelectMode()){var am;var ar;am=this.FindWorkSet(0);this.FieldValue(A.get("SWE_ROW_ID_FIELD"),am);$.callback(this,function(at){var au=at.retVal;al.push(au);ap.call(this)})}var ao;for(ao=0;ao<al.length;ao++){if(al[ao]===an){break}}if(ao===al.length){al.push(an)}else{al.splice(ao,1)}ap.call(this);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SelectRow")}})};ae.prototype.AssocSelection=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AssocSelection")}this.GetIdValueX();$.callback(this,function(am){if(!am.err){var at=am.retVal;var ax=this.GetActiveRow();var ai=ax;var aq=this.GetMultiSelectMode();var ap=this.GetSelRowIdArray();if(aq&&(ap.length===1)&&(ap[0]===at)){this.SetMultiSelectMode(false);aq=false;this.SetSelRowIdArray([]);this.NotifySelModeChange(aq)}if(!aq){return(ad.call(this,ax))}this.FinishRecord();this.DisableNotify();var au=this.GetBaseBC();au.DisableNotify();var ak=au.GetParentBusComp();ak.DisableNotify();var aw=this.GetActiveRow();var aj=this.GetSelRowIdArray();var ay=aj.length;var av=this.GetWorkSetSize();var ao="";var al;var an=0;var ar=function(){for(al=0;al<av;al++){ao=this.FindWorkSet(al);if(aj[an]===ao.Id){break}}if(al===av){this.InsertWorkSet(av,ao);this.PositionById(aj[an])}$.callback(this,function(){this.SetActiveRow(al);$.callback(this,function(){ad.call(this,al);$.callback(this,function(){this.SetActiveRow(ai);$.callback(this,function(){an++;if(an<ay){ar.call(this)}})})})})};if(an<ay){ar.call(this)}$.callback(this,function(){this.SetActiveRow(aw);$.callback(this,function(az){if(!az.err){if(al===av){this.DeleteWorkSet(av)}this.NotifySelModeChange(aq);this.SetMultiSelectMode(false);au.EnableNotify();ak.EnableNotify();this.EnableNotify();this.SetSelRowIdArray([]);this.NotifySelModeChange(false);this.NotifyNewData();au.Home();$.callback(this,function(){au.NotifyExecute();au.NotifyNewData();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AssocSelection")}})}})})}})};ae.prototype.IsCurWSRecSelected=function(ao,ak){var aj;
var an=false;var am;var al="";var ap;ap=this.GetSelRowIdArray();aj=e.call(this);if(aj<0){return}var ai=this.WSGetCurrRow(0,ak).retVal;if(!this.GetMultiSelectMode()){an=ai===aj?true:false}else{am=this.FindWorkSet(aj);if(am){this.FieldValue(A.get("SWE_ROW_ID_FIELD"),am)}$.callback(this,function(ar){if(!ar.err){al=ar.retVal;var aq;for(aq=0;aq<ap.length;aq++){if(ap[aq]===al){break}}if(aq!==ap.length){an=true}else{an=false}}else{}})}$.callback(this,function(){$.setReturnValue({err:false,retVal:an})})};ae.prototype.GetBaseBC=function(){var ak=this.GetExtObjProp("baseBC");if(!ak){var ai=SiebelApp.S_App.GetActiveView().GetActiveApplet();var aj=ai.GetParentApplet();if(aj){ak=aj.GetBusComp();this.SetExtObjProp("baseBC",ak)}else{this.SetExtObjProp("baseBC","NoBaseBC")}}else{if(ak==="NoBaseBC"){ak=""}}return ak};ae.prototype.SetBaseBC=function(ai){this.SetExtObjProp("baseBC",ai)};function ad(ai){this.FinishRecord();$.callback(this,function(){if(ai<0){return}var aj=this.FindWorkSet(ai);this.PositionById(aj.Id);$.callback(this,function(){var ak=this.GetBaseBC();ak.SetAssocList(this);ak.AddAssociation();$.callback(this,function(){this.NotifyNewData("SSAAssocExistsField")})})})}ae.prototype.PickCurrentRow=function(al,au,ai){var ap;var ay=this.GetName();var aA;var aw;var ax;ax=au.GetName();var am=W.GetActiveRequestObj();if(am&&am.SweCommands&&(am.SweCommands.SWEMethod===C.get("PICKRECORD"))&&(this.GetWS().length>0)){var az=this.GetWS()[e.call(this)].Id;SiebelApp.BrowserCacheMgr.GetPickFldDetails(ax,ai,ay,az);$.callback(this,function(aE){if(!aE.err){var aD=aE.retVal;if(!aD){}else{var aC=this.GetPickSrcIdFName();var aB=au.FindWorkSet(au.GetActiveRow());if(aC){this.GetIdValueX();$.callback(this,function(aF){if(!aF.err){if(aB&&aF.retVal!==aB[aC]&&!au.commitPending){au.NotifyStateChanged("cp",1)}au.SetFieldValueX(aC,aF.retVal,true)}else{$.setReturnValue(aF)}})}$.callback(this,function(aJ){if(!aJ.err){ap=au.GetFieldMap();aA=aD.PickMap.PMap;aA=aA.split(",");aw=aA.length;var aG=[];var aF=[];var aI=0;var aH=function(){var aM=aA[aI].split(":");var aK=aM[0];aF.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aM[1]));aG.push(aM[0]);if(aM[1]==="Id"){au.SetPrvPickMap(aM[0])}if(ap[aK]){var aL=aD.PickRecord[SiebelApp.OfflineUtils.RemoveNonAlphaChars(aM[1])];if(!aL){aL=""}if(aB&&!au.commitPending&&aB[aK]!==aL){au.NotifyStateChanged("cp",1)}au.SetFieldValueX(aK,aL,true)}aI++;if(aI<aw){$.callback(this,aH)}};aH.call(this)}else{$.setReturnValue(aJ)}})}}else{$.setReturnValue(aE)}SiebelApp.S_App.GetActiveView().GetActiveApplet().ClosePopupApplet(al)})}else{if(ai.PickListName){var ao=ai.pickMap;var an=ao.length;var ak;var aq;var av=0;var ar=true;var at=this.GetPickSrcIdFName();var aj=au.FindWorkSet(au.GetActiveRow());if(at){this.GetIdValueX();$.callback(this,function(aB){if(!aB.err){if(aj&&aB.retVal!==aj[at]&&!au.commitPending){au.NotifyStateChanged("cp",1)}au.SetFieldValueX(at,aB.retVal,true)}else{$.setReturnValue(aB)}})}$.callback(this,function(){var aB=function(){if(ao[av]){ak=ao[av].FldName;this.FieldValue(ao[av].PFldName);$.callback(this,function(aD){var aC=au.GetFieldDefn(ak);if(ao[av].IsConstrained&&ah.IsTrue(aC.IsCalculated)){ar=false}if(ar){if(!aD.err){au.SetFieldValueX(ak,aD.retVal,true)}}})}av++;if(av<an){$.callback(this,aB)}};if(av<an){aB.call(this)}$.callback(this,function(){$.setReturnValue({err:false,retVal:true});return})})}}};ae.prototype.AddAssociation=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AddAssociation")}var aj;var ak=CCFMiscUtil_CreatePropSet();var ai={};ai[J]=this.GetName();ai[u]=z;ai[N]="AddAssociation";ai[f]=this;ai[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,ak);$.callback(this,function(ap){aj=ap.retVal;err=ap.err;if(err){$.setReturnValue({err:err,retVal:aj});return}if(!ap.err){aj=ap.retVal;if(aj.Outputargs&&(aj.Outputargs).GetProperty("Invoked")&&(aj.Outputargs).GetProperty("Invoked").toString()==="true"){var am=(aj.Outputargs).GetProperty("RetVal");if(am){$.setReturnValue({err:err,retVal:am})}else{$.setReturnValue({err:err,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}return}}if(aj.Outputargs){(aj.Outputargs).SetType(a);ak.AddChild(aj.Outputargs)}var al=function(){this.FinishRecord();$.callback(this,function(){var au=this.GetActiveRow();var ar=this.FindWorkSet(au);var av=this.GetAssocList();if(av){var at=av.FindWorkSet(av.GetActiveRow());au++;s.call(this,at);$.callback(this,function(az){if(az.err){$.setReturnValue(az)}else{var ax=az.retVal.fieldList;var ay=az.retVal.fieldVal;this.InsertWorkSet(au,at);var aw=this.GetWorkSetSize();if(ar&&au>aw){if(au!==aw-1){this.DeleteWorkSet(aw-1)}else{this.DeleteWorkSet(0);au--}}this.SetActiveRow(au);$.callback(this,function(){if(ax.length>0){var aA=function(aB){return[ax[aB],ay[aB]]};$.eachAsyncOp(this,{execute:this.SetFieldValueX,executeScope:this,preExecute:aA,iteration:ax.length})}$.callback(this,function(){if(aq){this.FieldValue("Id");$.callback(this,function(aC){var aB=aC.retVal;ao.UpdateRecordX();$.callback(this,function(){ao.SetFieldValueX(an.primeIdFieldName,aB);$.callback(this,function(){ao.WriteRecord();this.NotifyNewRecord();this.OnAddAssociation();this.UpdateLinks(false);$.callback(this,function(){if(ao){ao.OnAddChildAssociation(this)}ai[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,ak);$.callback(this,function(aE){aj=aE.retVal;var aD=aE.err;if(aD){$.setReturnValue({err:aD,retVal:aj});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}})})})})})}else{this.NotifyNewRecord();this.OnAddAssociation();this.UpdateLinks(false);$.callback(this,function(){if(ao){ao.OnAddChildAssociation(this)}ai[ag]=r;SiebelApp.S_App.Model.InvokeRegisteredSvc(ai,ak);$.callback(this,function(aC){aj=aC.retVal;var aB=aC.err;if(aB){$.setReturnValue({err:aB,retVal:aj});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}})})}})})}})}})};var an=this.GetLinkDef();var aq=false;var ao=this.GetParentBusComp();if(an&&an.primeIdFieldName&&ao&&!(ao.GetDefn().Fields[(an.primeIdFieldName)].ReadOnly)){ao.CanUpdateField(an.primeIdFieldName);$.callback(this,function(ar){if(ar.retVal){ao.FieldValue(an.primeIdFieldName);$.callback(this,function(au){var at=au.retVal;if(!at){aq=true}al.call(this)})}else{al.call(this)}})}else{al.call(this)}})};ae.prototype.GetWorkSetSize=function(){return this.GetWSSize()};ae.prototype.DeleteWorkSet=function(al){var ai="";var aj=this.GetWS().length;if(aj===0){return}else{if(al!==aj){var ak=this.GetWS().splice(al,1);ai=ak[0]}}this.NotifyDeleteWorkSet(al,1,ai)};function s(av){var ak=this.GetParentBusComp();if(ak){var ax="OnAddAssociation:"+ak.GetName();if(this.GetUserProperty(ax)){}ax="OnAddAssocUpdateParent:"+ak.GetName();if(this.GetUserProperty(ax)){}}var aB=av.Id;var ao=this.GetWorkSetSize();var al;for(var ay=0;ay<ao;ay++){al=this.FindWorkSet(ay);if(al){if(aB===al.Id){$.setReturnValue({err:true});return
}}}this.SetBCTableInsertState(C.get("INSMODE_ASSOCONLY"));var aF=this.GetLinkDef();var ap=aF.interTableName;var aw=[];var aD=[];aw.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF.interParentColName));aw.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF.interChildColName));aD.push((this.GetExtObjProp("m_pCurLinkQueryDef").Data.srcFieldValue));aD.push(aB);aw.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(A.get("SWE_ROW_ID_FIELD")));var aA=S.call(this,aD[0],aB);aD.push(aA);var aC=this.GetDefn().Fields;var at=0;var ai=[];var am=[];var aq={};aq.fieldList=[];aq.fieldVal=[];for(var aE in aC){var ar=aC[aE].ColName;if(aC[aE].Join&&aC[aE].JoinInfo.JoinType==="X"){if(G.DoesFieldExist(ap,ar)){var az=aC[aE].PreDefault;if(az){aw.push(ar);am.push(aE);at++}}}}if(at>0){var an=this.GetName();var aj=function(aG){return[an,am[aG],true]};aq.fieldList=am;var au=function(aG){ai.push(aG.retVal);aD.push(aG.retVal)};$.eachAsyncOp(this,{execute:this.GetDefaultValue,executeScope:this,postExecute:au,preExecute:aj,iterations:at})}$.callback(this,function(){aq.fieldVal=ai;var aG=SiebelApp.SqlBuilder.InsertRecord(ap,aw,aD);this.SetInsertStatement(aG);this.SetOpType(C.get("ADDRECORD"));this.SyncQRec(aB);$.callback(this,function(aH){var aI=aH.retVal;this.SetNewTxn(aI);this.WriteRecord();$.callback(this,function(){$.setReturnValue({err:false,retVal:aq})})})})}function S(al,ak){var aj,ai;if(al<ak){aj=al;ai=ak}else{aj=ak;ai=al}return(aj+"."+ai)}ae.prototype.OnAddAssociation=function(){};ae.prototype.OnAddChildAssociation=function(){};ae.prototype.DisableNotifySys=function(){if(!(this.IsNotifySysEnabled())){return}this.NotifyDeleteWorkSet(0,-1);this.DisableNotify();this.SetNotifySysEnabled(false)};ae.prototype.NotifyGeneric=function(al,ak){var am;if(this.IsNotifyEnabled()){var ao=this.GetNotifyInfoArray();var ai=ao.length;for(var aj=0;aj<ai;aj++){am=ao[aj];if(am){var an=am.GetBusCompNotify();if(an){an.NotifyGeneric(al,ak)}}}}};ae.prototype.NotifyExecute=function(aj,ai){};ae.prototype.GetNumSelected=function(al){var aj=this.GetMultiSelectMode();var ak=this.GetSelRowIdArray();if(!this.GetMultiSelectMode()){al=1}else{if(!this.GetInverseSelection()){al=ak.length}else{var ai;ai=this.GetNumRows();al=ai-ak.length;return al}}return al};ae.prototype.CheckActivation=function(){var al=false;var ap=this.GetActivatedFieldList();var ai=this.GetSavedFieldArray();var ao=ai.length;var an;var aj=ap.length;for(var am=0;am<aj;am++){an=this.GetFieldDefn(ap[am]);if(!al&&an&&!(ah.IsTrue(an.IsCalculated))){for(var ak=0;ak<ao;ak++){if(ap[am]===ai[ak]){break}}if(ap[am]===ai[am]){continue}al=true}}return al};ae.prototype.SaveFieldArray=function(){var ai=this.GetActivatedFieldList().splice(0);this.SetSavedFieldArray(ai)};ae.prototype.SaveCanMethodStates=function(an){var av;var au;var aq;var ap;var ai;var am;var al;var ak;var at;var aj;var ar=this.IsActiveFieldListDirty();var ao=this.GetBCState();if(an===X){return}if(an===V){av=ar;if(av!==ao.m_bActiveFieldListDirty){if(this.NotifyStateChanged("bActiveFieldListDirty",av)){ao.m_bActiveFieldListDirty=av}}}if(an===V){au=this.CanAssociate();if(au!==ao.m_bCanAssociate){if(this.NotifyStateChanged("bCanAssociate",au)){ao.m_bCanAssociate=au}}}if(an===V||an==="SAVE_BC_STATE_CANDELETE"){this.CanDelete();$.callback(this,function(aw){aq=aw.retVal;if(aq!==ao.m_bCanDelete){if(this.NotifyStateChanged("bCanDelete",aq)){ao.m_bCanDelete=aq}}})}$.callback(this,function(){if(an===V){ap=this.CanInsert(false);ai=this.CanInsert(true);if(ap!==ao.m_bCanInsert){if(this.NotifyStateChanged("bCanInsert",ap)){ao.m_bCanInsert=ap}}if(ai!==ao.m_bCanInsertDynamic){if(this.NotifyStateChanged("bCanInsertDynamic",ai)){ao.m_bCanInsertDynamic=ai}}}if(an===V){am=this.CanMergeRecords();if(am!==ao.m_bCanMergeRecords){if(this.NotifyStateChanged("bCanMergeRecords",am)){ao.m_bCanMergeRecords=am}}}if(an===V){al=this.CanQuery();if(al!==ao.m_bCanQuery){if(this.NotifyStateChanged("bCanQuery",al)){ao.m_bCanQuery=al}}}if(an===V){this.CanUpdateX(false);$.callback(this,function(aw){ak=aw.retVal;this.CanUpdateX(true);$.callback(this,function(ax){at=ax.retVal;if(ak!==ao.m_bCanUpdate){if(this.NotifyStateChanged("bCanUpdate",ak)){ao.m_bCanUpdate=ak}}if(at!==ao.m_bCanUpdateDynamic){if(at){at=1}else{at=0}if(this.NotifyStateChanged("bCanUpdateDynamic",at)){ao.m_bCanUpdateDynamic=at}}})})}$.callback(this,function(){if(an===V){aj=this.HasAssocList();if(aj!==ao.m_bHasAssocList){if(this.NotifyStateChanged("bHasAssocList",aj)){ao.m_bHasAssocList=aj}}}this.SetBCState(ao)})})};ae.prototype.HasPickList=function(ak){var aj=this.GetFieldDefn(ak);var ai=false;if(aj&&!ah.IsEmpty(aj.PickListName)){ai=true}return ai};ae.prototype.IsPickAssocField=function(){};ae.prototype.GetNextTokenConst=function(ao){var al=0;var an;var ak=0;var ai=0;var am={};am.token="";am.next="";if(ah.IsEmpty(ao)){return am}var aj=ao.charAt(0);while(aj===" "||aj=="\t"||aj=="\n"){ao=ao.substring(1);aj=ao.charAt(0)}aj=ao.charAt(ak);if(aj=='"'||aj=="'"){an=aj;aj=ao.charAt(++ak);while((aj!=an||ao.charAt(ak+1)==an)&&aj!="\0"){if(aj==an&&ao.charAt(ak+1)==an){aj=ao.charAt(++ak)}aj=ao.charAt(++ak)}aj=ao.charAt(ak);if(aj==an){ak++}}else{aj=ao.charAt(ak++);ai=ao.length;while(aj!=" "&&aj!="\t"&&aj!="\n"&&aj!="\0"&&ak<ai){aj=ao.charAt(ak++)}}am.token=ao.substring(al,ak-al);am.next=ao.substring(ak);return am};function v(ai,ao,am){var al;var aj;var ak="";var ap=this.IsOnFieldUpdDisabled();var ar=this.GetOnUpdSrcFldArray();var an=this.GetOnUpdConditionArray();var at=this.GetOnUpdExprArray();var aq=this.GetOnUpdDstFldArray();if(ap||this.LoadOnFieldUpdateSet(ai)!==true||(aj=ar.length)===0){return}for(al=0;al<aj;al++){if(ai!==ar[al]){continue}if(an.length>al&&an[al]){ak=SiebelApp.Query.Evaluate(an[al].m_pQuery.ast,this)}ak=SiebelApp.Query.Evaluate(at[al].m_pQuery.ast,this);this.SetFieldValueX(aq[al],ak)}}ae.prototype.LoadUserPropN=function(ar,an,au,at,aq,ao){var am;var ak;var ai;var ap;var aj;var al=null;ai=ar;for(am=0,ak=0;am<100;am++,ak++){if(am>0){ai=ar+" "+am}ap=this.GetUserProperty(ai);if(ah.IsEmpty(ap)){if((am===0)||(an.length&&(ak<10))){continue}else{break}}ak=0;if(!au){an.push(ap)}else{al=ap;var av=this.GetNextTokenConst(al);al=av.next;aj=av.token;aj=k.StripQuotes(aj);an.push(aj);av=this.GetNextTokenConst(al);al=av.next;aj=av.token;av=this.GetNextTokenConst(al);al=av.next;aj=av.token;aj=k.StripQuotes(aj);au.push(aj);if(at){if(ao){if(al.charAt(0)===","){ao.push("Y")}else{ao.push("N")}}av=this.GetNextTokenConst(al);al=av.next;aj=av.token;av=this.GetNextTokenConst(al);al=av.next;aj=av.token;aj=k.StripQuotes(aj);at.push(aj)}if(aq){av=this.GetNextTokenConst(al);al=av.next;aj=av.token;av=this.GetNextTokenConst(al);al=av.next;aj=av.token;aj=k.StripQuotes(aj);aq.push(aj)}}}};ae.prototype.LoadOnFieldUpdateSet=function(al){var ay;var az;var aj;var ai;var am;var ax;var av;var ao;var ak;var at=[];var aq=[];var aB=[];var au=[];var an=[];var aw=this.GetOnUpdSrcFldArray();var aC=this.GetOnUpdDstFldArray();var ap=this.GetOnUpdExprArray();var aA=null;var ar=this.GetOnUpdConditionArray();if(!this.IsLoadOnFldUpdSet()){this.SetLoadOnFldUpd(true);
this.LoadUserPropN("On Field Update Set",at,aq,aB,au,an);az=at.length;for(ay=0;ay<az;ay++){aj=at[ay];ai=aq[ay];if(ah.IsEmpty(aj)||ah.IsEmpty(ai)){continue}ax=this.GetFieldDefn(aj);av=this.GetFieldDefn(ai);if((aj!==ai)&&ax&&av){am=null;if(ah.IsEmpty(aB[ay])){if(ah.IsEmpty(au[ay])&&(an[ay]==="Y")){aB[ay]="["+aj+"]"}else{aB[ay]='"'+aB[ay]+'"'}}am={};am.m_expr=aB[ay];aw.push(aj);aC.push(ai);ap.push(am);if(!ah.IsEmpty(au[ay])){am={};am.m_expr=au[ay];ar.push(am)}else{ar.push(null)}}}}az=aw.length;for(ay=0;ay<az;ay++){if(al===aw[ay]){am=null;am=ap[ay];if((am!=null)&&(am.m_pQuery==null)){ao={};ao.m_pSqlObj=aA;ao.ast=SiebelApp.Query.Parse(am.m_expr);am.m_pQuery=ao;ao=null}am=ar[ay];if((am!=null)&&(am.m_pQuery==null)){ak={};ak.m_pSqlObj=aA;ak.ast=SiebelApp.Query.Parse(am.m_expr);am.m_pQuery=ak;ak=null}}}return true};ae.prototype.ValidatePickValue=function(al,ak){if(!this.HasPickList(al)){$.setReturnValue({err:"",retVal:false});return}var aw;var av;var ao="";var at;var au;var aj=null;var an=null;var ap=null;var aq=[];var ai=null;au=this.GetFieldDefn(al);at=au.PickListName;an=SiebelApp.S_App.Model.GetPickListDef(at);if(!(an)){$.setReturnValue({err:"",retVal:false});return}av=an.IsBounded;if(!av){$.setReturnValue({err:"",retVal:false});return}ai=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());aj=ai.GetBusCompX(an.BC);if(aj===null){$.setReturnValue({err:"",retVal:true});return}aw=this.CheckSpecialPickValue(al,ak);if(aw){$.setReturnValue({err:"",retVal:true});ai.EndLife();ai=null;aj=null;return}if(au.pickMap.length===0){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrPickMapEmpty",aq);$.setReturnValue({err:"SSAOMErrPickMapEmpty",retVal:false});ai.EndLife();ai=null;aj=null;return}if(!ah.IsEmpty(ak)){var ar=au.pickMap.length;for(var am=0;am<ar;am++){ap=au.pickMap[am];if(ap.IsConstrained){continue}if(ap.FldName===al){ao=ap.PFldName;break}}aj.SetFldSearchSpec(ao,ak);aj.Execute();$.callback(this,function(ax){if(ax.err){aq.push(at);aq.push(al);aq.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",aq);$.setReturnValue({err:"SSAOMErrBoundedPick",retVal:false});ai.EndLife();ai=null;aj=null;return}else{aj.Home();$.callback(this,function(ay){if(aj.GetActiveRow()>-1){$.setReturnValue({err:"",retVal:true});aj.PickCurrentRow("",this,au);$.callback(this,function(az){if(!az.err){$.setReturnValue({err:false,retVal:true});return}else{$.setReturnValue({err:true,retVal:false});return}})}else{aq.push(at);aq.push(al);aq.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",aq);$.setReturnValue({err:"SSAOMErrBoundedPick",retVal:false})}ai.EndLife();ai=null;aj=null;return})}})}else{aj.PickNoRow(this,au);$.callback(this,function(ax){if(!ax.err){$.setReturnValue({err:"",retVal:true});return}})}$.setReturnValue({err:"",retVal:true})};ae.prototype.CheckSpecialPickValue=function(ai,aj){return false};ae.prototype.GetPickList=function(aj,ak){var ai=this.ValidateFieldDef(aj)};ae.prototype.SetSrcIdFld=function(ai,ak){var al=ak.GetFieldDefn(ai).pickMap;for(var aj=0;aj<al.length;aj++){if(al[aj].PFldName===A.get("SWE_ROW_ID_FIELD")){this.SetPickSrcIdFName(al[aj].FldName);break}}};ae.prototype.PickNoRow=function(am,al){var an=[];an=al.pickMap;var ai=an.length;var ak=0;var aj=function(){if(!ah.IsTrue(an[ak].IsConstrained)){am.SetFieldValueX(an[ak].FldName,"",true)}$.callback(this,function(ao){if(!ao.err){ak++;if(ak<ai){aj.call(this)}else{$.setReturnValue({err:true,retVal:false});return}}})};if(ai){aj.call(this)}};ae.prototype.SaveBusCompStates=function(am){var aw;var ai;var al=false;var at=this.GetActiveRow();var au;var av;var ak;var aj;var an=this.GetBCState();var aq;var ar=this.GetSelRowIdArray();if(am===X){return}if(am===V||am==="SAVE_BC_STATE_ROWNUMINFO"){if(!this.GetRowNum(aq,this.GetActiveRow())){at=-1}if(at!==an.m_curRowNum){if(this.NotifyStateChanged("curRowNum",at)){an.m_curRowNum=at}}au=this.GetNumRows(au);aw=(au>-1)?1:0;if(aw!==an.m_bNumRowsKnown){if(this.NotifyStateChanged("bNumRowsKnown",aw)){an.m_bNumRowsKnown=aw}}if(au!==an.m_numRows){if(this.NotifyStateChanged("numRows",au)){an.m_numRows=au}}}if(am===V||am==="SAVE_BC_STATE_SELINFO"){av=this.GetNumSelected(av);ai=(!isNaN(av))?1:0;if(ai!==an.m_bNumSelectedKnown){if(this.NotifyStateChanged("bNumSelectedKnown",ai)){an.m_bNumSelectedKnown=ai}}if(av!==an.m_numSelected){if(this.NotifyStateChanged("numSelected",av)){an.m_numSelected=av}}ak=ar.length;an.m_selRowIdArray=[];aj=an.m_selRowIdArray.length;if(ak===aj){for(var ap=0;ap<ak;ap++){if(ar[ap]!==an.m_selRowIdArray[ap]){break}}al=(ap===ak)?true:false}if(!al){an.m_selRowIdArray=[];this.NotifyNewSelIds();for(var ao=0;ao<ak;ao++){an.m_selRowIdArray.push(ar[ao])}}}this.SetBCState(an)};ae.prototype.WSGetBegRow=function(ai,aj){var al=this.GetNotifyInfoArray();var ak=al[ai];if(ak){return(ak.GetBegRow(aj))}return};ae.prototype.BeginQuery=function(ai){this.SetInQueryState(true);this.NotifyBeginQuery()};ae.prototype.DoBldQueryText=function(aq,ak){var al=null;var av;if(!(aq&&ak)){return al}if((aq.GetUIType()===A.get("SWE_CTRL_DATE_PICK"))||(aq.GetUIType()===A.get("SWE_CTRL_DATE_TIME_PICK"))||(aq.GetUIType()===A.get("SWE_CTRL_DATE_TZ_PICK"))){if(ak.length===10){ak=SiebelApp.S_App.LocaleObject.StringToFormatted("DATE",ak,"YYYYMMDD");var an=new Date(ak.substring(0,4),ak.substring(4,6)-1,ak.substring(6,8));var ao=new Date();var am=ao.getTimezoneOffset();var aj=new Date(an.getFullYear(),an.getMonth(),an.getDate());aj.setMinutes(aj.getMinutes()+am);var ai=new Date(aj.getFullYear(),aj.getMonth(),aj.getDate(),aj.getHours(),aj.getMinutes());ai.setHours(ai.getHours()+24);var ax=aj.getDate()<10?"0"+aj.getDate():""+aj.getDate();var ar=aj.getHours()<10?"0"+aj.getHours():""+aj.getHours();var au=ai.getDate()<10?"0"+ai.getDate():""+ai.getDate();var ap=ai.getHours()<10?"0"+ai.getHours():""+ai.getHours();var aw=aj.getFullYear()+""+(aj.getMonth()+1)+""+ax+""+ar;var at=ai.getFullYear()+""+(ai.getMonth()+1)+""+au+""+ap;av="["+aq.GetName()+'] >= "'+aw+'"&&['+aq.GetName()+'] <= "'+at+'"'}else{SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAPharmaInvalidDateLength");$.setReturnValue({err:"SSAPharmaInvalidDateLength",retVal:false});return false}return av}if(ak.indexOf("%")!==-1){ak=ak.replace(/\%/g,"[%]")}if(ak.indexOf("_")!==-1){ak=ak.replace(/\_/g,"[_]")}if(ak.indexOf("?")!==-1){ak=ak.replace(/\?/g,"_")}if(ak.indexOf("*")!==-1){ak=ak.replace(/\*/g,"%")}else{if(ak.indexOf("_")===-1){ak=ak.concat("%")}}al=g+' "'+ak+'"';av="[";av+=aq.GetFieldName();av+="]";av+=" "+al;return av};ae.prototype.NotifyBeginQuery=function(){var ak;if(this.IsNotifyEnabled()){var am=this.GetNotifyInfoArray();var ai=am.length;for(var aj=0;aj<ai;aj++){ak=am[aj];if(ak){var al=ak.GetBusCompNotify();if(al){al.NotifyBeginQuery()}}}}};ae.prototype.SetInQueryState=function(ai){if(SiebelApp.OfflineAppSettings.GetMode()===true){if(this.IsInQueryState()!==ai){this.NotifyStateChanged("bInQueryState",ai)}return(j.SetInQueryState.call(this))}};ae.prototype.SqlDeleteRecord=function(al){if(this.IsVBC()){retObj=({err:false})
}else{var ai=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var aj=[];var ap=[];var an=this.GetLinkDef();if(an&&!ah.IsEmpty(an.interTableName)){var aq=this.GetParentBusComp();var ao=aq.GetActiveRow();var am=aq.FindWorkSet(ao);ai=an.interTableName;aj.push(an.interParentColName);aj.push(an.interChildColName);ap.push(am[an.srcFieldName]);ap.push(al[an.destFieldName])}else{aj.push("Id");ap.push(al.Id)}var ak=SiebelApp.SqlBuilder.DeleteRecords(ai,aj,"AND");SiebelApp.BrowserCacheMgr.Execute(ak,ap)}$.callback(this,function(ar){$.setReturnValue(ar)})};ae.prototype.DeleteRecordX=function(ao,an){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.DeleteRecordX")}if(SiebelApp.OfflineAppSettings.GetMode()!==true){return}var am;var ak={};var al=[];var aj=CCFMiscUtil_CreatePropSet();ak[J]=this.GetName();ak[u]=z;ak[N]="DeleteRecord";ak[f]=this;var ai=ah.IsEmpty(an)?true:an;ak[ag]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ak,aj);$.callback(this,function(au){if(!au.err){am=au.retVal;if(am.Outputargs&&(am.Outputargs).GetProperty("Invoked")&&(am.Outputargs).GetProperty("Invoked").toString()==="true"){var aq=(am.Outputargs).GetProperty("RetVal");if(aq){$.setReturnValue({err:err,retVal:aq})}else{$.setReturnValue({err:err,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX")}return}if(am&&am.Outputargs){(am.Outputargs).SetType(a);var ap=am.Outputargs.GetPropertyAsStr("bAddSyncQ");if(!ah.IsEmpty(ap)){ai=ap}}var at=true;var av="";if(!this.CanDeferDelete()){an=false}if(!this.IsExecuted()||!this.CheckActiveRow()||!this.CanDeleteX()){$.setReturnValue({err:true})}if(this.IsDeleteRecordPending()){}this.NotifyDeleteRecord(true,at);var ar=e.call(this);av=this.FindWorkSet(ar);if(an){}else{if(this.IsNewRecordPending()){this.PostDeleteRecord(ao,an)}else{this.SqlDeleteRecord(av);$.callback(this,function(ax){if(ax.err){$.setReturnValue(ax)}else{if(this.IsVBC()){this.PostDeleteRecord(ao,an);ak[ag]=r;aj.SetProperty("Record",JSON.stringify(av));SiebelApp.S_App.Model.InvokeRegisteredSvc(ak,aj);$.callback(this,function(az){$.setReturnValue(az)})}else{var aw=this.GetRecordCount();this.SetRecordCount(--aw);this.SetOpType(C.get("DELETERECORD"));var ay=this.FieldValue(A.get("SWE_ROW_ID_FIELD"),av);$.callback(this,function(az){if(az.err){$.setreturnValue(az);return}else{ay=az.retVal;this.SetTxnId(k.GetTempId());this.SyncQRec(ay);$.callback(this,function(aA){var aB=aA.retVal;this.SetNewTxn(aB);if(ah.IsTrue(ai)){this.UpdateSync()}$.callback(this,function(){this.PostDeleteRecord(ao,an);ak[ag]=r;aj.SetProperty("Record",JSON.stringify(av));SiebelApp.S_App.Model.InvokeRegisteredSvc(ak,aj);$.callback(this,function(aC){$.setReturnValue(aC)})})})}})}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX")}})}}}else{$.setReturnValue(au)}})};ae.prototype.ScrollWorkSetByNum=function(ar,ap,ai){this.FinishRecord();var an=0;var ak=0;var ao=0;var at=0;var aw=this.GetActiveRow();var am;var aq;var al;var av=this.GetWS().length;var aj;var au=this.GetNotifyInfoArray();if(ar>=0){al=true}else{al=false}if(at<au.length){aj=au[at];if(aj){aq=aj.GetBegRow(ai);am=aj.GetSize();if(ar>0){an=av-(aq+am);ak=ar-an}else{an=aq;ak=ar+an}var ax=this.GetCursor();if(al){ax[0]=this.GetScrollCount()+this.GetWS().length-1;this.SetNextSet(false);this.SetPriorSet(true)}else{if(!al){ax=this.GetCursor();ax[0]=this.GetScrollCount();this.SetCursor(ax);this.SetPriorSet(false);this.SetNextSet(true)}}this.SetCursor(ax);this.ScrollWorkSet(ak,ao);$.callback(this,function(aA){if(aA.err){$.setReturnValue(aA)}else{var aB=aA.retVal;var ay=this.GetScrollCount();ay=ay+aB.actualScrolled;this.SetScrollCount(ay);if(aB.actualScrolled){if(ar>0){if(an>ar){aq=aq+ar}else{aq=aq+an}}else{if(an>(-ar)){aq=aq+ar}else{aq=0}}aj.SetBegRow(aq,ai);this.DisableNotify();aw=aw-aB.actualScrolled;if(aw===this.GetActiveRow()){this.OnActiveRowChanged();this.EventChangeRecord()}else{var az=false;this.SetActiveRow(aw);az=true;if(az){$.callback(this,function(aC){this.EnableNotify();this.NotifyScrollData(al,aB.actualScrolled)})}else{this.NotifyScrollData(al,aB.actualScrolled)}}}else{aj.SetBegRow(((av>aj.GetSize())?(av-am):0),ai);aw=av-1}aj.SetCurrRow(aq,ai)}})}}};ae.prototype.NextSet=function(an,ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NextSet")}var aq=0;var aj;var ar=this.GetNotifyInfoArray();if(aq>=ar.length){$.setReturnValue({err:true});return}aj=ar[aq];if(aj){var ao=aj.GetBegRow(ai);var al=aj.GetSize();var au=this.GetActiveRow();al=1;if(ao!==au){ao=au}var am=0;var at=this.GetWS().length;var ap=ao+(2*al)-at;if(ap<=0){ap=0;au+=al-ap;var ak=false;if(au>=0){this.SetActiveRow(au);ak=true}var av=function(){ao+=al-ap;aj.SetBegRow(ao,ai);aj.SetCurrRow(ao,ai);var aw={};aw.actualScrolled=am;$.setReturnValue({err:false,retVal:aw});return};if(ak){$.callback(this,function(){av.call(this)})}else{av.call(this)}}if(ap>0){this.ScrollWorkSet(ap,am);$.callback(this,function(az){if(!az.err){var aA=az.retVal;var ax=this.GetScrollCount();ax=ax+aA.actualScrolled;this.SetScrollCount(ax);ao+=al-ap;aj.SetBegRow(ao,ai);aj.SetCurrRow(ao,ai);au+=al-ap;var ay=function(){$.setReturnValue({err:false,retVal:aA});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NextSet")}};var aw=false;if(au>=0){if(au!==this.GetActiveRow()){this.SetActiveRow(au);aw=true;$.callback(this,function(){this.OnActiveRowChanged();this.EventChangeRecord();ay.call()})}else{this.UpdateLinks(false);$.callback(this,function(aB){if(!aB.err){}})}}else{ay.call(this)}}else{aj.SetBegRow(((at>al)?(at-al):0),ai);au=at-1;aj.SetCurrRow(ao,ai)}})}}};ae.prototype.PriorSet=function(am,ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PriorSet")}var ap=0;var aj;var aq=this.GetNotifyInfoArray();if(ap>=aq.length){$.setReturnValue({err:true});return}aj=aq[ap];if(aj){var an=aj.GetBegRow(ai);var ak=aj.GetSize();var at=this.GetActiveRow();ak=1;if(an!==at){an=at}var al=0;var ar=this.GetWS().length;var ao=an-ak;if(ao>=0){ao=0;an-=(ak-(-ao));at-=(ak-(-ao));aj.SetCurrRow(an,ai);aj.SetBegRow(an,ai);if(at!==this.GetActiveRow()){if(at>=0){this.SetActiveRow(at);$.callback(this,function(au){$.setReturnValue(au);if(au.err){aj.SetBegRow((ar>ak)?(ar-ak):0,ai);at=ar-1;aj.SetCurrRow(an,ai)}});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NextSet")}return}}}if(ao<0){this.ScrollWorkSet(ao,al);$.callback(this,function(av){if(!av.err){var av=av.retVal;var au=this.GetScrollCount();au=au+av.actualScrolled;this.SetScrollCount(au);an-=(ak-(-ao));at-=(ak-(-ao));aj.SetCurrRow(an,ai);aj.SetBegRow(an,ai);if(at!==this.GetActiveRow()){if(at>=0){this.SetActiveRow(at);$.callback(this,function(aw){$.setReturnValue(aw)})}}else{this.UpdateLinks(false)}}else{aj.SetBegRow(0,ai);at=0;aj.SetBegRow((ar>ak)?(ar-ak):0,ai);at=ar-1;aj.SetCurrRow(an,ai)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NextSet")
}})}}};ae.prototype.GetNextRecord=function(ak){var ao=this.GetCursor();var aq=this.GetQuerySearchSpec();var al=this.GetQuerySortSpec();var an=this.GetQueryFieldList();var ai=this.GetQueryOrder();ao[0]++;var ap=[];var aj=this.GetExtObjProp("m_pCurLinkQueryDef");ap.push(this.GetName());if(aj){if(!ah.IsEmpty(aj.Defn.interTableName)){ap.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aj.Defn.interTableName))}}var am=SiebelApp.SqlBuilder.SelectRecordPopulateWS(ap,aq,an,al,ai,ao);SiebelApp.BrowserCacheMgr.SelectRecord(am);$.callback(this,function(at){if(at.err){$.setReturnValue({err:true});ao[0]--}else{var ar=at.retVal;if(!ar){$.setReturnValue({err:true});ao[0]--}else{$.setReturnValue({err:false,retVal:ar})}}})};ae.prototype.GetPriorRecord=function(al){var ar=this.GetCursor();var at=this.GetQuerySearchSpec();var an=this.GetQuerySortSpec();var ap=this.GetQueryFieldList();var ai=this.GetQueryOrder();var am=this;var ak=this.GetRecordCount();if(ar[0]<=0){$.setReturnValue({err:true});return}if(ar[0]>=ak){ar[0]=ak-1}ar[0]--;var aq=[];var aj=this.GetExtObjProp("m_pCurLinkQueryDef");aq.push(am.GetName());if(aj){if(!ah.IsEmpty(aj.Defn.interTableName)){aq.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aj.Defn.interTableName))}}var ao=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aq,at,ap,an,ai,ar);SiebelApp.BrowserCacheMgr.SelectRecord(ao);$.callback(this,function(av){if(av.err){$.setReturnValue(av);ar[0]++}else{var au=av.retVal;if(!au){$.setReturnValue({err:true});ar[0]++}else{this.SetCursor(ar);$.setReturnValue({err:false,retVal:au})}}})};ae.prototype.ScrollWorkSet=function(an,ai){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ScrollWorkSet")}if(an===0){$.setReturnValue({err:true});return}var al;var ap;var am;var aq=false,ao=0,aj;var ak;if(an>0){ap=this.GetWS().length;al=this.FindWorkSet(ap-1,al);if(!al){$.setReturnValue({err:true});return}ak=function(){var ar=this.GetCursor();if(ar[0]<0){ar[0]=0;this.SetCursor(ar)}this.GetNextRecord(al);$.callback(this,function(at){aj=at.err;al=at.retVal;if(!al||aj){aq=true}else{this.InsertWorkSet(this.GetWS().length,al);ai++;this.DeleteWorkSet(0)}ao++;if(ao<an&&!aq){ak.call(this)}})};ak.call(this);$.callback(this,function(){var ar={};ar.actualScrolled=ai;$.setReturnValue({err:false,retVal:ar})})}else{al=this.FindWorkSet(0,al);if(!al){$.setReturnValue({err:true});return}ak=function(){this.GetPriorRecord(al);$.callback(this,function(ar){aj=ar.err;al=ar.retVal;if(!al||aj){aq=true}else{ai--;this.InsertWorkSet(0,al);this.DeleteWorkSet(this.GetWS().length-1)}ao++;if(ao<(-an)&&!aq){ak.call(this)}})};ak.call(this);$.callback(this,function(){var ar={};ar.actualScrolled=ai;$.setReturnValue({err:false,retVal:ar});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.ScrollWorkSet")}})}};ae.prototype.PostDeleteRecord=function(aj,ar){var am=true;var an=e.call(this);this.DeleteWorkSet(an);var al=this.GetWorkSetSize();var ai=function(){if(this.GetWS().length===0){aa.call(this,-1)}else{if(an===-1){aa.call(this,0)}else{if(an===this.GetWS().length){aa.call(this,--an)}}}this.SetCommitPending(false);this.SetNewRecPending(false);this.SetDeleteRecordPending(false);this.NotifyDeleteRecord(false,am);this.UpdateLinks(false);$.callback(this,function(){this.OnActiveRowChanged()})};if(this.GetWS().length===(al-1)){if(al>0){var aq=this.GetCursor();var ao=aq[0];var ap=this.GetScrollCount();aq[0]=ap+this.GetWS().length-1;var ak;this.GetNextRecord();$.callback(this,function(au){ak=au.retVal;var at=au.err;if(!at&&ak){this.InsertWorkSet(this.GetWS().length,ak)}else{if(au.err||!ak){if(ap){aq[0]=ap;this.GetPriorRecord(ak);$.callback(this,function(av){at=av.err;ak=av.retVal;if(!ak||at){}else{if(!at&&ak){this.SetScrollCount(--ap);this.InsertWorkSet(0,ak)}}})}}}$.callback(this,function(av){ai.call(this)})});$.callback(this,function(){aq[0]=ao;this.SetCursor(aq)})}}else{ai.call(this)}};ae.prototype.GetCalcFields=function(){var ai;var ak=this.GetDefn().Fields;for(var aj in ak){if(ah.IsTrue(ak[aj].IsCalculated)){ai.push(ak[aj])}}};ae.prototype.ClearToQuery=function(){this.SetSearchSpec("")};ae.prototype.ActivateMultipleFields=function(aj,ai){if(aj){var ak=aj.EnumProperties(true);var al=[];while(!ah.IsEmpty(ak)){al.push(ak);ak=aj.EnumProperties(false)}if(ai){this.UpdateDeactivateableFldList(al)}this.ActivateFieldList(al)}};ae.prototype.RefreshBusComp=function(){var aj=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var ak=aj.GetBusCompX(this.GetName());var ai=ak.IsExecuted();if(ai){ak.Execute();$.callback(this,function(al){if(!al.err){ak.Home();$.callback(this,function(am){if(!am.err){this.NotifyExecute();this.NotifyNewData();$.setReturnValue({err:false,retVal:""});return}})}})}else{$.setReturnValue({err:false,retVal:""});return}};ae.prototype.GetPicklistBusComp=function(ak){var aj=this.GetFieldDefn(ak);var ai=aj.PickListName;if(ai){aj=SiebelApp.S_App.Model.GetPickListDef(ai);if(aj){var al=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var am=al.GetBusComp(aj.BC);am.SetMasterBC(this);am.SetPickSrcField(ak);am.SetSrcIdFld(ak,this);return am}else{return""}}else{return""}};ae.prototype.RefreshRecord=function(){var ai=this.GetWS()[this.GetActiveRow()];this.FieldValue(A.get("SWE_ROW_ID_FIELD"),ai);$.callback(this,function(am){if(!am.err){var aj=am.retVal;if(aj){var al=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var an=al.GetBusCompX(this.GetName());var ak;ak="[";ak+=A.get("SWE_ROW_ID_FIELD");ak+="] = ";ak+='"'+aj+'"';an.SetSearchSpec(ak);an.Execute();$.callback(this,function(ao){if(!ao.err){an.Home();$.callback(this,function(au){if(!au.err){var at=an.FindWorkSet(0);if(!at){$.setReturnValue({err:false,retVal:""});al.EndLife();al=null;an=null;return}var ap=an.GetActivatedFieldList();var ar;for(var aq=0;aq<ap.length;aq++){var av=ap[aq];ai[SiebelApp.OfflineUtils.RemoveNonAlphaChars(av)]=at[SiebelApp.OfflineUtils.RemoveNonAlphaChars(av)]}$.setReturnValue({err:false,retVal:ai});R.ReleaseBO(al);an=null;return}})}})}}})};ae.prototype.GetReqFieldsHasDefault=function(){var ak=this.GetDefn().Fields;var aj=[];for(var ai in ak){if((!ah.IsEmpty(ak[ai].PostDefault)||!ah.IsEmpty(ak[ai].PreDefault))){aj.push(ai)}}return aj};ae.prototype.SetMultipleFieldValues=function(aj){if(aj){var am=aj.EnumProperties(true);var ai=[];var ao=[];while(!ah.IsEmpty(am)){ai.push(am);ao.push(aj.GetPropertyAsStr(am));am=aj.EnumProperties(false)}var an=ai.length;var al=0;var ak=function(){this.SetFieldValueX(ai[al],ao[al]);$.callback(this,function(ap){if(!ap.err){al++;if(al<an){ak.call(this)}}else{$.setReturnValue(ap)}})};if(al<an){ak.call(this)}}};ae.prototype.GetMultipleFieldValues=function(an,aj){if(an&&aj){var am=an.EnumProperties(true);var ai=[];while(!ah.IsEmpty(am)){ai.push(am);am=an.EnumProperties(false)}var ao=ai.length;var al=0;var ak=function(){this.FieldValue(ai[al]);$.callback(this,function(ap){if(!ap.err){aj.SetPropertyStr(ai[al],ap.retVal);al++;if(al<ao){ak.call(this)}}else{$.setReturnValue(ap)}})};if(al<ao){ak.call(this)
}}};ae.prototype.GetLastErrCode=function(){return b.OfflineErrorObject.GetErrorCode()};ae.prototype.GetLastErrText=function(){return b.OfflineErrorObject.GetErrorText()}}());if(typeof(SiebelApp.S_App.OfflineBCInterface)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.OfflineBCInterface");SiebelApp.S_App.OfflineBCInterface=(function(){function a(f){var e=f;var c=this;var d={GetParentBusComp:1,GetBusObj:2};for(var b in f){(function(){var g=b;var h=f;if(typeof(f[g])==="function"&&!c[g]&&!d[g]){c[g]=function(){if(h.constructor.prototype[g]){return(h.constructor.prototype[g].apply(h,arguments))}else{return(h[g].apply(h,arguments))}}}return c[g]}())}this.GetOfflineBC=function(){return e};this.GetParentBusComp=function(){var g=e.GetParentBusComp();if(g){return g.GetInterface()}};this.GetBusObj=function(){var g=e.GetBusObj();if(g){return g.GetInterface()}};this.EndLife=function(){e=null;c=null;d=null}}a.prototype.SetFieldValue=function(f,e,c,d,b){return(this.GetOfflineBC().SetFieldValueX(f,e,c,d,b))};a.prototype.InvokeMethod=function(b,c){return(this.GetOfflineBC().InvokeMethodX(b,c))};a.prototype.CanInvokeMethod=function(b){return(this.GetOfflineBC().CanInvokeMethodX(b))};a.prototype.UpdateRecord=function(b){return(this.GetOfflineBC().UpdateRecordX(b))};a.prototype.CanUpdate=function(b,c){return(this.GetOfflineBC().CanUpdateX(b,c))};a.prototype.NewRecord=function(c,b,d){return(this.GetOfflineBC().NewRecordX(c,b,d))};a.prototype.GetIdValue=function(){return(this.GetOfflineBC().GetIdValueX())};a.prototype.WSNextRecord=function(){return(this.GetOfflineBC().WSNextRecordX())};a.prototype.WSHome=function(){return(this.GetOfflineBC().WSHomeX())};a.prototype.DeleteRecord=function(c,b){return(this.GetOfflineBC().DeleteRecordX(c,b))};a.prototype.Pick=function(){var c=this.GetOfflineBC().GetMasterBC();if(c){var b=this.GetOfflineBC().GetPickSrcField();var d;this.GetOfflineBC().PickCurrentRow(d,c,c.GetFieldDefn(b))}else{$.setReturnValue({err:true})}};a.prototype.ActivateField=function(b){var c=this.GetOfflineBC();c.UpdateDeactivateableFldList([b]);return(c.ActivateField(b))};a.prototype.ActivateMultipleFields=function(b){return(this.GetOfflineBC().ActivateMultipleFields(b,true))};a.prototype.Associate=function(){return(this.GetOfflineBC().AddAssociation())};a.prototype.ExecuteQuery=function(){return(this.GetOfflineBC().Execute())};a.prototype.FirstRecord=function(){return(this.GetOfflineBC().Home())};a.prototype.GetAssocBusComp=function(){return(this.GetOfflineBC().GetAssocList())};a.prototype.GetFieldValue=function(c,b){return(this.GetOfflineBC().FieldValue(c,b))};a.prototype.GetSearchExpr=function(){return(this.GetOfflineBC().GetDefn().searchSpec)};a.prototype.Name=function(){return(this.GetOfflineBC().GetName())};a.prototype.BusObject=function(){return(this.GetOfflineBC().GetBusObj())};a.prototype.ParentBusComp=function(){return(this.GetOfflineBC().GetParentBusComp())};a.prototype.CountRecords=function(){return(this.GetOfflineBC().GetRecordCount())};a.prototype.SetSearchSpec=function(b,c){return(this.GetOfflineBC().SetFldSearchSpec(b,c))};a.prototype.GetSearchSpec=function(b){return(this.GetOfflineBC().GetFldSearchSpec(b))};return a}())}})};