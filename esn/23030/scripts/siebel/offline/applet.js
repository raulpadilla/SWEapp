/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.Applet)){define("siebel/offline/applet",["siebel/offline/model"],function(){(function(){var af=SiebelApp.S_App.Applet;var h=SiebelApp.S_App.Applet;var j=SiebelApp.S_App.Applet.prototype;var E=SiebelApp.Constants;var Q=SiebelApp.Offlineconstants;var P=Q.get("IS_DYNAMIC");var Z=SiebelJS.Dependency("SiebelApp.Utils");var ap=SiebelApp.OfflineAppSettings;var y=SiebelApp.S_App.Model;var Y=SiebelApp.S_App;var A=SiebelApp.OfflineAppMgr;var ax=SiebelApp.OfflineUtils;var d=SiebelApp.AjaxRequestMgr;var b=Q.get("DOUIREG_OBJ_NAME");var aA=Q.get("DOUIREG_OBJ_TYPE");var r=Q.get("DOUIREG_OBJ_MTHD");var v=Q.get("DOUIREG_EXT_TYPE");var ac=Q.get("DOUIREG_EXT_TYPEOVERRIDE");var au=Q.get("DOUIREG_EXT_TYPEPRE");var az=Q.get("DOUIREG_EXT_TYPEPOST");var aj=Q.get("DOUIREG_OBJ_TYPEAPPLET");var w=Q.get("DOUIREG_EXT_CONTEXT");var z=E.get("SWE_PST_VIEW_INFO");var V=E.get("SWE_PROP_BEGIN_ROW");var I=E.get("SWE_PROP_CAN_UPDATE");var x=E.get("SWE_PROP_CAN_INVOKE");var B=E.get("SWE_PST_BUSCOMP_INFO");var L=E.get("SWE_PROP_NAME");var F=E.get("SWE_PST_CAN_NAV_STATE");var t=false;var M=E.get("SWE_CMD_DRILLDOWN_STR");var m=E.get("SWE_PROP_ROW_SELECTION");var aC=E.get("SWE_ROW_STR");var ab=E.get("SWE_FIELD_STR");var e=E.get("SWE_DISPLAY_NAME_STR");var G=E.get("SWE_FIELD_VALUE_STR");SiebelApp.S_App.Applet=function(){h.call(this);var aI=-1;var aM=null;var aN=false;var aE=false;var aG=false;var aH=false;var aL=0;var aJ=[];var aO=true;var aK="";var aQ=null;var aF=[];var aR=false;var aP;this.GetInterface=function(){if(!aQ){aQ=new SiebelApp.S_App.OfflineAppletInterface(this)}return aQ};this.SetInPlaceEdit=function(aS){aR=aS};this.GetInPlaceEdit=function(){return aR};this.GetSavedModeState=function(){return aP};this.SetSavedModeState=function(aS){aP=aS};this.ResetInterface=function(){if(aQ){aQ.EndLife()}aQ=null};this.GetCanNavigateStateStr=function(){return aK};this.SetCanNavigateStateStr=function(aS){aK=aS};this.GetCanNavigateCtrlArray=function(){return aF};this.SetCanNavigateCtrlArray=function(aS){aF=aS};this.GetNotComp=function(){return aM};this.SetNotComp=function(aS){aM=aS};this.GetNotIdComp=function(){return aI};this.SetNotIdComp=function(){aI=-1};this.SetNoUpdate=function(aS){aN=aS};this.SetNoDelete=function(aS){aG=aS};this.SetNoInsert=function(aS){aE=aS};this.SetNoMerge=function(aS){aH=aS};this.GetNoUpdate=function(){return aN};this.GetNoDelete=function(){return aG};this.GetNoInsert=function(){return aE};this.GetNoMerge=function(){return aH};this.SetPrevBegRow=function(aS){aL=aS};this.GetPrevBegRow=function(){return aL};this.SetRowSelectArr=function(aS){aJ=aS};this.GetRowSelectArr=function(){return aJ};this.GetMultiSelect=function(){return aO};this.SetMultiSelect=function(aS){aO=aS};var n=false;this.SetErrStatus=function(aS){n=aS};this.GetErrStatus=function(){return n}};SiebelApp.S_App.Applet.prototype=j;SiebelApp.S_App.Applet.prototype.constructor=SiebelApp.S_App.Applet;var X={};X.ProcessObjectInfo=af.prototype.ProcessObjectInfo;X.ProcessPickInfo=af.prototype.ProcessPickInfo;X.EndLife=af.prototype.EndLife;X.InvokeMethod=af.prototype.InvokeMethod;X.LeaveField=af.prototype.LeaveField;af.prototype.ProcessObjectInfo=function(n){if(!ap.GetMode()){return(X.ProcessObjectInfo.call(this,n))}else{var aG=SiebelApp.OfflineAppMgr.GetStatus();if((aG===Q.get("NEWLAYOUT")||aG===Q.get("NEWPOPUP"))&&!(n.GetProperty(P))){if(aG===Q.get("NEWPOPUP")){var aE=n.GetProperty(B);if(aE===this.GetView().GetActiveApplet().GetBCId()){var aF=SiebelApp.S_App.ActiveBusObject().MaxBCIndex();n.SetProperty(B,"S_BC"+aF)}}this.DeclareFrame(n);if(typeof(this.GetPickAppletSrcInfo)!=="undefined"){this.GetBusComp().SetSrcIdFld(this.GetPickAppletSrcInfo().SrcAppletFld,this.GetParentApplet().GetBusComp());this.GetBusComp().SetPickAppletSrcInfo(this.GetPickAppletSrcInfo())}this.InitializeFrame();this.SetInPlaceState()}else{N.call(this,n)}}};af.prototype.LeaveField=function(aN,aP,aF){if(!ap.GetMode()){return(X.LeaveField.call(this,aN,aP,aF))}else{var aM=false;var aR;if(!aN||aN!==this.GetActiveControl()){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null);return true}var aK=this.GetBusComp();var aX=aN.GetFieldName();var aL=!!aK?this.GetFormattedValue(aN):aN.GetValue();var aW=aN.GetName();if(aL!==aP){if(!!aK){var aV=aP;if(this.IsInQueryMode()){aR=aN.GetUIType();if(aR===E.get("SWE_CTRL_DATE_TZ_PICK")||aR===E.get("SWE_CTRL_DATE_TIME_PICK")){if(aP&&!aP.match(/[><=!&|]/g)){aV=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aP,E.get("ISO8601_DATETIME_FORMAT"),aN.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat());if(!Z.IsEmpty(aV)&&aV.charAt(0)!=='"'&&aV.charAt(aV.length-1)!=='"'){aV='"'+aV+'"'}if(Z.IsEmpty(aV)&&!Z.IsEmpty(aP)){if(aP.charAt(0)!=='"'&&aP.charAt(aP.length-1)!=='"'){aV='"'+aP+'"'}else{aV=aP}}}}else{if(aR===E.get("SWE_CTRL_DATE_PICK")){if(aP&&!aP.match(/[><=!&|]/g)){aV=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aP,E.get("ISO_DATE_FORMAT"),aN.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat());if(Z.IsEmpty(aV)&&!Z.IsEmpty(aP)){if(aP.charAt(0)!=='"'&&aP.charAt(aP.length-1)!=='"'){aV='"'+aP+'"'}else{aV=aP}}}}}if(!Z.IsEmpty(aX)){aK.GetFieldMap()[aX].SetSearchSpec(aV)}var aG=aK.GetNotifyObject();aG.NotifyNewFieldQuerySpec(aX)}else{var aS;if(this.CanUpdate(aW)&&aK.GetSelection()>=0||this.IsPrivateField(aW)){var aU=aP;aR=aN.GetUIType();if(aR===E.get("SWE_CTRL_COMBOBOX")){aS=this.GetFormattedFieldValue(aN,true)}if(SiebelApp.S_App.LocaleObject){if(aR===E.get("SWE_CTRL_DATE_TZ_PICK")||aR===E.get("SWE_CTRL_DATE_TIME_PICK")){aV=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aP,E.get("ISO8601_DATETIME_FORMAT"),aN.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat())}else{if(aR===E.get("SWE_CTRL_DATE_PICK")){aV=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aP,E.get("ISO_DATE_FORMAT"),aN.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat())}}if(""===aV&&""!==aP){aV=aP}}var aT=this.SetFormattedValue(aN,aV);if(aT!==undefined){if(!aT){this.SetPrsrvControl(this.GetActiveControl());aK.ProcessError();aS=this.GetFormattedValue(aN);this.SetControlValueByName(aN.GetName(),aS);return false}}else{aM=true}var aJ=function(){aU="";if(!Z.IsEmpty(aH.GetFieldName())&&this.HasCustomShadow()){aP=this.GetFormattedFieldValue(aH,false);if((aP!==aL)||(aP!==aS)){this.FireOnChangeFieldValue(aH.GetFieldName(),aP)}}};var aH=this.GetActiveControl();if(aM){$.callback(this,function(aZ){if(aT===undefined&&this.GetErrStatus()){if(!aF){this.SetActiveControl(aH)}this.SetPrsrvControl(this.GetActiveControl());aK.ProcessError();var aY=this.GetFormattedValue(aN);this.SetControlValueByName(aN.GetName(),aY);this.SetErrStatus(false)}else{aJ.call(this)}})}else{aJ.call(this)}}}}else{if(aN.GetRadioGroupPropSet().GetChildCount()!==0){var aI=aN.GetRadioGroupPropSet();var aQ=true;var n;var aO=G;if(aN.GetUIType()===E.get("SWE_CTRL_COMBOBOX")){aO=e}while((n=aI.EnumChildren(aQ))){if(n.GetProperty(aO)===aP){var aE=n.GetProperty(G);
aN.GetValue=function(){return aE};break}aQ=false}aI=null}else{aN.GetValue=function(){return aP}}}SiebelApp.S_App.OfflineCallMethod("PassOldValue",this,aN,aP,aL)}if(!aF){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null)}}};af.prototype.InvokeMethod=function(aQ,aG,aL){var aM=false;if(typeof(aL)==="object"||aL===true||aL===false){aM=(typeof(aL.async)==="boolean")?aL.async:aL}if(!ap.GetMode()||aM||aQ==="EditPopup"||aQ==="OnEscapeKey"){return(X.InvokeMethod.call(this,aQ,aG,aL))}else{if(!aQ){return false}var aO=true;var aU=false;aG=aG||CCFMiscUtil_CreatePropSet();var aP=aG.Clone();var aJ;var aT;this.SetCancelableRPCInfo(aQ,aP);if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimeInvokeMethod("",this.GetName(),aQ,"Begin InvokeMethod")}aO=this.FirePreInvokeMethod(aQ,aP);if(!aO){return false}var aI=this.GetActiveControl();if(this.ConfirmMethod(aQ)===false){SiebelApp.S_App.uiStatus.Free();if(aI){this.SetFocusToCtrl(aI.GetName(),true)}else{this.FocusFirstControl()}return true}if(aQ==="Drilldown"&&!aG.GetProperty(ab)){aT=this.GetActiveControl();if(!aT||this.IsInQueryMode()||!this.CanNavigate(aT.GetFieldName())){return}var aN=this.GetBusComp().GetSelection();var aE;if(typeof(aT.GetSpanPrefix)==="function"){aE=aT.GetSpanPrefix();if(!Z.IsEmpty(aN)){aE+=aN+1}}else{aE=aT.GetInputName()}aP.SetProperty(aC,aN+1);aP.SetProperty(ab,aE)}if(aQ==="OnFocus"){if(!Z.IsEmpty(this.GetView())){var aS=true;if(!this.GetView().IsAppletActive(this)){aS=false}var aW=this.GetView().SetActiveApplet(this);if(aW&&!aS){this.SetFocusDefaultControl(true);this.FocusDefaultControl()}this.FireInvokeMethod(aQ,aG)}else{if(SiebelApp.S_App.GetActiveView()){SiebelApp.S_App.GetActiveView().SetActiveApplet(null)}this.SetAppletActive(true,this)}return true}if(aQ==="FocusDefaultControl"){this.SetFocusDefaultControl(true);this.FocusDefaultControl();this.FireInvokeMethod(aQ,aG);return true}if(aQ==="UndoQuery"||aQ==="ExecuteQuery"||aQ==="UndoRecord"){this.SetFocusDefaultControl(true)}if(aQ==="OnEnterKey"){aJ=av.call(this);if(aJ===true){this.FireInvokeMethod(aQ,aG)}return true}if(aQ==="ImplicitCommit"){return(this.PostChangesToBC(true,null))}if((aQ==="GetQuickPickInfo")&&(this.GetCachedCtrlQuickPick(aP)===true)){SiebelApp.S_App.InvokeCallBack();this.FireInvokeMethod(aQ,aG);return true}if(aQ==="GotoLastSet"){var aF=-1;this.GetBusComp().SetCurRowNum(aF)}if(aQ!=="GetQuickPickInfo"&&aQ!=="EditField"&&aQ!=="UndoRecord"){aT=this.GetActiveControl();if(aT&&false===this.LeaveField(aT,this.GetControlValueFromUI(aT),true)){this.EnterField(aT);return false}}if(aQ!=="PositionOnRow"){this.CollectFieldValues(aP)}var aH={};if(typeof(aL)==="object"||aL===true||aL===false){aH.scope=this;aH.args=[];aH.args.push(aQ);aH.args.push(aP);aH.async=(typeof(aL.async)==="boolean")?aL.async:aL;aH.target=aL.target;aH.selfbusy=aL.selfbusy||false;aH.mask=aL.mask||false;aH.cb=function(){var aY=Array.prototype.slice.call(arguments),aX=aR.GetProperty("Status"),aZ=SiebelApp.S_App.ErrorObject.GetErrorSuppressState();aY.push(this.PostExecute.apply(this,arguments));if(typeof(aL.cb)==="function"){aL.cb.apply(aL.scope||null,aY)}if((!aZ)||(aX===E.get("SWE_RPC_PROP_STATUS_ERROR"))){SiebelApp.S_App.ErrorObject.SetErrorSuppressState(true);this.ProcessError()}}}else{aH={scope:this,cb:function(){}}}var aV=aP.GetProperty(E.get("SWE_PROP_CANCELABLE_RPC"));if(Z.IsTrue(aV)){var aK=this;var n=setTimeout(function(){aK.ProcessCancelQueryPopup();aK=null},1000*parseInt(SiebelApp.S_App.GetCancelQueryTimeout(),10));this.SetCancelQryTimeoutObj(n)}var aR=CCFMiscUtil_CreatePropSet();this.CallServerApplet(aQ,aP,aR,aH);$.callback(this,function(){if(typeof(aL)==="undefined"){var aX=[];aX.push(aQ);aX.push(aP);aX.push(aR);this.PostExecute.apply(this,aX)}if(aR.GetProperty("Status")===E.get("SWE_RPC_PROP_STATUS_ERROR")){this.SetErrStatus(true)}})}};function av(){if(SiebelApp.S_App.GetPopupPM().Get("state")===E.get("POPUP_STATE_VISIBLE")&&SiebelApp.S_App.GetPopupPM().Get("isPopupSI")===true){return true}var aH=this.GetActiveControl();if(Z.IsEmpty(aH)){return false}var n=CCFMiscUtil_CreatePropSet();var aF=this.GetDefaultMethod();var aE=this.GetDefaultQryMethod();if(this.IsInQueryMode()===true){if(aE&&this.CanInvokeMethod(aE)){this.InvokeMethod(aE,n);return true}else{this.InvokeMethod("ExecuteQuery",n);return true}}else{if(aF&&this.CanInvokeMethod(aF)){this.InvokeMethod(aF,n);return true}else{if(false===this.LeaveField(aH,this.GetControlValueFromUI(aH),true)){this.EnterField(aH);return false}var aG=this.GetBusComp();if(aG&&aG.IsCommitPending()){this.InvokeMethod("WriteRecord",n);return true}}}this.ClearErrorMsg()}af.prototype.ProcessPickInfo=function(aE){if(ap.GetMode()){var n=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetVarName();aE.SetValue(n)}return(X.ProcessPickInfo.call(this,aE))};af.prototype.DeclareFrame=function(aE){var aH={};var aF={};aF[b]=aE.GetProperty(L);aF[aA]=aj;aF[r]="DeclareFrame";aF[w]=this;var aI=CCFMiscUtil_CreatePropSet();aI.AddChild(aE);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.DeclareFrame")}aF[v]=au;retObj=y.InvokeRegisteredSvc(aF,aI,true);aH=retObj.retVal;err=retObj.err;if((aH.Outputargs)&&(aH.Outputargs).GetProperty("Invoked")&&(aH.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:retObj.err,retVal:aH.Outputargs});return}if(aH.Outputargs&&aI){(aH.Outputargs).SetType(au);aI.AddChild(aH.Outputargs)}N.call(this,aE);if(!(aE.GetProperty(P))){var aG=this.GetBusComp();var n=this.GetView();if(aG!==null){if(n!==null){n.AddBCBroker(aG,this.GetName())}}}this.SetNoUpdate(this.GetDefn().NoUpdate);this.SetNoInsert(this.GetDefn().NoInsert);this.SetNoDelete(this.GetDefn().NoDelete);this.SetNoMerge(this.GetDefn().NoMerge);aF[v]=az;retObj=y.InvokeRegisteredSvc(aF,aI,true);aH=retObj.retVal;if(aH&&aH.Outputargs){$.setReturnValue({err:retObj.err,retVal:aH.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.DeclareFrame")}}};function N(a1){if(!(a1.GetProperty(P))){var a2=y.GetDyncPS(z,false);var a8=CCFMiscUtil_CreatePropSet();a8.SetType(a1.GetType());a8.SetValue(a1.GetValue());a8.SetProperty(P,true);var a0=[V,I,x,m];ax.ProcessDPS(a8,a1,a0,3,false);var aK=[B,L];ax.ProcessDPS(a8,a1,aK,2,true);var n=a1.GetChildByType(F);if(n){var a4=a1.FindChildPosition(F);a1.RemoveChild(a4)}a2.AddChild(a8);y.SetDyncPS([z],[a2],1)}var aG;X.ProcessObjectInfo.call(this,a1);if(a1.GetProperty(P)){aG=this.GetControls();var aL;var aS=this.GetBusComp();var aH=aS.GetActiveRow();var aU=this.GetName();var aT=this.GetView().GetName();var a6=window.localStorage.getItem("SRN");var aN=SiebelApp.OfflineAppMgr.GetControlRegExpMap();for(var a7 in aG){if(aG[a7]){var aW=aG[a7];aL=aW.GetMethodPropSet();if(aL){aL.SetPropertyStr(E.get("SWE_PROP_SESSION_RANDOM_NUMBER"),a6);aL.SetPropertyStr("SWEApplet",aU);aL.SetPropertyStr(E.get("SWE_ROW_STR"),aH);aL.SetPropertyStr("SWEView",aT)}if(aW.GetSpanPrefix){var aR=aW.GetSpanPrefix();var aQ=aW.GetInputName();var aO=new RegExp("(("+aR+"0)|("+aR+"65535))","ig");
aN[aQ]=aO}}}SiebelApp.OfflineAppMgr.SetControlRegExpMap(aN)}else{var aJ=false;var aI;var a3=CCFMiscUtil_CreatePropSet();aG=this.GetDefn().control;for(var aF in aG){if(aG[aF]){aI=aG[aF];if(aI){var a5=aI.htmlIconMap;if(a5&&!Z.IsEmpty(a5)){a3.SetPropertyStr(L,a5);aJ=true;var aV=SiebelApp.Metadata.GetMIcons(a5);var aZ=aV.length;var aY=0;var aM;for(var aX=0;aX<aV.length;aX++){aM=CCFMiscUtil_CreatePropSet();var aP=SiebelApp.S_App.GetPageURL();aP=aP.replace("start.swe","images/");aP=aP.concat(aV[aX].FileName);aP='<img src="'+aP+'" border="'+aY+'" space="'+aY+'" hspace="'+aY+'" >';aM.SetPropertyStr(L,aV[aX].IconName);aM.SetPropertyStr(E.get("SWE_PROP_ICON_IMG"),aP);aM.SetType("i");a3.AddChild(aM)}}}}}if(Z.IsTrue(aJ)){a3.SetType("il");var aE=y.GetDyncPS(E.get("SWE_PST_APP_INFO"),false);aE.AddChild(a3)}}}af.prototype.EndLife=function(){if(!ap.GetMode()){return X.EndLife.call(this)}var n=this.GetNotIdComp();if(n!==-1){this.GetBusComp().UnRegNotifyObj();this.SetNotIdComp(-1);this.SetNotComp(null)}this.ResetInterface();X.EndLife.call(this)};af.prototype.InitializeFrame=function(n){var aE={};var aF=CCFMiscUtil_CreatePropSet();aF.AddChild(n);aE[b]=this.GetName();aE[aA]=aj;aE[r]="InitializeFrame";aE[w]=this;aE[v]=au;retObj=y.InvokeRegisteredSvc(aE,aF,true);SStubObj=retObj.retVal;if((SStubObj.Outputargs)&&(SStubObj.Outputargs).GetProperty("Invoked")&&(SStubObj.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:retObj.err,retVal:SStubObj.Outputargs});return}if(SStubObj.Outputargs&&aF){(SStubObj.Outputargs).SetType(au);aF.AddChild(SStubObj.Outputargs)}aE[v]=az;retObj=y.InvokeRegisteredSvc(aE,aF,true);SStubObj=retObj.retVal;if(SStubObj&&SStubObj.Outputargs){$.setReturnValue({err:retObj.err,retVal:SStubObj.Outputargs});return}};af.prototype.SetInPlaceState=function(){var n=this.GetMode();if(n===E.get("SWE_PST_APPLET_MODE_EDIT")){this.SetInPlaceEdit(true)}};af.prototype.ActivateFields=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.ActivateFields")}var aE={},aF={},aG=CCFMiscUtil_CreatePropSet();aE[b]=this.GetName();aE[aA]=aj;aE[r]="ActivateFields";aE[w]=this;aG.AddChild(n);aE[v]=au;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aO){aF=aO.retVal;err=aO.err;if((aF.Outputargs)&&(aF.Outputargs).GetProperty("Invoked")&&(aF.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aO.err,retVal:aF.Outputargs});return}if(aF.Outputargs){(aF.Outputargs).SetType(au);aG.AddChild(aF.Outputargs)}var aW=this.GetBusComp();var aJ=aW.GetChildBCArray();var aP=[];var a5;var aH=aW.GetFieldMap();var aK=aJ.length;for(var aI=0;aI<aK;aI++){a5=aJ[aI].GetLinkDef();if(a5){if(!aH[a5.srcFieldName]){aP.push(a5.srcFieldName)}if(!Z.IsEmpty(a5.primeIdFieldName)){aW.ActivateFieldList([a5.primeIdFieldName])}}}if(aP.length>0){aW.ActivateFieldList(aP)}var aV=this.EnumUserProps();var a1=[];var aU=-1;var aM=[];var a3;if(aV){aU=aV.length}for(var aX=0;aX<aU;aX++){aW.ActivateFieldList(a1)}if(aM){a3=aM.length;if(a3>0){aW.ActivateFieldList(aM)}}var a2=this.GetParentApplet();if(a2&&a2.GetDefn().AsocAplt&&(a2.GetDefn().AsocAplt===this.GetName())){var aS=a2.GetBusComp().GetActivatedFieldList();if(aS){if(aS.length>0){aW.ActivateFieldList(aS)}}}else{if(a2&&a2.GetActiveControl()){var aT=a2.GetActiveControl().GetFieldName();var aN;var aQ=[];var aR;var aL=a2.GetBusComp().GetFieldDefn(aT);if(aL&&aL.PickListName){if(aL.pickMap){var a0=aL.pickMap.length;var a4;for(var aZ=0;aZ<a0;aZ++){aN=aL.pickMap[aZ];aQ.push(aN.FldName)}if(a0>0){this.GetBusComp().ActivateFieldList(aQ)}for(var aY=0;aY<a0;aY++){aN=aL.pickMap[aY];if(!aN.IsConstrained){continue}a2.GetBusComp().FieldValue(aN.FldName);$.callback(this,function(a6){if(a6.err){$.setreturnValue(a6);return}else{a4=a6.retVal;aR="[";aR+=aN.PFldName;aR+="] = ";aR+='"'+a4+'"';this.GetBusComp().SetSearchSpec(aR);this.GetBusComp().SetExecuted(false);$.callback(this,function(){$.setReturnValue({err:false,retVal:true});return})}})}}}}}aW.ActivateFields();aE[v]=az;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(a6){aF=a6.retVal;if(aF&&aF.Outputargs){$.setReturnValue({err:a6.err,retVal:aF.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.ActivateFields")}return}})})};af.prototype.Populate=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.Populate")}var aE={},aF={},aG=CCFMiscUtil_CreatePropSet();aG.AddChild(aF.Outputargs);aE[b]=this.GetName();aE[aA]=aj;aE[r]="Populate";aE[w]=this;aE[v]=au;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aL){aF=aL.retVal;err=aL.err;if((aF.Outputargs)&&(aF.Outputargs).GetProperty("Invoked")&&(aF.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aL.err,retVal:aF.Outputargs});return}if(aF.Outputargs){(aF.Outputargs).SetType(au);aG.AddChild(aF.Outputargs)}var aK=this.GetBusComp();if(!aK){$.setReturnValue({err:true});return}var aI=aK.GetExtObjProp("isNewRecord"),aJ=aK.GetExtObjProp("IsEditRecord"),aH=aK.IsExecuted(),aM="",aN=aK.GetExtObjProp("reExecute");if(aI&&aH){aK.NewRecordX(true,false,null)}if(aJ&&aH){aK.UpdateRecordX(true)}$.callback(this,function(){aN=aN?aN:false;var aS=aK.GetParentBusComp();if(!aS){var aP=aK.GetChildBCArray(),aU=aP.length,aT;for(var aR=0;aR<aU;aR++){aT=aP[aR].GetLinkDef().srcFieldName;if(!(aK.GetFieldMap()[aT])){aK.ActivateField(aT);aN=true}}}aK.SetExtObjProp("reExecute",aN);if(aH&&!aN){return}if(aN&&aH){aM=aK.GetIdValueX()}var aQ=this.GetDefn().searchSpec;if(aQ){var aO=aK.GetAppletSearchSpec();aO.push(aQ);aK.SetAppletSearchSpec(aO)}aK.Execute();$.callback(this,function(aV){if(!aV.err){if(aN&&!(Z.IsEmpty(aM))){aK.PositionById(aM)}else{aK.Home()}$.callback(this,function(aW){if(!aW.err){aE[v]=az;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aX){aF=aX.retVal;if(aF&&aF.Outputargs){$.setReturnValue({err:aX.err,retVal:aF.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.Populate")}return}})}})}else{$.setReturnValue(aV)}})})})};af.prototype.InterpolatePS=function(aE){var aH=[at,al,R,ay,J],aG=0,n=aH.length;aE.SetPropertyStr(m);var aF=function(){};aF=function(){aH[aG].call(this,aE);$.callback(this,function(){aG++;if(aG<n){aF.call(this)}})};aF.call(this)};function at(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.AddDyncCanInvoke")}var aJ=[];var aO;CCFMiscUtil_StringToArray(n.GetProperty(x),aJ);var aL=aJ.length;if(aL>=2){var aG=0,aF=[];var aH=function(){var aP=aI;return function(){return[Y.LookupStringCache(aJ[aP])]}};var aK=function(){var aP=aI;return function(aQ){if(!aQ.err){aO=aQ.retVal;aJ[aP+1]=(Z.IsTrue(aO)?"1":"0");if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.AddDyncCanInvoke")}}}};var aE;var aN;for(var aI=0,aM=aL;aI<aM;aI+=2){aE=aH();aN=aK();aF[aG]={execute:this.CanInvokeMethodX,executeScope:this,preExecute:aE,postExecute:aN};aG++}$.eachAsyncOp(this,aF)}$.callback(this,function(){n.SetProperty(x,CCFMiscUtil_ArrayToString(aJ))})}function al(n){var aE;var aH=[];
CCFMiscUtil_StringToArray(n.GetProperty(I),aH);var aN=aH.length;if(aN>=2){var aI=0,aG=[];var aJ=function(){var aP=aK;return function(){return[Y.LookupStringCache(aH[aP])]}};var aL=function(){var aP=aK;return function(aQ){if(!aQ.err){aE=aQ.retVal}else{aE=false}aH[aP+1]=(Z.IsTrue(aE)?"1":"0");if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.AddDyncCanInvoke")}}};var aF;var aO;for(var aK=0,aM=aN;aK<aM;aK+=2){aF=aJ();aO=aL();aG[aI]={execute:this.CanUpdateX,executeScope:this,preExecute:aF,postExecute:aO};aI++}$.eachAsyncOp(this,aG)}$.callback(this,function(){n.SetProperty(I,CCFMiscUtil_ArrayToString(aH))})}function R(aU){var aM="";var aQ=[];var aF="";var aI=aw.call(this);var aE=aI.length;if(aE){var n=CCFMiscUtil_CreatePropSet();n.SetType("cn");aU.AddChild(n);var aP=this.GetControls();var aG=[];var aK=aP.length;for(var aS=0;aS<aE;aS++){for(var aT in aP){if(aP.hasOwnProperty(aT)){if(aP[aT].GetFieldName()===aI[aS]){aG.push(aP[aT].GetName());break}}}}var aR=aG.length;this.SetCanNavigateCtrlArray(aG);if(aR){var aO=0;var aL=this.GetBusComp();var aJ;var aH=this.GetNotComp();var aV=false;aH=0;var aN=function(){aQ=[];aJ=this.GetDrillDown(aP[aG[aO]].GetFieldName(),true);aF+="*";if(aL&&aL.CheckActiveRow()){aL.WSHomeX(aH,this.GetName());aV=true}else{aV=false}var aX=0;var aW=function(){this.CanNavigateX(aJ);$.callback(this,function(aY){if(!aY.err){aM=Z.IsTrue(aY.retVal)?"1":"0";aF+=aM;aQ.push(aM);aV=aL.WSNextRecordX(aH,this.GetName());if(aV&&aX<aL.GetWS().length){aX++;aW.call(this)}}})};if(aV){aW.call(this)}$.callback(this,function(){if(aX>0){n.SetProperty(aG[aO],CCFMiscUtil_ArrayToString(aQ))}aO++;if(aO<aR){aN.call(this)}})};aN.call(this)}}$.callback(this,function(aW){this.SetCanNavigateStateStr(aF)})}function ay(n){}function J(n){var aF=this.GetBusComp();var aE=this.GetNotIdComp();if(!aF||aE===-1){return}var aG=aF.WSGetBegRow(aE,this.GetName());this.SetPrevBegRow(aG);n.SetPropertyStr(V,aG.toString())}function an(){var n=[];var aE=this.GetBusComp();var aH=0;var aF=this.GetPrevBegRow();if(!aE||aH===-1){return}var aG=aE.WSGetBegRow(aH,this.GetName());if(Z.IsEmpty(aG)){return}if(aF!==aG){this.SetPrevBegRow(aG);n.push(this.GetName());n.push(aG.toString());aE.NotifyGeneric("BegRow",n)}}af.prototype.GenerateExtraNotifyInfo=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GenerateExtraNotifyInfo")}var aG=arguments[0];var aF=SiebelApp.OfflineAppMgr.GetStatus();var aE=Z.DecodeFromQueryString(aG);var n=aE.GetProperty(E.get("SWEJI"));if(!Z.IsEmpty(n)||aF===Q.get("REFRESHLAYOUT")||aF===Q.get("NEWLAYOUT")||aF===Q.get("NEWPOPUP")){return}f.call(this);$.callback(this,function(aH){aa.call(this);$.callback(this,function(){q.call(this);$.callback(this,function(aI){ad.call(this);$.callback(this,function(){an.call(this);var aJ=this.GetPopupApplet();if(aJ){aJ.GenerateExtraNotifyInfo(aG)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.GenerateExtraNotifyInfo")}})})})})};function f(){var aL=[];var aG=0;var aM=this.GetCanInvokeArray();if(Z.IsEmpty(aM)){return}var aI=aM.length;var aJ=this.GetBusComp();if(aI<=0||!aJ){return}var aE=false;aL.push(this.GetName());var aH;var aN;var aK=function(aO){if(!aO.err){aN=aO.retVal;aH=this.GetCanInvokeByName()[aM[aG]].bCanInvoke;if(Z.IsEmpty(aN)){aN=aH}if(aN!==aH){this.GetCanInvokeByName()[aM[aG]]={bCanInvoke:aN};aE=true}aL.push(String(aG));aL.push(Z.IsTrue(aN)?"1":"0")}};var n=function(aO){aG=aO;return[aM[aO]]};var aF={iterations:aI,execute:this.CanInvokeMethodX,executeScope:this,postExecute:aK,preExecute:n};$.eachAsyncOp(this,aF);$.callback(this,function(){if(aE){aJ.NotifyGeneric("SWEICanInvokeMethod",aL)}})}function aa(){var aL=[];var aH=this.GetCanUpdateArray();if(Z.IsEmpty(aH)){return}var aI=aH.length;var aJ=this.GetBusComp();var aG=0;if(aI<=0||!aJ){return}var aE=false;aL.push(this.GetName());var n=function(aM){aG=aM;return[aH[aM]]};var aK=function(aN){if(!aN.err){var aO=aN.retVal;var aM=this.GetCanUpdateByName()[aH[aG]].bCanUpdate;if(Z.IsTrue(aO)!==Z.IsTrue(aM)){this.GetCanUpdateByName()[aH[aG]]={bCanUpdate:aO};aE=true}aL.push(String(aG));aL.push(Z.IsTrue(aO)?"1":"0")}};var aF={iterations:aI,execute:this.CanUpdateX,executeScope:this,postExecute:aK,preExecute:n};$.eachAsyncOp(this,aF);$.callback(this,function(){if(aE){aJ.NotifyGeneric("SWEICanUpdate",aL)}})}function q(){var aG="";var aF=[];var aJ="";var aK=0;var aL=[];var aE=this.GetCanNavigateMap();var aN=this.GetCanNavigateCtrlArray();aK=aN.length;var n=this.GetBusComp();aL.push(this.GetName());if(
/*!mapCanNav || */
!n||!aK){return}var aH=0;var aO=this.GetNotComp();aO=0;var aI=false;var aM=function(){aF=[];var aQ=this.GetDrillDown(aN[aH],true);aJ+="*";if(n&&n.CheckActiveRow()){n.WSHomeX(aO,this.GetName());aI=true}else{aI=false}var aR=0;var aP=function(){this.CanNavigateX(aQ);$.callback(this,function(aS){if(!aS.err){aG=Z.IsTrue(aS.retVal)?"1":"0";aJ+=aG;aF.push(aG);aI=n.WSNextRecordX(aO,this.GetName());if(aI&&aR<n.GetWS().length){aR++;aP.call(this)}}})};if(aI){aP.call(this)}$.callback(this,function(){if(aR>0){aL.push("*"+aN[aH]);aL=aL.concat(aF)}aH++;if(aH<aK){aM.call(this)}})};aM.call(this);$.callback(this,function(aQ){var aP=this.GetCanNavigateStateStr();if(aP!==aJ){aP=aJ;this.NotifyGeneric("SWEICanNavigate",aL)}})}af.prototype.CanNavigateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanNavigateX")}var aE={},aF={},aG=CCFMiscUtil_CreatePropSet();aE[b]=this.GetName();aE[aA]=aj;aE[r]="CanNavigateX";aE[w]=this;aG.SetPropertyStr("ddObj",n);aE[v]=au;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aJ){aF=aJ.retVal;err=aJ.err;if((aF.Outputargs)&&(aF.Outputargs).GetProperty("Invoked")&&(aF.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aJ.err,retVal:aF.Outputargs});return}if(aF.Outputargs){(aF.Outputargs).SetType(au);aG.AddChild(aF.Outputargs)}var aI=0;var aH;if(!n){aH=false}else{var aK=this.GetBusComp();if(aK){aI=aK.GetActiveRow()}if(aI>=0){aH=true}else{aH=false}}aE[v]=az;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aL){aF=aL.retVal;if(aF&&aF.Outputargs){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanNavigateX")}aH=aF.Outputargs}$.setReturnValue({err:aL.err,retVal:aH})})})};af.prototype.PositionBaseAncestorFrame=function(){};af.prototype.GoBackToRecord=function(aI){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GoBackToRecord")}var aF;var aH;var aE;var aJ=this.GetBusComp();var n=ax.JsonRecordSet(aI);var aG=n.SweCommands.SWERowId;if(aJ){aH=aJ.GetExtObjProp("m_wsActiveRow");aE=aJ.FindWorkSet(aH);if(aE){aJ.FieldValue(E.get("SWE_ROW_ID_FIELD"),aE);$.callback(this,function(aK){if(!aK.err){aF=aK.retVal;if(!this.CheckActiveRowId(aF,aG)){aJ.PositionById(aG)}}else{$.setReturnValue(aK)}if(SiebelApp.S_App.GetTimer()){$.callback(this,function(){SiebelApp.S_App.GetTimer().EndTime("Applet.GoBackToRecord")})}})}}};af.prototype.CanPostChangesToBC=function(aF){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanPostChangesToBC")
}var n;var aG=CCFMiscUtil_CreatePropSet();aG.SetProperty("inputParam1",aF);var aE={};aE[b]=this.GetName();aE[aA]=aj;aE[r]="CanPostChangesToBC";aE[w]=this;aE[v]=au;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aH){SStubObj=aH.retVal;err=aH.err;if((SStubObj.Outputargs)&&(SStubObj.Outputargs).GetProperty("Invoked")&&(SStubObj.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aH.err,retVal:SStubObj.Outputargs});return}if(SStubObj.Outputargs&&aG){(SStubObj.Outputargs).SetType(au);aG.AddChild(SStubObj.Outputargs)}if(aF===null||aF===undefined){return false}if(aF==="EditField"||aF==="EditMail"||aF==="ExecuteQuery"||aF==="ExecuteNewQuery"||aF==="PostChanges"||aF==="WriteRecord"||aF==="SaveEditRecord"||aF==="PositionOnRow"||aF==="UndoQuery"||aF==="ShowPopup"||aF==="ViewField"||aF==="GetSMCUpdate"||aF==="ExecuteFrameQuery"){n=false}else{n=true}aE[v]=az;aG.SetProperty("RetVal",n);y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aI){err=aI.err;var aJ=aI.retVal;if(aJ.Outputargs){n=aJ.Outputargs}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanPostChangesToBC")}$.setReturnValue({err:err,retVal:n})})})};af.prototype.CanInvokeMethodX=function(n){if(!n){$.setReturnValue({err:true,retVal:false});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanInvokeMethodX")}var aG,aE={},aF;aE[b]=this.GetName();aE[aA]=aj;aE[r]="DoCanInvokeMethod";aE[w]=this;var aH=CCFMiscUtil_CreatePropSet();aH.SetPropertyStr("MethodName",n);aE[v]=au;y.InvokeRegisteredSvc(aE,aH);$.callback(this,function(aN){aG=aN.retVal;aF=aN.err;if(aG.Outputargs&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){var aK=(aG.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:aF,retVal:aK});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}if(aG.Outputargs&&aH){(aG.Outputargs).SetType(au);aH.AddChild(aG.Outputargs)}var aJ=this.GetUserProperty("CanInvokeMethod: "+n);aJ=(Z.IsEmpty(aJ))?this.GetUserProperty("CanInvokeMethod:"+n):aJ;if(!Z.IsEmpty(aJ)){if(aJ==="TRUE"){$.setReturnValue({err:false,retVal:true});return}else{if(aJ==="FALSE"){$.setReturnValue({err:false,retVal:false});return}else{var aI=SiebelApp.Query.Parse(aJ);var aM=SiebelApp.Query.Evaluate(aI,this.GetBusComp());$.setReturnValue({err:false,retVal:aM});return}}}var aL=false;switch(n){case Q.get("NEWRECORD"):case Q.get("COPYRECORD"):$.setReturnValue({err:false,retVal:this.CanNewAndBOL(true,false)});return;case Q.get("CREATERECORD"):$.setReturnValue({err:false,retVal:false});return;case Q.get("WRITERECORD"):case"ExplicitWriteRecord":this.CanWriteRecord();aL=true;break;case Q.get("SHOW_POPUP"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("UNDORECORD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("EXECUTEFRMQUERY"):case Q.get("EXECUTE_QUERY"):aN=this.CanExecuteQuery();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("EDITRECORD"):if(!this.GetInPlaceEdit()){this.CanUpdateX();aL=true}else{$.setReturnValue({err:false,retVal:false});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}break;case Q.get("EXECUTESORT"):this.CanSort();break;case Q.get("DELETERECORD"):this.CanDeleteRecord();aL=true;break;case Q.get("DELETERECORDS"):this.CanDeleteRecords();aL=true;break;case Q.get("DRILLDOWN"):case"DrillDown":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("EDIT_FIELD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("GO_TO_NEXT_SET"):aN=this.CanGotoNextSet();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("GO_TO_PRV_SET"):aN=this.CanGotoPreviousSet();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("SCROLL_NEXT"):aN=this.CanScrollNext();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("SCROLL_PREVIOUS"):aN=this.CanScrollPrevious();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("SCROLL_NEXT_DATA"):aN=this.CanScrollNext();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("SCROLL_PREV_DATA"):aN=this.CanScrollPrevious();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("GOTOVIEW"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("PICKRECORD"):this.CanPickRecord();aL=true;break;case Q.get("POSITION_ON_ROW"):var aO=this.GetBusComp();if(!aO){$.setReturnValue({err:false,retVal:false});return}if(!aO.CheckActiveRow()){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("SWE_POST_CHANGES"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"ResetRecord":$.setReturnValue({err:false,retVal:true});return;case"GetQuickPickInfo":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"Refresh":$.setReturnValue({err:false,retVal:true});return;case Q.get("GO_TO_FST_SET"):aN=this.CanGotoFirstSet();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("GO_TO_LAST_SET"):aN=this.CanGotoLastSet();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("GO_TO_NEXT_REC"):this.CanGotoNextRecord();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}break;case Q.get("GO_TO_PREVIOUS_REC"):aN=this.CanGotoPreviousRecord();$.setReturnValue(aN);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case Q.get("ADDRECORD"):aN=this.CanAddRecord();$.setReturnValue(aN);break;case Q.get("SWE_CLOSE_APPLET"):aN=({err:false,retVal:true});$.setReturnValue(aN);break;default:this.GetBusComp().CanInvokeMethodX(n);aL=true
}if(aL){$.callback(this,function(aP){$.setReturnValue(aP);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}})}})};af.prototype.CanNewAndBOL=function(aE,n){if(this.GetParentApplet()){return false}var aF=this.GetBusComp();if(aF===null||aF===undefined){return false}if(this.m_bNoInsert||this.IsMultiRecSelected()||aF.IsInQueryState()){return false}else{if(aE){if(aF.HasAssocList()&&n){return !this.m_cszAssocFrameName}else{return(aF.CanInsert())}}else{return(aF.GetSelection()>=0&&aF.CanInsert())}}};af.prototype.IsMultiRecSelected=function(){return this.GetBusComp().GetMultiSelectMode()};af.prototype.CanGotoNextSet=function(){var aE=this.GetBusComp();var n=aE.GetRecordCount();var aF=aE.GetCursor();if(aF[0]>=(n-1)){return({err:false,retVal:false})}return({err:false,retVal:true})};af.prototype.CanGotoPreviousSet=function(){var aE=this.GetBusComp();var aF=aE.GetCursor();var n=aE.GetRecordCount();if((aF[0]>0)&&(n>1)){return({err:false,retVal:true})}return({err:false,retVal:false})};af.prototype.CanGotoFirstSet=function(){return({err:false,retVal:true})};af.prototype.CanGotoLastSet=function(){return({err:false,retVal:true})};af.prototype.CanScrollNext=function(){var aE=this.GetBusComp();var n=aE.GetRecordCount();if(n<=Q.get("PAGE_SIZE")||aE.GetIsRelatedBC()){return({err:false,retVal:false})}else{var aF=aE.GetCursor();if(aE.GetScrollCount()<(n-Q.get("PAGE_SIZE"))){return({err:false,retVal:true})}}return({err:false,retVal:false})};af.prototype.CanScrollPrevious=function(){var aE=this.GetBusComp();var aF=aE.GetCursor();var n=aE.GetRecordCount();if((n>Q.get("PAGE_SIZE"))&&(aE.GetScrollCount()>0)&&!aE.GetIsRelatedBC()){return({err:false,retVal:true})}return({err:false,retVal:false})};af.prototype.CanGotoNextRecord=function(){var aH=0;var aG;var aF=this.GetBusComp();if(aF===null||aF===undefined){$.setReturnValue({err:true,retVal:false});return}if(this.m_bNoRecordNavigation){$.setReturnValue({err:false,retVal:false});return}if(aF.IsInQueryState()){$.setReturnValue({err:false,retVal:false});return}var n=aF.GetSelection();var aE=aF.FindWorkSet(n);aH=aF.GetRowNum(aE);if(aH<1){$.setReturnValue({err:false,retVal:false});return}aG=aF.GetNumRows();if(aH>=aG){$.setReturnValue({err:false,retVal:false});return}$.setReturnValue({err:false,retVal:true})};af.prototype.CanGotoPreviousRecord=function(){var aG=0;var aF=this.GetBusComp();if(aF===null||aF===undefined){$.setReturnValue({err:true,retVal:false});return}if(this.m_bNoRecordNavigation){$.setReturnValue({err:false,retVal:false});return}if(aF.IsInQueryState()){$.setReturnValue({err:false,retVal:false});return}var n=aF.GetSelection();var aE=aF.FindWorkSet(n);aG=aF.GetRowNum(aE);if(aG===1){$.setReturnValue({err:false,retVal:false});return}$.setReturnValue({err:false,retVal:true})};af.prototype.CanDeleteRecord=function(){var aE=this.GetBusComp();var n={};n.err=false;n.retVal=false;if(this.GetNoDelete()||this.IsMultiRecSelected()){$.setReturnValue(n)}else{if(!aE){n.err=true;$.setReturnValue(n)}else{if(aE.IsInQueryState()){n.retVal=false;$.setReturnValue(n)}else{aE.CanDelete();$.callback(this,function(aF){$.setReturnValue(aF)})}}}};af.prototype.CanDeleteRecords=function(){$.setReturnValue({err:false,retVal:true})};af.prototype.CanExecuteQuery=function(aE,n){var aG=this.GetBusComp();var aF={};aF.err=false;aF.retVal=false;if(aG===null||aG===undefined){aF.err=true;$.setReturnValue(aF);return}$.setReturnValue({err:false,retVal:!this.m_bNoExecuteQuery});return({err:false,retVal:!this.m_bNoExecuteQuery})};af.prototype.CanWriteRecord=function(){var n=this.GetBusComp();if(n===null||n===undefined){$.setReturnValue({err:false,retVal:false});return}if(!n.CheckActiveRow()){$.setReturnValue({err:false,retVal:false});return}if(n.IsInQueryState()){$.setReturnValue({err:false,retVal:false});return}if(!n.IsCommitPending()){if(!this.m_bNoUpdate){n.CanUpdateX(true);$.callback(this,function(aE){if(!aE.retVal){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}})}else{$.setReturnValue({err:false,retVal:false});return}}else{$.setReturnValue({err:false,retVal:true})}};af.prototype.CanUpdateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanUpdateX")}var aF,aE={};aE[b]=this.GetName();aE[aA]=aj;aE[r]="CanUpdate";aE[w]=this;var aG=CCFMiscUtil_CreatePropSet();aG.SetPropertyStr("Field",n);aE[v]=au;y.InvokeRegisteredSvc(aE,aG);$.callback(this,function(aL){aF=aL.retVal;err=aL.err;if(aF.Outputargs&&(aF.Outputargs).GetProperty("Invoked")&&(aF.Outputargs).GetProperty("Invoked").toString()==="true"){var aJ=(aF.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:err,retVal:aJ});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanUpdateX")}return}if(aF.Outputargs&&aG){(aF.Outputargs).SetType(au);aG.AddChild(aF.Outputargs)}var aM=this.GetBusComp();if(n!==undefined){var aI=this.GetControls();if(aI[n]!==undefined){if(Z.IsEmpty(aI[n].GetFieldName())){var aH=aI[n].IsEditEnabled();if(!aH){$.setReturnValue({err:false,retVal:true});return}}if(aM&&aM.IsInQueryState()){$.setReturnValue({err:false,retVal:true});return}if(this.GetDefn().control){if(this.GetDefn().control[n]){if(this.GetDefn().control[n].ReadOnly===true){$.setReturnValue({err:false,retVal:false});return}}}}if(this.GetNoUpdate()&&aM&&!aM.IsNewRecordPending()){$.setReturnValue({err:false,retVal:false});return}if(aM!==null||aM!==undefined){aM.CanUpdateX(false,n);$.callback(this,function(aN){$.setReturnValue(aN)})}else{$.setReturnValue({err:false,retVal:false})}}else{var aK;if(this.m_bNoUpdate){$.setReturnValue({err:false,retVal:false});return}if(aM===null||aM===undefined){$.setReturnValue({err:false,retVal:false});return}aK=aM.GetActiveRow();if(aK>=0){aM.CanUpdateX(true);$.callback(this,function(aN){if(aN.retVal){$.setReturnValue({err:false,retVal:true})}else{$.setReturnValue({err:false,retVal:false})}})}else{$.setReturnValue({err:false,retVal:false})}}})};af.prototype.CanSort=function(){return(false)};af.prototype.CanAddRecord=function(){var aE=this.GetBusComp();var n=(aE&&(!(aE.IsInQueryState()))&&(aE.CheckActiveRow()));return({err:false,retVal:n})};af.prototype.CanPickRecord=function(){var aE=this.GetBusComp();var aF=this.GetParentApplet();var n=true;if(aF&&aF.GetActiveControl()&&aF.GetActiveControl().GetFieldName()){var aG=aF.GetActiveControl().GetFieldName();aF.CanUpdateX(aG);$.callback(this,function(aH){n=(aE&&(aH.retVal)&&(aE.CheckActiveRow()));$.setReturnValue({err:false,retVal:n});return})}else{$.setReturnValue({err:false,retVal:n});return}};af.prototype.CoreMethod=function(n){switch(n){case Q.get("DELETERECORD"):case E.get("SWE_GET_PICK_INFO"):case Q.get("SWE_POST_CHANGES"):case Q.get("SWE_CLOSE_APPLET"):case Q.get("POSITION_ON_ROW"):case Q.get("PICKRECORD"):case Q.get("WRITERECORD"):case Q.get("NEWRECORD"):case Q.get("ADDRECORD"):case Q.get("EDIT_FIELD"):case Q.get("UNDORECORD"):case Q.get("EDITRECORD"):case"ShowPopup":case M:case"DrillDown":case Q.get("SCROLL_NEXT_DATA"):case Q.get("SCROLL_PREV_DATA"):case Q.get("GO_TO_NEXT_SET"):case Q.get("GO_TO_PREV_SET"):case Q.get("EXECUTE_FRAME_QUERY"):case Q.get("FIND"):return true;
default:return false}};af.prototype.InvokeMethodX=function(n,aJ){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.prototype.InvokeMethodX ")}var aF=this.CoreMethod(n);var aI;var aE={};var aH;var aG=[];if(!n){aG.push(n);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("AppletErrNoSuchMethod",aG);$.setReturnValue({err:"AppletErrNoSuchMethod",retVal:""});return}aE[b]=this.GetName();aE[aA]=aj;aE[r]="DoInvokeMethod";aE[w]=this;aJ.SetProperty("MethodName",n);aE[v]=au;y.InvokeRegisteredSvc(aE,aJ);$.callback(this,function(aK){aI=aK.retVal;aH=aK.err;if(aH){$.setReturnValue({err:aH,retVal:aI.Outputargs});return}if((aI.Outputargs)&&(aI.Outputargs).GetProperty("Invoked")&&(aI.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aH,retVal:aI.Outputargs});if(!A.GetPostedAction()||!A.GetPostedAction().Action){A.PostActions(Q.get("ACTION_RPC_COMPLETED"))}if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return}if(aI.Outputargs&&aJ){(aI.Outputargs).SetType(au);aJ.AddChild(aI.Outputargs)}aq.call(this,n,aJ);$.callback(this,function(aN){var aL=aN.retVal;var aM=aN.err;if(aM){$.setReturnValue({err:aM,retVal:aL});return}if(aL){this.GetBusComp().InvokeMethodX(n,aJ);$.callback(this,function(aO){aI=aO.retVal;$.setReturnValue({err:aM,retVal:aI.Outputargs});if(!A.GetPostedAction()||!A.GetPostedAction().Action){A.PostActions(Q.get("ACTION_RPC_COMPLETED"))}return})}aE[v]=az;aJ.SetProperty("RetVal",aL);y.InvokeRegisteredSvc(aE,aJ);$.callback(this,function(aP){var aO=aP.retVal.Outputargs;aM=aP.err;$.setReturnValue({err:aM,retVal:aO});if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return})})})};function aq(n,aH){if(!n){$.setReturnValue({err:true,retVal:false})}var aE={};aE.request=aH.GetProperty("Request").toString();if(n==="NewRecord"){this.NewRecord(aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="EditRecord"){this.EditRecord(aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="WriteRecord"){U.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GetQuickPickInfo"){var aI;var aF;if(this.GetParentApplet()!==null){aI=this.GetActiveControl().GetInputName();O.call(this,aI);$.callback(this,function(aJ,aK){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}})}else{if(this.GetActiveControl()===null&&d.GetActiveRequestObj()&&d.GetActiveRequestObj().activeControl){this.SetActiveControl(d.GetActiveRequestObj().activeControl)}aI=this.GetActiveControl().GetFieldName();aF=this.GetActiveControl().GetApplet().GetBusComp();var aG=aF.GetFieldMap()[aI].GetDefn().PickListName;s.call(this,aG,aI);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}})}return}if(n==="EditField"){am.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ShowPopup"){this.MakePopup("ShowPopup",aE);$.setReturnValue({err:false,retVal:false});return}if(n==="AddRecord"){u.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="UndoRecord"){c.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PickRecord"){T.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PositionOnRow"){g.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="DeleteRecord"){p.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PostChanges"){ai.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ScrollNextData"){S.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ScrollPrevData"){ak.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GotoNextSet"){C.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GotoPreviousSet"){o.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ExecuteFrameQuery"){ao.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="CloseApplet"){W.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="Find"){D.call(this,aE);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n===M||n==="DrillDown"){ag.call(this,aE);$.callback(this,function(aJ){$.setReturnValue({err:false,retVal:false})});return}$.setReturnValue({err:false,retVal:true})}af.prototype.NewRecord=function(aH){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.prototype.NewRecord ")}var n=this.GetDefn();var aG=n.AsocAplt;var aF=Z.DecodeFromQueryString(aH.request);var aE=aF.GetProperty(E.get("SWE_SHOW_POPUP_STR")).toString();if(!Z.IsEmpty(aG)&&(aE==="true")){aH.appletName=aG;this.MakePopup("NewRecord",aH)}else{this.GetBusComp().SetExtObjProp("isNewRecord",true);H.call(this,aH)}if(Y.GetTimer()){$.callback(this,function(){Y.GetTimer().EndTime("Applet.prototype.NewRecord ")})}};function c(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionCancelRecord ")}var n=this.GetBusComp();if(n&&n.IsCommitPending()){n.UndoRecord()}$.callback(this,function(){var aG=Q.get("VIEW_INFO");var aF=Q.get("GOTOVIEWCOLD");this.PostLayoutAction(false,aF,aG);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionCancelRecord ")}})}function T(aH){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsPickRecord ")}var n;var aG;var aE;var aF;n=this.GetBusComp();aG=this.GetParentApplet();aF=this.GetPickAppletSrcInfo().SrcAppletFld;if(aF){aE=aG.GetBusComp();n.PickCurrentRow(aH,aE,aF)}if(Y.GetTimer()){$.callback(this,function(){Y.GetTimer().EndTime("Applet.OnActionsPickRecord ")})}}function g(n){A.PostActions(Q.get("ACTION_RPC_CONTINUE"),"PositionOnRow")}function S(n){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsScrollNextData ")}var aE=Q.get("SCROLL_SIZE");ae.call(this,aE,n);$.callback(this,function(aF){if(!aF.err){var aG=aF.retVal;this.PostLayoutAction(true,n.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsScrollNextData ")
}}else{$.setReturnValue(aF)}})}function ak(n){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsScrollPrevData ")}var aE=Q.get("SCROLL_SIZE");if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsScrollPrevData ")}aE=-aE;ae.call(this,aE,n);$.callback(this,function(aF){if(!aF.err){var aG=aF.retVal;this.PostLayoutAction(true,n.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsScrollPrevData ")}}else{$.setReturnValue(aF)}})}function C(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsNextset ")}var n=true;l.call(this,aE,n);$.callback(this,function(aF){if(!aF.err){this.PostLayoutAction(true,aE.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsNextset ")}}else{$.setReturnValue(aF)}})}function ao(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.ExecuteQuery")}var n=this.GetBusComp();var aF=n.GetCursor();aF[0]=0;n.SetCursor(aF);n.SetSearchSpec("");if(!n.IsInQueryState()){n.BeginQuery()}k.call(this);$.callback(this,function(aG){if(!aG.err){n.Execute();$.callback(this,function(aH){if(!aH.err){$.callback(this,function(aI){if(!aI.err){n.Home();$.callback(this,function(aJ){if(!aJ.err){this.PostLayoutAction(true,aE.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.ExecuteQuery")}}})}})}})}})}function W(aF){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.Close")}var aE=this.GetBusComp();var n=this.GetName();var aG=aE.GetVarName();this.ClosePopupApplet(aF)}function D(aH){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnQueryExecute")}var aE=this.GetBusComp();aE.SetSearchSpec("");var aN=this.GetControls();var aP=aN.PopupQueryCombobox;var aF=aN.PopupQuerySrchspec;if(aP&&aF){var aR=d.GetActiveRequestObj();var aO=aF.GetInputName();var aL=aP.GetInputName();var aI=aR.SweCommands[aO];var aM=aR.SweCommands[aL];var n=this.GetControls()[aM];var aG=[];if(Z.IsEmpty(n)){var aQ=aE.GetFieldList();var aK=aQ.length;for(var aJ=0;aJ<aK;aJ++){aG[aJ]=SiebelApp.S_App.LookupStringCache(aQ[aJ]);if(aG[aJ]&&aN[aG[aJ]]&&(aN[aG[aJ]].GetDisplayName()===aM)){n=this.GetControls()[aN[aG[aJ]].GetFieldName()];break}}}aI=aE.DoBldQueryText(n,aI);aE.SetSearchSpec(aI);aE.Execute();$.callback(this,function(aS){if(!aS.err){$.callback(this,function(aT){if(!aT.err){aE.Home();$.callback(this,function(aU){if(!aU.err){this.PostLayoutAction(true,aH.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnQueryExecute")}}})}})}})}}function o(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsPreviousset ")}var n=false;l.call(this,aE,n);$.callback(this,function(aF){if(!aF.err){this.PostLayoutAction(true,aE.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsPreviousset ")}}else{$.setReturnValue(aF)}})}function l(aH,aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.DoNextPriorSet ")}var aG=this.GetBusComp();var aI=0;aG.WSHomeX(aI,this.GetName());var n=aG.GetActiveRow();var aF=aG.FindWorkSet(n);if(!aF){$.setReturnValue({err:true,retVal:""});return}if(aE){aG.NextSet(aH,this.GetName())}else{aG.PriorSet(aH,this.GetName())}$.callback(this,function(aJ){if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.DoNextPriorSet ")}$.setReturnValue(aJ)})}function ae(aF,aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.DoScrollData ")}var n=this.GetBusComp();n.ScrollWorkSetByNum(aF,aE,this.GetName());$.callback(this,function(aG){$.setReturnValue(aG);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.DoScrollData ")}})}function am(aE){var n=false;var aF=this.GetActiveControl().GetName();if(!this.CanUpdate(aF)){n=true}this.ShowFieldDetail(n,aE)}function H(n){this.SetSavedModeState(E.get("SWE_PST_APPLET_MODE_NEW"));SiebelApp.RequestProcessor.SetLayoutState(true,this.GetName());this.PostLayoutAction(false,"NewRecord",Q.get("NEW_VIEW_INFO"))}function a(n){this.SetSavedModeState(E.get("SWE_PST_APPLET_MODE_EDIT"));SiebelApp.RequestProcessor.SetLayoutState(true,this.GetName());this.PostLayoutAction(false,"EditRecord",Q.get("NEW_VIEW_INFO"))}af.prototype.ShowFieldDetail=function(n,aE){this.MakePopup("EditField",aE);$.callback(this,function(){ah.call(this);$.callback(this,function(){})})};function ah(){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.PostChangesForPopup ")}k.call(this,false);$.callback(this,function(){if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.PostChangesForPopup ")}})}af.prototype.EditRecord=function(aF){this.GetBusComp().SetExtObjProp("IsEditRecord",true);var aE=this.GetBusComp().GetActiveRow();var n=this.GetBusComp().FindWorkSet(aE);this.GetBusComp().SetOrigRecVal(n);a.call(this,aF)};af.prototype.MakePopup=function(n,aI){var aG;switch(n){case"ShowPopup":aG="puinf";var aF=Z.DecodeFromQueryString(aI.request);var aH=aF.GetProperty("SWETA").toString();A.SetContext("Applet",aG,aH);break;case Q.get("NEWRECORD"):aG=Q.get("NEW_VIEW_INFO");A.SetContext("Applet",aG);break;case Q.get("EDIT_FIELD"):var aE=this.GetBusComp();if(aE.IsDeletePending()){aE.WriteRecord()}$.callback(this,function(){this.CreatePopup(n,aI)});break}};af.prototype.CreatePopup=function(n,aG){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.CreatePopup ")}var aF;var aE=this.GetActiveControl();if(aE.GetUIType()==="Pick"){SiebelApp.BrowserCacheMgr.GetPickAppletInfo(this.GetView().GetName(),this.GetName(),aE.GetName());$.callback(this,function(aJ){var aH=aJ.retVal;aF=Q.get("PICK_APLT_INFO");var aI=aH.PickApplet+"__"+this.GetName();this.GetBusComp().GetPickList(aE.GetName(),aI);SiebelApp.RequestProcessor.SetPrevReqObj({reqType:n,searchVal:aI});A.SetContext("Applet",aF,aI);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.CreatePopup ")}})}};af.prototype.WSNextRecordX=function(){var aH=false;var aF=this.GetBusComp();var aI=this.GetNotIdComp();aI=0;var aE=aF.WSNextRecordX(aI,this.GetName());var aG=aE.err;if(!aG){aH=true;aE.err="";aE.retVal=aH;return aE}if(aG==="SSAOMErrEOWS"){aE.err="";aE.retVal=aH;return aE}var n=[aF];aE.err=aG;aE.retVal=n;return aE};function u(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionAddRecord ")}var aF=this.GetBusComp();var n=aF.IsNotifyEnabled();if(n){aF.DisableNotifySys()}aF.AssocSelection();$.callback(this,function(aG){if(!aG.err){if(n){aF.EnableNotify()}this.ClosePopupApplet(aE);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionAddRecord ")}}else{$.setReturnValue(aG)}})}af.prototype.ClosePopupApplet=function(aF){var n;var aE=this.GetParentApplet();if(aE.GetBusComp()){n=[];n.push(aE.GetName());aE.NotifyDeletePopup(n)}A.PostActions(Q.get("ACTION_RPC_CLOSE_POPUP"));this.SetRowSelectArr([])};af.prototype.NotifyDeletePopup=function(n){this.GetBusComp().NotifyGeneric(E.get("SWE_RPC_PROP_CLOSE_POPUP"),n)};af.prototype.SetDefaultShowMode=function(){};function U(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionWriteRecord ")}var n=this.GetBusComp();if(n.IsDeletePending()){n.WriteRecord()}$.callback(this,function(){this.CanWriteRecord();$.callback(this,function(aG){var aF=aG.retVal;if(!aF){$.setReturnValue({err:false,retVal:false})}else{if(!n.IsCommitPending()){n.UpdateRecordX()}$.callback(this,function(aH){k.call(this,true);$.callback(this,function(aJ){if(!aJ.err){var aI=false;
if(this.GetParentApplet()){aI=true}else{if((this.GetSavedModeState()!==this.GetMode())){aI=true}}this.PostLayoutAction(aI,Q.get("GOTOVIEWCOLD"),Q.get("VIEW_INFO"));this.SetSavedModeState();if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionWriteRecord ")}}else{$.setReturnValue({err:true,retVal:false})}})})}})})}function s(aG,aI){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsGetQuickPickInfo ")}var n={};var aE;var aH=this.GetBusComp();var aF=this;n.viewName=this.GetView().GetName();n.appletName=this.GetName();n.fieldName=this.GetActiveControl().GetInputName();if(aH){aE=aH.GetPickListInfo(aG,aI);this.GetComboBoxOptions(aG,aI);$.callback(this,function(aN){var aM=aN.retVal;var aK=[];n.LOV=aM;aK[0]="";aK[1]=n.viewName;aK[2]=n.appletName;aK[3]=n.fieldName;aK[4]="true";aK[5]=aE.NAME;var aL=0;for(var aJ=6;aJ<6+aM.length;aJ++){aK[aJ]=aM[aL];aL++}aH.NotifyGeneric("GetQuickPickInfo",aK);A.PostActions(Q.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo");if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsGetQuickPickInfo ")}})}}function O(aN){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.GetQuickInfoForPopup ")}var aL={};var aP;var aK=this.GetBusComp();var aH=this;if(aK){var aQ=aK.GetFieldList();var aJ=aQ.length;var aG=[];var aI=this.GetControls();var aM=[];for(var aE=0;aE<aJ;aE++){aG[aE]=SiebelApp.S_App.LookupStringCache(aQ[aE]);if(aG[aE]&&aI[aG[aE]]&&!Z.IsEmpty(aI[aG[aE]].GetDisplayName())&&(aI[aG[aE]].GetUIType()===E.get("SWE_CTRL_TEXT")||aI[aG[aE]].GetUIType()===E.get("SWE_CTRL_COMBOBOX"))){aM.push(aI[aG[aE]].GetDisplayName())}}var aO=[];aO[0]="";aO[1]=aH.GetView().GetName();aO[2]=aH.GetName();aO[3]=aN;aO[4]="true";aO[5]="";var aF=0;for(var n=6;n<6+aM.length;n++){aO[n]=aM[aF];aF++}aK.NotifyGeneric("GetQuickPickInfo",aO);A.PostActions(Q.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo");if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.GetQuickInfoForPopup ")}}}af.prototype.GetComboBoxOptions=function(n,aF){var aE=this.GetBusComp();aE.GetQuickPickInfo(n,aF);$.callback(this,function(aG){$.setReturnValue(aG)})};function k(aH){if(Y.GetTimer()){Y.GetTimer().StartTime("SiebelApp.S_App.Applet.PostChangesToBC")}var aF={};var aE;var aG=CCFMiscUtil_CreatePropSet();aG.SetProperty("inputParam1",aH);var n={};n[b]=this.GetName();n[aA]=aj;n[r]="PostChangesToBC";n[w]=this;n[v]=au;y.InvokeRegisteredSvc(n,aG);$.callback(this,function(aL){aF=aL.retVal;aE=aL.err;if((aF.Outputargs)&&(aF.Outputargs).GetProperty("Invoked")&&(aF.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aL.err,retVal:aF.Outputargs});return}var aN;var aO=this.GetBusComp();var aJ=null;var aQ=d.GetActiveRequestObj();if(!aQ){aQ=d.GetActiveRequestObj()}if(!aQ){aQ=d.GetActiveRequestObj()}if(!aQ){$.setReturnValue({err:true});return}if(aO&&!aO.IsInQueryState()){var aP=-1;aP=aO.GetActiveRow();if(aP===-1){if(aH&&aO.IsDeletePending()){aO.WriteRecord();$.callback(this,function(aR){$.setReturnvalue(aR)});return}}}var aI=aQ.SweCommands[E.get("SWE_POST_ON_CHANGE_STR")];aN=aQ.SweCommands.SWEBCVals;if(aN!==undefined&&aN!==null){var aM=CCFMiscUtil_CreatePropSet();aM.DecodeFromString(aN);var aK=SiebelApp.S_App.GetActiveView().GetBCBroker(aO);if(aO.IsInQueryState()){}else{aK.InvokeMethod("SetFieldValue",aM)}}$.callback(this,function(aY){var aW=aQ.SweCommands;var aR=[];for(var aV in aW){if(aW[aV]){var aS=this.GetControlById(aV);if(aS){aR.push(aV)}}}var aU=aR.length;var aZ=0;var aT;var aX=function(){if(aR[aZ]&&(aI===this.GetControlById(aR[aZ]).GetFieldName())){aJ=aR[aZ]}else{if(aR[aZ]){aT=aW[aR[aZ]];K.call(this,this.GetControlById(aR[aZ]),aT);$.callback(this,function(a0){if(a0.err){$.setReturnValue(a0);return}else{aZ++;if(aZ<aU){aX.call(this)}}})}}};aX.call(this);$.callback(this,function(a0){if(a0.err){$.setReturnValue(a0);return}if(aJ!==null){aT=aW[aJ];K.call(this,this.GetControlById(aJ),aT)}$.callback(this,function(a1){if(a1.err){$.setReturnValue(a1);return}if(aO&&!aO.IsInQueryState()){if(aH&&aO.IsCommitPending()){aO.WriteRecord()}}$.callback(this,function(a2){if(a2.err){$.setReturnValue(a2)}else{n[v]=az;y.InvokeRegisteredSvc(n,aG);$.callback(this,function(a3){if(Y.GetTimer()){Y.GetTimer().EndTime("SiebelApp.S_App.Applet.prototype.PostChangesToBC")}aF=a3.retVal;if(aF&&aF.Outputargs){$.setReturnValue({err:a3.err,retVal:aF.Outputargs});return}})}})})})})})}function ai(aH){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionPostChanges ")}var aF=d.GetActiveRequestObj();var n=aF.SweCommands[E.get("SWE_POST_ON_CHANGE_STR")];var aE=aF.SweCommands[E.get("SWE_POST_FORCE_STR")];var aG=this.GetBusComp();if((n||aE==="Y")&&aG){if(!aG.IsCommitPending()){aG.UpdateRecordX()}$.callback(this,function(){k.call(this,false);$.callback(this,function(){A.PostActions(Q.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionPostChanges ")}})})}else{if(aG&&!aG.IsCommitPending()&&!aG.IsInQueryState()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_SWE_NO_COMMIT_PENDING");$.setReturnValue({err:"IDS_SWE_NO_COMMIT_PENDING"});return}k.call(this,false);$.callback(this,function(){A.PostActions(Q.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionPostChanges ")}})}}function K(n,aF){var aE=this.GetBusComp();if(n){this.CanUpdateX(n.GetName());$.callback(this,function(aG){if(aG.retVal){if(aE&&aE.IsInQueryState()){aF=aE.DoBldQueryText(n,aF);aE.SetSearchSpec(aF)}else{if(aE&&!aE.IsExecuted()){$.setReturnValue({err:false,retVal:true});return}var aH;ar.call(this,n,aF,false);$.callback(this,function(aI){if(!aI.err){aH=aI.retVal;if(Z.IsEmpty(aH)){}else{aF=aH}}this.SetFieldValue(n,aF);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ);return}else{$.setReturnValue({err:false,retVal:true})}})})}}})}}function ar(aK,aF,aI){var aL;var aJ=this.GetBusComp().GetField(aK.GetFieldName());if(Z.IsEmpty(aJ)){return $.setReturnValue({err:false,retVal:aF})}var n=aJ.GetDataType();var aH=aK.GetDisplayFormat();var aE=SiebelApp.S_App.LocaleObject.GetDatum(n);if(aE&&!Z.IsEmpty(aF)){switch(n){case"number":var aG=aJ.GetScale();SiebelApp.S_App.LocaleObject.SetScale(aG);break;case"currency":i.call(this,aK,aE,aI,n);break}$.callback(this,function(aM){if(!aM.err){SiebelApp.S_App.LocaleObject.FormattedToString(n,aF,aH);aE.SetAsFormattedString(aF,aH);aL=SiebelApp.S_App.LocaleObject.HasErrorMsg();if(!aL){}aF=aE.GetAsString(aF);$.setReturnValue({err:false,retVal:aF})}else{$.setReturnValue({err:true,retVal:aF})}})}else{$.setReturnValue({err:false,retVal:aF})}}function ag(){var aG=d.GetActiveRequestObj();var aE=aG.SweCommands.SWEField;if(Z.IsEmpty(aE)){return}var aF=this.GetControls();var n;for(var aH in aF){if(aF.hasOwnProperty(aH)){if(aF[aH].GetInputName()===aE){n=aF[aH].GetFieldName();break}}}if(Z.IsEmpty(n)){return}var aI=this.GetDrillDown(n,true);if(Z.IsEmpty(aI)){return}return aB.call(this,aI)}function aB(aG,n){var aE;if(Z.IsEmpty(aG)){return}aE=aG.Dynamicdrilldown.length;if(aE){return}var aF=aD.call(this,aG);if(!aF){}return true}function aD(n){var aG=n.viewname;
if(aG==="Drill Down To Same View"){if(!SiebelApp.S_App.GetActiveView()||SiebelApp.S_App.GetActiveView().GetName()!==aG){}}var aE=Z.IsEmpty(n.srcFieldName);var aF=aE?"BS_DRILLDOWN":"BS_DRILLDOWNBYFIELD";SiebelApp.OfflineAppMgr.BuildViewAsync(aG,aF,n);return true}af.prototype.SetFieldValue=function(n,aF,aE){var aG;this.GetBusComp().FieldValue(n.GetFieldName());$.callback(this,function(aH){if(!aH.err){aG=aH.retVal;if(aG===aF){$.setReturnValue({err:false});return}this.GetBusComp().SetFieldValueX(n.GetFieldName(),aF);$.callback(this,function(aI){if(aI.err){$.setReturnValue(aI);return}if(!this.GetSavedModeState()){if(!this.commitPending){this.GetBusComp().NotifyStateChanged("cp",1)}}})}})};af.prototype.GetControlById=function(n){var aE=this.GetControls();for(var aF in aE){if(aE[aF].GetInputName()===n){return aE[aF]}}return null};function i(aJ,aK,aI,n){var aE;var aH=this.GetNotIdComp();aK.SetAsString(null);var aF;var aG=this.GetBusComp();if(Z.IsEmpty(aG)){$.setReturnValue(aF);return}var aL=aJ.GetFieldName();if(Z.IsEmpty(aL)){$.setReturnValue(aF);return}if(aI){aE=aG.WSFieldValue(aH,aL,this.GetName())}else{aG.FieldValue(aL)}$.callback(this,function(aR){if(!aR.err){aE=aR.retVal;if(!Z.IsEmpty(aE)){}aK.SetAsString(aE);if(n==="currency"){var aP=Y.LookupStringCache(aJ.GetCurrField());var aN=aP.indexOf("|");var aS;var aO;if(aN>=0){var aM=(aP.substring(aN+1).indexOf("|")===-1)?-1:(aP.substring(aN+1).indexOf("|")+aN);if(aM<0){aM=aP.length}var aQ=aP.substr(0,aN);if(aQ.length!==0){if(aI){aS=aG.WSFieldValue(aH,aQ,this.GetName())}else{aG.FieldValue(aQ)}$.callback(this,function(aT){if(!aT.err){aS=aT.retVal;if(!Z.IsEmpty(aS)){}if(aS){aK.SetCurrency(aS)}else{aK.SetCurrency("")}aQ=aP.substr(aN+1,aM-aN);if(aQ.length!==0){if(aI){aO=aG.WSFieldValue(aH,aQ,this.GetName())}else{aG.FieldValue(aQ)}$.callback(this,function(aU){if(!aU.err){aO=aU.retVal;if(!Z.IsEmpty(aO)){}else{aK.SetExchangeDate(aO)}}else{$.setReturnValue(aU)}})}}else{$.setReturnValue(aT)}})}}}}else{$.setReturnValue(aR)}})}af.prototype.CheckActiveRowId=function(n,aE){if(n&&n.match(aE)){return true}else{return false}};af.prototype.PrepareToInvokeMethod=function(n,aF){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.PrepareToInvokeMethod ")}this.PositionBaseAncestorFrame();var aE=function(){this.GoBackToRecord(aF);$.callback(this,function(){this.CanPostChangesToBC(n);$.callback(this,function(aG){if(aG.retVal){k.call(this,false)}$.callback(this,function(){this.CanInvokeMethodX(n);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.PrepareToInvokeMethod ")}})})})};if((n===Q.get("POSITION_ON_ROW"))&&this.hasOwnProperty("GetPopupAppletName")&&(this.GetPModel().GetRenderer().GetPopupType()===Q.get("ASSOC"))){this.GetBusComp().SelectRow()}$.callback(this,aE)};af.prototype.GetDefn=function(){return SiebelApp.Metadata.GetAppletDef(this.GetName())};af.prototype.EnumUserProps=function(){var aF=this.GetDefn();var aE=null;if(aF.userPropMap){aE=[];var n=aF.userPropMap;for(var aG in n){if(n[aG]){aE.push(aG)}}return aE}else{return null}};af.prototype.GetUserProperty=function(n){if(this.GetDefn().userPropMap){return this.GetDefn().userPropMap[n]}else{return""}};af.prototype.GetDrillDown=function(aE,aG){var aH=Z.IsEmpty(aG)?false:aG;if(!aH){if(this.GetDefn().drilldown){return this.GetDefn().drilldown[aE]}else{return""}}else{var n=this.GetDefn().drilldown;for(var aF in n){if(n.hasOwnProperty(aF)){var aI=n[aF].hyperLinkField;aI=ax.RemoveNonAlphaChars(aI);aE=ax.RemoveNonAlphaChars(aE);if(aI===aE){return this.GetDefn().drilldown[aF]}}}return""}};function aw(){var n=this.GetDefn().ddCtrlsArray;return Z.IsEmpty(n)?[]:n}function ad(){var n=this.GetBusComp();var aN=n.GetActiveRow();var aM;if(aN>=0){var aK;var aF=false;var aJ=0;n.SetPrevActiveRow(aN);if(n.GetMultiSelectMode()){var aE=n.GetWS();aM=[];n.IsCurWSRecSelected(this.GetName());$.callback(this,function(aS){if(!aS.err){var aQ=[];aK=aS.retVal;aM=this.GetRowSelectArr();aM[aN]=aK;aF=true;n.SetPrevActiveRow(aN);if(n.GetMultiSelectMode()&&this.GetMultiSelect()){aM[0]=true;this.SetMultiSelect(false)}aQ.push(this.GetName());for(var aR=0;aR<aE.length;aR++){aQ.push(aM[aR]?"1":"0")}if(!n.GetMultiSelectMode()){this.SetRowSelectArr([])}else{this.SetRowSelectArr(aM)}if(aF){n.NotifyGeneric("SWEIRowSelection",aQ)}}$.setReturnValue({err:false,retVal:true})})}else{var aO=this.GetNotIdComp();aO=0;var aG=n.WSGetCurrRow(aO,this.GetName());if(!aG.err){var aI=aG.retVal;n.WSHomeX(aO,this.GetName());aM=this.GetRowSelectArr();var aP=this.GetRowSelectArr().length===0?true:false;var aH=true;var aL=function(){n.IsCurWSRecSelected(aO);$.callback(this,function(aR){aK=aR.retVal;if(aJ<aM.length){if(aK!==aM[aJ]){aM[aJ]=aK;aF=true}}else{aM.push(aK);aF=true}aJ++;var aQ=this.WSNextRecordX(aO);if(!aQ.err&&aQ.retVal){aL.call(this)}else{if(aN===0&&aP&&aM[0]===true){aF=false}}})};if(aH){aL.call(this)}$.callback(this,function(){n.WSSetCurrRow(aI);if(window.localStorage.getItem("contextArray")){var aR=JSON.parse(window.localStorage.getItem("contextArray"));var aQ=aR.length;for(var aT=0;aT<aQ;aT++){var aU=aR[aT].bc;if(n.GetName()===aU){if(n.GetWS()[aN]){aR[aT].Id=n.GetWS()[aN].Id;aR[aT].cursor=n.GetCursor();window.localStorage.setItem("contextArray",JSON.stringify(aR));break}}}}if(aF){var aS=[];aS.push(this.GetName());for(var aT=0;aT<aM.length;aT++){aS.push(aM[aT]?"1":"0")}n.NotifyGeneric("SWEIRowSelection",aS)}this.SetRowSelectArr(aM);$.setReturnValue({err:false,retVal:true})})}}}else{$.setReturnValue({err:false,retVal:true})}}af.prototype.SetFldSearchSpec=function(aF,n){var aG=aF.GetName();var aE=this.GetBusComp();if(aE.ValidateFieldDef(aG)){aE.SetFldSearchSpec(aG,n)}};function p(aE){if(Y.GetTimer()){Y.GetTimer().StartTime("Applet.OnActionsDeleteItem ")}var n=this.GetBusComp();n.CanDelete();$.callback(this,function(aF){if(!n||!aF.retVal){SiebelJS.Log("OnActionsDeleteItem: Failed to Delete Item .... ");$.setReturnValue({err:aF.err,retVal:false});return}n.SetDeleteRecordPending(true);n.DeleteRecordX(aE,true);$.callback(this,function(){this.PostLayoutAction(true,aE.methodName);if(Y.GetTimer()){Y.GetTimer().EndTime("Applet.OnActionsDeleteItem ")}});$.setReturnValue({err:aF.err,retVal:true});return})}af.prototype.PostLayoutAction=function(aG,aF,aJ){if(aG){var aI=SiebelApp.S_App.GetActiveView();var aE=aI.GetAppletMap();var n;for(var aH in aE){if(aE[aH]){n=aE[aH];if(n.GetBusComp()!==this.GetBusComp()||n===this){continue}if((n.GetSavedModeState()===n.GetMode())){aG=false;n.SetSavedModeState();break}}}}if(aG){SiebelApp.OfflineAppMgr.PostActions(Q.get("ACTION_RPC_COMPLETED"))}else{SiebelApp.OfflineAppMgr.PostActions(Q.get("ACTION_RPC_REFRESH_VIEW"),aF,aJ)}}}());if(typeof(SiebelApp.S_App.OfflineAppletInterface)==="undefined"){SiebelApp.S_App.OfflineAppletInterface=(function(){function a(c){var b=c;var e=this;var f={GetParentApplet:1};for(var d in b){if(b[d]){(function(){var g=d;var h=c;if(typeof(c[g])==="function"&&!e[g]&&!f[g]){e[g]=function(){if(h.constructor.prototype[g]){return(h.constructor.prototype[g].apply(h,arguments))}else{return(h[g].apply(h,arguments))}}
}return e[g]}())}}this.GetOfflineApplet=function(){return b};this.GetParentApplet=function(){var g=b.GetParentApplet();if(g){return g.GetInterface()}};this.EndLife=function(){b=null;e=null;f=null}}a.prototype.GetBusComp=function(){var b=SiebelApp.S_App.Model.GetIsInterFace();var d=this.GetOfflineApplet();var c=d.GetBusComp.call(d);if(b>0&&c){return c.GetInterface()}else{return(d.GetBusComp.call(d))}};a.prototype.InvokeMethod=function(b,c){return this.GetOfflineApplet().InvokeMethodX(b,c)};a.prototype.CanInvokeMethod=function(b){return this.GetOfflineApplet().CanInvokeMethodX(b)};a.prototype.CanUpdate=function(){return this.GetOfflineApplet().CanUpdateX()};a.prototype.CanNavigate=function(){return this.GetOfflineApplet().CanNavigateX()};a.prototype.BusComp=function(){return this.GetOfflineApplet().GetBusComp()};a.prototype.BusObj=function(){return this.GetOfflineApplet().GetBusComp().GetBusObj()};a.prototype.Name=function(){return this.GetOfflineApplet().GetName()};return a}())}if(typeof(SiebelApp.S_App.ListApplet)){(function(){var e={};var c=SiebelApp.S_App.ListApplet;var a=SiebelApp.Offlineconstants;var f=a.get("IS_DYNAMIC");e.SetOnLoadRowSelection=c.prototype.SetOnLoadRowSelection;e.LeaveField=c.prototype.LeaveField;var b=SiebelJS.Dependency("SiebelApp.Utils");var d=SiebelJS.Dependency("SiebelApp.Constants");c.prototype.SetOnLoadRowSelection=function(g){if(!(g.GetProperty(f))){return}else{return(e.SetOnLoadRowSelection.call(this,g))}};c.prototype.LeaveField=function(m,q,n){if(!SiebelApp.OfflineAppSettings.GetMode()){return(e.LeaveField.call(this,m,q,n))}else{var p;var o=this.GetBusComp();var i=m.GetFieldName();if(!m&&!this.GetActiveControl()){return true}var h=this.GetFormattedValue(m);if(h!==q){SiebelApp.S_App.OfflineCallMethod("PassOldValue",this,m,q,h);var l=q;if(this.IsInQueryMode()&&!b.IsEmpty(i)){p=m.GetUIType();if(p===d.get("SWE_CTRL_DATE_TZ_PICK")||p===d.get("SWE_CTRL_DATE_TIME_PICK")){if(q&&!q.match(/[><=!&|]/g)){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO8601_DATETIME_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat());if(!b.IsEmpty(l)&&l.charAt(0)!=='"'&&l.charAt(l.length-1)!=='"'){l='"'+l+'"'}if(b.IsEmpty(l)&&!b.IsEmpty(q)){if(q.charAt(0)!=='"'&&q.charAt(q.length-1)!=='"'){l='"'+q+'"'}else{l=q}}}}else{if(p===d.get("SWE_CTRL_DATE_PICK")){if(q&&!q.match(/[><=!&|]/g)){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO_DATE_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat());if(b.IsEmpty(l)&&!b.IsEmpty(q)){if(q.charAt(0)!=='"'&&q.charAt(q.length-1)!=='"'){l='"'+q+'"'}else{l=q}}}}}if(!b.IsEmpty(i)){o.GetFieldMap()[i].SetSearchSpec(l)}var j=o.GetNotifyObject();j.NotifyNewFieldQuerySpec(i)}else{if(this.CanUpdate(m.GetName())&&this.IsPrivateField(m.GetName())||o.GetSelection()>=0){if(SiebelApp.S_App.LocaleObject){p=m.GetUIType();if(p===d.get("SWE_CTRL_DATE_TZ_PICK")||p===d.get("SWE_CTRL_DATE_TIME_PICK")){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO8601_DATETIME_FORMAT"),m.GetDisplayFormat()||(SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat()))}else{if(p===d.get("SWE_CTRL_DATE_PICK")){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO_DATE_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat())}}if(""===l&&""!==q){l=q}}var g=this.SetFormattedValue(m,l);if(g!==undefined){if(!g){this.SetPrsrvControl(this.GetActiveControl());o.ProcessError();return false}}}}}var r=this.GetActiveControl();var k=false;if(!n){if(this.GetActiveControl()){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null);k=true}}$.callback(this,function(t){var s=this.GetErrStatus();if(s&&g===undefined){if(!n&&k){this.SetActiveControl(r)}this.SetPrsrvControl(this.GetActiveControl());o.ProcessError();this.SetErrStatus(false)}});return true}}}())}})};